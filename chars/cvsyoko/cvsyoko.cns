;Var(0)  = ジャストディフェンス硬直時間
;Var(1)  = 
;Var(2)  = 
;Var(3)  = ジャンプ管理1（距離）
;Var(4)  = ジャンプ管理2（高さ）
;Var(5)  = 強弱管理
;Var(6)  = 　　　　使用済み
;Var(7)  = Cグルーヴパワー量による攻撃力変動
;Var(8)  = 残りライフ量による攻撃力変動
;Var(9)  = 相手残りライフ量による攻撃力変動
;Var(10) = ブロッキング前入力
;Var(11) = ブロッキング下入力
;Var(12) = 
;Var(13) = 　　　　使用済み
;Var(14) = SグルーヴパワーMAX残り時間
;Var(15) = NグルーヴパワーMAX残り時間
;Var(16) = オリコン残り時間
;Var(17) = オリコン時ヒット数用
;Var(18) = オリコンOn/Off
;Var(19) = オリコン時残りゲージ量
;Var(20) = グルーヴ判定
;Var(21) = KグルーヴパワーMAXによる攻撃力変動
;Var(22) = 強制fall=0時juggle判別用
;Var(23) = 追い討ち用
;Var(24) = グルーヴによるパワー増加量変動
;Var(25) = ジャストディフェンス入力
;Var(26) = 前ラウンド勝敗判定
;Var(27) = KOボイス判定
;Var(28) = 　　　　使用済み
;Var(29) = 　　　　使用済み
;Var(30) = 　　　　使用済み
;Var(31) = Kグルーヴライフ残量によるパワー増加量変動
;Var(32) = roundstate3時間経過
;Var(33) = 　　　　使用済み
;Var(34) = 前ブロッキング入力後ニュートラルに戻したか否か
;Var(35) = 下ブロッキング入力後ニュートラルに戻したか否か
;Var(36) = Hit判定
;Var(37) = gethitvar(hitshaketime)
;Var(38) = カウンターヒットエフェクト表示位置（X軸）（攻撃）
;Var(39) = カウンターヒットエフェクト表示位置（Y軸）（攻撃）
;Var(40) = コンボ制限用1
;Var(41) = カウンターヒット用
;Var(42) = コンボ制限用2
;Var(43) = Kグルーヴ怒りMAX中判定
;Var(44) = 残像再発生用
;Var(45) = 食らい判定再出現用
;var(46) = GetHitVar(damage)
;Var(47) = MAXヒット数
;Var(48) = プレイヤー状態
;Var(49) = 相手状態
;Var(50) = グルーヴポイント
;var(51) = ラウンド開始からの経過時間
;Var(52) = キャラ判別
;var(53) = 相手ライフ（ダメージ前）
;var(54) = コンプリートボーナス用
;var(55) = コンプリートボーナス用2
;var(56) = matchover時間経過
;var(57) = 相手動作によるゲージ消去判定
;Var(58) = ファーストストライク判定
;Var(59) = AI判定

;fvar(0)  = コンボ補正
;fvar(1)  = ガード中State判定
;fvar(2)  = 投げ抜け判定
;fvar(3)  = グルーヴポイント表示On/Off
;fvar(4)  = 
;fvar(5)  = ボーナスメッセージアイコン表示一段目有無
;fvar(6)  = ボーナスメッセージアイコン表示二段目有無
;fvar(7)  = ボーナスメッセージアイコン表示三段目有無
;fvar(8)  = アイコン種類
;fvar(9)  = フィニッシュヒット判定
;fvar(10) = 攻撃力補正
;fvar(11) = roundstate4経過時間
;fvar(12) = ライフ
;fvar(13) = KグルーヴパワーMAX残り時間
;fvar(14) = パーフェクト判定
;fvar(15) = カウンターヒットメッセージ用
;fvar(16) = DoubleRes設定（ゲージのみ）
;fvar(17) = 　　　　使用済み
;fvar(18) = 　　　　使用済み
;fvar(19) = KOボイス種類判定
;fvar(20) = やられ時にゲージ消去をする相手動作の判定
;fvar(21) = パワー溜まった時の音用
;fvar(22) = リバーサル判定用1
;fvar(23) = リバーサル判定用2
;fvar(24) = GP表示背景色変化用
;fvar(25) = 燃焼、感電エフェクト用
;fvar(26) = 空中コンボ用
;fvar(27) = 
;fvar(28) = 
;fvar(29) = 
;fvar(30) = 
;fvar(31) = 
;fvar(32) = 
;fvar(33) = 
;fvar(34) = 
;fvar(35) = 
;fvar(36) = 強制停止中ガード不能時間
;fvar(37) = メッセージアイコンの表示Y座標補正
;fvar(38) = 空中復帰誘導
;fvar(39) = ゲームシステム判別

[Data]
life = 945
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 100
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = .975           ;水平方向の縮尺（通常１）
yscale = .975           ;垂直方向の縮尺（通常１）
ground.back = 15     ;キャラの幅(後方,地上)
ground.front = 15    ;キャラの幅(前方,地上)
air.back = 15        ;キャラの幅(後方,空中)
air.front = 15       ;キャラの幅(前方,空中)
height = 55          ;キャラの高さ
attack.dist = 160    ;攻撃をした時相手がガード体制に入る最低距離
proj.attack.dist = 90;攻撃をした時相手がガード体制に入る最低距離（飛び道具）
proj.doscale = 0     ;上で設定した縮尺を飛び道具にも適用するか（１でＯＮ）   
head.pos = 1, -80    ;頭の大体の座標
mid.pos = -6, -54    ;体の中心の大体の座標
shadowoffset = 0     ;影の垂直方向のオフセット
draw.offset = 0,0    ;使用しない

[Velocity]
walk.fwd  = 3.6       ;前進の速度
walk.back = -2.4      ;後退の速度
run.fwd  =5.66, 0       ;前ダッシュの速度（ホップする時はyを-にする）
run.back = -4.8,-4.5     ;後ダッシュの速度（ホップする時はyを-にする）
jump.neu = 0,-10.2      ;垂直ジャンプの速度
jump.back = -4.11       ;後ジャンプの速度
jump.fwd = 3.89         ;前ジャンプの速度
runjump.back = -5.81,-9.4;後ダッシュしながらのジャンプ速度(オプション)
runjump.fwd = 5.04,-9.4   ;前ダッシュしながらのジャンプ速度(オプション)
airjump.neu = 0,-6.5  ;２段ジャンプ以降の垂直ジャンプの速度(オプション)
airjump.back = -2.8 ;２段ジャンプ以降の後ジャンプの速度(オプション)
airjump.fwd = 2.8    ;２段ジャンプ以降の前ジャンプの速度

[Movement]
airjump.num = 0      ;空中でジャンプする回数
airjump.height = 28  ;空中でジャンプする最低限の高さ
yaccel = .47         ;重力
stand.friction = .85  ;立ち状態の摩擦係数
crouch.friction = .82 ;屈み状態の摩擦係数

;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0
velset = 0,0

[State 0, 2]
type = ChangeAnim
triggerall = anim != 3305
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
;歩き
[Statedef 20]
type    = S
physics = S
sprpriority = 0
ctrl = 1

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd" && !var(59)
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback" && !var(59)
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20; && Anim != 5
;trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21; && Anim != 5
;trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
;歩き（CPU）
[Statedef 21]
type    = S
physics = N
sprpriority = 0
ctrl = 0
velset = 0,0

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 20, 1]
type = VelSet
trigger1 = time = 0
x = ifelse(var(16),const(velocity.walk.fwd.x),ifelse(random%6<=3||P2bodydist x<50,const(velocity.walk.back.x),const(velocity.walk.fwd.x)))

[State 20, 1]
type = VelSet
triggerall = time = 0
trigger1 = P2bodydist X > 160
trigger2 = numtarget
trigger2 = fvar(26) < 3
x = const(velocity.walk.fwd.x)
persistent = 0

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20
value = 20
persistent = 0

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21
value = 21
persistent = 0

[State 20, 4]
type = changestate
trigger1 = time > 20
trigger1 = P2bodydist x <= 50 && anim = 20
trigger2 = time > 20
trigger2 = P2bodydist x >= 150 && anim = 21
trigger3 = inguarddist
trigger4 = roundstate != 2
trigger5 = var(16)
trigger5 = P2bodydist X < 20
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ開始
[Statedef 40]
type    = S
physics = S
anim = ifelse((!var(20) || var(20) = 1),40,50)
ctrl = 0
velset = 0,0

[State 40, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, Dust]
type = Helper
trigger1 = AnimTime = 0
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 40, 1]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
sysvar(1) = command = "holdfwd"-command = "holdback"

[State 40, 1]
type = VarSet
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = var(59) = 1
trigger1 = time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = var(59) = 1
trigger1 = time = 0
trigger1 = Random = [100,900]
sysvar(1) = 1

[State 40, 3]
type = VarSet
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = var(59) = 1
trigger1 = time = 0
trigger1 = Random = [600,750]
sysvar(1) = -1

[State 40, 2]
type = VarSet
triggerall = var(59) = 1
trigger1 = NumHelper(20000)
trigger1 = Helper(20000),stateno = 20001
trigger1 = time = 0
sysvar(1) = P2bodydist X > 50

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 40, 4]
type = VarSet
triggerall = Time = 0
triggerall = !var(59)
trigger1 = (PrevStateNo = 100 || PrevStateNo = 101) && sysvar(1) = 1
trigger2 = Command = "longjump"
trigger3 = Command = "longjump" && Command = "holdfwd"
trigger4 = Command = "longjump" && Command = "holdback"
var(3) = 1

[State 40, 4]
type = VarSet
triggerall = var(59) = 1
triggerall = Time = 0
trigger1 = PrevStateNo = 100 || PrevStateNo = 101
trigger2 = Random = [0,500]
var(3) = 1

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 40, 5]
type = VarSet
triggerall = !var(59)
triggerall = var(20) = 2 || var(20) = 3 || var(20) = 4 || var(20) = 5 || var(20) = 6
trigger1 = command != "holdup"
var(4) = 1

[State 40, 5]
type = VarSet
triggerall = var(59) = 1
triggerall = var(20) = 2 || var(20) = 3 || var(20) = 4 || var(20) = 5 || var(20) = 6
trigger1 = Random = [0,130]
var(4) = 1

[State 40, 2]
type = VarSet
triggerall = var(59) = 1
trigger1 = NumHelper(20000)
trigger1 = Helper(20000),stateno = 20001
trigger1 = time = 0
var(4) = 0

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = !Var(3)
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

[State 40, 7]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(3)
x = ifelse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))

[State 40, 8]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = !Var(4)
y = ifelse(Var(3) && !SysVar(1), const(velocity.jump.y)*1.15, const(velocity.jump.y))

[State 40, 9]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(4)
y = ifelse(Var(3) && !SysVar(1), const(velocity.jump.y)*1.15*.75, const(velocity.jump.y)*.75)

[State 52, Effect]
type = PlaySnd
trigger1 = AnimTime = 0
value = 40, var(3)
channel = 20

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ
[Statedef 50]
type    = A
physics = N

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !Var(4)
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Var(4)
value = ifelse((vel x)=0, 51, ifelse((vel x)>0, 52, 53))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50, AfterImage]
type = AfterImage
triggerall = !var(16)
trigger1 = Time = 0
trigger1 = Var(3)
time = 20
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
length = 9
trans = add1
TimeGap  = 2
FrameGap = 4

[State 40, 0]
type = Gravity
trigger1 = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ着地
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = ifelse(var(4),57,47)
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
triggerall = prevstateno != [600,799]
trigger1 = Time = 1
value = 1

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, RemoveAfterImage]
type = AfterImageTime
triggerall = !var(16)
trigger1 = Time = 0
time = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;ラン
[Statedef 100]
type    = S
physics = S
anim = 100
velset = 0,0
ctrl = 0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, Effect]
type = PlaySnd
trigger1 = time = 1
value = 100,0
channel = 18

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = 100,1
channel = 19

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElemTime(6) = 0
value = 100,2
channel = 20

[State 100, 5]
type = ChangeState
triggerall = !var(59)
triggerall = AnimElemTime(2) >= 1
trigger1 = command != "holdfwd"
value = 101
ctrl = 1

[State 100, 5]
type = ChangeState
triggerall = var(59)
triggerall = AnimElemTime(2) >= 1
trigger1 = P2BodyDist X <= 45 && Random <= 700
trigger2 = P2MoveType = A && Random <= 500 && P2BodyDist X <= 70
trigger3 = roundstate != 2
value = 101
ctrl = 1

;---------------------------------------------------------------------------
;ラン停止
[Statedef 101]
type = S
physics = N
ctrl = 0
anim = 101

[State 100, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, 1]
type = VelMul
trigger1 = 1
x = .9

[State 100, 1]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
channel = 20

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ステップ
[Statedef 102]
type    = A
physics = N
ctrl = 0
anim = 102
velset = 0,0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 100, 0
channel = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 6.8
y = -4.8

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 105, 1]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .65

[State 105, 3]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 103

;---------------------------------------------------------------------------
;ステップ着地
[Statedef 103]
type    = S
physics = S
ctrl = 1
anim = 103
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 100, 1
channel = 20

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;バックステップ
[Statedef 105]
type    = A
physics = N
ctrl = 0
anim = 105
velset = 0,0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 105, 0
channel = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 2
x = -6.8
y = -4.8

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 105, 1]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .65

[State 105, 3]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 106

;---------------------------------------------------------------------------
;バックステップ（着地）
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 106
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = time = 3
value = 1

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = var(59)
trigger2 = time > 10
trigger2 = random < 100
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = !var(59)
trigger1 = command = "holddown"
trigger2 = var(59)
trigger2 = P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = var(59)
trigger2 = time > 10
trigger2 = random < 100
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holddown"
trigger2 = var(59)
trigger2 = P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = P2statetype = A
trigger3 = P2bodydist x <= 100
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = var(59)
trigger2 = time > 10
trigger2 = random < 100
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger2 = var(59)
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = !var(59)
trigger1 = command != "holdback"
trigger2 = var(59)
trigger2 = time > 10
trigger2 = random < 100
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = !var(59)
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, 2]
type = ChangeState
trigger1 = var(59)
trigger1 = HitShakeOver
value = 151 + 2*(P2statetype = C || P2bodydist x > 100)

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = !var(59)
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, 3]
type = ChangeState
trigger1 = var(59)
trigger1 = HitShakeOver
value = 153;1 + 2*(P2statetype = C || P2bodydist x > 100)

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59)
trigger2 = statetype = S && P2statetype = C
trigger3 = var(59)
trigger3 = statetype = S
trigger3 = P2bodydist x > 100
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = !var(59)
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59)
trigger2 = statetype = C && P2statetype = S
trigger2 = P2bodydist x <= 100
trigger2 = random < 200
trigger3 = var(59)
trigger3 = statetype = C && P2statetype = A
trigger3 = P2bodydist x <= 100
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = !var(59)
trigger1 = command = "holdback"
trigger2 = var(59)
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; タイムオーバー負け
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 170, 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 52, 0

;---------------------------------------------------------------------------
; タイムオーバー引き分け
[Statedef 175]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 170, 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 52, 0

;---------------------------------------------------------------------------
;勝利ポーズ分岐
[Statedef 180]
type = S
ctrl = 0
velset = 0,0

[State 180, 1]
type = ChangeState
trigger1 = prevstateno = 3306
value = 185

[State 180, 1]
type = ChangeState
trigger1 = prevstateno = 1511
value = 187

[State 180, 1]
type = ChangeState
trigger1 = NumHelper(20000)
trigger1 = Helper(20000),stateno = 20003
value = 186

[State 180, 1]
type = ChangeState
trigger1 = 1
value = 181+(random%4)

;---------------------------------------------------------------------------
;勝ちポーズ1
[Statedef 181]
type = S
physics = S
ctrl = 0
velset = 0,0
anim = 180

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 180, 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 16
trigger3 = AnimElem = 24
value = 100, 1

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 11
trigger3 = AnimElem = 19
value = 3, 0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 270]
flag = RoundNotOver

;---------------------------------------------------------------------------
;勝ちポーズ2
[Statedef 182]
type = S
physics = S
ctrl = 0
velset = 0,0
anim = 181

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 180, 1+(NumHelper(30000)*4)

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 270]
flag = RoundNotOver

;---------------------------------------------------------------------------
;勝ちポーズ3
[Statedef 183]
type = S
physics = S
ctrl = 0
velset = 0,0
anim = 182+(random%2)

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 9
value = 180, 2+(anim=183)

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100, 4

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 270]
flag = RoundNotOver

;---------------------------------------------------------------------------
;勝ちポーズ4
[Statedef 184]
type = S
physics = S
ctrl = 0
velset = 0,0
anim = 186

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 180, 2

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 270]
flag = RoundNotOver

;---------------------------------------------------------------------------
;勝ちポーズ5（オレ達無敵のグレン団！）
[Statedef 185]
type = S
physics = S
ctrl = 0
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 650]
flag = RoundNotOver

;---------------------------------------------------------------------------
;勝ちポーズ6（シモン！）
[Statedef 186]
type = S
physics = S
ctrl = 0
velset = 0,0
anim = 184

[State 190, 4]
type = ChangeAnim
trigger1 = time = 0
trigger1 = NumHelper(20000)
trigger1 = ((Pos X - Helper(20000),Pos X)*facing)>0
value = 185

[State 181, 2]
type = PlaySnd
trigger1 = anim = 184 && AnimElem = 8
trigger2 = anim = 185 && AnimElem = 10
value = 180, 4

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 270]
flag = RoundNotOver

;---------------------------------------------------------------------------
;勝ちポーズ7（カミナ！）
[Statedef 187]
type = S
physics = S
ctrl = 0
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 270]
flag = RoundNotOver

;---------------------------------------------------------------------------
;イントロ（分岐）
[Statedef 190]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State -2, 3]
type = null;ChangeState
trigger1 = (P2Name = "cvsmai" || P4Name = "cvsmai") && EnemyNear,AuthorName = "H”"
value = 192

[State 190, 1]
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
;イントロ（通常）
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 190, 0
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 21
value = 1100, 4

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ（対舞）
[Statedef 192]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 6
value = 191, 0
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 24
value = 191, 1
channel = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 195, 0
channel = 0

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち弱パンチ
[Statedef 200]
type    = S  
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 200
poweradd = 0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 200, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, random%2
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
guard.pausetime = ceil(9*(2-(var(16)>0))/2),ceil(8*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -75
hitsound = S2, 0
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 10+(var(41)*2)
ground.hittime = 10+(var(41)*2)
air.hittime = 10+(var(41)*2)
guard.ctrltime = 10
ground.velocity = -6*(2-(var(16)>0))/2
guard.velocity = -5*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -75

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち弱パンチ
[Statedef 201]
type    = S  
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 201
poweradd = 0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 200, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, random%2
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
guard.pausetime = ceil(9*(2-(var(16)>0))/2),ceil(8*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -70
hitsound = S2, 0
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 10+(var(41)*2)
ground.hittime = 10+(var(41)*2)
air.hittime = 10+(var(41)*2)
guard.ctrltime = 10
ground.velocity = -6*(2-(var(16)>0))/2
guard.velocity = -5*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -70

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち中パンチ
[Statedef 210]
type    = S  
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 210
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 1
channel = 1

[State 210, Voice]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -71
hitsound = S2, 1
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 14+(var(41)*3)
ground.hittime = 14+(var(41)*3)
air.hittime = 14+(var(41)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
guard.velocity = -6.8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -71

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち中パンチ
[Statedef 211]
type    = S  
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 211
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 1
channel = 1

[State 210, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -70
hitsound = S2, 1
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 14+(var(41)*3)
ground.hittime = 14+(var(41)*3)
air.hittime = 14+(var(41)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
guard.velocity = -6.8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -70

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち強パンチ
[Statedef 220]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0
anim = 220
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 220, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = prevstateno != 830
trigger1 = AnimElem = 3 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 220, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(10))<7,7,(84*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -68
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(var(41)*4)
ground.hittime = 17+(var(41)*4)
air.hittime = 17+(var(41)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
guard.velocity = -8.5*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -14*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35                
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 250, 1]
type = Hitdef
triggerall = prevstateno = 830
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(10))<7,7,(84*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -68
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(var(41)*4)
ground.hittime = 17+(var(41)*4)
air.hittime = 17+(var(41)*4)
guard.ctrltime = 17
ground.velocity = -8, -5
guard.velocity = -8.5*(2-(var(16)>0))/2
air.velocity = -8, -5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.9*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35              
persistent = 0
fall = 1
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -68

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち強パンチ
[Statedef 221]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0
anim = 221
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 221, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 221, Voice]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 221, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((84*fvar(10))<7,7,(84*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -72
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(var(41)*4)
ground.hittime = 17+(var(41)*4)
air.hittime = 17+(var(41)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
guard.velocity = -8.5*(2-(var(16)>0))/2
air.velocity = -3, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -14*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35               
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 221, 1]
type = Hitdef
triggerall = var(36) != [1,2]
trigger1 = AnimElem = 5
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((63*fvar(10))<7,7,(63*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -110
hitsound = S2, 2
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 17+(var(41)*4)
ground.hittime = 17+(var(41)*4)
air.hittime = 17+(var(41)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
guard.velocity = -8.5*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -14*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35               
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = animelem = 4
ignorehitpause = 1
var(39) = -72

[State 3001, VarSet]
type = VarSet
trigger1 = animelem = 5
ignorehitpause = 1
var(39) = -110

[State 221, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち弱キック
[Statedef 230]
type    = S  
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 230
poweradd = 0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 3
channel = 1

[State 230, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, random%2
channel = 0

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 8

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
x = -8

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 230, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
guard.pausetime = ceil(9*(2-(var(16)>0))/2),ceil(8*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -20
hitsound = S2, 3
guardsound = S1, 0
ground.type = Low
air.type = Low
ground.slidetime = 10+(var(41)*2)
ground.hittime = 10+(var(41)*2)
air.hittime = 10+(var(41)*2)
guard.ctrltime = 10
ground.velocity = -6*(2-(var(16)>0))/2
guard.velocity = -5*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -20

[State 230, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち中キック
[Statedef 240]
type    = S  
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 240
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3, 4
channel = 1

[State 240, Voice]
type = PlaySnd
trigger1 = AnimElem = 4 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 4
x = 8

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 240, 1]
type = Hitdef
trigger1 = AnimElem = 5
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -59
hitsound = S2, 4
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(var(41)*3)
ground.hittime = 14+(var(41)*3)
air.hittime = 14+(var(41)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
guard.velocity = -6.8*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -59

[State 240, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち中キック
[Statedef 241]
type    = S  
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 241
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 4
channel = 1

[State 240, Voice]
type = PlaySnd
triggerall = prevstateno != 830
trigger1 = AnimElem = 3 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 240, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -60
hitsound = S2, 4
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 14+(var(41)*3)
ground.hittime = 14+(var(41)*3)
air.hittime = 14+(var(41)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
guard.velocity = -6.8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -60

[State 240, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち強キック
[Statedef 250]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0
anim = 250
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 250, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 5
channel = 1

[State 250, Voice]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 250, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -88
hitsound = S2, 5
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 17+(var(41)*4)
ground.hittime = 17+(var(41)*4)
air.hittime = 17+(var(41)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
guard.velocity = -8.5*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -14*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35              
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 250, 1]
type = Hitdef
trigger1 = AnimElem = 7
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -54
hitsound = S2, 5
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(var(41)*4)
ground.hittime = 17+(var(41)*4)
air.hittime = 17+(var(41)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
guard.velocity = -8.5*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -14*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35              
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 4
ignorehitpause = 1
var(39) = -88

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 7
ignorehitpause = 1
var(39) = -54

[State 250, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱パンチ
[Statedef 400]
type    = C
movetype = A
physics = C
juggle = 8
ctrl = 0
anim = 400
poweradd = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 400, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 400, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, random%2
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 400, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
guard.pausetime = ceil(9*(2-(var(16)>0))/2),ceil(8*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -45
hitsound = S2, 0
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 10+(var(41)*2)
ground.hittime = 10+(var(41)*2)
air.hittime = 10+(var(41)*2)
guard.ctrltime = 10
ground.velocity = -6*(2-(var(16)>0))/2
guard.velocity = -5*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -45

[State 400, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ中パンチ
[Statedef 410]
type    = C
movetype = A
physics = C
juggle = 8
ctrl = 0
anim = 410
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 410, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 410, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 410, 2]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -74
hitsound = S2, 1
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 14+(var(41)*3)
ground.hittime = 14+(var(41)*3)
air.hittime = 14+(var(41)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
guard.velocity = -6.8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -74

[State 410, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強パンチ
[Statedef 420]
type    = C
movetype = A
physics = C
juggle = 8
ctrl = 0
anim = 420
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 420, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 420, Voice]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 420, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((77*fvar(10))<7,7,(77*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -54
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(var(41)*4)
ground.hittime = 17+(var(41)*4)
air.hittime = 17+(var(41)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
guard.velocity = -8.5*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -14*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -54

[State 420, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱キック
[Statedef 430]
type    = C
movetype = A
physics = C
juggle = 8
ctrl = 0
anim = 430
poweradd = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 430, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 3
channel = 1

[State 430, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, random%2
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 430, 2]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
guard.pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -3
hitsound = S2, 3
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 10+(var(41)*2)
ground.hittime = 10+(var(41)*2)
air.hittime = 10+(var(41)*2)
guard.ctrltime = 10
ground.velocity = -6*(2-(var(16)>0))/2
guard.velocity = -5*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -3

[State 403, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ中キック
[Statedef 440]
type    = C                      
movetype = A
physics = C                    
juggle = 8
velset = 0,0
ctrl = 0
anim = 440      
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 440, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 4
channel = 1

[State 440, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 440, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -24
hitsound = S2, 4
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(var(41)*3)
ground.hittime = 14+(var(41)*3)
air.hittime = 14+(var(41)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
guard.velocity = -6.8*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -24

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強キック
[Statedef 450]
type    = C
movetype = A
physics = C
juggle = 8
ctrl = 0
anim = 450
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 5
x = 4

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
x = 8

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 3
x = 16

[State 450, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 5
channel = 1

[State 450, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 450, Effect]
type = PlaySnd
trigger1 = AnimElem = 6
value = 5100, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 450, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((77*fvar(10))<7,7,(77*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -45
hitsound = S2, 5
guardsound = S1, 0
ground.type = Trip
air.type = High
ground.slidetime = 17+(var(41)*4)
guard.slidetime = 17+(var(41)*4)
ground.hittime = 17+(var(41)*4)
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -.7, -6.5
guard.velocity = -8.5*(2-(var(16)>0))/2
air.velocity = -.7, -6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.9*(2-(var(16)>0))/2
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35          
yaccel = .5
air.fall = 1
fall = 1
fall.recover = 0
air.recover = 0
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -45

[State 450, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ弱パンチ
[Statedef 600]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 600
poweradd = 0

[State 600, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 600, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, random%2
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 600, 2]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(10*(2-(var(16)>0))/2)
guard.pausetime = ceil(9*(2-(var(16)>0))/2),ceil(10*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -42
hitsound = S2, 0
guardsound = S1, 0
ground.type = High
ground.slidetime = 9+(var(41)*2)
ground.hittime = 9+(var(41)*2)
air.hittime = 9+(var(41)*2)
guard.ctrltime = 12
ground.velocity = -3*(2-(var(16)>0))/2
guard.velocity = -5.33*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -4,-1
ground.cornerpush.veloff = -4.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -42

[State 40, 0]
type = Gravity
trigger1 = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ中パンチ
[Statedef 610]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 610    
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 610, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 610, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 610, 2]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -77
hitsound = S2, 1
guardsound = S1, 0
ground.type = High
ground.slidetime = 12+(var(41)*3)
ground.hittime = 12+(var(41)*3)
air.hittime = 12+(var(41)*3)
guard.ctrltime = 15
ground.velocity = -4*(2-(var(16)>0))/2
guard.velocity = -5.33*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -5.6*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -77

[State 40, 0]
type = Gravity
trigger1 = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ強パンチ
[Statedef 620]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 620
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 620, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 620, Voice]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 620, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage =  ceil(ifelse((77*fvar(10))<7,7,(77*fvar(10))))
pausetime =  ceil(13*(2-(var(16)>0))/2),ceil(14*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(14*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -26
hitsound = S2, 2
guardsound = S1, 0
ground.type = High
ground.slidetime = 12+(var(41)*4)
ground.hittime = 12+(var(41)*4)
air.hittime = 12+(var(41)*4)
guard.ctrltime = 20
ground.velocity = -5*(2-(var(16)>0))/2
guard.velocity = -9.33*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35    
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -26

[State 40, 0]
type = Gravity
trigger1 = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ弱キック
[Statedef 630]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 630
poweradd = 0

[State 630, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 3
channel = 1

[State 630, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, random%2
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 630, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(10*(2-(var(16)>0))/2)
guard.pausetime = ceil(9*(2-(var(16)>0))/2),ceil(10*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -40
hitsound = S2, 3
guardsound = S1, 0
ground.type = High
ground.slidetime = 9+(var(41)*2)
ground.hittime = 9+(var(41)*2)
air.hittime = 9+(var(41)*2)
guard.ctrltime = 12
ground.velocity = -3*(2-(var(16)>0))/2
guard.velocity = -5.33*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -4,-1
ground.cornerpush.veloff = -4.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -40

[State 40, 0]
type = Gravity
trigger1 = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ中キック
[Statedef 640]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 640
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 640, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 4
channel = 1

[State 601, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 640, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -40
hitsound = S2, 4
guardsound = S1, 0
ground.type = High
ground.slidetime = 12+(var(41)*3)
ground.hittime = 12+(var(41)*3)
air.hittime = 12+(var(41)*3)
guard.ctrltime = 15
ground.velocity = -4*(2-(var(16)>0))/2
guard.velocity = -5.33*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -5.6*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -40

[State 40, 0]
type = Gravity
trigger1 = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;----------------------------------------------------------------------------
;ジャンプ強キック
[Statedef 650]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 650
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 650, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 5
channel = 1

[State 650, Voice]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 650, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((77*fvar(10))<7,7,(77*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(14*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(14*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -37
hitsound = S2, 5
guardsound = S1, 0
ground.type = High
ground.slidetime = 12+(var(41)*4)
ground.hittime = 12+(var(41)*4)
air.hittime = 12+(var(41)*4)
guard.ctrltime = 20
ground.velocity = -5*(2-(var(16)>0))/2
guard.velocity = -9.33*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -7*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -37

[State 40, 0]
type = Gravity
trigger1 = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ステップローキック
[Statedef 300]
type    = S  
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
anim = 300
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
y = 0

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 7
x = 8

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 4
channel = 1

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 0

[State 240, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 52, 0

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 4
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 2
statetype = A
physics = N

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
statetype = S
physics = S

[State 220, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 6
y = -3

[State 220, Velocity]
type = VelSet
trigger1 = AnimElem = 4
x = 0
y = 0

[State 1100, Velocity]
type = VelAdd
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(4) < 0
y = .47

[State 220, Velocity]
type = VelMul
trigger1 = 1
x = .92

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 240, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = MA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((42*fvar(10))<7,7,(42*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -23
hitsound = S2, 4
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(var(41)*3)
ground.hittime = 14+(var(41)*3)
air.hittime = 14+(var(41)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
guard.velocity = -6.8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -23

[State 240, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;モールクラッシュ
[Statedef 310]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0
anim = 310
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
x = 8

[State 220, Position]
type = PosAdd
trigger1 = AnimElem = 8
x = -8

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 4
x = 4

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 7
x = 0

[State 220, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3, 1
channel = 1

[State 220, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 2
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -68
hitsound = S2, 1
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 14+(var(41)*3)
ground.hittime = 14+(var(41)*3)
air.hittime = 14+(var(41)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
guard.velocity = -6.8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 5
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
guard.pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -35
hitsound = S2, 1
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(var(41)*3)
ground.hittime = 14+(var(41)*3)
air.hittime = 14+(var(41)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
guard.velocity = -6.8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 4
ignorehitpause = 1
var(39) = -68

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 5
ignorehitpause = 1
var(39) = -35

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;アサルトキック
[Statedef 320]
type    = S
movetype = A
physics = N
juggle = 8
ctrl = 0
velset = 0,0
anim = 320
poweradd = 17*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 220, Velocity]
type = VelSet
trigger1 = animelem = 2
x = 10

[State 220, Velocity]
type = VelSet
trigger1 = animelem = 8
x = 0

[State 220, Velocity]
type = VelMul
trigger1 = 1
x = .92

[State 250, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3, 5
channel = 1

[State 250, Voice]
type = PlaySnd
trigger1 = AnimElem = 4 && Random <= 500
value = 0, 1+(random%2)
channel = 0

[State 250, Effect]
type = PlaySnd
trigger1 = AnimElem = 8
value = 52, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 250, 1]
type = Hitdef
trigger1 = AnimElem = 5
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(10))<7,7,(84*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(12*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -63
hitsound = S2, 5
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(var(41)*4)
ground.hittime = 17+(var(41)*4)
air.hittime = 17+(var(41)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
guard.velocity = -8.5*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -14*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35              
persistent = 0
air.fall = 1
fall.recover = !var(16)
air.recover = !var(16)
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -63

[State 250, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;回り込み
[Statedef 800]
type = S
physics = N
movetype= I
anim = 800
ctrl = 0
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 810, Voice]
type = Playsnd
trigger1 = time = 1
value = ifelse(random%2=1,900,800),1
channel = 0

[State 810, Voice]
type = Playsnd
trigger1 = time = 1
value = 800,50

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 5.8

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = time <= 20
value = SCA, NT,ST,HT

[State 810, Push]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0

[State 810, AfterImage]
type = Afterimage
triggerall = !var(16)
trigger1 = AnimElem = 3
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 810, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ガードキャンセル移動（前）
[Statedef 810]
type = S
physics = N
movetype = I
ctrl = 0
velset = 0,0
poweradd = -1000

[State 180, 1]
type = VarAdd
trigger1 = time = 0
var(50)=500
ignorehitpause = 1

[State 902, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 1100, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 810,0
channel = 1

[State -3,Super]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifelse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 7
supermovetime = 99999999999999
persistent = 0
size.xscale = 1
size.yscale = 1

[State 0]
type = pause
trigger1 = time = 1
time = 6
movetime = 6

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 190, 4]
type = ChangeAnim
trigger1 = time <= 12
value = anim

[State 190, 4]
type = ChangeAnim
trigger1 = time = 13
value = 800

[State 810, Voice]
type = Playsnd
triggerall = anim = 800
trigger1 = animelem = 1
value = ifelse(random%2=1,900,800),1
channel = 0

[State 810, Voice]
type = Playsnd
triggerall = anim = 800
trigger1 = animelem = 1
value = 800,50

[State 810, Velocity]
type = VelSet
triggerall = anim = 800
trigger1 = AnimElem = 2
x = 5.8

[State 810, Velocity]
type = VelSet
triggerall = anim = 800
trigger1 = AnimElem = 8
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = time <= 32
value = SCA, NT,ST,HT

[State 810, Push]
type = PlayerPush
triggerall = anim = 800
trigger1 = AnimElemTime(2) > 0
value = 0

[State 810, AfterImage]
type = Afterimage
triggerall = anim = 800
trigger1 = AnimElem = 3
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 810, StateChange]
type = ChangeState
triggerall = anim = 800
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ガードキャンセル移動（後）
[Statedef 820]
type = A
physics = N
ctrl = 0
poweradd = -1000
velset = 0,0

[State 180, 1]
type = VarAdd
trigger1 = time = 0
var(50)=-1000
ignorehitpause = 1

[State 902, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 22

[State 1100, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 810,0
channel = 1

[State -3,Super]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifelse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 7
supermovetime = 99999999999999
persistent = 0
size.xscale = 1
size.yscale = 1

[State 0]
type = pause
trigger1 = time = 1
time = 6
movetime = 6

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 1,0

[State 190, 4]
type = ChangeAnim
trigger1 = time <= 12
value = anim

[State 190, 4]
type = ChangeAnim
trigger1 = time = 13
value = 105

[State 800, AfterImage]
type = Afterimage
triggerall = anim = 105
trigger1 = AnimElem = 2
time = 22
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 52, Effect]
type = PlaySnd
triggerall = anim = 105
trigger1 = AnimElem = 1
value = 40, 0
channel = 20

[State 1000, Spark]
type = Explod
triggerall = anim = 105
trigger1 = AnimElem = 1
Anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 105, 1]
type = VelSet
triggerall = anim = 105
trigger1 = AnimElem = 2
x = -6.8
y = -4.8

[State 105, 1]
type = VelMul
triggerall = anim = 105
trigger1 = AnimElemTime(2) > 0
x = .98

[State 105, 1]
type = VelAdd
triggerall = anim = 105
trigger1 = AnimElemTime(2) > 0
y = .65

[State 105, 3]
type = ChangeState
triggerall = anim = 105
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 106

;---------------------------------------------------------------------------
;避け
[Statedef 830]
type = S
physics = S
movetype = I
anim = 830
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 400, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 400, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 800, 1
channel = 0

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 800, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NT,ST,HT

[State 800, AfterImage]
type = Afterimage
triggerall = !var(16)
trigger1 = AnimElem = 1
time = 26
length = 10
FrameGap = 6
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 800, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;パワー溜め
[Statedef 850]
type = S
physics = S
movetype= I
anim = 850
ctrl = 0
velset = 0,0

[State 820, Voice]
type = Playsnd
triggerall = anim = 850
trigger1 = AnimElem = 2
value = 850,0
channel = 0

[State 820, PowerAdd]
type = PowerAdd
triggerall = Anim = 850
trigger1 = 1
value = 2*((time+10)/10)

[State 820, Anim]
type = ChangeAnim
triggerall = !var(59)
trigger1 = (Command != "chargec" || Command != "chargez") || ((power >= 1000 && var(20) = 3) || (power >= 3000 && var(20) = 6))
value = 851
persistent = 0

[State 704, 8]
type = ChangeAnim
triggerall = (var(20) = 3 && !var(14)) || var(20) = 6
triggerall = Time >= 2
triggerall = var(59)
trigger1 = P2bodydist X = [0,190]
trigger1 = P2MoveType = A
trigger2 = P2bodydist X = [0,60]
trigger2 = P2statetype != L
trigger3 = ((power >= 1000 && var(20) = 3) || (power >= 3000 && var(20) = 6))
trigger4 = win
trigger5 = enemynear,numproj
trigger6 = inguarddist
value = 851
persistent = 0

[State 820, Voice]
type = Stopsnd
trigger1 = Anim = 851
channel = 0
persistent = 0

[State 3001, Super]
type = Helper
trigger1 = !NumHelper(8500)
trigger1 = Time = 1
id = 8500
name = "Charge"
pos = 0,0
postype = P1
stateno = 8500
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1850, ctrlset]
type = ctrlset
triggerall = !ctrl
trigger1 = anim = 851
value = 1

[State 820, StateChange]
type = ChangeState
trigger1 = Anim = 851 && AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;パワーMAX発動
[Statedef 860]
type = S
physics = S
movetype= I
anim = 860
ctrl = 0
velset = 0,0

[State 860, 1]
type = Explod
trigger1 = Time = 6
anim = 8415
pos = 0,-60
postype = p1
bindtime = -1
sprpriority = 4
ontop = 0
ownpal = 1
scale = .5,.5
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 860, 2]
type = Playsnd
trigger1 = time = 6
value = 6000, 10

[State 860, 2]
type = Playsnd
trigger1 = time = 6
value = 860, 0
channel = 0

[State 860, 4]
type = PowerAdd
trigger1 = time = 6
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 6
var(15) = 675

[State 3001, Super]
type = Helper
trigger1 = time = 6
id = 6170
name = "n_gauge"
pos = 0,0
postype = P1
stateno = 6170
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

[State 1850, ctrlset]
type = ctrlset
trigger1 = time = 16
value = 1

[State 860, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;オリコン発動（地上）
[Statedef 870]
type = S
physics = S
movetype = A
anim = 870
ctrl = 0
velset = 0,0

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 37
movetime = 37
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, Super]
type = Helper
trigger1 = Time = 4
persistent = 0
id = 8080
name = "oricom"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 3000, VarSet]
type = VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 37

[State 860, 2]
type = Playsnd
trigger1 = time = 4
value = 870, 1
channel = 0

[State 3000, AfterImage]
type = AfterImage
trigger1 = time = 4
time = 9999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 860, 5]
type = Varset
trigger1 = AnimTime = 0
var(16) = 334

[State 860, 5]
type = Varset
trigger1 = time = 0
var(18) = 1

[State 860, 5]
type = Varset
trigger1 = AnimTime = 0
var(19) = 3000

[State 7000,Muteki]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 50

[State -2, 1]
type = Poweradd
trigger1 = AnimTime = 0
value = -3000
ignorehitpause = 1

[State 860, 6]
type = ChangeState
triggerall = var(59)
trigger1 = animtime = 0
value = 420

[State 860, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;オリコン発動（空中）
[Statedef 875]
type = A
movetype = A
physics = N
anim = 875
ctrl = 0

[State 7050,PosFreeze]
type = PosFreeze
trigger1 = 1

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 37
movetime = 37
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, Super]
type = Helper
trigger1 = Time = 4
persistent = 0
id = 8080
name = "oricom"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 3000, VarSet]
type = VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 37

[State 860, 2]
type = Playsnd
trigger1 = time = 4
value = 870, 1
channel = 0

[State 3000, AfterImage]
type = AfterImage
trigger1 = time = 4
time = 9999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 860, 5]
type = Varset
trigger1 = AnimTime = 0
var(16) = 334

[State 860, 5]
type = Varset
trigger1 = time = 0
var(18) = 1

[State 860, 5]
type = Varset
trigger1 = AnimTime = 0
var(19) = 3000

[State 7000,Muteki]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 50

[State -2, 1]
type = Poweradd
trigger1 = AnimTime = 0
value = -3000
ignorehitpause = 1

[State 1850, 9]
type = changestate
trigger1 = AnimTime = 0
value = 876

;------------------------------------------------------------------------------------------
;オリコン発動（空中）（終了）
[Statedef 876]
type = A
movetype = I
physics = N
anim = 4030
ctrl = 1

[State 903, Vel]
type = Gravity
trigger1 = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;投げ（掴みモーション）
[Statedef 900]
type    = S
movetype = A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = ifelse(Command = "z"||(var(59)&&(random%2=0)), 900, 910)
poweradd = 89*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)

[State 900, 1]
type = HitDef
triggerall = Anim = 900
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 901
p2stateno = 906
guard.dist = 0
numhits = 0
nochainID = var(40)

[State 900, 1]
type = HitDef
triggerall = Anim = 910
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 911
p2stateno = 916
guard.dist = 0
numhits = 0
nochainID = var(40)

[State 900, 1]
type = HitDef
triggerall = Anim = 900
triggerall = P2StateNo != [150,155]
triggerall = var(16)
trigger1 = AnimElem = 2
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 901
p2stateno = 906
guard.dist = 0
numhits = 0
nochainID = var(40)

[State 900, 1]
type = HitDef
triggerall = Anim = 910
triggerall = P2StateNo != [150,155]
triggerall = var(16)
trigger1 = AnimElem = 2
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 911
p2stateno = 916
guard.dist = 0
numhits = 0
nochainID = var(40)

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 900, 1
channel = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 900, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;P投げ
[Statedef 901]
type    = S
movetype = A
physics = N
velset = 0,0

[State 10000, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0

[State 10000, 1]
type = VarSet
triggerall = Time < 7 && !fvar(2)
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "y") || (Target,Command = "z"))
fvar(2) = 1

[State 810,TargetBind]
type = TargetBind
trigger1 = Time < 7 && fvar(2)
pos = 40, 0

[State 810,TargetBind]
type = ChangeState
trigger1 = Time < 7 && fvar(2)
value = 950

[State 1201, 2]
type = Playerpush
trigger1 = 1
value = 0

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 905

[State 820, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 901
persistent = 0

[State 3001, Width]
type = Width
trigger1 = animelemtime(5) < 0
edge = 45,0

[State 3001, Width]
type = Width
trigger1 = AnimElem = 5
edge = 60,0

[State 3001, Width]
type = Width
trigger1 = AnimElem = 6
edge = 90,0

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 900, 0
channel = 1

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 2
channel = 0

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 5100, 1

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 2, 2

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 5
Anim = 8030
pos = 50, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 5
Anim = 8310
pos = 50, 5
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = -50,0
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 2
pos = -40, -72
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 3
pos = -32, -80
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 4
pos = 10, -100
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 5
pos = 60, 0
postype = P1
time = 1

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElem = 5
time = 20
ampl = 5

[State 3001, Add Hits!]
type = HitAdd
trigger1 = AnimElem = 5
value = 1

[State -2, Combo]
type = VarAdd
trigger1 = AnimElem = 5
var(17) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = AnimElem = 5
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = var(17) >= 2
trigger1 = AnimElem = 5
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = ceil(ifelse((-126*fvar(10))>-7,-7,(-126*fvar(10))))

[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 5
value = 35

[State 901, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;P投げ（相手）
[Statedef 905]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201, screenbound]
type = screenbound
trigger1 = anim = 905
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 905

[State 902, 1]
type = ChangeAnim
trigger1 = anim = 905 && AnimTime = 0
value = 5160

[State 903, Vel]
type = VelSet
trigger1 = anim = 5160 && AnimElem = 1
x = -3.5
y = -6.5

[State 903, Vel]
type = veladd
trigger1 = anim = 5160
y = .5

[State 903, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 12
ampl = 3

[State 1300,Turn]
type = Turn
trigger1 = anim = 5160 && AnimElem = 1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 903, 2]
type = SelfState
trigger1 = anim = 5160 && AnimElemTime(1) > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;P投げ（相手）2
[Statedef 906]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1205, ChangeState]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;K投げ
[Statedef 911]
type    = S
movetype = A
physics = N
velset = 0,0

[State 10000, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0

[State 10000, 1]
type = VarSet
triggerall = Time < 4 && !fvar(2)
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "b") || (Target,Command = "c"))
fvar(2) = 1

[State 810,TargetBind]
type = TargetBind
trigger1 = Time < 4 && fvar(2)
pos = 30, 0

[State 810,TargetBind]
type = ChangeState
trigger1 = Time < 4 && fvar(2)
value = 950

[State 1201, 2]
type = Playerpush
trigger1 = 1
value = 0

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 915

[State 820, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 911
persistent = 0

[State 3001, Width]
type = Width
trigger1 = animelemtime(3) < 0
edge = 60,0

[State 3001, Width]
type = Width
trigger1 = AnimElem = 8
edge = 75,0

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 900, 0
channel = 1

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 9
value = 2, 5

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 1
channel = 0

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 8
value = 3, 5

[State 1100, Fire1]
type = Explod
trigger1 = AnimElem = 3
Anim = 8200+(random%8)
pos = ceil(47*const(size.xscale)),ceil(-62*const(size.yscale))
postype = p1
ownpal = 1
ontop = 1

[State 1100, Fire1]
type = Explod
trigger1 = AnimElem = 9
Anim = 8200+(random%8)
pos = ceil(40*const(size.xscale)),ceil(-65*const(size.yscale))
postype = p1
ownpal = 1
ontop = 1

[STate 901,1]
type = targetBind
trigger1 = animelem = 1
;trigger2 = animelem = 6
pos = ceil(40*const(size.xscale)),0
postype = P1
time = -1

[STate 901,1]
type = targetBind
trigger1 = animelem = 3
pos = ceil(40*const(size.xscale)),0
postype = P1
time = 1

[STate 901,1]
type = targetBind
trigger1 = animelem = 9
pos = ceil(50*const(size.xscale)),0
postype = P1
time = 1

[State 3001, Add Hits!]
type = HitAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 9
value = 1

[State -2, Combo]
type = VarAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 9
var(17) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 9
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = var(17) >= 2
trigger1 = AnimElem = 3
trigger2 = AnimElem = 9
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = ceil(ifelse((-63*fvar(10))>-7,-7,(-63*fvar(10))))
kill = 0

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 9
value = ceil(ifelse((-70*fvar(10))>-7,-7,(-70*fvar(10))))

[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 9
value = 35

[State 901, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;K投げ（相手）
[Statedef 915]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 903, Pos]
type = PosSet
trigger1 = AnimElem = 6
y = 0

[State 1201, screenbound]
type = screenbound
trigger1 = AnimElemTime(8) < 0
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 915

[State 903, Vel]
type = VelSet
trigger1 = AnimElem = 4
y = -3.5

[State 903, Vel]
type = veladd
trigger1 = AnimElemTime(4) > 0
trigger1 = AnimElemTime(6) < 0
y = .4

[State 40, Position]
type = PosAdd
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) < 0
x = ceil((17-time)/4)*ifelse(time%2=1,1,-1)

[State 40, Position]
type = PosAdd
trigger1 = AnimElemTime(7) >= 0
trigger1 = AnimElemTime(8) < 0
x = ceil((55-time)/4)*ifelse(time%2=1,1,-1)

[State 903, Vel]
type = VelSet
trigger1 = AnimElem = 6
y = 0

[State 903, Vel]
type = VelSet
trigger1 = AnimElem = 8
x = -7.5
y = -4

[State 903, Vel]
type = veladd
trigger1 = AnimElemTime(8) > 0
y = .4

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElemTime(8) > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(8) > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;K投げ（相手）2
[Statedef 916]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1205, ChangeState]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;螺旋力アッパー
[Statedef 1000]
type    = S
movetype = A
physics = N
juggle = 8
ctrl = 0
poweradd = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(Command = "螺旋力アッパー1", 0, ifelse(Command = "螺旋力アッパー2", 1, 2))

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = numtarget
trigger1 = Time = 0
var(5) = 2

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = numtarget
trigger1 = Time = 0
trigger1 = prevstateno=200||prevstateno=400||prevstateno=430
var(5) = random%2

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = var(16)
trigger1 = Time = 0
var(5) = 2

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 1000, ifelse(var(5) = 1, 1010, 1020))

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = !var(5) && AnimElem = 1
trigger2 = var(5) && AnimElem = 2
x = ifelse(!var(5),5,ifelse(var(5)=1,5.5,6))

[State 1100, Velocity]
type = VelMul
trigger1 = !var(5)
trigger2 = var(5) && AnimElemTime(5) > 0
x = .92

[State 1100, Velocity]
type = VelSet
trigger1 = !var(5) && AnimElem = 6
trigger2 = var(5)=1 && AnimElem = 9
trigger3 = var(5)=2 && AnimElem = 10
x = 0

[State 221, Effect]
type = PlaySnd
trigger1 = var(5) && AnimElem = 3
value = 3, 5
channel = 1

[State 221, Effect]
type = PlaySnd
trigger1 = var(5)=1 && AnimElem = 5
trigger2 = var(5)=2 && AnimElem = 6
value = 52, 0

[State 221, Effect]
type = PlaySnd
trigger1 = !var(5) && AnimElem = 4
trigger2 = var(5)=1 && AnimElem = 7
trigger3 = var(5)=2 && AnimElem = 8
value = 3, 2

[State 221, Effect]
type = PlaySnd
trigger1 = !var(5) && AnimElem = 5
trigger2 = var(5)=1 && AnimElem = 8
trigger3 = var(5)=2 && AnimElem = 9
value = 1000, 0

[State 221, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 2
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = !var(5) && AnimElem = 8
trigger2 = var(5)=1 && AnimElem = 11
trigger3 = var(5)=2 && AnimElem = 12
movetype = I

[State 1000,Super]
type = Helper
trigger1 = !var(5) && AnimElem = 5
trigger2 = var(5)=1 && AnimElem = 8
trigger3 = var(5)=2 && AnimElem = 9
id = 7100
name = "drill"
pos = 0,0
postype = P1
stateno = 7100
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1
persistent = 0

[State 1100, HitDef]
type = HitDef
trigger1 = var(5) && AnimElem = 6
trigger2 = var(5)=2 && AnimElem = 7
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse(((ifelse(var(5)=1,28,21))*fvar(10))<7,7,((ifelse(var(5)=1,28,21))*fvar(10)))),ceil(ifelse(((ifelse(var(5)=1,28,21))*fvar(10)/8)<7,7,((ifelse(var(5)=1,28,21))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = ceil(6*(2-(var(16)>0))/2),ceil(6*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -27
hitsound = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -1.2,0
guard.velocity = -8
air.velocity = -2.8,-11.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.ampl = 2
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .49
persistent = 1
getpower = ifelse(var(17),35,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = !var(5) && AnimElem = 4
trigger2 = var(5)=1 && AnimElem = 7
trigger3 = var(5)=2 && AnimElem = 8
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse(((ifelse(!var(5),35,21))*fvar(10))<7,7,((ifelse(!var(5),35,21))*fvar(10)))),ceil(ifelse(((ifelse(!var(5),35,21))*fvar(10)/8)<7,7,((ifelse(!var(5),35,21))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = ceil(6*(2-(var(16)>0))/2),ceil(6*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -52
hitsound = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -1.2,0
guard.velocity = -8
air.velocity = -2.8,-11.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.ampl = 2
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .49
persistent = 1
getpower = ifelse(var(17),35,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 221, 1]
type = Hitdef
trigger1 = !var(5) && AnimElem = 6
trigger2 = var(5)=1 && AnimElem = 9
trigger3 = var(5)=2 && AnimElem = 10
attr = S, SA
animtype  = up
air.animtype  = up
damage=ceil(ifelse(((42+(var(5)*7))*fvar(10))<7,7,((42+(var(5)*7))*fvar(10)))),ceil(ifelse(((42+(var(5)*7))*fvar(10)/8)<7,7,((42+(var(5)*7))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(14*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -59
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2,-15.2
guard.velocity = -8
air.velocity = -2,-15.2
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .6
persistent = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),14*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = var(5) && AnimElem = 6
trigger2 = var(5)=2 && AnimElem = 7
ignorehitpause = 1
var(39) = -27

[State 3001, VarSet]
type = VarSet
trigger1 = !var(5) && AnimElem = 4
trigger2 = var(5)=1 && AnimElem = 7
trigger3 = var(5)=2 && AnimElem = 8
ignorehitpause = 1
var(39) = -52

[State 3001, VarSet]
type = VarSet
trigger1 = !var(5) && AnimElem = 6
trigger2 = var(5)=1 && AnimElem = 9
trigger3 = var(5)=2 && AnimElem = 10
ignorehitpause = 1
var(39) = -59

[State 221, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ドリルエフェクト
[Statedef 7100]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7100
sprpriority = 4

[State 4900, 16]
type = VarAdd
trigger1 = time < 4
fvar(0) = .3

[State 4900, 16]
type = AngleAdd
trigger1 = time = 0
value = -10

[State 4900, 16]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(0)

[State 1005, trans]
type=trans
trigger1=1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = root,var(5)

[State 1000, 0]
type = BindToRoot
trigger1 = 1
pos = 24,-48

[State 900, 4]
type = DestroySelf
trigger1 = root,stateno = 195 && root,time = 1
trigger2 = (root,stateno = [200,799]) && root,time = 1
trigger3 = root,stateno = 800 && root,time = 1
trigger4 = root,stateno = 830 && root,time = 1
trigger5 = root,stateno = 1000 && root,time = 1
trigger6 = root,stateno = 1100 && root,time = 1
trigger7 = root,stateno = 1200 && root,time = 1
trigger8 = root,stateno = 1300 && root,time = 1
trigger9 = root,stateno = 1400 && root,time = 1
trigger10 = root,stateno = 1500 && root,time = 1
trigger11 = root,stateno = 3000 && root,time = 1
trigger12 = root,stateno = 3100 && root,time = 1
trigger13 = root,stateno = 3200 && root,time = 1
trigger14 = root,stateno = 3300 && root,time = 1

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = root,stateno = 1000 && !var(5) && root,animelem = 10
trigger2 = root,stateno = 1000 && var(5) = 1 && root,animelem = 13
trigger3 = root,stateno = 1000 && var(5) = 2 && root,animelem = 14
trigger4 = root,stateno = 2800 && root,animelem = 10
trigger5 = root,time = 1
trigger6 = root,movetype = H
value = 7101

;---------------------------------------------------------------------------
;ドリルエフェクト（消滅）
[Statedef 7101]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 4900, 16]
type = AngleDraw
trigger1 = time > 0
scale = fvar(0),fvar(0)

[State 1005, trans]
type=trans
trigger1=1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 902, Shock]
type = PalFX
trigger1 = 1
time = 1
add = -time*20,-time*20,-time*20

[State 900, 4]
type = DestroySelf
trigger1 = root,stateno = 195 && root,time = 1
trigger2 = (root,stateno = [200,799]) && root,time = 1
trigger3 = root,stateno = 800 && root,time = 1
trigger4 = root,stateno = 830 && root,time = 1
trigger5 = root,stateno = 1000 && root,time = 1
trigger6 = root,stateno = 1100 && root,time = 1
trigger7 = root,stateno = 1200 && root,time = 1
trigger8 = root,stateno = 1300 && root,time = 1
trigger9 = root,stateno = 1400 && root,time = 1
trigger10 = root,stateno = 1500 && root,time = 1
trigger11 = root,stateno = 3000 && root,time = 1
trigger12 = root,stateno = 3100 && root,time = 1
trigger13 = root,stateno = 3200 && root,time = 1
trigger14 = root,stateno = 3300 && root,time = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 12

;------------------------------------------------------------------------------------------
;リットナーストライク
[Statedef 1100]
type    = S
physics = N
anim = 1100
velset = 0,0
ctrl = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(6) = 0

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 2
Anim = 7300
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1

[State 100, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 6

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,1
channel = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 100,0
channel = 18

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 9
value = 100,1
channel = 19

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 12
value = 100,2
channel = 20

[State 100, 5];弱P
type = ChangeAnim
triggerall = !var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
trigger1 = command = "x"
value = anim
elem = 14

[State 100, 5];中P
type = ChangeState
triggerall = !var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
trigger1 = command = "y"
value = 1140

[State 100, 5];強P
type = ChangeState
triggerall = !var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
trigger1 = command = "z"
value = 1145

[State 100, 5];弱K
type = ChangeState
triggerall = !var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
trigger1 = command = "a"
value = 1110

[State 100, 5];中K
type = ChangeState
triggerall = !var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
trigger1 = command = "b"
value = 1120

[State 100, 5];強K
type = ChangeState
triggerall = !var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
trigger1 = command = "c"
value = 1130

[State 100, 5];弱P
type = ChangeAnim
triggerall = var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
triggerall = prevstateno != 3000
trigger1 = var(17) < 2
trigger1 = random = [200,300+(!numtarget*100)]
trigger2 = random = [600,630]
value = anim
elem = 14

[State 100, 5];弱K
type = ChangeState
triggerall = var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
triggerall = prevstateno != 3000
triggerall = P2bodydist Y = [-30,0]
triggerall = frontedgedist > 80
trigger1 = prevstateno = 241 || prevstateno = 410 || prevstateno = 440
trigger1 = var(17) >= 1
trigger1 = random = [100,500+((var(17)>=2)*450)]
trigger2 = prevstateno = 221
trigger2 = var(17) >= 1
trigger2 = random = [100,300+((var(17)>=2)*200)]
trigger3 = P2bodydist X = [0,80]
trigger3 = random = [200,250]
value = 1110

[State 100, 5];強P
type = ChangeState
triggerall = var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
triggerall = prevstateno != 3000
trigger1 = var(17) < 2
trigger1 = random = [200,250+(!numtarget*50)+(P2movetype=A*150)]
trigger2 = random = [800,850]
value = 1145

[State 100, 5];強K
type = ChangeState
triggerall = var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
triggerall = frontedgedist > 120
triggerall = P2bodydist X = [-5,100]
trigger1 = P2bodydist Y = [-50,0]
trigger1 = var(17) < 2
trigger1 = random = [100,250+(!numtarget*150)]
trigger1 = !enemynear,numproj
trigger2 = P2bodydist X = [-5,100]
trigger2 = P2bodydist Y = [-50,0]
trigger2 = random = [300,350]
trigger2 = !enemynear,numproj
trigger3 = P2bodydist X = [-30,100]
trigger3 = P2bodydist Y = [-200,-180]
trigger3 = prevstateno = 3000
trigger3 = random = [100,600]
value = 1130

[State 100, 5];中K
type = ChangeState
triggerall = var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
trigger1 = P2bodydist Y = [-60,0]
trigger1 = P2statetype != C
trigger1 = prevstateno = 221
trigger1 = var(17) >= 1
trigger1 = random = [100,500+((var(17)>=2)*300)]
trigger1 = !enemynear,numproj
trigger2 = P2bodydist X = [-5,120]
trigger2 = P2bodydist Y = [-60,0]
trigger2 = random = [200,230]
trigger2 = !enemynear,numproj
trigger3 = P2bodydist X = [-30,120]
trigger3 = P2bodydist Y = [-200,-180]
trigger3 = prevstateno = 3000
trigger3 = random = [100,800]
value = 1120

[State 100, 5];中P
type = ChangeState
triggerall = var(59)
triggerall = AnimElemTime(3) >= 0
triggerall = AnimElemTime(14) < 0
triggerall = prevstateno != 3000
trigger1 = var(17) < 2
trigger1 = random = [200,220+(!numtarget*10)]
trigger2 = random = [800,805]
value = 1140

[State 100, 1]
type = VelMul
trigger1 = AnimElemTime(14) > 0
x = .92

[State 100, 1]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 14
value = 100,3
channel = 20

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーストライク（ロー）
[Statedef 1110]
type    = C
movetype = A
physics = N
juggle = 8
ctrl = 0                        
anim = 1110

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 220, Position]
type = VelSet
trigger1 = AnimElem = 9
x = 0

[State 220, Position]
type = VelMul
trigger1 = AnimElemTime(5) > 0
x = .92

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 100, 10
channel = 19

[State 440, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, SA
hitflag = MAF
guardflag = L
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage=ceil(ifelse((70*fvar(10))<7,7,(70*fvar(10)))),ceil(ifelse((70*fvar(10)/8)<7,7,(70*fvar(10)/8)))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(14*(2-(var(16)>0))/2)
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(14*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -9
hitsound = S2, 5
guardsound = S1, 0
ground.type = Trip
air.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = .5, -8.5
guard.velocity = -8.5
air.velocity = .5, -8.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
yaccel = .5
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -9

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**0)
trigger1 = command = "holdfwd"
var(6) = 2**0

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**1)
trigger1 = command = "holdup"
var(6) = 2**1

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**2)
trigger1 = command = "holdback"
var(6) = 2**2

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**3)
trigger1 = command = "holddown"
var(6) = 2**3

[State 100, 5]
type = ChangeState
triggerall = !var(59)
triggerall = roundstate = 2
triggerall = !(var(6)&2**1) && !(var(6)&2**2) && !(var(6)&2**3)
trigger1 = var(6)&2**0
value = 1170
ignorehitpause = 0

[State 100, 5]
type = ChangeState
triggerall = var(59)
triggerall = roundstate = 2
triggerall = !var(6)
triggerall = var(36) = [1,2]
trigger1 = var(17) >= 2
trigger2 = random = [200,450+((var(17)=1)*150)]
value = 1170
ignorehitpause = 0

[State 100, 5]
type = VarSet
triggerall = var(6) != -1
trigger1 = var(36) = [1,2]
var(6) = -1
ignorehitpause = 0

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーストライク（ミドル）
[Statedef 1120]
type    = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
anim = 1120

[State 3001, Width]
type = Width
trigger1 = 1
edge = 20,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 1

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1100,10
channel = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,5

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 40,1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 6
y = -4.5

[State 105, 1]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .4

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 2
StateType = A
physics = N

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse((84*fvar(10))<7,7,(84*fvar(10)))),ceil(ifelse((84*fvar(10)/8)<7,7,(84*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = ceil(17*(2-(var(16)>0))/2),ceil(18*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -20, -67
hitsound = S2,5
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -6.5,-4.5
guard.velocity = -8
air.velocity = -6.5,-4.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .49
persistent = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -67

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**0)
trigger1 = command = "holdfwd"
var(6) = 2**0

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**1)
trigger1 = command = "holdup"
var(6) = 2**1

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**2)
trigger1 = command = "holdback"
var(6) = 2**2

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**3)
trigger1 = command = "holddown"
var(6) = 2**3

[State 100, 5]
type = ChangeState
triggerall = !var(59)
triggerall = roundstate = 2
triggerall = !(var(6)&2**0) && !(var(6)&2**3)
trigger1 = var(6)&2**1
value = 1150
ignorehitpause = 0

[State 100, 5]
type = ChangeState
triggerall = var(59)
triggerall = roundstate = 2
triggerall = !var(6)
triggerall = var(36) = [1,2]
trigger1 = var(17) >= 2
trigger2 = random = [100,650+((var(17)=1)*200)]
value = 1150
ignorehitpause = 0

[State 100, 5]
type = VarSet
triggerall = var(6) != -1
trigger1 = var(36) = [1,2]
var(6) = -1
ignorehitpause = 0

[State 1100, ChangeState]
type = ChangeState
triggerall = animelemtime(2) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1125

;---------------------------------------------------------------------------
;リットナーストライク（ミドル）（着地）
[Statedef 1125]
type    = S
physics = S
ctrl = 0
anim = 1125
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 5100, 0
channel = 20

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElem = 1
time = 12
ampl = 4

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーストライク（ハイ）
[Statedef 1130]
type    = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
anim = 1130

[State 3001, Width]
type = Width
trigger1 = 1
edge = 20,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 2

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,5

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 40,1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 4
y = -5

[State 105, 1]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .5

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 2
StateType = A
physics = N

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse((77*fvar(10))<7,7,(77*fvar(10)))),ceil(ifelse((77*fvar(10)/8)<7,7,(77*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = HA
pausetime = ceil(12*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -20, -36
hitsound = S2,5
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -8
guard.velocity = -8
air.velocity = -6.5,-4.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .49
persistent = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -36

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**0)
trigger1 = command = "holdfwd"
var(6) = 2**0

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**1)
trigger1 = command = "holdup"
var(6) = 2**1

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**2)
trigger1 = command = "holdback"
var(6) = 2**2

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**3)
trigger1 = command = "holddown"
var(6) = 2**3

[State 100, 5]
type = ChangeState
triggerall = !var(59)
triggerall = roundstate = 2
triggerall = !(var(6)&2**2) && !(var(6)&2**3)
trigger1 = var(6)&2**0
value = 1160
ignorehitpause = 0

[State 100, 5]
type = ChangeState
triggerall = !var(59)
triggerall = roundstate = 2
triggerall = !(var(6)&2**0) && !(var(6)&2**2) && !(var(6)&2**3)
trigger1 = var(6)&2**1
value = 1150
ignorehitpause = 0

[State 100, 5]
type = ChangeState
triggerall = var(59)
triggerall = roundstate = 2
triggerall = !var(6)
triggerall = var(36) = [1,2]
trigger1 = P2statetype = S || P2statetype = C
trigger1 = frontedgedist > 90
trigger1 = random = [50,900]
value = 1160
ignorehitpause = 0

[State 100, 5]
type = ChangeState
triggerall = var(59)
triggerall = roundstate = 2
triggerall = !var(6)
triggerall = var(36) = [1,2]
trigger1 = frontedgedist <= 90
trigger1 = random = [50,950]
trigger2 = random = [50,200]
value = 1150
ignorehitpause = 0

[State 100, 5]
type = VarSet
triggerall = var(6) != -1
trigger1 = var(36) = [1,2]
var(6) = -1
ignorehitpause = 0

[State 1100, ChangeState]
type = ChangeState
triggerall = animelemtime(2) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1135

;---------------------------------------------------------------------------
;リットナーストライク（ハイ）（着地）
[Statedef 1135]
type    = S
physics = S
ctrl = 0
anim = 1135
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーストライク（回転回避）
[Statedef 1140]
type    = S
physics = N
ctrl = 0
anim = 1140

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = VelSet
trigger1 = AnimElem = 1
x = 10

[State 52, 2]
type = VelMul
trigger1 = AnimElemTime(5) < 0
x = .92

[State 52, 2]
type = VelSet
trigger1 = AnimElem = 5
x = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100,11
channel = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,4

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 52,0

[State 810, AfterImage]
type = Afterimage
triggerall = !var(16)
trigger1 = AnimElem = 1
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーストライク（緊急回避）
[Statedef 1145]
type    = S
physics = N
ctrl = 0
anim = 1145

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = VelSet
trigger1 = Time = 0
x = 10

[State 52, 2]
type = VelMul
trigger1 = AnimElemTime(7) < 0
x = .95

[State 52, 2]
type = VelSet
trigger1 = AnimElem = 7
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = AnimElemTime(7) < 0
value = SCA, NT,ST,HT

[State 810, Push]
type = PlayerPush
trigger1 = AnimElemTime(7) < 0
value = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100,11
channel = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 800,50

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 52,0

[State 810, AfterImage]
type = Afterimage
triggerall = !var(16)
trigger1 = AnimElem = 1
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーストライク（予備動作）（正面撃ち）
[Statedef 1150]
type    = A
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
anim = 1150

[State 3001, Width]
type = Width
trigger1 = 1
edge = 20,0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 40,1

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,0
channel = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,4

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100,4

[State 1100, Velocity]
type = VelSet
triggerall = !var(59)
trigger1 = AnimElem = 1
trigger1 = !(var(6)&2**1) && (var(6)&2**2)
x = -5
y = -9

[State 1100, Velocity]
type = VelSet
triggerall = !var(59)
trigger1 = AnimElem = 1
trigger1 = (var(6)&2**1) && (var(6)&2**2)
x = -2.5
y = -10

[State 1100, Velocity]
type = VelSet
triggerall = !var(59)
trigger1 = AnimElem = 1
trigger1 = (var(6)&2**1) && !(var(6)&2**2)
x = 0
y = -11

[State 1100, Velocity]
type = VelSet
triggerall = var(59)
trigger1 = AnimElem = 1
x = 0
y = -11

[State 1100, Velocity]
type = VelSet
triggerall = var(59)
triggerall = AnimElem = 1
triggerall = prevstateno != 1130
trigger1 = !var(17)
trigger2 = frontedgedist < 60
trigger3 = var(17)
trigger3 = P2bodydist Y >= 120 
x = -5
y = -9

[State 1100, Velocity]
type = VelSet
triggerall = var(59)
triggerall = AnimElem = 1
triggerall = prevstateno != 1130
trigger1 = !var(17)
trigger1 = random = [300,320]
x = -2.5
y = -10

[State 105, 1]
type = VelMul
trigger1 = 1
x = .98

[State 105, 1]
type = VelAdd
trigger1 = 1
y = .6

[State 810, AfterImage]
type = Afterimage
triggerall = !var(16)
trigger1 = AnimElem = 1
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 1100, ChangeState]
type = ChangeState
triggerall = !var(59)
triggerall = time > 15
triggerall = Pos Y <= -30
trigger1 = command = "x" || command = "y" || command = "z"
value = 1151

[State 1100, ChangeState]
type = ChangeState
triggerall = var(59)
triggerall = time > 15
triggerall = Pos Y <= -30
trigger1 = random = [0,250+((var(17)>=1)*500)]
value = 1151

[State 1100, ChangeState]
type = ChangeState
triggerall = animelemtime(2) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1135

;---------------------------------------------------------------------------
;リットナーストライク（射撃）（正面撃ち）
[Statedef 1151]
type    = A
movetype = A
physics = N
ctrl = 0
anim = 1151

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 0
channel = 0

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 3

[State 920, 0]
type = VelAdd
trigger1 = time = 1
x = -1.5

[State 920, 0]
type = VelSet
trigger1 = time = 1
y = -8.5

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .6

[State 920, 0]
type = PosFreeze
trigger1 = AnimElemTime(2) < 0

[State 1000,Super]
type = Helper
trigger1 = time = 0
id = 7000
name = "air_shoot1"
pos = ceil(50*const(size.xscale)),ceil(-15*const(size.yscale))
postype = P1
stateno = 7000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1135

;---------------------------------------------------------------------------
;リットナーストライク（正面撃ち）（飛び道具）
[Statedef 7000]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7000
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 15
y = 15

[State 5035, 1]
type = AngleSet
trigger1 = 1
value = ceil((atan(((vel x)+.000001)/((vel y)+.000001))*180)/pi)-(90*ifelse(vel y < 0, -1, 1))

[State 5035, 1]
type = AngleDraw
trigger1 = 1
scale = .5,.5

[State 5035, 1]
type = Trans
trigger1 = 1
trans = add

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(1005) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(1005) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
trigger1 = time = 1
projanim = 7050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = S, SP
damage=ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10)))),ceil(ifelse((56*fvar(10)/8)<7,7,(56*fvar(10)/8)))
animtype = Heavy
hitflag = MAFD
guardflag = MA
pausetime = 4,ceil(9*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -4.5,-6
guard.velocity = -8
air.velocity = -4.5,-6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,ifelse(root,prevstateno=1200,8,8-(var(5)!=2)))
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
ProjID = 1005
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = .5
nochainID = root,var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(1005) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1005) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7006

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1005)
value = 7005

;---------------------------------------------------------------------------
;リットナーストライク（正面撃ち）（飛び道具）（消滅）
[Statedef 7005]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 8321

[State -3, Blocking5]
type = helper
triggerall = !NumHelper(8130)
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1005) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = .33,.33

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1100, Voice]
type = PlaySnd
triggerall = prevstateno != 7009
triggerall = !parent,var(36)
trigger1 = time = 1
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;リットナーストライク（正面撃ち）（飛び道具）（消滅）2
[Statedef 7006]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 8321

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = .33,.33

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1100, Voice]
type = PlaySnd
trigger1 = time = 1
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;リットナーストライク（予備動作）（逆さ撃ち）
[Statedef 1160]
type    = A
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
anim = 1160

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 40,1

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,0
channel = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,4

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1100,4

[State 1100, Velocity]
type = VelSet
triggerall = !var(59)
trigger1 = AnimElem = 1
trigger1 = (var(6)&2**0) && !(var(6)&2**1)
x = 12.5
y = -7.5

[State 1100, Velocity]
type = VelSet
triggerall = !var(59)
trigger1 = AnimElem = 1
trigger1 = (var(6)&2**0) && (var(6)&2**1)
x = 10
y = -9

[State 1100, Velocity]
type = VelSet
triggerall = var(59)
trigger1 = AnimElem = 1
x = 12.5
y = -7.5

[State 1100, Velocity]
type = VelSet
triggerall = var(59)
trigger1 = AnimElem = 1
trigger1 = random = [500,520]
x = 10
y = -9

[State 105, 1]
type = VelMul
trigger1 = 1
x = .98

[State 105, 1]
type = VelAdd
trigger1 = 1
y = .6

[State 810, AfterImage]
type = Afterimage
triggerall = !var(16)
trigger1 = AnimElem = 1
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 1100, ChangeState]
type = ChangeState
triggerall = !var(59)
triggerall = time > 15
triggerall = Pos Y <= -30
trigger1 = command = "x" || command = "y" || command = "z"
value = 1161

[State 1100, ChangeState]
type = ChangeState
triggerall = var(59)
triggerall = time > 18
triggerall = Pos Y <= -30
trigger1 = random = [0,550+((var(17)>=1)*400)]
value = 1161

[State 1100, ChangeState]
type = ChangeState
triggerall = animelemtime(2) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1165

;---------------------------------------------------------------------------
;リットナーストライク（射撃）（逆さ撃ち）
[Statedef 1161]
type    = A
movetype = A
physics = N
ctrl = 0
anim = 1161

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 0
channel = 0

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 3

[State 920, 0]
type = VelAdd
trigger1 = time = 1
x = -1.5

[State 920, 0]
type = VelSet
trigger1 = time = 1
y = -8.5

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .6

[State 920, 0]
type = PosFreeze
trigger1 = AnimElemTime(2) < 0

[State 1000,Super]
type = Helper
trigger1 = time = 0
id = 7001
name = "air_shoot2"
pos = ceil(-84*const(size.xscale)),ceil(-28*const(size.yscale))
postype = P1
stateno = 7001
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1205

;---------------------------------------------------------------------------
;リットナーストライク（逆さ撃ち）（着地）
[Statedef 1165]
type    = S
physics = S
ctrl = 0
anim = 1165

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = VelSet
trigger1 = vel x < 1
x = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーストライク（逆さ撃ち）（飛び道具）
[Statedef 7001]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7000
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = -15
y = 5

[State 5035, 1]
type = AngleSet
trigger1 = 1
value = ceil((atan(((vel x)+.000001)/((vel y)+.000001))*180)/pi)-(90*ifelse(vel y < 0, -1, 1))

[State 5035, 1]
type = AngleDraw
trigger1 = 1
scale = .5,.5

[State 5035, 1]
type = Trans
trigger1 = 1
trans = add

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(1005) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(1005) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
trigger1 = time = 1
projanim = 7051
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = S, SP
damage=ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10)))),ceil(ifelse((56*fvar(10)/8)<7,7,(56*fvar(10)/8)))
animtype = Heavy
hitflag = MAFD
guardflag = MA
pausetime = 4,ceil(9*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -4.5,-6
guard.velocity = -8
air.velocity = -4.5,-6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,ifelse(root,prevstateno=1200,8,8-(var(5)!=2)))
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
ProjID = 1005
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = .5
nochainID = root,var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(1005) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1005) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = BackEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7006

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1005)
value = 7005

;---------------------------------------------------------------------------
;リットナーストライク（予備動作）（背面撃ち）
[Statedef 1170]
type    = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0
anim = 1170

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 40,1

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 0
channel = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,4

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1100,4

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 15

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 9
x = 0

[State 105, 1]
type = VelMul
trigger1 = 1
x = .95

[State 105, Push]
type = PlayerPush
trigger1 = animelemtime(6) < 0
value = 0

[State 810, AfterImage]
type = Afterimage
triggerall = !var(16)
trigger1 = AnimElem = 1
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 1100, ChangeState]
type = ChangeState
triggerall = !var(59)
triggerall = animelemtime(9) >= 0
triggerall = animelemtime(10) < 0
trigger1 = command = "x" || command = "y" || command = "z"
value = 1171

[State 1100, ChangeState]
type = ChangeState
triggerall = var(59)
triggerall = animelemtime(9) >= 4
triggerall = animelemtime(10) < 0
trigger1 = random = [0,600+((var(17)>=1)*400)]
value = 1171

[State 1100, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーストライク（射撃）（背面撃ち）
[Statedef 1171]
type    = S
movetype = A
physics = N
ctrl = 0
anim = 1171

[State 1100, VarSet]
type = VarSet
trigger1 = time = 0
var(6) = 0

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 0
channel = 0

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 3

[State 1000,Super]
type = Helper
trigger1 = time = 0
id = 7002
name = "ground_shoot1"
pos = ceil(-84*const(size.xscale)),ceil(-68*const(size.yscale))
postype = P1
stateno = 7002
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーストライク（背面撃ち）（飛び道具）
[Statedef 7002]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7000
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = -15

[State 5035, 1]
type = AngleSet
trigger1 = 1
value = ceil((atan(((vel x)+.000001)/((vel y)+.000001))*180)/pi)-(90*ifelse(vel y < 0, -1, 1))

[State 5035, 1]
type = AngleDraw
trigger1 = 1
scale = .5,.5

[State 5035, 1]
type = Trans
trigger1 = 1
trans = add

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(1005) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(1005) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
trigger1 = time = 1
projanim = 7052
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = S, SP
damage=ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10)))),ceil(ifelse((56*fvar(10)/8)<7,7,(56*fvar(10)/8)))
animtype = Heavy
hitflag = MAFD
guardflag = MA
pausetime = 4,ceil(9*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -4.5,-6
guard.velocity = -8
air.velocity = -4.5,-6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,ifelse(root,prevstateno=1200,8,8-(var(5)!=2)))
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
ProjID = 1005
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = .5
nochainID = root,var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(1005) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1005) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = BackEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7006

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1005)
value = 7005

;---------------------------------------------------------------------------
;スナイプエアー
[Statedef 1200]
type    = S
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 1200

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(Command = "スナイプエアー1", 0, ifelse(Command = "スナイプエアー2", 1, 2))

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(5) = random%2

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = numtarget
var(5) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(6) = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 40,1

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,0
channel = 0

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 3
StateType = A
physics = N

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 3
y = -10-(var(5)*1.5)

[State 105, 1]
type = VelAdd
trigger1 = animelemtime(3) > 0
y = .6

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 3
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = !var(59)
triggerall = time >= 18
triggerall = Pos Y <= -30
trigger1 = command = "x"
value = 1201

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = !var(59)
triggerall = time >= 18
triggerall = Pos Y <= -30
trigger1 = command = "y"
value = 1211

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = !var(59)
triggerall = time >= 18
triggerall = Pos Y <= -30
trigger1 = command = "z"
value = 1221

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = !var(59)
triggerall = time >= 18
triggerall = Pos Y <= -30
trigger1 = command = "a" || command = "b" || command = "c"
value = 1300

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
triggerall = time >= 18
triggerall = Pos Y <= -60
trigger1 = !var(17)
trigger1 = random = [100,350]
trigger1 = !enemynear,numproj
value = 1300

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
triggerall = time >= 18
triggerall = Pos Y <= -60
triggerall = P2bodydist Y > 30
trigger1 = P2statetype = S || P2statetype = C
trigger1 = !var(17)
trigger1 = random = [100,180]
trigger2 = enemynear,numproj
trigger2 = random = [100,250]
value = 1201

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
triggerall = time >= 18
triggerall = Pos Y <= -60
triggerall = P2bodydist X = [0,130]
triggerall = P2bodydist Y > 30
trigger1 = var(17)
trigger1 = random = [100,700]
trigger2 = P2bodydist X = [50,150]
trigger2 = enemynear,numproj
trigger2 = random = [100,750]
trigger3 = random = [100,120]
value = 1211

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
triggerall = time >= 18
triggerall = Pos Y <= -60
triggerall = P2bodydist X = [0,150]
triggerall = P2bodydist Y > 30
trigger1 = var(17)
trigger1 = random = [100,700]
trigger2 = random = [100,120]
trigger2 = Pos Y > -120
trigger2 = P2bodydist X = [50,150]
value = 1221

[State 1100, ChangeState]
type = ChangeState
triggerall = animelemtime(3) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1135

;---------------------------------------------------------------------------
;スナイプエアー（矢）
[Statedef 1201]
type    = A
movetype = A
physics = N
ctrl = 0
anim = 1201

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,4

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 0
channel = 0

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100, 4

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 9
value = 1100, 7

[State 920, 0]
type = VelAdd
trigger1 = AnimElem = 10
x = -1

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 1
x = -.5
y = -6

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 10
y = -6

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(10) > 0
x = .98

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(9) < 0
y = .4

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(10) > 0
y = .5

[State 920, 0]
type = PosFreeze
trigger1 = AnimElemTime(9) > 0
trigger1 = AnimElemTime(10) <= 0

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 9
id = 7010
name = "air_shoot2"
pos = ceil(66*const(size.xscale)),0;ceil(0*const(size.yscale))
postype = P1
stateno = 7010
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = !var(59)
triggerall = time >= 31
triggerall = Pos Y <= -30
trigger1 = command = "x"
value = 1202

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = !var(59)
triggerall = time >= 31
triggerall = Pos Y <= -30
trigger1 = command = "y"
value = 1212

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = !var(59)
triggerall = time >= 31
triggerall = Pos Y <= -30
trigger1 = command = "z"
value = 1222

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
triggerall = time >= 36
triggerall = Pos Y <= -30
triggerall = P2bodydist Y > 30
trigger1 = P2bodydist X = [0,240]
trigger1 = P2statetype = S || P2statetype = C
trigger1 = var(17)
trigger1 = random = [100,800]
trigger2 = !var(17)
trigger2 = random = [100,250]
value = 1202

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
triggerall = time >= 36
triggerall = Pos Y <= -30
triggerall = P2bodydist X = [0,130]
triggerall = P2bodydist Y > 30
trigger1 = P2bodydist X = [50,150]
trigger1 = random = [100,250]
value = 1212

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
triggerall = time >= 36
triggerall = Pos Y <= -30
triggerall = P2bodydist X = [0,150]
triggerall = P2bodydist Y > 30
trigger1 = P2bodydist X = [50,150]
trigger1 = random = [100,210]
trigger1 = Pos Y > -120
value = 1222

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1205

;---------------------------------------------------------------------------
;スナイプエアー（矢）（追加）
[Statedef 1202]
type    = A
movetype = A
physics = N
ctrl = 0
anim = 1202

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 7

[State 920, 0]
type = VelAdd
trigger1 = AnimElem = 2
x = -1

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 2
y = -6+((prevstateno=1202)*2)

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .5

[State 920, 0]
type = PosFreeze
trigger1 = AnimElemTime(2) <= 0

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 1
id = 7010
name = "air_shoot2"
pos = ceil(66*const(size.xscale)),0;ceil(0*const(size.yscale))
postype = P1
stateno = 7010
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = !var(59)
triggerall = time >= 15
triggerall = prevstateno != 1202
triggerall = Pos Y <= -30
trigger1 = command = "x"
value = 1202

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = !var(59)
triggerall = time >= 15
triggerall = prevstateno != 1202
triggerall = Pos Y <= -30
trigger1 = command = "y"
value = 1212

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = !var(59)
triggerall = time >= 15
triggerall = prevstateno != 1202
triggerall = Pos Y <= -30
trigger1 = command = "z"
value = 1222

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
triggerall = time >= 20
triggerall = prevstateno != 1202
triggerall = Pos Y <= -30
triggerall = P2bodydist X = [0,130]
triggerall = P2bodydist Y > 30
trigger1 = P2bodydist X = [50,150]
trigger1 = random = [100,900]
value = 1212

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
triggerall = time >= 20
triggerall = prevstateno != 1202
triggerall = Pos Y <= -30
triggerall = P2bodydist X = [0,150]
triggerall = P2bodydist Y > 30
trigger1 = P2bodydist X = [50,150]
trigger1 = Pos Y > -120
trigger1 = random = [100,900]
value = 1222

[State 1100, ChangeState]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
triggerall = time >= 20
triggerall = prevstateno != 1202
triggerall = Pos Y <= -30
triggerall = P2bodydist Y > 30
trigger1 = !var(17)
trigger1 = random = [100,200]
value = 1202

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1205

;---------------------------------------------------------------------------
;スナイプエアー（着地）
[Statedef 1205]
type    = S
physics = S
ctrl = 0
anim = 1205
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スナイプエアー（矢）（飛び道具）
[Statedef 7010]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7010
sprpriority = 4

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State 1100, Velocity]
type = VelSet
trigger1 = time = 1
x = 15
y = 15

[State 5035, 1]
type = AngleSet
trigger1 = 1
value = -45

[State 5035, 1]
type = AngleDraw
trigger1 = 1

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(1015) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(1015) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
trigger1 = time = 1
projanim = 7060
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = S, SP
damage=ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10)))),ceil(ifelse((28*fvar(10)/8)<7,7,(28*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(9*(2-(var(16)>0))/2)
sparkno = S8800+(random%64)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,12
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -4.5,-6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
ProjID = 1015
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = .5
nochainID = root,var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(1015) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1005) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = root,projguardedtime(1015) = 1
value = 7016

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1015)
value = 7015

;---------------------------------------------------------------------------
;スナイプエアー（矢）（消滅）
[Statedef 7015]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7015

[State -3, Blocking5]
type = helper
triggerall = !NumHelper(8130)
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1005) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 9000, Assert]
type = AssertSpecial
trigger1 = time > 4
flag = noshadow
ignorehitpause = 1

[State 5035, 1]
type = Trans
trigger1 = time > 4
trans = add

[State 220, Position]
type = PalFx
trigger1 = time > 4
mul = 256-((time-4)*16),256-((time-4)*16),256-((time-4)*16)
time = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 20

;---------------------------------------------------------------------------
;スナイプエアー（矢）（消滅）2
[Statedef 7016]
type    = S
movetype = I
physics = N
ctrl = 0

[State 900, 4]
type = VarAdd
triggerall = time > 1
trigger1 = time%2 = 0
var(2) = 30

[State 900, 4]
type = AngleSet
trigger1 = 1
value = var(2)%360

[State 900, 4]
type = AngleDraw
trigger1 = 1

[State 900, 4]
type = VelMul
trigger1 = time = 0
x = .075
y = -.33

[State 900, 4]
type = VelAdd
trigger1 = 1
y = .25

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1055) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, ChangeState]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7017

;---------------------------------------------------------------------------
;スナイプエアー（矢）（地面）
[Statedef 7017]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = time = 0
y = 0

[State 900, 4]
type = AngleSet
trigger1 = time = 0
value = ifelse((var(2)%360=[90,270]),180,0)

[State 900, 4]
type = AngleDraw
trigger1 = 1

[State 9000, Assert]
type = AssertSpecial
trigger1 = time > 8
flag = noshadow
ignorehitpause = 1

[State 5035, 1]
type = Trans
trigger1 = time > 8
trans = add

[State 220, Position]
type = PalFx
trigger1 = time > 8
mul = 256-((time-8)*16),256-((time-8)*16),256-((time-8)*16)
time = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 24

;---------------------------------------------------------------------------
;スナイプエアー（電撃）
[Statedef 1211]
type    = A
movetype = A
physics = N
ctrl = 0
anim = 1211

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,4

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 1
channel = 0

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100, 4

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 9
value = 1100, 3

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 9
value = 1100, 5

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 1
x = -.5
y = -6

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 17
x = -2
y = -8.5

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(17) > 0
x = .98

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(9) < 0
y = .4

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(17) > 0
y = .6

[State 920, 0]
type = PosFreeze
trigger1 = AnimElemTime(9) > 0
trigger1 = AnimElemTime(17) <= 0

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 9
id = 7020
name = "air_shoot3"
pos = ceil(40*const(size.xscale)),ceil(-25*const(size.yscale))
postype = P1
stateno = 7020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimElemTime(10) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1205

;---------------------------------------------------------------------------
;スナイプエアー（電撃）（追加）
[Statedef 1212]
type    = A
movetype = A
physics = N
ctrl = 0
anim = 1212

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 1
channel = 0

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 3

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 5

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 8
x = -2
y = -8.5

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(8) > 0
x = .98

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(8) > 0
y = .6

[State 920, 0]
type = PosFreeze
trigger1 = AnimElemTime(8) <= 0

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 1
id = 7020
name = "air_shoot3"
pos = ceil(40*const(size.xscale)),ceil(-25*const(size.yscale))
postype = P1
stateno = 7020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1205

;---------------------------------------------------------------------------
;スナイプエアー（電撃）（飛び道具）
[Statedef 7020]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7020
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State 1000, 0]
type = BindToRoot
trigger1 = AnimElemTime(8) < 0
pos = ceil(40*root,const(size.xscale)),ceil(-25*root,const(size.yscale))

[State 5035, 1]
type = AngleSet
trigger1 = 1
value = -135

[State 5035, 1]
type = AngleDraw
trigger1 = 1

[State 5035, 1]
type = Trans
trigger1 = 1
trans = add

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(1025) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(1025) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
trigger1 = animelem = 2
projanim = 7070
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = 16
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = S, SP
damage=ceil(ifelse((84*fvar(10))<7,7,(84*fvar(10)))),ceil(ifelse((84*fvar(10)/8)<7,7,(84*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(9*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(P2dist x)-20, ceil(P2dist y)-60
hitsound = S2,17
guardsound = S1,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -4.5,-6
guard.velocity = -8
air.velocity = -4.5,-6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
ProjID = 1025
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
forcestand = 1
yaccel = .5
nochainID = root,var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(1025) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1025) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = ceil(P2dist x)-20, ceil(P2dist y)-60
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;スナイプエアー（火炎放射）
[Statedef 1221]
type    = A
movetype = A
physics = N
ctrl = 0
anim = 1221

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,4

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 2
channel = 0

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100, 4

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 9
value = 1100, 6

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 1
x = -.5
y = -6

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 9
x = -.2
y = -.2

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(9) < 0
y = .4

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 9
id = 7030
name = "air_shoot4"
pos = ceil(36*const(size.xscale)),ceil(-36*const(size.yscale))
postype = P1
stateno = 7030
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = time > 32
trigger1 = !numprojID(1035)
value = 1223

;---------------------------------------------------------------------------
;スナイプエアー（火炎放射）（追加）
[Statedef 1222]
type    = A
movetype = A
physics = N
ctrl = 0
anim = 1222

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 2
channel = 0

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 6

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 1
x = -.2
y = -.2

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 1
id = 7030
name = "air_shoot4"
pos = ceil(36*const(size.xscale)),ceil(-36*const(size.yscale))
postype = P1
stateno = 7030
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = time > 16
trigger1 = !numprojID(1035)
value = 1223

;---------------------------------------------------------------------------
;スナイプエアー（火炎放射）（終了）
[Statedef 1223]
type    = A
movetype = A
physics = N
ctrl = 0
anim = 1223

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 1
x = -2
y = -8.5

[State 105, 1]
type = VelMul
trigger1 = 1
x = .98

[State 920, 0]
type = VelAdd
trigger1 = 1
y = .6

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1205

;---------------------------------------------------------------------------
;スナイプエアー（火炎放射）（飛び道具）
[Statedef 7030]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7030
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, 0]
type = BindToRoot
trigger1 = 1
pos = 105,-45

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State 1000, 0]
type = BindToRoot
trigger1 = 1
pos = ceil(36*root,const(size.xscale)),ceil(-36*root,const(size.yscale))

[State 5035, 1]
type = AngleSet
trigger1 = 1
value = -45

[State 5035, 1]
type = AngleDraw
trigger1 = 1
scale = 1.5,1.5

[State 5035, 1]
type = Trans
trigger1 = 1
trans = add

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(1035) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(1035) = 1
var(4) = 1
persistent = 0

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(1035) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State 1000, Proj]
type = Projectile
trigger1 = time = 8
projanim = 7080
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = 40
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = S, SP
damage= ceil(ifelse((91*fvar(10))<7,7,(91*fvar(10)))),ceil(ifelse((91*fvar(10)/8)<7,7,(91*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(9*(2-parent,var(18))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(P2dist x)-20, ceil(P2dist y)-60
hitsound = S2,16
guardsound = S1,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.ctrltime = 18
ground.velocity = -4.5, -6
guard.velocity = -8
air.velocity = -4.5, -6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
ProjID = 1035
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
palfx.color = 64
palfx.add = 100,40,50
palfx.mul = 90,50,40
palfx.time = 40
forcestand = 1
yaccel = .5
nochainID = root,var(40)

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1035) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = ceil(P2dist x)-20, ceil(P2dist y)-60
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 900, 4]
type = ChangeState
triggerall = time > 8
trigger1 = time > 8 && !root,NumProjID(1035)
trigger2 = time = 49
trigger3 = root,movetype = H
value = 7031

;---------------------------------------------------------------------------
;スナイプエアー（火炎放射）（消滅）
[Statedef 7031]
type = A
movetype = I
physics = N
ctrl = 0
ownpal = 1
sprpriority = 5
velset = 0,0
anim = 7031

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State -3, Blocking5]
type = helper
triggerall = !NumHelper(8130)
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1035) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = ceil(P2dist x)-20, ceil(P2dist y)-60
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 5035, 1]
type = AngleSet
trigger1 = 1
value = -45

[State 5035, 1]
type = AngleDraw
trigger1 = time > 0
scale = 1.5,1.5

[State 5035, 1]
type = Trans
trigger1 = 1
trans = add

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;スナイプエアー（電撃）（相手）1
[Statedef 1250]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 902, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3003, ChangeAnim]
type = ChangeAnim
triggerall = Time < 13 && SelfAnimExist(5950)
trigger1 = AuthorName = "Tin" || AuthorName = "Mouser" || AuthorName = "H”" || AuthorName = "adamskie" 
trigger2 = AuthorName = "M.M.R." || AuthorName = "ryokucha" || AuthorName = "Bad Darkness" || AuthorName = "Third"
trigger3 = AuthorName = "CAMRAT Type KOF" || AuthorName = "keyu" || AuthorName = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "SUMI" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat"
value = 5950

[State 3003, ChangeAnim]
type = ChangeAnim2
trigger1 = Time < 13 && anim != 5950
value = 1250

[State 3003, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1250 && animtime = 0
value = 5080

[State 105, 1]
type = statetypeset
triggerall = Anim = 5950 || Anim = 5080
trigger1 = AnimElemTime(AnimElemNo(0)+1)=0
statetype = L

[State 3450,1]
type = ChangeAnim
triggerall = Anim = 5950 || Anim = 5080
trigger1 = AnimElemTime(AnimElemNo(0)+1)=0
value = ifelse(SelfAnimExist(5112)&&Anim = 5950, 5112, 5110)

[State 3002, ChangeAnim]
type = SelfState
triggerall = Time >= 100
trigger1 = anim = 5110
trigger2 = anim = 5112
value = ifelse(alive, 5120, 5150)

;---------------------------------------------------------------------------
;空中リットナーストライク
[Statedef 1300]
type = A
movetype = A
physics = N
anim = 1300
ctrl = 0
poweradd = 70*(1000+var(24))/1000*ifelse(var(15)||var(16),0,1)*(prevstateno!=1200)
velset = 0,0
juggle = 8

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(Command = "a", 0, ifelse(Command = "b", 1, 2))

[State 7000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
fvar(17) = ifelse((P2bodydist x=[0,1]),1,ifelse((P2bodydist x=[-1,0]),-1,P2dist x))

[State 7000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
fvar(18) = ifelse((P2bodydist y=[0,1]),1,ifelse((P2bodydist y=[-1,0]),-1,P2dist y))

[State 3001, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
ignorehitpause = 1
var(5) = ifelse((ceil((atan(fvar(17)/fvar(18))*180)/pi)-(90*ifelse(P2bodydist Y<0,-1,1)))>20,1+(random%2),random%2)

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(6) = 0

[State 1000, 8]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,2
channel = 0

[State 1000, 8]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 5
channel = 1

[State 1000, 8]
type = velset
trigger1 = AnimElem = 4
x = 4+var(5)
Y = 5.5

[State 903, Vel]
type = veladd
trigger1 = AnimElemTime(4) > 0
y = .49

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = A, SA
damage = ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10)))),ceil(ifelse((49*fvar(10)/8)<7,7,(49*fvar(10)/8)))
animtype = Heavy
guardflag = HA
hitflag = MAF
hitsound = s2,5
guardsound = s1,0
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(14*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = s8105
sparkxy = -10,-22
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.ctrltime = 15
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -5, -5.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -22

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**0)
trigger1 = command = "holdfwd"
var(6) = 2**0

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**1)
trigger1 = command = "holdup"
var(6) = 2**1

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**2)
trigger1 = command = "holdback"
var(6) = 2**2

[State 3001, VarSet]
type = VarAdd
triggerall = !var(59)
triggerall = var(6) >= 0
triggerall = var(36) = [1,2]
trigger1 = !(var(6)&2**3)
trigger1 = command = "holddown"
var(6) = 2**3

[State 100, 5]
type = ChangeState
triggerall = !var(59)
triggerall = roundstate = 2
triggerall = prevstateno != 1200
triggerall = !(var(6)&2**2) && !(var(6)&2**3)
trigger1 = (var(6)&2**0) && (var(6)&2**1)
value = 1160
ignorehitpause = 0

[State 100, 5]
type = ChangeState
triggerall = !var(59)
triggerall = roundstate = 2
triggerall = prevstateno != 1200
triggerall = !(var(6)&2**3)
trigger1 = var(6)&2**1
value = 1150
ignorehitpause = 0

[State 100, 5]
type = ChangeState
triggerall = var(59)
triggerall = roundstate = 2
triggerall = prevstateno != 1200
triggerall = !var(6)
triggerall = var(36) = [1,2]
trigger1 = random = [100,140]
value = 1150
ignorehitpause = 0

[State 100, 5]
type = ChangeState
triggerall = var(59)
triggerall = roundstate = 2
triggerall = prevstateno != 1200
triggerall = !var(6)
triggerall = var(36) = [1,2]
trigger1 = frontedgedist > 120
trigger1 = random = [100,110]
value = 1160
ignorehitpause = 0

[State 100, 5]
type = VarSet
triggerall = var(6) != -1
trigger1 = var(36) = [1,2]
var(6) = -1
ignorehitpause = 0

[State 1320, 9]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1305

;---------------------------------------------------------------------------
;空中リットナーストライク（着地）
[Statedef 1305]
type    = S
physics = S
ctrl = 0
anim = 1305
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;シモン！
[Statedef 1400]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
poweradd = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(Command = "シモン！1", 0, ifelse(Command = "シモン！2", 1, 2))

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(5) = ifelse(floor(P2dist X*.0125)<0,0,ifelse(floor(P2dist X*.0125)>2,2,floor(P2dist X*.0125)))

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 1400, ifelse(var(5) = 1, 1410, 1420))

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 221, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 5100, 1

[State 221, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1400, 0
channel = 0

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElem = 5
time = 12
ampl = 3

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 5
Anim = 7501
pos = ceil(16*const(size.xscale)),0
postype = p1
ownpal = 1
sprpriority = 3

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 5
id = 7500
name = "ground"
pos = 60+(var(5)*80),0
postype = P1
stateno = 7500
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1000,Super]
type = Helper
triggerall = !NumHelper(20000)
trigger1 = AnimElem = 5
id = 20000
name = "simon"
pos = 60+(var(5)*80),0
postype = P1
stateno = 20000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
damage = ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10)))),ceil(ifelse((28*fvar(10)/8)<7,7,(28*fvar(10)/8)))
animtype = Heavy
guardflag = L
hitflag = MAF
hitsound = s2,5
guardsound = s1,0
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(14*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = s8105
sparkxy = -10,-5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -.5
guard.velocity = -8
air.velocity = -.5, -6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -5

[State 221, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;地面
[Statedef 7500]
ctrl = 0
anim = 7500
sprpriority = 3

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 221, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1400, 1

[State 221, 3]
type = ChangeState
triggerall = !root,NumHelper(20000)
trigger1 = time > 36
value = 7501

;---------------------------------------------------------------------------
;地面
[Statedef 7501]
ctrl = 0

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 8200, Transparency]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256-(time*16),time*16

[State 8200, Destroy]
type = DestroySelf
trigger1 = time = 16

;---------------------------------------------------------------------------
;シモン！（出現）
[Statedef 20000]
type    = S
movetype = A
physics = N
ctrl = 0
anim = 20000
velset = 0,0
sprpriority = 2

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = root,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = root,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = root,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = root,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = root,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = root,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = root,fvar(10)

[State 221, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1400, 3

[State 810, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 20010
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 3001, VarAdd]
type = VarAdd
trigger1 = movehit
var(0) = 1
ignorehitpause = 1

[State 1000,Super]
type = Helper
triggerall = !NumHelper(7600)
trigger1 = AnimElem = 2
id = 7600
name = "dust"
pos = 0,0
postype = P1
stateno = 7600
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = .67
size.yscale = .67

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SP
damage = ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10)))),ceil(ifelse((14*fvar(10)/8)<7,7,(14*fvar(10)/8)))
animtype = Heavy
guardflag = M
hitflag = MAF
hitsound = s2,12
guardsound = s1,0
pausetime = ceil(6*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8800+(random%64)
guard.sparkno = s8105
sparkxy = -10,-30
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 0
guard.velocity = -8
air.velocity = -.5, -8.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = ifelse(var(17),35,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -30

;時間停止によるガード不能
[State 3000, preventguard]
type = AssertSpecial
trigger1 = root,fvar(36) > 0
flag = unguardable

;ガード音追加
[State 5900, 3];剣
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Tin's Kibagami"
trigger2 = target,name = "Tin's Shiki"
trigger3 = target,name = "YUNFEI"
trigger4 = target,name = "AMAKUSA SHIRO TOKISADA"
trigger5 = target,name = "Apocalypse"
trigger6 = target,name = "Arthur"
trigger7 = target,name = "Major D.Schaefer"
trigger8 = target,name = "Axl Low"
trigger9 = target,name = "Baiken"
trigger10 = target,name = "Dr.baldhead"

trigger11 = target,name = "basara"
trigger12 = target,name = "Benten"
trigger13 = target,name = "Oboro Bishamon"
trigger14 = target,name = "Bishamon"
trigger15 = target,name = "blackpolnareff"
trigger16 = target,name = "Charlotte"
trigger17 = target,name = "Chipp Zanuff"
trigger18 = target,name = "CLESS ALVEIN"
trigger19 = target,name = "nakoruru"
trigger20 = target,name = "Donovan"

trigger21 = target,name = "Foxy"
trigger22 = target,name = "galford"
trigger23 = target,name = "Kibagami Genjuro"
trigger24 = target,name = "GUNDAM HEAVY ARMS"
trigger25 = target,name = "God Gundam"
trigger26 = target,name = "GUNDAM EPYON"
trigger27 = target,name = "Hattori Hanzo"
trigger28 = target,name = "Haohmaru"
trigger29 = target,name = "Hikaru" && target,authorname = "Nyan☆Kiryu"
trigger30 = target,name = "Strider Hiryu"

trigger31 = target,name = "Janne Dulk"
trigger32 = target,name = "Yagyu Jubei"
trigger33 = target,name = "Kanzaki Juzo"
trigger34 = target,name = "kaede"
trigger35 = target,name = "Kaede by Ribeiro"
trigger36 = target,name = "Shinnosuke Kagami"
trigger37 = target,name = "Shinnosuke Kagami By Third"
trigger38 = target,name = "Karasu"
trigger39 = target,name = "Kazama Kazuki"
trigger40 = target,name = "Kenshin"

trigger41 = target,name = "khan"
trigger42 = target,name = "Kojiroh Sanada by MAPPY"
trigger43 = target,name = "Kouryu By Third"
trigger44 = target,name = "KY KISKE"
trigger45 = target,name = "Kyle Dunamis"
trigger46 = target,name = "lion"
trigger47 = target,name = "lyris"
trigger48 = target,name = "Sentinel"
trigger49 = target,name = "MANJIMARU"
trigger50 = target,name = "MASTER GUNDAM"

trigger51 = target,name = "May"
trigger52 = target,name = "Mazinger Z"
trigger53 = target,name = "Mercurius"
trigger54 = target,name = "Minakata Moriya"
trigger55 = target,name = "Moriya Minakata"
trigger56 = target,name = "Mukuro by MAPPY"
trigger57 = target,name = "Musashi Akatsuki By Third"
trigger58 = target,name = "nakoruruss0"
trigger59 = target,name = "Reika Murasame"
trigger60 = target,name = "Rera"

trigger61 = target,name = "RID"
trigger62 = target,name = "rimururu"
trigger63 = target,name = "SAKURA SHINGOUJI"
trigger64 = target,name = "Gundam Sandrock"
trigger65 = target,name = "sazabi"
trigger66 = target,name = "Setsuna"
trigger67 = target,name = "Shining Gundam"
trigger68 = target,name = "Shenlong"
trigger69 = target,name = "Shikyoh BY M@PPY"
trigger70 = target,name = "Silver Samurai"

trigger71 = target,name = "Slash v2.0 by Inverse"
trigger72 = target,name = "Sodom by Splode"
trigger73 = target,name = "Sodom with Samurai Sword"
trigger74 = target,name = "Kazama Sogetsu"
trigger75 = target,name = "Sol Badguy"
trigger76 = target,name = "SETA SOUJIRO"
trigger77 = target,name = "SHIKI"
trigger78 = target,name = "Zechs Marquise"
trigger79 = target,name = "TamTam"
trigger80 = target,name = "Testament"

trigger81 = target,name = "VAYEATE"
trigger82 = target,name = "washizuka"
trigger83 = target,name = "Wing Gundam"
trigger84 = target,name = "WINGGUNDAM ZERO"
trigger85 = target,name = "Yoshitora Tokugawa"
trigger86 = target,name = "Yuki By Third"
trigger87 = target,name = "Yukimura Sanada"
trigger88 = target,name = "zankuro"
trigger89 = target,name = "zantetsu"
trigger90 = target,name = "chaka"

trigger91 = target,name = "Faust"
trigger92 = target,name = "Hayato"
trigger93 = target,name = "ROBO-Ky"
trigger94 = target,name = "Sankuro Yorozu"
trigger95 = target,name = "cvshaohmaru"
trigger96 = target,name = "gg_venom"
trigger97 = target,name = "cvshayato"
trigger98 = target,name = "cvsnakoruru"
trigger99 = target,name = "Predetor Warrior"
trigger100 = target,name = "AXL"

trigger101 = target,name = "svcathena"
trigger102 = target,name = "N.Sieger"
trigger103 = target,name = "Shigen Naoe"
trigger104 = target,name = "War Machine"
trigger105 = target,name = "Iron Man"
trigger106 = target,name = "Sol=Badguy"
trigger107 = target,name = "A.B.A"
trigger108 = target,name = "Ichigo"
trigger109 = target,name = "order-Sol=Badguy"
trigger110 = target,name = "Ky=kiske"

trigger111 = target,name = "cvshaohmaru_normal"
trigger112 = target,name = "cvshaohmaru_ex"

var(30) = 2
ignorehitpause = 1

[State 5900, 3];鞘
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Amano by Luchini"
trigger2 = target,name = "Anji Mito"
trigger3 = target,name = "Billy Kane"
trigger4 = target,name = "CHAM0731"
trigger5 = target,name = "Chester"
trigger6 = target,name = "Hibiki Takane"
trigger7 = target,name = "Kafuin Gaira"
trigger8 = target,name = "GAMBIT by CAMRAT"
trigger9 = target,name = "Hayate"
trigger10 = target,name = "hibiki"

trigger11 = target,name = "Hibiki_Takane"
trigger12 = target,name = "Hikaru" && target,authorname = "Nyankoro"
trigger13 = target,name = "Hon Fu"
trigger14 = target,name = "JOHNNY"
trigger15 = target,name = "Tatewaki Kuno"
trigger16 = target,name = "KUROKO"
trigger17 = target,name = "kusaregedo"
trigger18 = target,name = "Senryo Kyoshiro"
trigger19 = target,name = "Genryusai Maki"
trigger20 = target,name = "Mina"

trigger21 = target,name = "Mr. Big"
trigger22 = target,name = "NewAkari"
trigger23 = target,name = "Caffeine Nicotine"
trigger24 = target,name = "Genbu Okina"
trigger25 = target,name = "Rasyouzin Miduki"
trigger26 = target,name = "Rolento Schugerg"
trigger27 = target,name = "Shizumaru"
trigger28 = target,name = "sokaku.m"
trigger29 = target,name = "Tachibana Ukyo"
trigger30 = target,name = "Wan-Fu"

trigger31 = target,name = "Yumeji Kurokouchi"
trigger32 = target,name = "cvseagle"
trigger33 = target,name = "cvsrolent"
trigger34 = target,name = "cvskuroko"
trigger35 = target,name = "cham cham"
trigger36 = target,name = "Senna_Kyoudou"
trigger37 = target,name = "senna kyoudou"

var(30) = 3
ignorehitpause = 1

[State 5900, 3];爪
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Balrog by M.M.R."
trigger2 = target,name = "CHOI BOUNGE"
trigger3 = target,name = "Wolverine"
trigger4 = target,name = "cvsbalrog"
trigger5 = target,name = "kunagi tenrou"

var(30) = 4
ignorehitpause = 1

[State -3, Bounding Sound]
type = PlaySnd
trigger1 = var(30)
value = 1, var(30)
ignorehitpause = 1

[State 5900, 3]
type = VarSet
trigger1 = var(30)
var(30) = 0
ignorehitpause = 1

;ボーナスメッセージアイコン表示
[State 180, 1]
type = ParentVarSet
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
fvar(8) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarSet
triggerall = !parent,var(58)
triggerall = p2movetype = H
trigger1 = movehit
fvar(8) = ifelse(var(41),-2,2)
ignorehitpause = 1

;カウンターヒットエフェクト発生
[State -2, Combo]
type = ParentVarSet
trigger1 = parent,fvar(15)
fvar(15) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = p2movetype = H
triggerall = movehit
trigger1 = var(41)
fvar(15) = 1
ignorehitpause = 1

[State -3, Blocking5]
type = helper
triggerall = p2movetype = H
triggerall = movehit
trigger1 = var(41)
id = 8130
name = "COUNTER HIT EFFECT"
pos = Ceil(enemy,Const(size.ground.front)+var(38)),Ceil(Pos Y-enemy,Pos Y+var(39))
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

;ヒット管理
[State -2, Combo]
type = ParentVarAdd
trigger1 = movehit
var(17) = 1
ignorehitpause = 1

;ファーストストライク判別
[State -2, Combo]
type = ParentVarSet
trigger1 = parent,var(33)
var(33) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,var(58)
trigger1 = movehit
var(33) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarAdd
triggerall = !parent,var(58)
triggerall = p2movetype = H
trigger1 = movehit
var(50) = 5000
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = parent,MoveType = H
var(58) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1];ヒットボーナス
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
trigger1 = moveguarded
var(50)=-20
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
triggerall = !var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=5001
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=1000
ignorehitpause = 1
persistent = 1

[State 180, 1];コンボボーナス
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) >= 2
trigger1 = movehit
var(50)=ifelse(parent,var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
var(36) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
var(36) = 2
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = 1
fvar(24) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = movehit
fvar(24) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
fvar(24) = 2
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

;空中復帰誘導
[State -2, PowerReset]
type = ParentVarSet
triggerall = movetype != H
trigger1 = movehit
fvar(38) = 0
ignorehitpause = 1

;カウンターヒット
[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType = A
var(41) = 1

[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType != A
var(41) = 0

[State 221, 3]
type = ChangeState
triggerall = var(36) = 1
trigger1 = numtarget
value = 20001
ignorehitpause = 0

[State 221, 3]
type = ChangeState
trigger1 = !var(5) && time >= 30
trigger2 = var(5) = 1 && time >= 39
trigger3 = var(5) = 2 && time >= 48
value = 20010

;---------------------------------------------------------------------------
;シモン！（ヒット）
[Statedef 20001]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 2

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = root,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = root,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = root,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = root,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = root,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = root,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = root,fvar(10)

[State 810, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NA, SA, HA, NP, SP, HP

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 20010
attr = SCA, NA, SA, HA, NP, SP, HP
time = -1

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 3001, VarAdd]
type = VarAdd
trigger1 = movehit
var(0) = 1
ignorehitpause = 1

[State 0, 2]
type = ChangeAnim
triggerall = Anim = 20000
trigger1 = var(0) = 5
trigger2 = time > 20
value = 20001
ignorehitpause = 0

[State 221, Voice]
type = PlaySnd
triggerall = Anim = 20001
trigger1 = AnimElem = 17
value = 1400, 2
channel = 0

[State 52, 2]
type = turn
triggerall = Anim = 20001
trigger1 = AnimElem = 5
trigger1 = parentdist X > 0

[State 1300, 1]
type = HitDef
triggerall = var(0) = [0,3]
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
trigger6 = AnimElemTime(7) = 2
attr = S, SP
damage = ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10)))),ceil(ifelse((14*fvar(10)/8)<7,7,(14*fvar(10)/8)))
animtype = Heavy
guardflag = M
hitflag = MAF
hitsound = s2,12
guardsound = s1,0
pausetime = ceil(6*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8800+(random%64)
guard.sparkno = s8105
sparkxy = -10,-30
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 0
guard.velocity = -8
air.velocity = -.5, -8.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
getpower = ifelse(var(17),35,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1300, 1]
type = HitDef
triggerall = var(0) = 4
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
trigger3 = AnimElem = 7
trigger4 = AnimElemTime(7) = 2
attr = S, SP
damage = ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10)))),ceil(ifelse((14*fvar(10)/8)<7,7,(14*fvar(10)/8)))
animtype = Heavy
air.animtype  = diagup
guardflag = M
hitflag = MAF
hitsound = s2,12
guardsound = s1,0
pausetime = ceil(6*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8800+(random%64)
guard.sparkno = s8105
sparkxy = -10,-30
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -.5, -8.5
guard.velocity = -8
air.velocity = -.5, -8.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = ifelse(var(17),35,143)*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1),35*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
givepower = 35, 35
envshake.time = 10
envshake.ampl = 3
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -30

;時間停止によるガード不能
[State 3000, preventguard]
type = AssertSpecial
trigger1 = root,fvar(36) > 0
flag = unguardable

;ガード音追加
[State 5900, 3];剣
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Tin's Kibagami"
trigger2 = target,name = "Tin's Shiki"
trigger3 = target,name = "YUNFEI"
trigger4 = target,name = "AMAKUSA SHIRO TOKISADA"
trigger5 = target,name = "Apocalypse"
trigger6 = target,name = "Arthur"
trigger7 = target,name = "Major D.Schaefer"
trigger8 = target,name = "Axl Low"
trigger9 = target,name = "Baiken"
trigger10 = target,name = "Dr.baldhead"

trigger11 = target,name = "basara"
trigger12 = target,name = "Benten"
trigger13 = target,name = "Oboro Bishamon"
trigger14 = target,name = "Bishamon"
trigger15 = target,name = "blackpolnareff"
trigger16 = target,name = "Charlotte"
trigger17 = target,name = "Chipp Zanuff"
trigger18 = target,name = "CLESS ALVEIN"
trigger19 = target,name = "nakoruru"
trigger20 = target,name = "Donovan"

trigger21 = target,name = "Foxy"
trigger22 = target,name = "galford"
trigger23 = target,name = "Kibagami Genjuro"
trigger24 = target,name = "GUNDAM HEAVY ARMS"
trigger25 = target,name = "God Gundam"
trigger26 = target,name = "GUNDAM EPYON"
trigger27 = target,name = "Hattori Hanzo"
trigger28 = target,name = "Haohmaru"
trigger29 = target,name = "Hikaru" && target,authorname = "Nyan☆Kiryu"
trigger30 = target,name = "Strider Hiryu"

trigger31 = target,name = "Janne Dulk"
trigger32 = target,name = "Yagyu Jubei"
trigger33 = target,name = "Kanzaki Juzo"
trigger34 = target,name = "kaede"
trigger35 = target,name = "Kaede by Ribeiro"
trigger36 = target,name = "Shinnosuke Kagami"
trigger37 = target,name = "Shinnosuke Kagami By Third"
trigger38 = target,name = "Karasu"
trigger39 = target,name = "Kazama Kazuki"
trigger40 = target,name = "Kenshin"

trigger41 = target,name = "khan"
trigger42 = target,name = "Kojiroh Sanada by MAPPY"
trigger43 = target,name = "Kouryu By Third"
trigger44 = target,name = "KY KISKE"
trigger45 = target,name = "Kyle Dunamis"
trigger46 = target,name = "lion"
trigger47 = target,name = "lyris"
trigger48 = target,name = "Sentinel"
trigger49 = target,name = "MANJIMARU"
trigger50 = target,name = "MASTER GUNDAM"

trigger51 = target,name = "May"
trigger52 = target,name = "Mazinger Z"
trigger53 = target,name = "Mercurius"
trigger54 = target,name = "Minakata Moriya"
trigger55 = target,name = "Moriya Minakata"
trigger56 = target,name = "Mukuro by MAPPY"
trigger57 = target,name = "Musashi Akatsuki By Third"
trigger58 = target,name = "nakoruruss0"
trigger59 = target,name = "Reika Murasame"
trigger60 = target,name = "Rera"

trigger61 = target,name = "RID"
trigger62 = target,name = "rimururu"
trigger63 = target,name = "SAKURA SHINGOUJI"
trigger64 = target,name = "Gundam Sandrock"
trigger65 = target,name = "sazabi"
trigger66 = target,name = "Setsuna"
trigger67 = target,name = "Shining Gundam"
trigger68 = target,name = "Shenlong"
trigger69 = target,name = "Shikyoh BY M@PPY"
trigger70 = target,name = "Silver Samurai"

trigger71 = target,name = "Slash v2.0 by Inverse"
trigger72 = target,name = "Sodom by Splode"
trigger73 = target,name = "Sodom with Samurai Sword"
trigger74 = target,name = "Kazama Sogetsu"
trigger75 = target,name = "Sol Badguy"
trigger76 = target,name = "SETA SOUJIRO"
trigger77 = target,name = "SHIKI"
trigger78 = target,name = "Zechs Marquise"
trigger79 = target,name = "TamTam"
trigger80 = target,name = "Testament"

trigger81 = target,name = "VAYEATE"
trigger82 = target,name = "washizuka"
trigger83 = target,name = "Wing Gundam"
trigger84 = target,name = "WINGGUNDAM ZERO"
trigger85 = target,name = "Yoshitora Tokugawa"
trigger86 = target,name = "Yuki By Third"
trigger87 = target,name = "Yukimura Sanada"
trigger88 = target,name = "zankuro"
trigger89 = target,name = "zantetsu"
trigger90 = target,name = "chaka"

trigger91 = target,name = "Faust"
trigger92 = target,name = "Hayato"
trigger93 = target,name = "ROBO-Ky"
trigger94 = target,name = "Sankuro Yorozu"
trigger95 = target,name = "cvshaohmaru"
trigger96 = target,name = "gg_venom"
trigger97 = target,name = "cvshayato"
trigger98 = target,name = "cvsnakoruru"
trigger99 = target,name = "Predetor Warrior"
trigger100 = target,name = "AXL"

trigger101 = target,name = "svcathena"
trigger102 = target,name = "N.Sieger"
trigger103 = target,name = "Shigen Naoe"
trigger104 = target,name = "War Machine"
trigger105 = target,name = "Iron Man"
trigger106 = target,name = "Sol=Badguy"
trigger107 = target,name = "A.B.A"
trigger108 = target,name = "Ichigo"
trigger109 = target,name = "order-Sol=Badguy"
trigger110 = target,name = "Ky=kiske"

trigger111 = target,name = "cvshaohmaru_normal"
trigger112 = target,name = "cvshaohmaru_ex"

var(30) = 2
ignorehitpause = 1

[State 5900, 3];鞘
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Amano by Luchini"
trigger2 = target,name = "Anji Mito"
trigger3 = target,name = "Billy Kane"
trigger4 = target,name = "CHAM0731"
trigger5 = target,name = "Chester"
trigger6 = target,name = "Hibiki Takane"
trigger7 = target,name = "Kafuin Gaira"
trigger8 = target,name = "GAMBIT by CAMRAT"
trigger9 = target,name = "Hayate"
trigger10 = target,name = "hibiki"

trigger11 = target,name = "Hibiki_Takane"
trigger12 = target,name = "Hikaru" && target,authorname = "Nyankoro"
trigger13 = target,name = "Hon Fu"
trigger14 = target,name = "JOHNNY"
trigger15 = target,name = "Tatewaki Kuno"
trigger16 = target,name = "KUROKO"
trigger17 = target,name = "kusaregedo"
trigger18 = target,name = "Senryo Kyoshiro"
trigger19 = target,name = "Genryusai Maki"
trigger20 = target,name = "Mina"

trigger21 = target,name = "Mr. Big"
trigger22 = target,name = "NewAkari"
trigger23 = target,name = "Caffeine Nicotine"
trigger24 = target,name = "Genbu Okina"
trigger25 = target,name = "Rasyouzin Miduki"
trigger26 = target,name = "Rolento Schugerg"
trigger27 = target,name = "Shizumaru"
trigger28 = target,name = "sokaku.m"
trigger29 = target,name = "Tachibana Ukyo"
trigger30 = target,name = "Wan-Fu"

trigger31 = target,name = "Yumeji Kurokouchi"
trigger32 = target,name = "cvseagle"
trigger33 = target,name = "cvsrolent"
trigger34 = target,name = "cvskuroko"
trigger35 = target,name = "cham cham"
trigger36 = target,name = "Senna_Kyoudou"
trigger37 = target,name = "senna kyoudou"

var(30) = 3
ignorehitpause = 1

[State 5900, 3];爪
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Balrog by M.M.R."
trigger2 = target,name = "CHOI BOUNGE"
trigger3 = target,name = "Wolverine"
trigger4 = target,name = "cvsbalrog"
trigger5 = target,name = "kunagi tenrou"

var(30) = 4
ignorehitpause = 1

[State -3, Bounding Sound]
type = PlaySnd
trigger1 = var(30)
value = 1, var(30)
ignorehitpause = 1

[State 5900, 3]
type = VarSet
trigger1 = var(30)
var(30) = 0
ignorehitpause = 1

;ボーナスメッセージアイコン表示
[State 180, 1]
type = ParentVarSet
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
fvar(8) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarSet
triggerall = !parent,var(58)
triggerall = p2movetype = H
trigger1 = movehit
fvar(8) = ifelse(var(41),-2,2)
ignorehitpause = 1

;カウンターヒットエフェクト発生
[State -2, Combo]
type = ParentVarSet
trigger1 = parent,fvar(15)
fvar(15) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = p2movetype = H
triggerall = movehit
trigger1 = var(41)
fvar(15) = 1
ignorehitpause = 1

[State -3, Blocking5]
type = helper
triggerall = p2movetype = H
triggerall = movehit
trigger1 = var(41)
id = 8130
name = "COUNTER HIT EFFECT"
pos = Ceil(enemy,Const(size.ground.front)+var(38)),Ceil(Pos Y-enemy,Pos Y+var(39))
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

;ヒット管理
[State -2, Combo]
type = ParentVarAdd
trigger1 = movehit
var(17) = 1
ignorehitpause = 1

;ファーストストライク判別
[State -2, Combo]
type = ParentVarSet
trigger1 = parent,var(33)
var(33) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,var(58)
trigger1 = movehit
var(33) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarAdd
triggerall = !parent,var(58)
triggerall = p2movetype = H
trigger1 = movehit
var(50) = 5000
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = parent,MoveType = H
var(58) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1];ヒットボーナス
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
trigger1 = moveguarded
var(50)=-20
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
triggerall = !var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=5001
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=1000
ignorehitpause = 1
persistent = 1

[State 180, 1];コンボボーナス
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) >= 2
trigger1 = movehit
var(50)=ifelse(parent,var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
var(36) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
var(36) = 2
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = 1
fvar(24) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = movehit
fvar(24) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
fvar(24) = 2
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

;空中復帰誘導
[State -2, PowerReset]
type = ParentVarSet
triggerall = movetype != H
trigger1 = movehit
fvar(38) = 0
ignorehitpause = 1

;カウンターヒット
[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType = A
var(41) = 1

[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType != A
var(41) = 0

[State 20000, ChangeState]
type = ChangeState
triggerall = roundstate != 2
trigger1 = anim = 20001
trigger1 = animelem = 22
trigger1 = root,alive
value = 20002

[State 20000, DestroySelf]
type = DestroySelf
trigger1 = anim = 20001
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;シモン！（KO時）
[Statedef 20002]
movetype = I
ctrl = 0
anim = 20002
velset = 0,0

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 20000, ChangeState]
type = ChangeState
trigger1 = roundstate = 4
value = 20003

;---------------------------------------------------------------------------
;シモン！（KO時）2
[Statedef 20003]
ctrl = 0
anim = 20003
sprpriority = 2

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 190, 4]
type = ChangeAnim
trigger1 = root,anim = 184 && root,animelem = 14
trigger2 = root,anim = 185 && root,animelem = 16
value = 20004+(parentdist X > 0)

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 20180, 0

[State 1000,Super]
type = Helper
triggerall = !NumHelper(25000)
trigger1 = AnimElem = 2
id = 25000
name = "boota"
pos = ceil(1*const(size.yscale)),ceil(-31*const(size.yscale))
postype = P1
stateno = 25000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
;ブータ（登場）
[Statedef 25000]
type    = A
movetype = I
physics = N
ctrl = 0
anim = 25000
velset = 0,0
sprpriority = 1

[State 52, 2]
type = turn
trigger1 = time = 0
trigger1 = parent,parentdist X > 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(0) = floor(Pos Y)

[State 20000, Velocity]
type = VelSet
trigger1 = animelem = 1
y = -5
persistent = 0

[State 20000, Velocity]
type = VelAdd
trigger1 = 1
y = .4

[State 20000, ChangeState]
type = ChangeState
trigger1 = Pos Y >= var(0) && Vel Y > 0
value = 25001

;---------------------------------------------------------------------------
;ブータ（着地）
[Statedef 25001]
type    = S
physics = S
ctrl = 0
anim = 25001
velset = 0,0
sprpriority = 3

[State 190, 4]
type = ChangeAnim
trigger1 = root,anim = 184 && root,animelem = 14
trigger2 = root,anim = 185 && root,animelem = 16
value = 25002

[State 220, Position]
type = BindToParent
trigger1 = anim = 25001
trigger1 = AnimElem = 1
pos = 0,ceil(-27*const(size.yscale))

[State 220, Position]
type = BindToParent
trigger1 = anim = 25001
trigger1 = AnimElem = 2
pos = 0,ceil(-29*const(size.yscale))

[State 220, Position]
type = BindToParent
trigger1 = anim = 25001
trigger1 = AnimElem = 3
pos = 0,ceil(-31*const(size.yscale))
time = -1

[State 901, Effect]
type = PlaySnd
trigger1 = anim = 25001
trigger1 = AnimElem = 2
value = 20180, 1

;---------------------------------------------------------------------------
;シモン！（退却）
[Statedef 20010]
movetype = I
ctrl = 0
anim = 20010
velset = 0,0
sprpriority = 2

[State 8200, Destroy]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;砂煙
[Statedef 7600]
ctrl = 0
anim = 7600
sprpriority = 5

[State 221, 3]
type = ChangeState
triggerall = time > 1
trigger1 = parent,stateno = 20001 && parent,anim = 20001
trigger2 = parent,stateno = 20010
value = 7601

;---------------------------------------------------------------------------
;砂煙（消滅）
[Statedef 7601]
ctrl = 0

[State 8200, Destroy]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;カミナ！（掴みモーション）
[Statedef 1500]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(Command = "カミナ！1", 0, ifelse(Command = "カミナ！2", 1, 2))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(5) = 1+(random%2)

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 1500, ifelse(var(5) = 1, 1510, 1520))

[State 900, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 2
attr = S, ST
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ((Pos X < 0)-(Pos X >= 0))*facing
p2facing = 1
p1stateno = 1501
p2stateno = 906
guard.dist = 0
getpower = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
numhits = 0
nochainID = var(40)

[State 900, 1]
type = HitDef
triggerall = var(16)
triggerall = P2StateNo != [150,155]
trigger1 = AnimElem = 2
attr = S, ST
hitflag = M
priority = 3, Miss
sparkno = -1
p1facing = ((Pos X < 0)-(Pos X >= 0))*facing
p2facing = 1
p1stateno = 1501
p2stateno = 906
guard.dist = 0
getpower = 70*(1000+var(24))/1000*ifelse((var(15)||var(16)),0,1)
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
numhits = 0
nochainID = var(40)

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 900, 1
channel = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 900, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;カミナ！（成功）1
[Statedef 1501]
type    = S
movetype = A
physics = N
velset = 0,0
anim = 1501

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 1505

[State 901, Throw]
type = TargetState
trigger1 = AnimElem = 5
value = 1506

[State 3001, Width]
type = Width
trigger1 = animelemtime(5) < 0
edge = 60,60

[State 3001, Width]
type = Width
trigger1 = AnimElem = 5
edge = 60,0

[State 3001, Width]
type = Width
trigger1 = AnimElem = 6
edge = 90,0

[State 3001, Width]
type = Width
trigger1 = animelemtime(11) > 0
edge = 0,15

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 900, 0
channel = 1

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1500, 0
channel = 0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3, 5

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 11
value = 40, 1
channel = 20

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 11
Anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 11
x = -backedgebodydist*.075
y = -7.5

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(11) > 0
x = .95

[State 105, 1]
type = VelAdd
trigger1 = AnimElemTime(11) > 0
y = .8

[State 191, Cloth]
type = Helper
trigger1 = AnimElem = 7
ID = 30000
stateno = 30000
postype = p1
pos = frontedgebodydist+30,-216
name = "kamina_special"
facing = -1
ownpal = 1

[State 901,1]
type = targetBind
trigger1 = animelem = 1
pos = -50,0
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 2
pos = -40, -72
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 3
pos = -32, -80
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 4
pos = 10, -100
postype = P1
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 5
pos = 60, -20
postype = P1
time = 1

[State 3001, Add Hits!]
type = HitAdd
trigger1 = AnimElem = 5
value = 1

[State -2, Combo]
type = VarAdd
trigger1 = AnimElem = 5
var(17) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = AnimElem = 5
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = var(17) >= 2
trigger1 = AnimElem = 5
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = ceil(ifelse((-14*fvar(10))>-7,-7,(-14*fvar(10))))
kill = 0

[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 5
value = 35

[State 105, 3]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1502

;---------------------------------------------------------------------------
;カミナ！（決めポーズ待機）
[Statedef 1502]
type    = S
physics = S
ctrl = 0
anim = 1502
velset = 0,0

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 901, Throw]
type = TargetState
triggerall = numhelper(30000)
trigger1 = helper(30000),stateno = 30001 && helper(30000),animelem = 5
trigger2 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger3 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
value = 1507

[State 901, Throw]
type = TargetState
triggerall = numhelper(30000)
trigger1 = helper(30000),stateno = 30001 && helper(30000),animelem = 9
trigger2 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 17
trigger3 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 25
value = 1508

[State 901, Throw]
type = TargetState
triggerall = numhelper(30000)
trigger1 = !var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger2 = var(5) = 1 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger3 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 29
value = 1509

[State 3001, Add Hits!]
type = HitAdd
triggerall = numhelper(30000)
trigger1 = helper(30000),stateno = 30001 && helper(30000),animelem = 5
trigger2 = helper(30000),stateno = 30001 && helper(30000),animelem = 9
trigger3 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger4 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 17
trigger5 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger6 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 25
trigger7 = !var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger8 = var(5) = 1 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger9 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 29
value = 1

[State -2, Combo]
type = VarAdd
triggerall = numhelper(30000)
trigger1 = helper(30000),stateno = 30001 && helper(30000),animelem = 5
trigger2 = helper(30000),stateno = 30001 && helper(30000),animelem = 9
trigger3 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger4 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 17
trigger5 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger6 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 25
trigger7 = !var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger8 = var(5) = 1 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger9 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 29
var(17) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
triggerall = numhelper(30000)
trigger1 = helper(30000),stateno = 30001 && helper(30000),animelem = 5
trigger2 = helper(30000),stateno = 30001 && helper(30000),animelem = 9
trigger3 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger4 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 17
trigger5 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger6 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 25
trigger7 = !var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger8 = var(5) = 1 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger9 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 29
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = var(17) >= 2
triggerall = numhelper(30000)
trigger1 = helper(30000),stateno = 30001 && helper(30000),animelem = 5
trigger2 = helper(30000),stateno = 30001 && helper(30000),animelem = 9
trigger3 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger4 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 17
trigger5 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger6 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 25
trigger7 = !var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger8 = var(5) = 1 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger9 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 29
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 901, Hurt]
type = TargetLifeAdd
triggerall = numhelper(30000)
trigger1 = helper(30000),stateno = 30001 && helper(30000),animelem = 5
trigger2 = helper(30000),stateno = 30001 && helper(30000),animelem = 9
trigger3 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger4 = var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 17
trigger5 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger6 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 25
value = ceil(ifelse((-21*fvar(10))>-7,-7,(-21*fvar(10))))
kill = 0

[State 901, Hurt]
type = TargetLifeAdd
triggerall = numhelper(30000)
trigger1 = !var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 13
trigger2 = var(5) = 1 && helper(30000),stateno = 30001 && helper(30000),animelem = 21
trigger3 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 29
value = ceil(ifelse(((-28-(var(5)*7))*fvar(10))>-7,-7,((-28-(var(5)*7))*fvar(10))))

[State 106, 4]
type = ChangeState
triggerall = roundstate = 2
triggerall = numhelper(30000)
trigger1 = !var(5) && helper(30000),stateno = 30001 && helper(30000),animelem = 14
trigger2 = var(5) = 1 && helper(30000),stateno = 30001 && helper(30000),animelem = 22
trigger3 = var(5) = 2 && helper(30000),stateno = 30001 && helper(30000),animelem = 30
value = 1503

[State 106, 4]
type = ChangeState
trigger1 = roundstate != 2
value = 1510

;---------------------------------------------------------------------------
;カミナ！（決めポーズ）
[Statedef 1503]
type    = S
physics = S
ctrl = 0
anim = 1503
velset = 0,0

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1500, 1
channel = 0

[State 106, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;カミナ！（KO時1）
[Statedef 1510]
type    = S
movetype= I
physics = S
anim = 1504

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 180, 5

[State 3810,5]
type = Changestate
trigger1 = roundstate != 2
trigger1 = time > 85
value = 1511

[State 221, 3]
type = ChangeState
trigger1 = roundstate = 2
trigger1 = time > 85
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（KO時2）
[Statedef 1511]
type    = S
movetype= I
physics = S
ctrl = 1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3810,5]
type = Changestate
trigger1 = p2movetype = A
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;カミナ！（カミナ）1
[Statedef 30000]
type = A
movetype = A
physics = N
ctrl = 0
anim = 30000
velset = 4,15
sprpriority = 2

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
var(5) = root,var(5)

[State 52, Effect]
type = PlaySnd
trigger1 = time = 1
value = 1500, 10

[State 190, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 30001

;---------------------------------------------------------------------------
;カミナ！（カミナ）2
[Statedef 30001]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 30001, ifelse(var(5) = 1, 30011, 30021))

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = !var(5) && AnimElem = 13
trigger2 = var(5) = 1 && AnimElem = 21
trigger3 = var(5) = 2 && AnimElem = 29
x = 0
y = -13.5

[State 1100, Velocity]
type = VelAdd
trigger1 = !var(5) && AnimElemTime(13) > 0
trigger2 = var(5) = 1 && AnimElemTime(21) > 0
trigger3 = var(5) = 2 && AnimElemTime(29) > 0
y = .7

[State 5010, 5]
type = StateTypeSet
trigger1 = !var(5) && AnimElem = 13
trigger2 = var(5) = 1 && AnimElem = 21
trigger3 = var(5) = 2 && AnimElem = 29
statetype = A
physics = N

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 52, 0

[State 52, Effect]
type = PlaySnd
trigger1 = !var(5) && AnimElem = 13
trigger2 = var(5) = 1 && AnimElem = 21
trigger3 = var(5) = 2 && AnimElem = 29
value = 1500, 11

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = var(5) && AnimElem = 13
trigger4 = var(5) && AnimElem = 17
trigger5 = var(5) = 2 && AnimElem = 21
trigger6 = var(5) = 2 && AnimElem = 25
trigger7 = !var(5) && AnimElem = 13
trigger8 = var(5) = 1 && AnimElem = 21
trigger9 = var(5) = 2 && AnimElem = 29
value = 2, 12

[State 52, Effect]
type = PlaySnd
trigger1 = !var(5) && AnimElem = 13
trigger2 = var(5) = 1 && AnimElem = 21
trigger3 = var(5) = 2 && AnimElem = 29
value = 40, 1

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 5
trigger2 = var(5) && AnimElem = 13
trigger3 = var(5) = 2 && AnimElem = 21
Anim = 7700
pos = ceil(16*const(size.xscale)),ceil(20*const(size.yscale))
postype = p1
ownpal = 1
sprpriority = 3
scale = 1,1.333

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 9
trigger2 = var(5) && AnimElem = 17
trigger3 = var(5) = 2 && AnimElem = 25
Anim = 7701
pos = ceil(16*const(size.xscale)),ceil(-12*const(size.yscale))
postype = p1
ownpal = 1
sprpriority = 3
scale = 1,.75

[State 1000, Spark]
type = Explod
trigger1 = !var(5) && AnimElem = 13
trigger2 = var(5) = 1 && AnimElem = 21
trigger3 = var(5) = 2 && AnimElem = 29
Anim = 7710
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 1000, Spark]
type = Explod
trigger1 = !var(5) && AnimElem = 12
trigger2 = var(5) = 1 && AnimElem = 20
trigger3 = var(5) = 2 && AnimElem = 28
Anim = 7711
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 3001, Super]
type = Helper
trigger1 = !var(5) && AnimElem = 13
trigger2 = var(5) = 1 && AnimElem = 21
trigger3 = var(5) = 2 && AnimElem = 29
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = var(5) && AnimElem = 13
trigger4 = var(5) && AnimElem = 17
trigger5 = var(5) = 2 && AnimElem = 21
trigger6 = var(5) = 2 && AnimElem = 25
trigger7 = !var(5) && AnimElem = 13
trigger8 = var(5) = 1 && AnimElem = 21
trigger9 = var(5) = 2 && AnimElem = 29
time = 12
ampl = 3

[State 1100, Fire1]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = var(5) && AnimElem = 13
trigger4 = var(5) && AnimElem = 17
trigger5 = var(5) = 2 && AnimElem = 21
trigger6 = var(5) = 2 && AnimElem = 25
Anim = 8800+(random%64)
pos = ceil(75*const(size.xscale)),ceil(-50*const(size.yscale))
postype = p1
ownpal = 1
ontop = 1

[State 1100, Fire1]
type = Explod
trigger1 = !var(5) && AnimElem = 13
trigger2 = var(5) = 1 && AnimElem = 21
trigger3 = var(5) = 2 && AnimElem = 29
Anim = 8800+(random%64)
pos = ceil(50*const(size.xscale)),ceil(-100*const(size.yscale))
postype = p1
ownpal = 1
ontop = 1

[State 190, 4]
type = ChangeState
triggerall = roundstate = 2
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 30002

[State 190, 4]
type = ChangeState
triggerall = roundstate != 2
triggerall = root,alive
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 30003

;---------------------------------------------------------------------------
;カミナ！（カミナ）3
[Statedef 30002]
type = S
movetype = A
physics = N
ctrl = 0
anim = 30002
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 20
x = -3
y = -12

[State 5010, 5]
type = StateTypeSet
trigger1 = AnimElem = 20
statetype = A
physics = N

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 52, 0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1500, 12

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 20
value = 100, 10

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 20
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 52, 4]
type = DestroySelf
trigger1 = animelemtime(20) > 1
trigger1 = Pos Y < -360

;---------------------------------------------------------------------------
;カミナ！（カミナ）（KO時）
[Statedef 30003]
type = S
movetype = A
physics = N
ctrl = 0
anim = 30003
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 52, 0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 7
value = 30180, 0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 20
value = 3, 0

;---------------------------------------------------------------------------
;P投げ（相手）
[Statedef 1505]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201, screenbound]
type = screenbound
trigger1 = anim = 1505
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1505

;---------------------------------------------------------------------------
;カミナ！（相手）
[Statedef 1506]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 320,0

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5051)
value = 5051

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = Time = 0     ;If no transition anim
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 903, Vel]
type = VelSet
trigger1 = Time = 0
x = -backedgedist*.0075
y = -15

[State 903, Vel]
type = VelSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
x = -3

[State 903, Vel]
type = veladd
trigger1 = Time > 0
y = .55

[State 903, 2]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
; HITG_SHAKE_High
[Statedef 1507]
type    = S
movetype= H
physics = N
velset = 0,0
anim = 5002

[State 52, 2]
type = turn
trigger1 = Time = 0
trigger1 = prevstateno = 1506

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5001, 2]
type = ChangeAnim
trigger1 = anim = 5002 && AnimTime = 0
value = 5007

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
; HITG_SHAKE_Low
[Statedef 1508]
type    = S
movetype= H
physics = N
velset = 0,0
anim = 5012

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5001, 2]
type = ChangeAnim
trigger1 = anim = 5012 && AnimTime = 0
value = 5017

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;カミナ！（相手）
[Statedef 1509]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 320,0

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5051)
value = 5051

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = Time = 0     ;If no transition anim
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 903, Vel]
type = VelSet
trigger1 = Time = 0
x = -.1
y = -20

[State 903, Vel]
type = VelSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
x = -1.5

[State 903, Vel]
type = veladd
trigger1 = Time > 0
y = .55

[State 903, 2]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;ガードキャンセル攻撃
[Statedef 2800]
type    = S
movetype = A
physics = N
juggle = 8
ctrl = 0
poweradd = 0
velset = 0,0

[State 180, 1]
type = VarAdd
trigger1 = time = 0
var(50)=1000
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = !var(20) || var(20) = 4 || var(20) = 6
trigger1 = time = 0
value = -1000

[State 860, 4]
type = PowerAdd
triggerall = var(20) = 1
trigger1 = time = 0
value = -1500

[State 860, 4]
type = PowerAdd
triggerall = var(20) = 3
trigger1 = time = 0
value = -3000

[State 902, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 20

[State 1100, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 810,0
channel = 1

[State -3,Super]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifelse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 7
supermovetime = 99999999999999
persistent = 0
size.xscale = 1
size.yscale = 1

[State 0]
type = pause
trigger1 = time = 1
time = 6
movetime = 6

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 1,0

[State 190, 4]
type = ChangeAnim
trigger1 = time <= 12
value = anim

[State 190, 4]
type = ChangeAnim
trigger1 = time = 13
value = 1000

[State 1100, Velocity]
type = VelSet
triggerall = anim = 1000
trigger1 = AnimElem = 1
x = 5

[State 1100, Velocity]
type = VelMul
trigger1 = 1
x = .92

[State 1100, Velocity]
type = VelSet
triggerall = anim = 1000
trigger1 = AnimElem = 6
x = 0

[State 221, Effect]
type = PlaySnd
triggerall = anim = 1000
trigger1 = AnimElem = 4
value = 3, 2

[State 221, Effect]
type = PlaySnd
triggerall = anim = 1000
trigger1 = AnimElem = 5
value = 1000, 0

[State 221, Voice]
type = PlaySnd
triggerall = anim = 1000
trigger1 = AnimElem = 1
value = 0, 2
channel = 0

[State 105, 1]
type = statetypeset
triggerall = anim = 1000
trigger1 = AnimElem = 8
movetype = I

[State 1000,Super]
type = Helper
triggerall = anim = 1000
triggerall = !NumHelper(7100)
trigger1 = AnimElem = 5
id = 7100
name = "drill"
pos = 0,0
postype = P1
stateno = 7100
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1100, HitDef]
type = HitDef
triggerall = anim = 1000
trigger1 = AnimElem = 4
attr = S, SA
animtype  = diagup
air.animtype  = diagup
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = ceil(6*(2-(var(16)>0))/2),ceil(6*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -52
hitsound = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -1.2,0
guard.velocity = -8
air.velocity = -2.8,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.ampl = 2
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .49
persistent = 1
getpower = 0,0
givepower = 35, 35
kill = 0
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 221, 1]
type = Hitdef
triggerall = anim = 1000
trigger1 = AnimElem = 6
attr = S, SA
animtype  = diagup
air.animtype  = diagup
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(14*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -59
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2,-15
guard.velocity = -8
air.velocity = -2,-15
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .6
persistent = 0
getpower = 0,0
givepower = 35, 35
kill = 0
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -58

[State 221, 3]
type = ChangeState
triggerall = anim = 1000
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ギザ！螺旋力アッパー
[Statedef 3000]
type    = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
juggle = 8

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = Time = 0
var(5) = ifelse((Command = "ギザ！螺旋力アッパー2" && Power >= 2000) || (Command = "ギザ！螺旋力アッパー3" && (Power >= 2000 && Power < 3000)), 1, ifelse(Command = "ギザ！螺旋力アッパー3" && Power >= 3000, 2, 0))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = !var(17)
trigger1 = Time = 0
var(5) = ifelse(power>=2000&&P2movetype=A, floor(power*.001)-1, random%(1+(power>=2000)))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = var(17)
trigger1 = Time = 0
var(5) = ifelse((floor(power*.001)-(P2life<120)-(P2life<240)-1)<0,0,floor(power*.001)-(P2life<120)-(P2life<240)-1)

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && !var(14)) || var(20) = 4 
trigger1 = Time = 0
var(5) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(15)
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(16)
trigger1 = Time = 0
var(5) = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 3000, ifelse(var(5) = 1, 3010, 3020))

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifelse(!var(5), 53, ifelse(var(5) = 1, 59, 64))

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 50+(var(5)*2)
movetime = 50+(var(5)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 50+(var(5)*2)

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = time = 0
value = ifelse(!var(5), -1000, ifelse(var(5) = 1, -2000, -3000))

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 4
trigger1 = time = 0
value = -1000

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1
trigger1 = time = 0
value = -1500

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(16)
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(15)
trigger1 = time = 0
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 0
fvar(13) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(14) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(15) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !var(18) && prevstateno != [3000,3999]
trigger1 = time = 4
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 150)),ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 50)),ifelse(!var(5), 128, ifelse(var(5) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3001, Super]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = ceil(22*const(size.xscale)),ceil(-45*const(size.yscale))
postype = P1
stateno = ifelse((var(20)=[3,5]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 105, 1]
type = statetypeset
trigger1 = !var(5) && AnimElem = 13
trigger2 = var(5) = 1 && AnimElem = 17
trigger3 = var(5) = 2 && AnimElem = 21
movetype = I

[State 1000, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3100,1
channel = 0

[State 1000, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3000,0
channel = 0

[State 1000, Effect]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3000,2

[State 1100, Effect]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3,2

[State 1201, 1]
type = PlayerPush
triggerall = AnimElemTime(7) >= 0
trigger1 = !var(5) && AnimElemTime(13) < 0
trigger2 = var(5) = 1 && AnimElemTime(17) < 0
trigger3 = var(5) = 2 && AnimElemTime(21) < 0
value = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 4
x = 6+(var(5)*1.5)

[State 1100, Velocity]
type = VelMul
trigger1 = 1
x = .92

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 7
x = 0

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 6
id = 7200
name = "drill_h1"
pos = 0,0
postype = P1
stateno = 7200
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 20+(var(5)*2)
size.xscale = 1
size.yscale = 1
persistent = 0

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse(((28+(var(5)*14))*fvar(10))<7,7,((28+(var(5)*14))*fvar(10)))),ceil(ifelse(((28+(var(5)*14))*fvar(10)/8)<7,7,((28+(var(5)*14))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 3,3
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -20, -90+ceil(P2dist y)
hitsound   = S-1,0
guardsound = S-1,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 10*ifelse((P2Dist X < 16),-1,1)
guard.velocity = 8*ifelse((P2Dist X < 16),-1,1)
air.velocity = 5*ifelse((P2Dist X < 16),-1,1),-.5
airguard.velocity = -6.67*ifelse((P2Dist X < 16),-1,1),-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 9
trigger2 = AnimElem = 11 && var(5)
trigger3 = AnimElem = 13 && var(5)
trigger4 = AnimElem = 15 && var(5) = 2
trigger5 = AnimElem = 17 && var(5) = 2
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10)))),ceil(ifelse((28*fvar(10)/8)<7,7,(28*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 3,3
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -20, -90+ceil(P2dist y)
hitsound   = S-1,0
guardsound = S-1,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 10*ifelse((P2Dist X < 16),-1,1)
guard.velocity = 8*ifelse((P2Dist X < 16),-1,1)
air.velocity = 5*ifelse((P2Dist X < 16),-1,1),-.5
airguard.velocity = -6.67*ifelse((P2Dist X < 16),-1,1),-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10
trigger3 = AnimElem = 12 && var(5)
trigger4 = AnimElem = 14 && var(5)
trigger5 = AnimElem = 16 && var(5) = 2
trigger6 = AnimElem = 18 && var(5) = 2
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 3,3
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -20, -90+ceil(P2dist y)
hitsound   = S-1,0
guardsound = S-1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 10*ifelse((P2Dist X < 16),-1,1)
guard.velocity = 8*ifelse((P2Dist X < 16),-1,1)
air.velocity = 5*ifelse((P2Dist X < 16),-1,1),-.5
airguard.velocity = -6.67*ifelse((P2Dist X < 16),-1,1),-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 11 && !var(5)
trigger2 = AnimElem = 12 && !var(5)
trigger3 = AnimElem = 15 && var(5) = 1
trigger4 = AnimElem = 16 && var(5) = 1
trigger5 = AnimElem = 19 && var(5) = 2
trigger6 = AnimElem = 20 && var(5) = 2
attr = S, HA
animtype  = Heavy
air.animtype  = diagup
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 3,3
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -20, -90+ceil(P2dist y)
hitsound   = S-1,0
guardsound = S-1,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -4.5,-18
guard.velocity = 8*ifelse((P2Dist X < 16),-1,1)
air.velocity = -4.5,-18
airguard.velocity = -6.67*ifelse((P2Dist X < 16),-1,1),-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .7
persistent = 1
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -90+ceil(P2dist y)

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ドリルエフェクト（大）
[Statedef 7200]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7200
sprpriority = 4

[State 4900, 16]
type = VarAdd
trigger1 = time < 4
fvar(0) = .5

[State 4900, 16]
type = AngleAdd
trigger1 = time = 0
value = -10

[State 4900, 16]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(0)

[State 1005, trans]
type=trans
trigger1=1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = root,var(5)

[State 1000, 0]
type = BindToRoot
trigger1 = 1
pos = 16,-16

[State 900, 4]
type = DestroySelf
trigger1 = root,stateno = 195 && root,time = 1
trigger2 = (root,stateno = [200,799]) && root,time = 1
trigger3 = root,stateno = 800 && root,time = 1
trigger4 = root,stateno = 830 && root,time = 1
trigger5 = root,stateno = 1000 && root,time = 1
trigger6 = root,stateno = 1100 && root,time = 1
trigger7 = root,stateno = 1200 && root,time = 1
trigger8 = root,stateno = 1300 && root,time = 1
trigger9 = root,stateno = 1400 && root,time = 1
trigger10 = root,stateno = 1500 && root,time = 1
trigger11 = root,stateno = 3000 && root,time = 1
trigger12 = root,stateno = 3100 && root,time = 1
trigger13 = root,stateno = 3200 && root,time = 1
trigger14 = root,stateno = 3300 && root,time = 1

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = root,stateno = 3000 && !var(5) && root,animelem = 15
trigger2 = root,stateno = 3000 && var(5) = 1 && root,animelem = 19
trigger3 = root,stateno = 3000 && var(5) = 2 && root,animelem = 23
trigger4 = root,time = 1
trigger5 = root,movetype = H
value = 7201

;---------------------------------------------------------------------------
;ドリルエフェクト（大）（消滅）
[Statedef 7201]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 4900, 16]
type = AngleDraw
trigger1 = time > 0
scale = fvar(0),fvar(0)

[State 1005, trans]
type=trans
trigger1=1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 902, Shock]
type = PalFX
trigger1 = 1
time = 1
add = -time*20,-time*20,-time*20

[State 900, 4]
type = DestroySelf
trigger1 = root,stateno = 195 && root,time = 1
trigger2 = (root,stateno = [200,799]) && root,time = 1
trigger3 = root,stateno = 800 && root,time = 1
trigger4 = root,stateno = 830 && root,time = 1
trigger5 = root,stateno = 1000 && root,time = 1
trigger6 = root,stateno = 1100 && root,time = 1
trigger7 = root,stateno = 1200 && root,time = 1
trigger8 = root,stateno = 1300 && root,time = 1
trigger9 = root,stateno = 1400 && root,time = 1
trigger10 = root,stateno = 1500 && root,time = 1
trigger11 = root,stateno = 3000 && root,time = 1
trigger12 = root,stateno = 3100 && root,time = 1
trigger13 = root,stateno = 3200 && root,time = 1
trigger14 = root,stateno = 3300 && root,time = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 12

;---------------------------------------------------------------------------
;ギザ！螺旋力キック
[Statedef 3100]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0
juggle = 8

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = Time = 0
var(5) = ifelse((Command = "ギザ！螺旋力キック2" && Power >= 2000) || (Command = "ギザ！螺旋力キック3" && (Power >= 2000 && Power < 3000)), 1, ifelse(Command = "ギザ！螺旋力キック3" && Power >= 3000, 2, 0))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = !var(17)
trigger1 = Time = 0
var(5) = ifelse(power>=2000&&P2movetype=A, floor(power*.001)-1, random%(1+(power>=2000)))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = var(17)
trigger1 = Time = 0
var(5) = ifelse((floor(power*.001)-(P2life<120)-(P2life<240)-1)<0,0,floor(power*.001)-(P2life<120)-(P2life<240)-1)

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && !var(14)) || var(20) = 4 
trigger1 = Time = 0
var(5) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(15)
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(16)
trigger1 = Time = 0
var(5) = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 3100

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifelse(!var(5), 53, ifelse(var(5) = 1, 59, 64))

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 50+(var(5)*2)
movetime = 50+(var(5)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 50+(var(5)*2)

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = time = 0
value = ifelse(!var(5), -1000, ifelse(var(5) = 1, -2000, -3000))

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 4
trigger1 = time = 0
value = -1000

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1
trigger1 = time = 0
value = -1500

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(16)
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(15)
trigger1 = time = 0
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 0
fvar(13) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(14) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(15) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !var(18) && prevstateno != [3000,3999]
trigger1 = time = 4
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 150)),ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 50)),ifelse(!var(5), 128, ifelse(var(5) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3001, Super]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = ceil(-17*const(size.xscale)),ceil(-58*const(size.yscale))
postype = P1
stateno = ifelse((var(20)=[3,5]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 860, 5]
type = Varset
trigger1 = time = 0
var(28) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(29) = 0

[State 1000, 8]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3100,0
channel = 0

[State 1000, 8]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3100,1
channel = 0

[State 1000, 8]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3000,2

[State 1000, 8]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 5

[State 1000, 8]
type = velset
trigger1 = AnimElem = 4
X = 8
Y = 8
persistent = 0

[State 1000, 8]
type = veladd
trigger1 = AnimElemTime(4) > 0
Y = .6

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 7050,PosFreeze]
type = PosFreeze
trigger1 = var(29)

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 4
id = 7250
name = "drill_h2"
pos = 0,0
postype = P1
stateno = 7250
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 20+(var(5)*2)
size.xscale = 1
size.yscale = 1
persistent = 0

[State 1100, HitDef]
type = HitDef
triggerall = var(28) = [0,2]
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElemTime(5) = 2
attr = A, HA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse(((42+(var(5)*7))*fvar(10))<7,7,((42+(var(5)*7))*fvar(10)))),ceil(ifelse(((42+(var(5)*7))*fvar(10)/8)<7,7,((42+(var(5)*7))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = H
pausetime = 6,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -22
hitsound = S2,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.ctrltime = 12
ground.velocity = 0
guard.velocity = 0
air.velocity = -6,-8.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 5
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
sprpriority = 3
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
triggerall = var(28) = [3,6]
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElemTime(5) = 2
attr = A, HA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse(((ifelse(var(5)=2,28,21))*fvar(10))<7,7,((ifelse(var(5)=2,28,21))*fvar(10)))),ceil(ifelse(((ifelse(var(5)=2,28,21))*fvar(10)/8)<7,7,((ifelse(var(5)=2,28,21))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = H
pausetime = 6,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -22
hitsound = S2,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.ctrltime = 12
ground.velocity = 0
guard.velocity = 0
air.velocity = -6,-8.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 5
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
sprpriority = 3
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
triggerall = var(28) = [6,9]
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElemTime(5) = 2
attr = A, HA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse(((ifelse(var(5)=2,21,14))*fvar(10))<7,7,((ifelse(var(5)=2,21,14))*fvar(10)))),ceil(ifelse(((ifelse(var(5)=2,21,14))*fvar(10)/8)<7,7,((ifelse(var(5)=2,21,14))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = H
pausetime = 6,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -22
hitsound = S2,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.ctrltime = 12
ground.velocity = 0
guard.velocity = 0
air.velocity = -6,-8.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 5
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
sprpriority = 3
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
triggerall = (!var(5) && var(28) = 4) || (var(5) = 1 && var(28) = 6) || (var(5) = 2 && var(28) = 9)
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElemTime(5) = 2
attr = A, HA
animtype  = Heavy
air.animtype  = diugup
damage=ceil(ifelse(((14+(var(5)*7))*fvar(10))<7,7,((14+(var(5)*7))*fvar(10)))),ceil(ifelse(((14+(var(5)*7))*fvar(10)/8)<7,7,((14+(var(5)*7))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = H
pausetime = 6,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -22
hitsound = S2,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.ctrltime = 12
ground.velocity = -8,-7.5
guard.velocity = -8
air.velocity = -8,-7.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 5
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
sprpriority = 3
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -22

[State 1320, 9]
type = ChangeState
trigger1 = !var(5) && var(28) = 5
trigger2 = var(5) = 1 && var(28) = 7
trigger3 = var(5) = 2 && var(28) = 10
value = 3101
ignorehitpause = 0

[State 1320, 9]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3105

;---------------------------------------------------------------------------
;ギザ！螺旋力キック（離脱）
[Statedef 3101]
type    = A
movetype = I
physics = N
ctrl = 0
anim = 3101
velset = -2,-12

[State 100, Effect]
type = PlaySnd
triggerall = var(36) = 1
trigger1 = AnimElem = 4
value = 180,1
channel = 0

[State 100, Effect]
type = PlaySnd
triggerall = var(36) = 2
trigger1 = AnimElem = 1
value = 3100,2
channel = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 40,1

[State 105, 1]
type = VelAdd
trigger1 = 1
y = .55

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3105

;---------------------------------------------------------------------------
;ギザ！螺旋力キック（着地）
[Statedef 3105]
type    = S
physics = S
ctrl = 0
anim = 3105
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ドリルエフェクト（大）2
[Statedef 7250]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7250
sprpriority = 4

[State 1000, 0]
type = BindToRoot
trigger1 = 1
pos = 44,0

[State 4900, 16]
type = VarAdd
trigger1 = time < 4
fvar(0) = .45

[State 4900, 16]
type = AngleAdd
trigger1 = time = 0
value = -330

[State 4900, 16]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(0)

[State 1005, trans]
type=trans
trigger1=1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 900, 4]
type = DestroySelf
trigger1 = root,stateno = 195 && root,time = 1
trigger2 = (root,stateno = [200,799]) && root,time = 1
trigger3 = root,stateno = 800 && root,time = 1
trigger4 = root,stateno = 830 && root,time = 1
trigger5 = root,stateno = 1000 && root,time = 1
trigger6 = root,stateno = 1100 && root,time = 1
trigger7 = root,stateno = 1200 && root,time = 1
trigger8 = root,stateno = 1300 && root,time = 1
trigger9 = root,stateno = 1400 && root,time = 1
trigger10 = root,stateno = 1500 && root,time = 1
trigger11 = root,stateno = 3000 && root,time = 1
trigger12 = root,stateno = 3100 && root,time = 1
trigger13 = root,stateno = 3200 && root,time = 1
trigger14 = root,stateno = 3300 && root,time = 1

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = root,stateno = 3101
trigger2 = root,time = 1
trigger3 = root,movetype = H
value = 7201

;---------------------------------------------------------------------------
;リットナーオーバードライブ
[Statedef 3200]
type    = S
movetype = A
physics = N
poweradd = 0
velset = 0,0
ctrl = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = Time = 0
var(5) = ifelse((Command = "ギザ！螺旋力キック2" && Power >= 2000) || (Command = "ギザ！螺旋力キック3" && (Power >= 2000 && Power < 3000)), 1, ifelse(Command = "ギザ！螺旋力キック3" && Power >= 3000, 2, 0))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = !var(17)
trigger1 = Time = 0
var(5) = ifelse(power>=2000&&P2movetype=A, floor(power*.001)-1, random%(1+(power>=2000)))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = var(17)
trigger1 = Time = 0
var(5) = ifelse((floor(power*.001)-(P2life<120)-(P2life<240)-1)<0,0,floor(power*.001)-(P2life<120)-(P2life<240)-1)

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && !var(14)) || var(20) = 4 
trigger1 = Time = 0
var(5) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(15)
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(16)
trigger1 = Time = 0
var(5) = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 3200

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifelse(!var(5), 53, ifelse(var(5) = 1, 59, 64))

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 50+(var(5)*2)
movetime = 50+(var(5)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 50+(var(5)*2)

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = time = 0
value = ifelse(!var(5), -1000, ifelse(var(5) = 1, -2000, -3000))

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 4
trigger1 = time = 0
value = -1000

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1
trigger1 = time = 0
value = -1500

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(16)
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(15)
trigger1 = time = 0
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 0
fvar(13) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(14) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(15) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !var(18) && prevstateno != [3000,3999]
trigger1 = time = 4
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 150)),ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 50)),ifelse(!var(5), 128, ifelse(var(5) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3001, Super]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = ceil(3*const(size.xscale)),ceil(-67*const(size.yscale))
postype = P1
stateno = ifelse((var(20)=[3,5]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(6) = 0

[State 1100, ChangeAnim]
type = ChangeAnim
triggerall = animelemtime(5) > 1
triggerall = animelemtime(17) < 0
trigger1 = frontedgebodydist <= 0
trigger2 = P2statetype = L
trigger2 = P2BodyDist X <= 5
value = anim
elem = 17

[State 1000, Spark]
type = null;Explod
trigger1 = AnimElem = 5
Anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 5
Anim = 7300
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3200,0
channel = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 12
value = 100,1
channel = 19
persistent = 1

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 15
value = 100,2
channel = 20
persistent = 1

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 17
value = 100,3
channel = 20

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 5
x = 8

[State 1100, Velocity]
type = VelMul
trigger1 = animelemtime(17) > 0
x = .9

[State 1100, ChangeState]
type = ChangeState
triggerall = animelemtime(5) > 1
triggerall = animelemtime(17) < 0
trigger1 = P2BodyDist X <= 5
value = 3201

[State 1100, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーオーバードライブ（攻撃）
[Statedef 3201]
type    = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 3201, ifelse(var(5) = 1, 3211, 3221))

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 34 && !var(5)
trigger2 = AnimElem = 42 && var(5) = 1
trigger3 = AnimElem = 57 && var(5) = 2
movetype = I

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1 && !var(5)
trigger2 = AnimElem = 6 && var(5) = 1
trigger3 = AnimElem = 12 && var(5) = 2
value = 3200,1
channel = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 31 && !var(5)
trigger2 = AnimElem = 39 && var(5) = 1
trigger3 = AnimElem = 54 && var(5) = 2
value = 0,1
channel = 0

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 14
trigger3 = AnimElem = 19 && !var(5)
trigger4 = AnimElem = 32 && !var(5)
trigger5 = AnimElem = 20 && var(5) = 1
trigger6 = AnimElem = 40 && var(5) = 1
trigger7 = AnimElem = 27 && var(5) = 2
trigger8 = AnimElem = 55 && var(5) = 2
value = 3,2

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 20 && !var(5)
trigger3 = AnimElem = 28 && var(5) = 1
trigger4 = AnimElem = 20 && var(5) = 2
trigger5 = AnimElem = 34 && var(5) = 2
trigger6 = AnimElem = 43 && var(5) = 2
value = 3,5

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 28 && !var(5)
trigger2 = AnimElem = 36 && var(5) = 1
trigger3 = AnimElem = 51 && var(5) = 2
value = 40,1

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 28 && !var(5)
trigger2 = AnimElem = 36 && var(5) = 1
trigger3 = AnimElem = 51 && var(5) = 2
StateType = A
physics = N

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 28 && !var(5)
trigger2 = AnimElem = 36 && var(5) = 1
trigger3 = AnimElem = 51 && var(5) = 2
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 1
trigger2 = AnimElem = 6
trigger3 = AnimElem = 12
trigger4 = AnimElem = 18
trigger5 = AnimElem = 26 && var(5)
trigger6 = AnimElem = 33 && var(5) = 2
trigger7 = AnimElem = 41 && var(5) = 2
x = 5

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 27 && !var(5)
trigger2 = AnimElem = 35 && var(5) = 1
trigger3 = AnimElem = 50 && var(5) = 2
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 28 && !var(5)
trigger2 = AnimElem = 36 && var(5) = 1
trigger3 = AnimElem = 51 && var(5) = 2
x = 4
y = -9

[State 1100, Velocity]
type = VelMul
trigger1 = animelemtime(27) < 0 && !var(5)
trigger2 = animelemtime(35) < 0 && var(5) = 1
trigger3 = animelemtime(50) < 0 && var(5) = 2
x = .85

[State 1100, Velocity]
type = VelAdd
trigger1 = animelemtime(28) > 0 && !var(5)
trigger2 = animelemtime(36) > 0 && var(5) = 1
trigger3 = animelemtime(51) > 0 && var(5) = 2
y = .5

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 14
trigger3 = AnimElem = 28 && var(5) = 2
attr = S, HA
animtype = Heavy
air.animtype = Back
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
priority = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 2,3
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -20, -66
hitsound = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 36
ground.hittime = 36
guard.ctrltime = 36
ground.velocity = -4,0
guard.velocity = -8
air.velocity = -6,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 35 && var(5) = 2
attr = S, HA
animtype = Heavy
air.animtype = Back
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
priority = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 2,3
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -20, -66
hitsound = S2,5
guardsound = S1,0
ground.type = High
ground.slidetime = 36
ground.hittime = 36
guard.ctrltime = 36
ground.velocity = -4,0
guard.velocity = -8
air.velocity = -6,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 21 && var(5)
attr = S, HA
animtype = Heavy
air.animtype = Back
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
priority = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 2,3
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -20, -66
hitsound = S2,2
guardsound = S1,0
ground.type = High
ground.slidetime = 36
ground.hittime = 36
guard.ctrltime = 36
ground.velocity = -4,0
guard.velocity = -8
air.velocity = -6,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 22 && !var(5)
trigger2 = AnimElem = 30 && var(5) = 1
trigger3 = AnimElem = 45 && var(5) = 2
attr = S, HA
animtype = Heavy
air.animtype = Back
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
priority = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 8,9
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -20, -66
hitsound = S2,5
guardsound = S1,0
ground.type = Low
ground.slidetime = 36
ground.hittime = 36
guard.ctrltime = 36
ground.velocity = -2.5,-10
guard.velocity = -8
air.velocity = -2.5,-10
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 31 && !var(5)
trigger2 = AnimElem = 40 && var(5) = 1
trigger3 = AnimElem = 55 && var(5) = 2
attr = S, HA
animtype = Heavy
air.animtype = Back
damage=ceil(ifelse(((35+(var(5)*7))*fvar(10))<7,7,((35+(var(5)*7))*fvar(10)))),ceil(ifelse(((35+(var(5)*7))*fvar(10)/8)<7,7,((35+(var(5)*7))*fvar(10)/8)))
priority = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 17,18
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -20, -20
hitsound = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 36
ground.hittime = 36
guard.ctrltime = 36
ground.velocity = -3,10
guard.velocity = -8
air.velocity = -3,10
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 15
envshake.ampl = 5
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 1
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
id = 3201
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -66

[State 901, Throw]
type = TargetState
trigger1 = var(6) = 1 && numtarget
value = 3820
ignorehitpause = 1
persistent = 0

[State 100, 5]
type = ChangeState
triggerall = !var(59)
trigger1 = var(6) = 1 && numtarget
value = 3202+(command="holdback")
ignorehitpause = 0

[State 100, 5]
type = ChangeState
triggerall = var(59)
triggerall = var(6) = 1 && numtarget
trigger1 = frontedgedist < 60
trigger2 = random%2=0
value = 3203
ignorehitpause = 0

[State 100, 5]
type = ChangeState
triggerall = var(59)
trigger1 = var(6) = 1 && numtarget
value = 3202
ignorehitpause = 0

[State 100, 5]
type = VarSet
trigger1 = var(6) = 1
var(6) = 2
ignorehitpause = 0

[State 1320, 9]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3205

;---------------------------------------------------------------------------
;リットナーオーバードライブ（射撃）（正面撃ち）
[Statedef 3202]
type    = A
movetype = A
physics = N
ctrl = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 3202, ifelse(var(5) = 1, 3212, 3222))

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,4

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100, 4

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 9 && var(5) != 2
trigger2 = AnimElem = 15 && var(5) = 1
value = 1100, 3

[State 100, Effect]
type = PlaySnd
triggerall = var(5) != 2
trigger1 = AnimElem = 3
value = 3100,1
channel = 0

[State 100, Effect]
type = PlaySnd
triggerall = var(5) = 2
trigger1 = AnimElem = 3
value = 3200,2
channel = 0

[State 1000, Voice]
type = PlaySnd
triggerall = var(5) = 2
trigger1 = AnimElem = 9
value = 3200,3

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 10 && !var(5)
trigger2 = AnimElem = 16 && var(5) = 1
x = -4-var(5)
y = -6-var(5)

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 10 && var(5) = 1
x = -1.5
y = -4.5

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(10) > 0 && var(5) != 2
x = .98

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(10) > 0 && !var(5)
trigger2 = AnimElemTime(18) > 0 && var(5) = 1
y = .5

[State 920, 0]
type = VelAdd
trigger1 = var(5) = 1
trigger1 = AnimElemTime(9) >= 0
trigger1 = AnimElemTime(17) < 0
y = .3

[State 920, 0]
type = PosFreeze
trigger1 = var(5) != 2
trigger1 = AnimElemTime(9) >= 0
trigger1 = AnimElemTime(10) < 0
trigger2 = var(5) = 1
trigger2 = AnimElemTime(17) >= 0
trigger2 = AnimElemTime(18) < 0

[State 920, 0]
type = VelSet
triggerall = var(5) != 2
trigger1 = AnimElem = 1
x = -2.5
y = -7

[State 920, 0]
type = VelSet
triggerall = var(5) = 2
trigger1 = AnimElem = 1
x = -3
y = -7.5

[State 920, 0]
type = VelSet
triggerall = var(5) = 2
trigger1 = AnimElem = 9
x = -.25
y = -.25

[State 920, 0]
type = VelSet
triggerall = var(5) = 2
trigger1 = AnimElem = 29
x = -7
y = -8.5

[State 105, 1]
type = VelMul
triggerall = var(5) = 2
trigger1 = AnimElemTime(29) >= 0
x = .95

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(9) < 0
y = .4

[State 920, 0]
type = VelAdd
triggerall = var(5) = 2
trigger1 = AnimElemTime(29) >= 0
y = .5

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 9 && var(5) != 2
trigger2 = AnimElem = 17 && var(5) = 1
id = 7003
name = "air_shoot2"
pos = ceil(50*const(size.xscale)),ceil(-15*const(size.yscale))
postype = P1
stateno = 7003
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1000,Super]
type = Helper
triggerall = var(5) = 2
trigger1 = AnimElem = 8
id = 7400
name = "air_laser"
pos = ceil(44*const(size.xscale)),ceil(-22*const(size.yscale))
postype = P1
stateno = 7400
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimElemTime(8) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3205

;---------------------------------------------------------------------------
;リットナーオーバードライブ（射撃）（逆さ撃ち）
[Statedef 3203]
type    = A
movetype = A
physics = N
ctrl = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 3203, ifelse(var(5) = 1, 3213, 3223))

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,4

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100, 4

[State 1000, Voice]
type = PlaySnd
trigger1 = AnimElem = 9 && var(5) != 2
trigger2 = AnimElem = 15 && var(5) = 1
value = 1100, 3

[State 100, Effect]
type = PlaySnd
triggerall = var(5) != 2
trigger1 = AnimElem = 1
value = 1100,0
channel = 0

[State 100, Effect]
type = PlaySnd
triggerall = var(5) = 2
trigger1 = AnimElem = 1
value = 3200,5
channel = 0

[State 1000, Voice]
type = PlaySnd
triggerall = var(5) = 2
trigger1 = AnimElem = 9
value = 3200,3

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 10 && !var(5)
trigger2 = AnimElem = 16 && var(5) = 1
x = -4.5-(var(5)*1)
y = -4-(var(5)*.5)

[State 920, 0]
type = VelSet
trigger1 = AnimElem = 10 && var(5) = 1
x = -6
y = -4

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(10) > 0 && var(5) != 2
x = .98

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(10) > 0 && !var(5)
trigger2 = AnimElemTime(18) > 0 && var(5) = 1
y = .6

[State 920, 0]
type = VelAdd
trigger1 = var(5) = 1
trigger1 = AnimElemTime(9) >= 0
trigger1 = AnimElemTime(17) < 0
y = .3

[State 920, 0]
type = PosFreeze
trigger1 = var(5) != 2
trigger1 = AnimElemTime(9) >= 0
trigger1 = AnimElemTime(10) < 0
trigger2 = var(5) = 1
trigger2 = AnimElemTime(17) >= 0
trigger2 = AnimElemTime(18) < 0

[State 920, 0]
type = VelSet
triggerall = var(5) != 2
trigger1 = AnimElem = 1
x = -7
y = -5

[State 920, 0]
type = VelSet
triggerall = var(5) = 2
trigger1 = AnimElem = 1
x = -7.5
y = -5

[State 920, 0]
type = VelSet
triggerall = var(5) = 2
trigger1 = AnimElem = 9
x = -.3
y = -.2

[State 920, 0]
type = VelSet
triggerall = var(5) = 2
trigger1 = AnimElem = 29
x = -8
y = -7.5

[State 105, 1]
type = VelMul
triggerall = var(5) = 2
trigger1 = AnimElemTime(29) >= 0
x = .95

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(9) < 0
y = .4

[State 920, 0]
type = VelAdd
triggerall = var(5) = 2
trigger1 = AnimElemTime(29) >= 0
y = .6

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 9 && var(5) != 2
trigger2 = AnimElem = 17 && var(5) = 1
id = 7004
name = "air_shoot3"
pos = ceil(84*const(size.xscale)),ceil(-28*const(size.yscale))
postype = P1
stateno = 7004
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1000,Super]
type = Helper
triggerall = var(5) = 2
trigger1 = AnimElem = 8
id = 7401
name = "air_laser2"
pos = ceil(67*const(size.xscale)),ceil(-38*const(size.yscale))
postype = P1
stateno = 7401
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimElemTime(8) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3206

;---------------------------------------------------------------------------
;リットナーオーバードライブ（着地）（正面撃ち）
[Statedef 3205]
type    = S
physics = S
ctrl = 0
anim = 3205
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーオーバードライブ（着地）（逆さ撃ち）
[Statedef 3206]
type    = S
physics = S
ctrl = 0
anim = 3206
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;リットナーオーバードライブ（正面撃ち）（飛び道具）
[Statedef 7003]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7000
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State 1100, Velocity]
type = VelSet
trigger1 = time = 1
x = 15
y = 15

[State 5035, 1]
type = AngleSet
trigger1 = 1
value = ceil((atan(((vel x)+.000001)/((vel y)+.000001))*180)/pi)-(90*ifelse(vel y < 0, -1, 1))

[State 5035, 1]
type = AngleDraw
trigger1 = 1

[State 5035, 1]
type = Trans
trigger1 = 1
trans = add

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(3205) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(3205) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
trigger1 = time = 1
projanim = 7053
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = S, HP
damage=ceil(ifelse((63*fvar(10))<7,7,(63*fvar(10)))),ceil(ifelse((63*fvar(10)/8)<7,7,(63*fvar(10)/8)))
animtype = Heavy
hitflag = MAFD
guardflag = M
pausetime = 4,9
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = Low
ground.slidetime = 40
ground.hittime = 40
air.hittime = 40
guard.ctrltime = 18
ground.velocity = -3.5,-6
guard.velocity = -8
air.velocity = -3.5,-6
airguard.velocity = -5.33,-1
fall = 1
air.juggle = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
ProjID = 3205
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = .5

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(3205) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(3205) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7008

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(3205)
value = 7007

;---------------------------------------------------------------------------
;リットナーオーバードライブ（飛び道具）（消滅）
[Statedef 7007]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 8321

[State -3, Blocking5]
type = helper
triggerall = !NumHelper(8130)
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(3205) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = .5,.5

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1100, Voice]
type = PlaySnd
triggerall = !parent,var(36)
trigger1 = time = 1
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;リットナーオーバードライブ（飛び道具）（消滅）2
[Statedef 7008]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 8321

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = .5,.5

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1100, Voice]
type = PlaySnd
trigger1 = time = 1
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;リットナーオーバードライブ（正面撃ち）（レーザー）
[Statedef 7400]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7400
sprpriority = 4

[State 4900, 16]
type = AngleAdd
trigger1 = time = 0
value = -20

[State 4900, 16]
type = AngleAdd
trigger1 = animelem = 17
value = 3

[State 4900, 16]
type = AngleAdd
trigger1 = animelem = 23
value = 6

[State 4900, 16]
type = AngleAdd
trigger1 = animelem = 25
trigger2 = animelem = 26
trigger3 = animelem = 27
value = 9

[State 4900, 16]
type = AngleAdd
trigger1 = animelem = 24
value = 12

[State 4900, 16]
type = AngleAdd
trigger1 = animelem = 19
trigger2 = animelem = 21
value = 15

[State 4900, 16]
type = AngleDraw
trigger1 = 1
scale = 1.75,1.75

[State 1005, trans]
type=trans
trigger1=1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 1000, 0]
type = BindToRoot
trigger1 = AnimElemTime(20) < 0
pos = ceil(44*const(size.xscale)),ceil(-22*const(size.yscale))

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State -2, Combo]
type = VarAdd
trigger1 = var(0)
var(0) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = root,ProjContactTime(3225) = 1
var(1) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = root,ProjContactTime(3225) = 1
var(0) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = var(0) = 5
var(0) = 0
ignorehitpause = 1

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(3225) = 1
fvar(26) = 1
persistent = 1

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(3225) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
triggerall = var(1)=[0,2+var(5)]
triggerall = !var(0)
triggerall = !root,NumProjID(3225)
trigger1 = AnimElemTime(6) >= 0
trigger1 = AnimElemTime(20) < 0
projanim = 7450
Projhitanim = -1
projremanim = -1
projcancelanim = -1
projremovetime = 1
offset = 0,0
projpriority = 7
projsprpriority = 4
velocity = 0,0
attr = S, HP
damage=ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10)))),ceil(ifelse((49*fvar(10)/8)<7,7,(49*fvar(10)/8)))
animtype = Heavy
hitflag = MAFD
guardflag = M
pausetime = 0,14
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(P2dist x)-20, ceil(P2dist y)-60
hitsound = S2,15
guardsound = S1,1
ground.type = Low
ground.slidetime = 40
ground.hittime = 40
air.hittime = 40
guard.ctrltime = 40
ground.velocity = -5, -6.67
guard.velocity = -8
air.velocity = -5, -6.67
airguard.velocity = -6.67,-1
air.juggle = 0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 15
envshake.ampl = 3
ProjID = 3225
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = .5

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(3225) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = ceil(P2dist x)-20, ceil(P2dist y)-60
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;リットナーオーバードライブ（逆さ撃ち）（飛び道具）
[Statedef 7004]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7000
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State 1100, Velocity]
type = VelSet
trigger1 = time = 1
x = 18
y = 9

[State 5035, 1]
type = AngleSet
trigger1 = 1
value = ceil((atan(((vel x)+.000001)/((vel y)+.000001))*180)/pi)-(90*ifelse(vel y < 0, -1, 1))

[State 5035, 1]
type = AngleDraw
trigger1 = 1

[State 5035, 1]
type = Trans
trigger1 = 1
trans = add

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(3205) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(3205) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
trigger1 = time = 1
projanim = 7054
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = S, HP
damage=ceil(ifelse((63*fvar(10))<7,7,(63*fvar(10)))),ceil(ifelse((63*fvar(10)/8)<7,7,(63*fvar(10)/8)))
animtype = Heavy
hitflag = MAFD
guardflag = M
pausetime = 4,9
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = Low
ground.slidetime = 40
ground.hittime = 40
air.hittime = 40
guard.ctrltime = 18
ground.velocity = -3.5,-6
guard.velocity = -8
air.velocity = -3.5,-6
airguard.velocity = -5.33,-1
fall = 1
air.juggle = 0
air.fall = 1
air.recover = 0
envshake.time = 8
envshake.ampl = 2
ProjID = 3205
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = .5

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(3205) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(3205) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7008

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(3205)
value = 7007

;---------------------------------------------------------------------------
;リットナーオーバードライブ（逆さ撃ち）（レーザー）
[Statedef 7401]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7400
sprpriority = 4

[State 4900, 16]
type = null;AngleAdd
trigger1 = time = 0
value = 10

[State 4900, 16]
type = AngleAdd
trigger1 = animelem = 17
value = 3

[State 4900, 16]
type = AngleAdd
trigger1 = animelem = 23
value = 6

[State 4900, 16]
type = AngleAdd
trigger1 = animelem = 25
trigger2 = animelem = 26
trigger3 = animelem = 27
value = 9

[State 4900, 16]
type = AngleAdd
trigger1 = animelem = 24
value = 12

[State 4900, 16]
type = AngleAdd
trigger1 = animelem = 19
trigger2 = animelem = 21
value = 15

[State 4900, 16]
type = AngleDraw
trigger1 = 1
scale = 1.75,1.75

[State 1005, trans]
type=trans
trigger1=1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 1000, 0]
type = BindToRoot
trigger1 = AnimElemTime(20) < 0
pos = ceil(67*const(size.xscale)),ceil(-38*const(size.yscale))

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State -2, Combo]
type = VarAdd
trigger1 = var(0)
var(0) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = root,ProjContactTime(3225) = 1
var(1) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = root,ProjContactTime(3225) = 1
var(0) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = var(0) = 5
var(0) = 0
ignorehitpause = 1

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(3225) = 1
fvar(26) = 1
persistent = 1

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(3225) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
triggerall = var(1)=[0,2+var(5)]
triggerall = !var(0)
triggerall = !root,NumProjID(3225)
trigger1 = AnimElemTime(6) >= 0
trigger1 = AnimElemTime(20) < 0
projanim = 7451
Projhitanim = -1
projremanim = -1
projcancelanim = -1
projremovetime = 1
offset = 0,0
projpriority = 7
projsprpriority = 4
velocity = 0,0
attr = S, HP
damage=ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10)))),ceil(ifelse((49*fvar(10)/8)<7,7,(49*fvar(10)/8)))
animtype = Heavy
hitflag = MAFD
guardflag = M
pausetime = 0,14
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(P2dist x)-20, ceil(P2dist y)-60
hitsound = S2,15
guardsound = S1,1
ground.type = Low
ground.slidetime = 40
ground.hittime = 40
air.hittime = 40
guard.ctrltime = 20
ground.velocity = -5, -6.67
guard.velocity = -8
air.velocity = -5, -6.67
airguard.velocity = -6.67,-1
air.juggle = 0
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 15
envshake.ampl = 3
ProjID = 3225
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = .5

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(3225) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = ceil(P2dist x)-20, ceil(P2dist y)-60
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; HITG_SHAKE_High
[Statedef 3800]
type    = S
movetype = H
physics = N
velset = 0,0

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 5002

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3801 ;HITG_SLIDE

;---------------------------------------------------------------------------
; HITG_SHAKE_Low
[Statedef 3805]
type    = S
movetype = H
physics = N
velset = 0,0

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 5012

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3806 ;HITG_SLIDE

;---------------------------------------------------------------------------
; HITG_SLIDE_High
[Statedef 3801]
type    = S
movetype = H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5007

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITG_SLIDE_Low
[Statedef 3806]
type    = S
movetype = H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5017

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 3810]
type    = C
movetype = H
physics = N
velset = 0,0

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 320,0

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 3830

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 3820]
type    = A
movetype = H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 3830

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 3830]
type    = A
movetype = H
physics = N
ctrl = 0

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 320,0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 4]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0 ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 3850 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 3835 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 3835]
type    = A
movetype = H
physics = N

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 320,0

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 4]
type = ChangeState
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0 ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0  ;No transition anim
trigger4 = Anim != 5035 ;.
value = 3850 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 3850]
type    = A
movetype = H
physics = N

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 320,0

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0  ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 3900 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 3880]
type    = L
movetype = H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse(GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 3881 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 3830 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 3881]
type    = L
movetype = H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 3910 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 3900]
type    = L
movetype = H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 3910 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
trigger1 = life >= 5
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = 1;sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 3901

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 3901]
type    = L
movetype = H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 3910

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 3910]
type    = L
movetype = H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
trigger1 = life >= 5
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = 1;sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 11] ;If just died
type = SelfState
trigger1 = time = 70
value = 5120

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

;------------------------------------------------------------------------------------------
;オレ達無敵のグレン団！
[Statedef 3300]
type    = S
movetype = A
physics = N
juggle = 8
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(44) = 2

[State 1100, VarSet]
type = VarSet
triggerall = prevstateno = [3000,3999]
trigger1 = Time = 0
var(44) = var(5)

[State 1100, VarSet]
type = VarSet
triggerall = var(18)
trigger1 = Time = 0
var(44) = 3

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 2

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 3300

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 64

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 5
time = 50+(var(5)*2)
movetime = 50+(var(5)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = VarSet
triggerall = Time = 5
trigger1 = enemynear,stateno != [120,155]
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 50+(var(5)*2)

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 2 || var(20) = 6 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(15)
trigger1 = time = 0
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 0
fvar(13) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(14) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(15) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !var(18) && prevstateno != [3000,3999]
trigger1 = Time = 5
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3001, Super]
type = Helper
trigger1 = Time = 3
id = 8000
name = "Super"
pos = ceil(0*const(size.xscale)),ceil(-60*const(size.yscale))
postype = P1
stateno = ifelse((var(20)=[3,5]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 221, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 5100, 1

[State 221, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3300, 0
channel = 0

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElem = 5
time = 15
ampl = 3

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 5
Anim = 7501
pos = ceil(16*const(size.xscale)),0
postype = p1
ownpal = 1
sprpriority = 3
supermovetime = 5

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
damage = ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10)))),ceil(ifelse((14*fvar(10)/8)<7,7,(14*fvar(10)/8)))
animtype = Heavy
guardflag = M
hitflag = MAF
hitsound = s2,2
guardsound = s1,0
pausetime = 13,14
sparkno = S8220+(random%8)
guard.sparkno = s8105
sparkxy = -10,-20
ground.type = Low
ground.slidetime = 72
ground.hittime  = 72
guard.ctrltime = 20
ground.velocity = -.5
guard.velocity = -8
air.velocity = -.5, -6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -11.2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 0,0
givepower = 35, 35
envshake.time = 15
envshake.ampl = 8
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)
P2stateno = 3810
kill = 0
guard.kill = 0

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -20

[State 901, Throw]
type = TargetState
trigger1 = time > 1 && var(36) = 1 && numtarget
value = 3805
ignorehitpause = 1
persistent = 0

[State 1200, 2]
type = ChangeState
trigger1 = time > 1 && var(36) = 1 && numtarget
value = 3301
persistent = 0

[State 221, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（成功）
[Statedef 3301]
type    = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 3301

[State 810,TargetBind]
type = TargetBind
trigger1 = time = 0
pos = 60,0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 100,10

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3300, 1

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = teammode = simul
value = SCA

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 2
StateType = A
physics = N

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 2
x = -backedgebodydist*.05
y = -7.5

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .95

[State 105, 1]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .8

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 2
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 1100, ChangeState]
type = ChangeState
triggerall = animelemtime(2) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3302

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（射撃）
[Statedef 3302]
type    = S
movetype = A
physics = N
ctrl = 0
anim = 3302

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 18
value = 1500, 0
channel = 0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100, 4

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
trigger5 = AnimElem = 21
value = 1100, 3

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 100, 3
channel = 20

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = teammode = simul
value = SCA

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
trigger5 = AnimElem = 22
x = -2

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 34
x = 10

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 24
trigger2 = AnimElem = 42
x = 0

[State 1100, Velocity]
type = VelMul
trigger1 = 1
x = .87

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 5
trigger2 = AnimElem = 13
trigger3 = AnimElem = 21
id = 7005
name = "ground_shoot2"
pos = ceil(69*const(size.xscale)),ceil(-51*const(size.yscale))
postype = P1
stateno = 7009
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1000,Super]
type = Helper
trigger1 = AnimElem = 9
trigger2 = AnimElem = 17
id = 7006
name = "ground_shoot2"
pos = ceil(69*const(size.xscale)),ceil(-51*const(size.yscale))
postype = P1
stateno = 7009
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 191, Cloth]
type = Helper
trigger1 = AnimElem = 22
ID = 30000
stateno = 31000
postype = p1
pos = frontedgebodydist+120,-216
name = "kamina_super"
facing = -1
ownpal = 1

[State 191, Cloth]
type = Helper
triggerall = numhelper(30000)
trigger1 = helper(30000),stateno = 31001 && helper(30000),animelem = 30
ID = 20000
stateno = 21000
postype = P1
pos = 110,0
name = "simon_super"
ownpal = 1

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 40
attr = S, HA
damage = ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10)))),ceil(ifelse((35*fvar(10)/8)<7,7,(35*fvar(10)/8)))
animtype = Heavy
guardflag = M
hitflag = MAF
hitsound = s2,2
guardsound = s1,0
pausetime = 24,25
sparkno = S8220+(random%8)
guard.sparkno = s8105
sparkxy = -10,-75
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 0,-19
guard.velocity = -8
air.velocity = 0,-19
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .6
getpower = 0,0
givepower = 35, 35
envshake.time = 40
envshake.ampl = 10
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
P2stateno = 3810
kill = 0

[State 221, 3]
type = ChangeState
trigger1 = numtarget
trigger1 = target,life < 5
trigger1 = animtime = 0
value = 3305

[State 221, 3]
type = ChangeState
trigger1 = animtime = 0
value = 3303

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（退散）
[Statedef 3303]
type    = S
movetype = I
physics = N
ctrl = 0
anim = 3303
velset = 0,0
sprpriority = 2

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 17
x = -10
y = -6.5

[State 1100, Velocity]
type = VelAdd
trigger1 = AnimElemTime(17) > 0
y = .6

[State 1100, Velocity]
type = VelMul
trigger1 = 1
x = .95

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = teammode = simul
value = SCA

[State 5010, 5]
type = StateTypeSet
trigger1 = AnimElem = 17
statetype = A
physics = N

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100, 4

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 17
value = 100, 10

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 17
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 221, 3]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3304

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（着地）
[Statedef 3304]
type    = S
physics = S
ctrl = 0
anim = 106
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = teammode = simul
value = SCA

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（KO時1）
[Statedef 3305]
type    = S
movetype= I
physics = S
anim = 3305
sprpriority = 2

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100, 4

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3300, 14

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = numtarget
trigger1 = target,stateno = 3900
trigger1 = target,time = 1
value = -999999
persistent = 0

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = teammode = simul
value = SCA

[State 3810,5]
type = Changestate
trigger1 = roundstate != 2
trigger1 = time > 85
value = 3306

[State 221, 3]
type = ChangeState
trigger1 = roundstate = 2
trigger1 = time > 85
value = 3307

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（KO時2）
[Statedef 3306]
type    = S
movetype= I
physics = S
ctrl = 1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3810,5]
type = Changestate
trigger1 = p2movetype = A
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（退散）
[Statedef 3307]
type    = S
movetype = I
physics = N
ctrl = 0
anim = 3307
velset = 0,0
sprpriority = 2

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 5
x = -10
y = -6.5

[State 1100, Velocity]
type = VelAdd
trigger1 = AnimElemTime(5) > 0
y = .6

[State 1100, Velocity]
type = VelMul
trigger1 = 1
x = .95

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = teammode = simul
value = SCA

[State 5010, 5]
type = StateTypeSet
trigger1 = AnimElem = 5
statetype = A
physics = N

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 100, 10

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 5
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 221, 3]
type = ChangeState
trigger1 = AnimElemTime(5) > 0
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3304

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（飛び道具）
[Statedef 7009]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7000
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
var(5) = parent,var(5)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = parent,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = parent,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = parent,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = parent,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = parent,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = parent,fvar(10)

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 15
y = (random-500)*.001

[State 5035, 1]
type = AngleSet
trigger1 = 1
value = ceil((atan(((vel x)+.000001)/((vel y)+.000001))*180)/pi)-(90*ifelse(vel y < 0, -1, 1))

[State 5035, 1]
type = AngleDraw
trigger1 = 1

[State 5035, 1]
type = Trans
trigger1 = 1
trans = add

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(3305) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(3305) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
triggerall = IsHelper(7005)
trigger1 = time = 1
projanim = 7055
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = S, HP
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = M
pausetime = 4,ceil(9*(2-(var(16)>0))/2)
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = Low
ground.slidetime = 72
ground.hittime = 72
air.hittime = 72
guard.ctrltime = 18
ground.velocity = -8
guard.velocity = -8
air.velocity = -4.5,-6
airguard.velocity = -5.33,-1
air.juggle = 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 12
envshake.ampl = 3
ProjID = 3305
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = .5
nochainID = root,var(40)
P2stateno = 3805
kill = 0

[State 1000, Proj]
type = Projectile
triggerall = IsHelper(7006)
trigger1 = time = 1
projanim = 7055
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = S, HP
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = M
pausetime = 4,ceil(9*(2-(var(16)>0))/2)
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = High
ground.slidetime = 72
ground.hittime = 72
air.hittime = 72
guard.ctrltime = 18
ground.velocity = -8
guard.velocity = -8
air.velocity = -4.5,-6
airguard.velocity = -5.33,-1
air.juggle = 0
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
envshake.time = 12
envshake.ampl = 3
ProjID = 3305
getpower = 0,0
givepower = 35, 35
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = .5
nochainID = root,var(40)
P2stateno = 3800
kill = 0

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(3305) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7006

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(3305)
value = 7005

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（カミナ）（出現）
[Statedef 31000]
type = A
movetype = A
physics = N
ctrl = 0
anim = 31000
velset = 4,15
sprpriority = 1

[State 52, Effect]
type = PlaySnd
trigger1 = time = 1
value = 3300, 2

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3001, Width]
type = Width
trigger1 = 1
player = 30,0

[State 190, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 31001

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（カミナ）（攻撃）
[Statedef 31001]
type    = S
movetype = A
physics = N
ctrl = 0
anim = 31001
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = root,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = root,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = root,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = root,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = root,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = root,fvar(10)

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3300, 3

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 26
value = 3300, 4

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
trigger3 = AnimElem = 12
trigger4 = AnimElem = 16
trigger5 = AnimElem = 20
trigger6 = AnimElem = 24
trigger7 = AnimElem = 28
trigger8 = AnimElem = 32
value = 3, 12

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 13
trigger3 = AnimElem = 21
trigger4 = AnimElem = 29
Anim = 7700
pos = ceil(16*const(size.xscale)),ceil(20*const(size.yscale))
postype = p1
ownpal = 1
sprpriority = 3
scale = 1,1.333

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 17
trigger3 = AnimElem = 25
trigger4 = AnimElem = 33
Anim = 7701
pos = ceil(16*const(size.xscale)),ceil(-12*const(size.yscale))
postype = p1
ownpal = 1
sprpriority = 3
scale = 1,.75

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 36
Anim = 7720
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
trigger3 = AnimElem = 11
trigger4 = AnimElem = 15
trigger5 = AnimElem = 19
trigger6 = AnimElem = 23
trigger7 = AnimElem = 27
trigger8 = AnimElem = 31
x = 6

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 35
x = 10

[State 1100, Velocity]
type = VelMul
trigger1 = 1
x = .85

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 815, 1]
type = PlayerPush
trigger1 = 1
value = 1

[State 3001, Width]
type = Width
trigger1 = animelemtime(35) < 0
player = 30,0

[State 3001, VarAdd]
type = VarAdd
trigger1 = movehit
var(0) = 1
ignorehitpause = 1

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 13
trigger3 = AnimElem = 21
trigger4 = AnimElem = 29
attr = S, HP
damage = ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10)))),ceil(ifelse((28*fvar(10)/8)<7,7,(28*fvar(10)/8)))
animtype = Heavy
guardflag = M
hitflag = MAF
hitsound = s2,12
guardsound = s1,0
pausetime = 2,3
sparkno = S8900+(random%64)
guard.sparkno = s8105
sparkxy = -30,-60
ground.type = Low
ground.slidetime = 72
ground.hittime  = 72
guard.ctrltime = 72
ground.velocity = -3
guard.velocity = -8
air.velocity = -.5, -8.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 0,0
givepower = 35, 35
envshake.time = 12
envshake.ampl = 3
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
P2stateno = 3805
kill = 0

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 9
trigger2 = AnimElem = 17
trigger3 = AnimElem = 25
trigger4 = AnimElem = 33
attr = S, HP
damage = ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10)))),ceil(ifelse((28*fvar(10)/8)<7,7,(28*fvar(10)/8)))
animtype = Heavy
guardflag = M
hitflag = MAF
hitsound = s2,12
guardsound = s1,0
pausetime = 2,3
sparkno = S8900+(random%64)
guard.sparkno = s8105
sparkxy = -30,-60
ground.type = High
ground.slidetime = 72
ground.hittime  = 72
guard.ctrltime = 72
ground.velocity = -3
guard.velocity = -8
air.velocity = -.5, -8.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 0
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
getpower = 0,0
givepower = 35, 35
envshake.time = 12
envshake.ampl = 3
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
P2stateno = 3800
kill = 0

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 37
attr = S, HP
damage = ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10)))),ceil(ifelse((35*fvar(10)/8)<7,7,(35*fvar(10)/8)))
animtype = Heavy
guardflag = M
hitflag = MAF
hitsound = s2,12
guardsound = s1,0
pausetime = 24,25
sparkno = S8900+(random%64)
guard.sparkno = s8105
sparkxy = 0,-90
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 0,-19
guard.velocity = -8
air.velocity = 0,-19
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .6
getpower = 0,0
givepower = 35, 35
envshake.time = 40
envshake.ampl = 10
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
P2stateno = 3810
kill = 0

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -30

;時間停止によるガード不能
[State 3000, preventguard]
type = AssertSpecial
trigger1 = root,fvar(36) > 0
flag = unguardable

;ガード音追加
[State 5900, 3];剣
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Tin's Kibagami"
trigger2 = target,name = "Tin's Shiki"
trigger3 = target,name = "YUNFEI"
trigger4 = target,name = "AMAKUSA SHIRO TOKISADA"
trigger5 = target,name = "Apocalypse"
trigger6 = target,name = "Arthur"
trigger7 = target,name = "Major D.Schaefer"
trigger8 = target,name = "Axl Low"
trigger9 = target,name = "Baiken"
trigger10 = target,name = "Dr.baldhead"

trigger11 = target,name = "basara"
trigger12 = target,name = "Benten"
trigger13 = target,name = "Oboro Bishamon"
trigger14 = target,name = "Bishamon"
trigger15 = target,name = "blackpolnareff"
trigger16 = target,name = "Charlotte"
trigger17 = target,name = "Chipp Zanuff"
trigger18 = target,name = "CLESS ALVEIN"
trigger19 = target,name = "nakoruru"
trigger20 = target,name = "Donovan"

trigger21 = target,name = "Foxy"
trigger22 = target,name = "galford"
trigger23 = target,name = "Kibagami Genjuro"
trigger24 = target,name = "GUNDAM HEAVY ARMS"
trigger25 = target,name = "God Gundam"
trigger26 = target,name = "GUNDAM EPYON"
trigger27 = target,name = "Hattori Hanzo"
trigger28 = target,name = "Haohmaru"
trigger29 = target,name = "Hikaru" && target,authorname = "Nyan☆Kiryu"
trigger30 = target,name = "Strider Hiryu"

trigger31 = target,name = "Janne Dulk"
trigger32 = target,name = "Yagyu Jubei"
trigger33 = target,name = "Kanzaki Juzo"
trigger34 = target,name = "kaede"
trigger35 = target,name = "Kaede by Ribeiro"
trigger36 = target,name = "Shinnosuke Kagami"
trigger37 = target,name = "Shinnosuke Kagami By Third"
trigger38 = target,name = "Karasu"
trigger39 = target,name = "Kazama Kazuki"
trigger40 = target,name = "Kenshin"

trigger41 = target,name = "khan"
trigger42 = target,name = "Kojiroh Sanada by MAPPY"
trigger43 = target,name = "Kouryu By Third"
trigger44 = target,name = "KY KISKE"
trigger45 = target,name = "Kyle Dunamis"
trigger46 = target,name = "lion"
trigger47 = target,name = "lyris"
trigger48 = target,name = "Sentinel"
trigger49 = target,name = "MANJIMARU"
trigger50 = target,name = "MASTER GUNDAM"

trigger51 = target,name = "May"
trigger52 = target,name = "Mazinger Z"
trigger53 = target,name = "Mercurius"
trigger54 = target,name = "Minakata Moriya"
trigger55 = target,name = "Moriya Minakata"
trigger56 = target,name = "Mukuro by MAPPY"
trigger57 = target,name = "Musashi Akatsuki By Third"
trigger58 = target,name = "nakoruruss0"
trigger59 = target,name = "Reika Murasame"
trigger60 = target,name = "Rera"

trigger61 = target,name = "RID"
trigger62 = target,name = "rimururu"
trigger63 = target,name = "SAKURA SHINGOUJI"
trigger64 = target,name = "Gundam Sandrock"
trigger65 = target,name = "sazabi"
trigger66 = target,name = "Setsuna"
trigger67 = target,name = "Shining Gundam"
trigger68 = target,name = "Shenlong"
trigger69 = target,name = "Shikyoh BY M@PPY"
trigger70 = target,name = "Silver Samurai"

trigger71 = target,name = "Slash v2.0 by Inverse"
trigger72 = target,name = "Sodom by Splode"
trigger73 = target,name = "Sodom with Samurai Sword"
trigger74 = target,name = "Kazama Sogetsu"
trigger75 = target,name = "Sol Badguy"
trigger76 = target,name = "SETA SOUJIRO"
trigger77 = target,name = "SHIKI"
trigger78 = target,name = "Zechs Marquise"
trigger79 = target,name = "TamTam"
trigger80 = target,name = "Testament"

trigger81 = target,name = "VAYEATE"
trigger82 = target,name = "washizuka"
trigger83 = target,name = "Wing Gundam"
trigger84 = target,name = "WINGGUNDAM ZERO"
trigger85 = target,name = "Yoshitora Tokugawa"
trigger86 = target,name = "Yuki By Third"
trigger87 = target,name = "Yukimura Sanada"
trigger88 = target,name = "zankuro"
trigger89 = target,name = "zantetsu"
trigger90 = target,name = "chaka"

trigger91 = target,name = "Faust"
trigger92 = target,name = "Hayato"
trigger93 = target,name = "ROBO-Ky"
trigger94 = target,name = "Sankuro Yorozu"
trigger95 = target,name = "cvshaohmaru"
trigger96 = target,name = "gg_venom"
trigger97 = target,name = "cvshayato"
trigger98 = target,name = "cvsnakoruru"
trigger99 = target,name = "Predetor Warrior"
trigger100 = target,name = "AXL"

trigger101 = target,name = "svcathena"
trigger102 = target,name = "N.Sieger"
trigger103 = target,name = "Shigen Naoe"
trigger104 = target,name = "War Machine"
trigger105 = target,name = "Iron Man"
trigger106 = target,name = "Sol=Badguy"
trigger107 = target,name = "A.B.A"
trigger108 = target,name = "Ichigo"
trigger109 = target,name = "order-Sol=Badguy"
trigger110 = target,name = "Ky=kiske"

trigger111 = target,name = "cvshaohmaru_normal"
trigger112 = target,name = "cvshaohmaru_ex"

var(30) = 2
ignorehitpause = 1

[State 5900, 3];鞘
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Amano by Luchini"
trigger2 = target,name = "Anji Mito"
trigger3 = target,name = "Billy Kane"
trigger4 = target,name = "CHAM0731"
trigger5 = target,name = "Chester"
trigger6 = target,name = "Hibiki Takane"
trigger7 = target,name = "Kafuin Gaira"
trigger8 = target,name = "GAMBIT by CAMRAT"
trigger9 = target,name = "Hayate"
trigger10 = target,name = "hibiki"

trigger11 = target,name = "Hibiki_Takane"
trigger12 = target,name = "Hikaru" && target,authorname = "Nyankoro"
trigger13 = target,name = "Hon Fu"
trigger14 = target,name = "JOHNNY"
trigger15 = target,name = "Tatewaki Kuno"
trigger16 = target,name = "KUROKO"
trigger17 = target,name = "kusaregedo"
trigger18 = target,name = "Senryo Kyoshiro"
trigger19 = target,name = "Genryusai Maki"
trigger20 = target,name = "Mina"

trigger21 = target,name = "Mr. Big"
trigger22 = target,name = "NewAkari"
trigger23 = target,name = "Caffeine Nicotine"
trigger24 = target,name = "Genbu Okina"
trigger25 = target,name = "Rasyouzin Miduki"
trigger26 = target,name = "Rolento Schugerg"
trigger27 = target,name = "Shizumaru"
trigger28 = target,name = "sokaku.m"
trigger29 = target,name = "Tachibana Ukyo"
trigger30 = target,name = "Wan-Fu"

trigger31 = target,name = "Yumeji Kurokouchi"
trigger32 = target,name = "cvseagle"
trigger33 = target,name = "cvsrolent"
trigger34 = target,name = "cvskuroko"
trigger35 = target,name = "cham cham"
trigger36 = target,name = "Senna_Kyoudou"
trigger37 = target,name = "senna kyoudou"

var(30) = 3
ignorehitpause = 1

[State 5900, 3];爪
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Balrog by M.M.R."
trigger2 = target,name = "CHOI BOUNGE"
trigger3 = target,name = "Wolverine"
trigger4 = target,name = "cvsbalrog"
trigger5 = target,name = "kunagi tenrou"

var(30) = 4
ignorehitpause = 1

[State -3, Bounding Sound]
type = PlaySnd
trigger1 = var(30)
value = 1, var(30)
ignorehitpause = 1

[State 5900, 3]
type = VarSet
trigger1 = var(30)
var(30) = 0
ignorehitpause = 1

;ボーナスメッセージアイコン表示
[State 180, 1]
type = ParentVarSet
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
fvar(8) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarSet
triggerall = !parent,var(58)
triggerall = p2movetype = H
trigger1 = movehit
fvar(8) = ifelse(var(41),-2,2)
ignorehitpause = 1

;カウンターヒットエフェクト発生
[State -2, Combo]
type = ParentVarSet
trigger1 = parent,fvar(15)
fvar(15) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = p2movetype = H
triggerall = movehit
trigger1 = var(41)
fvar(15) = 1
ignorehitpause = 1

[State -3, Blocking5]
type = helper
triggerall = p2movetype = H
triggerall = movehit
trigger1 = var(41)
id = 8130
name = "COUNTER HIT EFFECT"
pos = Ceil(enemy,Const(size.ground.front)+var(38)),Ceil(Pos Y-enemy,Pos Y+var(39))
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

;ヒット管理
[State -2, Combo]
type = ParentVarAdd
trigger1 = movehit
var(17) = 1
ignorehitpause = 1

;ファーストストライク判別
[State -2, Combo]
type = ParentVarSet
trigger1 = parent,var(33)
var(33) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,var(58)
trigger1 = movehit
var(33) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarAdd
triggerall = !parent,var(58)
triggerall = p2movetype = H
trigger1 = movehit
var(50) = 5000
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = parent,MoveType = H
var(58) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1];ヒットボーナス
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
trigger1 = moveguarded
var(50)=-20
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
triggerall = !var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=5001
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=1000
ignorehitpause = 1
persistent = 1

[State 180, 1];コンボボーナス
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) >= 2
trigger1 = movehit
var(50)=ifelse(parent,var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
var(36) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
var(36) = 2
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = 1
fvar(24) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = movehit
fvar(24) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
fvar(24) = 2
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

;カウンターヒット
[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType = A
var(41) = 1

[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType != A
var(41) = 0

[State 221, 3]
type = ChangeState
trigger1 = numtarget
trigger1 = target,life < 5
trigger1 = animtime = 0
value = 31003

[State 221, 3]
type = ChangeState
trigger1 = animtime = 0
value = 31002

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（カミナ）（退散）
[Statedef 31002]
type = S
movetype = I
physics = N
ctrl = 0
anim = 31002
velset = 0,0
sprpriority = 1

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 11
x = -6
y = -15

[State 1100, Velocity]
type = VelAdd
trigger1 = AnimElemTime(11) > 0
y = .3

[State 5010, 5]
type = StateTypeSet
trigger1 = AnimElem = 11
statetype = A
physics = N

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 10
value = 3300, 7+(random%3)

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElemTime(3) = 10
value = 3300, 10

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3, 2

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 11
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 52, 4]
type = DestroySelf
trigger1 = animelemtime(11) > 1
trigger1 = frontedgedist < -40 || Pos Y < -360

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（カミナ）（KO時）
[Statedef 31003]
type = S
movetype = I
physics = N
ctrl = 0
anim = 31003
velset = 0,0
sprpriority = 1

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3, 2

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 9
value = 3300, 13

[State 221, 3]
type = ChangeState
trigger1 = roundstate = 2
trigger1 = animelemtime(8) > 51
value = 31004

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（カミナ）（KO時）
[Statedef 31004]
type = S
movetype = I
physics = N
ctrl = 0
anim = 31004
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 3
x = -6
y = -15

[State 1100, Velocity]
type = VelAdd
trigger1 = AnimElemTime(3) > 0
y = .3

[State 5010, 5]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
physics = N

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 3
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 52, 4]
type = DestroySelf
trigger1 = animelemtime(3) > 1
trigger1 = frontedgedist < -40 || Pos Y < -360

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（シモン）（攻撃）
[Statedef 21000]
type    = S
movetype = A
physics = N
ctrl = 0
anim = 21000
velset = 0,0
sprpriority = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(15) = root,var(15)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(16) = root,var(16)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(17) = root,var(17)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(24) = root,var(24)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(41) = root,var(41)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(10) = root,fvar(10)

[State 221, Effect]
type = PlaySnd
trigger1 = time = 20
value = 3300, 5+(P2Life<(105*fvar(10)))

[State 221, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3300, 20

[State 221, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3300, 21

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 4
y = -12

[State 1100, Velocity]
type = VelAdd
trigger1 = AnimElemTime(4) > 0
y = .6

[State 5010, 5]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A
physics = N

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 903, EnvShake]
type = EnvShake
trigger1 = animelemtime(3) < 0
trigger1 = time%5 = 1
time = 5
ampl = floor(time*.1)

[State 3001, VarAdd]
type = VarAdd
trigger1 = movehit
var(0) = 1
ignorehitpause = 1

[State 1000, Spark]
type = Explod
trigger1 = AnimElemTime(1) = 38
Anim = 7800
pos = 0,0
postype = p1
ownpal = 1
sprpriority = -2

[State 1000, Spark]
type = Explod
trigger1 = AnimElemTime(1) = 42
Anim = 7801
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 5
scale = 1.2,1.2

[State 1000,Super]
type = Helper
triggerall = !NumHelper(7500)
trigger1 = AnimElemTime(1) = 40
id = 7500
name = "ground"
pos = 0,0
postype = P1
stateno = 7502
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1300, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HP
damage = ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10)))),ceil(ifelse((35*fvar(10)/8)<7,7,(35*fvar(10)/8)))
animtype = Heavy
guardflag = M
hitflag = MAF
hitsound = s2,12
guardsound = s1,0
pausetime = 24,25
sparkno = S8900+(random%64)
guard.sparkno = s8105
sparkxy = -20,-50
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = 0,-19
guard.velocity = -8
air.velocity = 0,-19
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.hittime = 24
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .6
getpower = 0,0
givepower = 35, 35
envshake.time = 40
envshake.ampl = 10
palfx.time = 12*var(41)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
P2stateno = 3810
kill = 0

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -50

;時間停止によるガード不能
[State 3000, preventguard]
type = AssertSpecial
trigger1 = root,fvar(36) > 0
flag = unguardable

;ガード音追加
[State 5900, 3];剣
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Tin's Kibagami"
trigger2 = target,name = "Tin's Shiki"
trigger3 = target,name = "YUNFEI"
trigger4 = target,name = "AMAKUSA SHIRO TOKISADA"
trigger5 = target,name = "Apocalypse"
trigger6 = target,name = "Arthur"
trigger7 = target,name = "Major D.Schaefer"
trigger8 = target,name = "Axl Low"
trigger9 = target,name = "Baiken"
trigger10 = target,name = "Dr.baldhead"

trigger11 = target,name = "basara"
trigger12 = target,name = "Benten"
trigger13 = target,name = "Oboro Bishamon"
trigger14 = target,name = "Bishamon"
trigger15 = target,name = "blackpolnareff"
trigger16 = target,name = "Charlotte"
trigger17 = target,name = "Chipp Zanuff"
trigger18 = target,name = "CLESS ALVEIN"
trigger19 = target,name = "nakoruru"
trigger20 = target,name = "Donovan"

trigger21 = target,name = "Foxy"
trigger22 = target,name = "galford"
trigger23 = target,name = "Kibagami Genjuro"
trigger24 = target,name = "GUNDAM HEAVY ARMS"
trigger25 = target,name = "God Gundam"
trigger26 = target,name = "GUNDAM EPYON"
trigger27 = target,name = "Hattori Hanzo"
trigger28 = target,name = "Haohmaru"
trigger29 = target,name = "Hikaru" && target,authorname = "Nyan☆Kiryu"
trigger30 = target,name = "Strider Hiryu"

trigger31 = target,name = "Janne Dulk"
trigger32 = target,name = "Yagyu Jubei"
trigger33 = target,name = "Kanzaki Juzo"
trigger34 = target,name = "kaede"
trigger35 = target,name = "Kaede by Ribeiro"
trigger36 = target,name = "Shinnosuke Kagami"
trigger37 = target,name = "Shinnosuke Kagami By Third"
trigger38 = target,name = "Karasu"
trigger39 = target,name = "Kazama Kazuki"
trigger40 = target,name = "Kenshin"

trigger41 = target,name = "khan"
trigger42 = target,name = "Kojiroh Sanada by MAPPY"
trigger43 = target,name = "Kouryu By Third"
trigger44 = target,name = "KY KISKE"
trigger45 = target,name = "Kyle Dunamis"
trigger46 = target,name = "lion"
trigger47 = target,name = "lyris"
trigger48 = target,name = "Sentinel"
trigger49 = target,name = "MANJIMARU"
trigger50 = target,name = "MASTER GUNDAM"

trigger51 = target,name = "May"
trigger52 = target,name = "Mazinger Z"
trigger53 = target,name = "Mercurius"
trigger54 = target,name = "Minakata Moriya"
trigger55 = target,name = "Moriya Minakata"
trigger56 = target,name = "Mukuro by MAPPY"
trigger57 = target,name = "Musashi Akatsuki By Third"
trigger58 = target,name = "nakoruruss0"
trigger59 = target,name = "Reika Murasame"
trigger60 = target,name = "Rera"

trigger61 = target,name = "RID"
trigger62 = target,name = "rimururu"
trigger63 = target,name = "SAKURA SHINGOUJI"
trigger64 = target,name = "Gundam Sandrock"
trigger65 = target,name = "sazabi"
trigger66 = target,name = "Setsuna"
trigger67 = target,name = "Shining Gundam"
trigger68 = target,name = "Shenlong"
trigger69 = target,name = "Shikyoh BY M@PPY"
trigger70 = target,name = "Silver Samurai"

trigger71 = target,name = "Slash v2.0 by Inverse"
trigger72 = target,name = "Sodom by Splode"
trigger73 = target,name = "Sodom with Samurai Sword"
trigger74 = target,name = "Kazama Sogetsu"
trigger75 = target,name = "Sol Badguy"
trigger76 = target,name = "SETA SOUJIRO"
trigger77 = target,name = "SHIKI"
trigger78 = target,name = "Zechs Marquise"
trigger79 = target,name = "TamTam"
trigger80 = target,name = "Testament"

trigger81 = target,name = "VAYEATE"
trigger82 = target,name = "washizuka"
trigger83 = target,name = "Wing Gundam"
trigger84 = target,name = "WINGGUNDAM ZERO"
trigger85 = target,name = "Yoshitora Tokugawa"
trigger86 = target,name = "Yuki By Third"
trigger87 = target,name = "Yukimura Sanada"
trigger88 = target,name = "zankuro"
trigger89 = target,name = "zantetsu"
trigger90 = target,name = "chaka"

trigger91 = target,name = "Faust"
trigger92 = target,name = "Hayato"
trigger93 = target,name = "ROBO-Ky"
trigger94 = target,name = "Sankuro Yorozu"
trigger95 = target,name = "cvshaohmaru"
trigger96 = target,name = "gg_venom"
trigger97 = target,name = "cvshayato"
trigger98 = target,name = "cvsnakoruru"
trigger99 = target,name = "Predetor Warrior"
trigger100 = target,name = "AXL"

trigger101 = target,name = "svcathena"
trigger102 = target,name = "N.Sieger"
trigger103 = target,name = "Shigen Naoe"
trigger104 = target,name = "War Machine"
trigger105 = target,name = "Iron Man"
trigger106 = target,name = "Sol=Badguy"
trigger107 = target,name = "A.B.A"
trigger108 = target,name = "Ichigo"
trigger109 = target,name = "order-Sol=Badguy"
trigger110 = target,name = "Ky=kiske"

trigger111 = target,name = "cvshaohmaru_normal"
trigger112 = target,name = "cvshaohmaru_ex"

var(30) = 2
ignorehitpause = 1

[State 5900, 3];鞘
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Amano by Luchini"
trigger2 = target,name = "Anji Mito"
trigger3 = target,name = "Billy Kane"
trigger4 = target,name = "CHAM0731"
trigger5 = target,name = "Chester"
trigger6 = target,name = "Hibiki Takane"
trigger7 = target,name = "Kafuin Gaira"
trigger8 = target,name = "GAMBIT by CAMRAT"
trigger9 = target,name = "Hayate"
trigger10 = target,name = "hibiki"

trigger11 = target,name = "Hibiki_Takane"
trigger12 = target,name = "Hikaru" && target,authorname = "Nyankoro"
trigger13 = target,name = "Hon Fu"
trigger14 = target,name = "JOHNNY"
trigger15 = target,name = "Tatewaki Kuno"
trigger16 = target,name = "KUROKO"
trigger17 = target,name = "kusaregedo"
trigger18 = target,name = "Senryo Kyoshiro"
trigger19 = target,name = "Genryusai Maki"
trigger20 = target,name = "Mina"

trigger21 = target,name = "Mr. Big"
trigger22 = target,name = "NewAkari"
trigger23 = target,name = "Caffeine Nicotine"
trigger24 = target,name = "Genbu Okina"
trigger25 = target,name = "Rasyouzin Miduki"
trigger26 = target,name = "Rolento Schugerg"
trigger27 = target,name = "Shizumaru"
trigger28 = target,name = "sokaku.m"
trigger29 = target,name = "Tachibana Ukyo"
trigger30 = target,name = "Wan-Fu"

trigger31 = target,name = "Yumeji Kurokouchi"
trigger32 = target,name = "cvseagle"
trigger33 = target,name = "cvsrolent"
trigger34 = target,name = "cvskuroko"
trigger35 = target,name = "cham cham"
trigger36 = target,name = "Senna_Kyoudou"
trigger37 = target,name = "senna kyoudou"

var(30) = 3
ignorehitpause = 1

[State 5900, 3];爪
type = VarSet
triggerall = moveguarded
triggerall = numtarget
trigger1 = target,name = "Balrog by M.M.R."
trigger2 = target,name = "CHOI BOUNGE"
trigger3 = target,name = "Wolverine"
trigger4 = target,name = "cvsbalrog"
trigger5 = target,name = "kunagi tenrou"

var(30) = 4
ignorehitpause = 1

[State -3, Bounding Sound]
type = PlaySnd
trigger1 = var(30)
value = 1, var(30)
ignorehitpause = 1

[State 5900, 3]
type = VarSet
trigger1 = var(30)
var(30) = 0
ignorehitpause = 1

;ボーナスメッセージアイコン表示
[State 180, 1]
type = ParentVarSet
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
fvar(8) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarSet
triggerall = !parent,var(58)
triggerall = p2movetype = H
trigger1 = movehit
fvar(8) = ifelse(var(41),-2,2)
ignorehitpause = 1

;カウンターヒットエフェクト発生
[State -2, Combo]
type = ParentVarSet
trigger1 = parent,fvar(15)
fvar(15) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = p2movetype = H
triggerall = movehit
trigger1 = var(41)
fvar(15) = 1
ignorehitpause = 1

[State -3, Blocking5]
type = helper
triggerall = p2movetype = H
triggerall = movehit
trigger1 = var(41)
id = 8130
name = "COUNTER HIT EFFECT"
pos = Ceil(enemy,Const(size.ground.front)+var(38)),Ceil(Pos Y-enemy,Pos Y+var(39))
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

;ヒット管理
[State -2, Combo]
type = ParentVarAdd
trigger1 = movehit
var(17) = 1
ignorehitpause = 1

;ファーストストライク判別
[State -2, Combo]
type = ParentVarSet
trigger1 = parent,var(33)
var(33) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,var(58)
trigger1 = movehit
var(33) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarAdd
triggerall = !parent,var(58)
triggerall = p2movetype = H
trigger1 = movehit
var(50) = 5000
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,var(58)
trigger1 = movehit && p2movetype = H
trigger2 = parent,MoveType = H
var(58) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1];ヒットボーナス
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
trigger1 = moveguarded
var(50)=-20
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
triggerall = !var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) < 2
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=5001
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = movehit
var(50)=1000
ignorehitpause = 1
persistent = 1

[State 180, 1];コンボボーナス
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,var(17) >= 2
trigger1 = movehit
var(50)=ifelse(parent,var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
var(36) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
var(36) = 2
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = 1
fvar(24) = 0
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = movehit
fvar(24) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
fvar(24) = 2
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

;空中復帰誘導
[State -2, PowerReset]
type = ParentVarSet
triggerall = movetype != H
trigger1 = movehit
fvar(38) = 0
ignorehitpause = 1

;カウンターヒット
[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType = A
var(41) = 1

[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType != A
var(41) = 0

[State 221, 3]
type = ChangeState
trigger1 = numtarget
trigger1 = target,life < 5
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 21002

[State 221, 3]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 21001

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（シモン）（退散）
[Statedef 21001]
type = S
movetype = I
physics = N
ctrl = 0
anim = 21001
velset = 0,0
sprpriority = 4

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 8
x = 8
y = -10

[State 1100, Velocity]
type = VelAdd
trigger1 = AnimElemTime(8) > 0
y = .5

[State 5010, 5]
type = StateTypeSet
trigger1 = AnimElem = 8
statetype = A
physics = N

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 52, 0

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 8
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 52, 4]
type = DestroySelf
trigger1 = animelemtime(6) > 1
trigger1 = frontedgedist < -40

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（シモン）（KO時）
[Statedef 21002]
type = S
movetype = I
physics = N
ctrl = 0
anim = 21002
velset = 0,0
sprpriority = 4

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3300, 12

[State 221, 3]
type = ChangeState
trigger1 = roundstate = 2
trigger1 = animelemtime(6) > 61
value = 21003

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（シモン）（退散）
[Statedef 21003]
type = S
movetype = I
physics = N
ctrl = 0
anim = 21003
velset = 0,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 8
y = -10

[State 1100, Velocity]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .5

[State 5010, 5]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
physics = N

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 2
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 52, 4]
type = DestroySelf
trigger1 = animelemtime(2) > 1
trigger1 = frontedgedist < -40

;---------------------------------------------------------------------------
;オレ達無敵のグレン団！（地面）
[Statedef 7502]
ctrl = 0
anim = 7500
sprpriority = 3

[State 221, 3]
type = ChangeState
trigger1 = time > 48
value = 7501

;---------------------------------------------------------------------------
;ブロッキング（立ち）
[Statedef 4000]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
anim = 4000

[State 4000, VarAdd]
type = VarAdd
trigger1 = time = 0
var(50)=2000
ignorehitpause = 1

[State 4000, PowerAdd]
type = PowerAdd
trigger1 = time = 0
value = ifelse(var(20)=2,78,89)*ifelse((var(15)||var(16)),0,1)

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 4000, PalFX]
type = PalFX
trigger1 = animelemtime(2)>=0 && animelemtime(3)<0
time = 1
add = 80,80,255

[State 4000, PlaySnd];ガード音
type = PlaySnd
trigger1 = Time = 0
value = 4000,0

[State 4000, PlaySnd];声
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 4000, Explod];エフェクト
type = Explod
trigger1 = Time = 0
anim = 8065
pos = ceil(28*const(size.xscale)),ceil(-64*const(size.yscale))
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 15
supermovetime = 99999999999999
ignorehitpause = 1

[State 4000, Pause]
type = Pause
trigger1 = time = 1
time = 14
movetime = 14

[State 4000, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ブロッキング（屈）
[Statedef 4010]
type = C
movetype = I
physics = C
ctrl = 0
velset = 0,0
anim = 4010

[State 4010, VarAdd]
type = VarAdd
trigger1 = time = 0
var(50)=2000
ignorehitpause = 1

[State 4010, PowerAdd]
type = PowerAdd
trigger1 = time = 0
value = ifelse(var(20)=2,78,89)*ifelse((var(15)||var(16)),0,1)

[State 4010, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 4010, PalFX]
type = PalFX
trigger1 = animelemtime(2)>=0 && animelemtime(3)<0
time = 1
add = 80,80,255

[State 4010, PlaySnd];ガード音
type = PlaySnd
trigger1 = Time = 0
value = 4000,0

[State 4010, PlaySnd];声
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 4010, Explod];エフェクト
type = Explod
trigger1 = Time = 0
anim = 8065
pos = ceil(28*const(size.xscale)),ceil(-40*const(size.yscale))
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 15
supermovetime = 99999999999999
ignorehitpause = 1

[State 4010, Pause]
type = Pause
trigger1 = time = 1
time = 14
movetime = 14

[State 4010, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;ブロッキング（空中）
[Statedef 4020]
type = A
movetype = I
physics = N
ctrl = 0
anim = 4020
velset = 0,0

[State 4020, VarAdd]
type = VarAdd
trigger1 = time = 0
var(50)=2000
ignorehitpause = 1

[State 4020, PowerAdd]
type = PowerAdd
trigger1 = time = 0
value = ifelse(var(20)=2,78,89)*ifelse((var(15)||var(16)),0,1)

[State 4020, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 4020, PalFX]
type = PalFX
trigger1 = animelemtime(2)>=0 && animelemtime(3)<0
time = 1
add = 80,80,255

[State 4020, PlaySnd];ガード音
type = PlaySnd
trigger1 = Time = 0
value = 4000,0

[State 4020, PlaySnd];声
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 4020, Explod];エフェクト
type = Explod
trigger1 = Time = 0
anim = 8065
pos = ceil(20*const(size.xscale)),ceil(-72*const(size.yscale))
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 15
supermovetime = 99999999999999
ignorehitpause = 1

[State 4020, Pause]
type = Pause
trigger1 = time = 1
time = 14
movetime = 14

[State 4020, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 4030

;---------------------------------------------------------------------------
;空中ブロッキング後
[Statedef 4030]
type = A
physics = N
velset = 0,-4
ctrl = 1
anim = 4030

[State 4030, Gravity]
type = Gravity
trigger1 = 1

[State 4030, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;上段ジャストディフェンス
[Statedef 4100]
type = S
movetype = I
physics = S
anim = 4100
velset = 0,0
ctrl = 0

[State 4100, VarAdd]
type = VarAdd
trigger1 = time = 0
var(50)=2000
ignorehitpause = 1

[State 4100, PowerAdd]
type = PowerAdd
triggerall = var(20)=6
trigger1 = time = 0
value = 107*ifelse((var(15)||var(16)),0,1)*(10+var(31))/10

[State 860, VarAdd]
type = VarAdd
triggerall = var(20)=5
trigger1 = time = 0
fvar(13) = 600*ifelse((var(43)||var(15)||var(16)),0,1)*(10+var(31))/10

[State 4100, LifeAdd]
type = LifeAdd
trigger1 = Time = 0
value = ifelse(var(46),var(46),25)

[State 4100, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 4100, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 4100,0

[State 4100, PlaySnd];声
type = Playsnd
trigger1 = Time = 0
value = 0,0

[State 4100, Pause]
type = Pause
trigger1 = time = 1
time = 3

[State 4100, Explod];エフェクト
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 0,ceil(-52*const(size.yscale))
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 4
supermovetime = 99999999999999
ignorehitpause = 1

[State 4100, PalFX]
type = PalFX
trigger1 = Time = 0
time = 5
add = 190,190,228
mul = 190,190,228
sinadd = 190,190,228,-100

[State 4100, ChangeState] 
type = ChangeState
trigger1 = time > 1
trigger1 = var(0) <= 2
value = 130 
ctrl = 1

;---------------------------------------------------------------------------
;下段ジャストディフェンス
[Statedef 4110]
type = C
movetype = I
physics = C
anim = 4110
velset = 0,0
ctrl = 0

[State 4110, VarAdd]
type = VarAdd
trigger1 = time = 0
var(50)=2000
ignorehitpause = 1

[State 4110, PowerAdd]
type = PowerAdd
triggerall = var(20)=6
trigger1 = time = 0
value = 107*ifelse((var(15)||var(16)),0,1)*(10+var(31))/10

[State 4110, VarAdd]
type = VarAdd
triggerall = var(20)=5
trigger1 = time = 0
fvar(13) = 600*ifelse((var(43)||var(15)||var(16)),0,1)*(10+var(31))/10

[State 4110, LifeAdd]
type = LifeAdd
trigger1 = Time = 0
value = ifelse(var(46),var(46),25)

[State 4110, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1211, PlaySnd] 
type = PlaySnd
trigger1 = Time = 0 
value = 4100,0

[State 4110, PlaySnd];声
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 4110, Pause]
type = Pause
trigger1 = time = 1
time = 3

[State 4110, Explod];エフェクト
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 0,ceil(-35*const(size.yscale))
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 4
supermovetime = 99999999999999
ignorehitpause = 1

[State 4110, PalFX]
type = PalFX
trigger1 = Time = 0
time = 5
add = 190,190,228
mul = 190,190,228
sinadd = 190,190,228,-100

[State 4110, ChangeState] 
type = ChangeState
trigger1 = time > 1
trigger1 = var(0) <= 2
value = 131 
ctrl = 1

;---------------------------------------------------------------------------
;空中ジャストディフェンス
[Statedef 4120] 
type = A
movetype = I
physics = N
anim = 4120
velset = 0,0
ctrl = 0

[State 4120, VarAdd]
type = VarAdd
trigger1 = time = 0
var(50)=2000
ignorehitpause = 1

[State 4120, PowerAdd]
type = PowerAdd
triggerall = var(20)=6
trigger1 = time = 0
value = 107*ifelse((var(15)||var(16)),0,1)*(10+var(31))/10

[State 4120, VarAdd]
type = VarAdd
triggerall = var(20)=5
trigger1 = time = 0
fvar(13) = 600*ifelse((var(43)||var(15)||var(16)),0,1)*(10+var(31))/10

[State 4120, LifeAdd]
type = LifeAdd
trigger1 = Time = 0
value = ifelse(var(46),var(46),25)

[State 4120, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 4120, PlaySnd] 
type = PlaySnd
trigger1 = Time = 0
value = 4100,0

[State 4120, PlaySnd];声
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 4120, Pause]
type = Pause
trigger1 = time = 1
time = 3

[State 4120, Explod];エフェクト
type = Explod
trigger1 = Time = 0
anim = 8060
pos = ceil(21*const(size.xscale)),ceil(-76*const(size.yscale))
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 4
supermovetime = 99999999999999
ignorehitpause = 1

[State 4120, PalFX]
type = PalFX
trigger1 = Time = 0
time = 5
add = 190,190,228
mul = 190,190,228
sinadd = 190,190,228,-100

[State 4120, ChangeState] 
type = ChangeState
trigger1 = time > 1
trigger1 = var(0) <= 2
value = 4130

;---------------------------------------------------------------------------
;空中ジャストディフェンス後
[Statedef 4130]
type = A
physics = N
velset = -1.5,-5.3
ctrl = 1
anim = 4030

[State 4130, Gravity]
type = Gravity
trigger1 = 1

[State 4130, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 840]
type    = A
movetype= H
physics = N

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5040, 1]
type = SelfState
trigger1 = time = 0
value = 5040

;---------------------------------------------------------------------
; 投げ抜け（byH"さん）
;------------------------ 自分側
[Statedef 950]
type = S
movetype = I
physics = N
anim = 5945
ctrl = 0
velset = -3, 0

[State 810,TargetBind]
type = TargetState
trigger1 = Time = 0
value = 955

[State 812, 1];エフェクト
type = Explod
trigger1 = Time = 0
ignorehitpause = 1
persistent = 0
anim = 8600
pos = 0, -60
sprpriority = 2
ownpal = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = .5,.5

[State 3010,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=3
value = 810,0

[State 3010,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=3
value = 5940,0

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .95

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 105,End]
type = ChangeState
trigger1 = Time >= 32
value = 0
ctrl = 1

;------------------------ 相手側
[Statedef 955]
type = S
movetype = I
physics = N
ctrl = 0
velset = -3, 0
facing = enemy,facing

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5940)
trigger1 = authorname = "H”" || authorname = "M.M.R." || authorname = "Mouser" || authorname = "CAMRAT Type KOF"
trigger2 = authorname = "Tin" || authorname = "Nyankoro" || authorname = "ryokucha"
trigger3 = authorname = "Third" || authorname = "adamskie" || authorname = "Bad Darkness" || authorname = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat"
value = 5940

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5910) && !SelfAnimExist(5940)
trigger1 = authorname = "H”" || authorname = "M.M.R." || authorname = "Mouser" || authorname = "CAMRAT Type KOF"
trigger2 = authorname = "Tin" || authorname = "Nyankoro" || authorname = "ryokucha"
trigger3 = authorname = "Third" || authorname = "adamskie" || authorname = "Bad Darkness" || authorname = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat"
value = 5910

[State 820,ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0 && anim != 5940 && anim != 5910
value = 5007

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .95

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 105,End]
type = SelfState
trigger1 = Time >= 29
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;削りKO
[Statedef 5950]
physics = S
movetype = H
ctrl = 0
velset = 0,0

[State 860, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 190, 4]
type = ChangeAnim
trigger1 = !HitOver
value = ifelse(fvar(1)=0,5010,5020)

[State 190, 4]
type = ChangeAnim
trigger1 = HitOver
value = 5950
persistent = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = Animelem = 12
value = 5150

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= I
physics = N
anim = 5200
ctrl = 0
velset = 0,0

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -6

[State 5201, 2]
type = VelSet
trigger1 = vel X > -.1
x = 0

[State 5201, 2]
type = VelMul
trigger1 = 1
x = .95

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 52, 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

;---------------------------------------------------------------------------
;壁
[Statedef 6900]
type = U
physics = N
ctrl = 0
anim = 6900

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

;---------------------------------------------------------------------------
;超必KO時演出（グレン団）1
[Statedef 9050]
ctrl = 0
anim = 6900

[State 9000, Assert]
type = AssertSpecial
trigger1 = Time < 60
flag = NoBarDisplay
flag2 = NoMusic

[State 3105, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 60
flag = NoBG
flag2 = NoFG
flag3 = GlobalNoShadow

[State -2, HyperComboFinish]
type = PlaySnd
trigger1 = Time = 0
value = 9000,1

[State 6000, Explod]
type = Explod
trigger1 = Time = 0
Anim = 7900
pos = 160, 110
postype = Left
ownpal = 0
bindtime = -1
pausemovetime = 999999
supermovetime = 999999
removetime = -1
sprpriority = -99
ID = 7900
scale = 2,2

[State 9000, HyperComboFinish]
type = Helper
trigger1 = time = 0
ID = 9051
stateno = 9051
postype = P1
pos = 0,0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 9000, HyperComboFinish]
type = Helper
trigger1 = time = 0
ID = 9052
stateno = 9052
postype = P1
pos = 0,0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 6000, Explod]
type = ModifyExplod
trigger1 = time <= 4
ID = 7900
scale = 2.3-(time*.25),2.3-(time*.25)

[State 6000, Explod]
type = RemoveExplod
trigger1 = time = 60
ID = 7900

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 60

;---------------------------------------------------------------------------
;超必KO時演出（グレン団）2
[Statedef 9051]
ctrl = 0
anim = 6900
ownpal = 1

[State 6000, Explod]
type = Explod
trigger1 = Time = 0
Anim = 7910
pos = 160, 120
postype = Left
ownpal = 0
bindtime = -1
pausemovetime = 999999
supermovetime = 999999
sprpriority = -97
ID = 7900
scale = 2,2

[State 6000, Explod]
type = PalFX
trigger1 = 1
Time = 1
mul = ceil(255-(time*31)),ceil(255-(time*31)),ceil(255-(time*31))

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 8

;---------------------------------------------------------------------------
;超必KO時演出（グレン団）3
[Statedef 9052]
ctrl = 0
anim = 6900
ownpal = 1

[State 6000, Explod]
type = Explod
trigger1 = Time = 0
Anim = 7911
pos = 0, 0
postype = Left
ownpal = 0
bindtime = -1
pausemovetime = 999999
supermovetime = 999999
removetime = -1
sprpriority = -98
ID = 7900

[State 6000, Explod]
type = PalFX
trigger1 = 1
Time = 1
mul = ceil(255-(time*12)),ceil(255-(time*12)),ceil(255-(time*12))

[State 6000, Explod]
type = RemoveExplod
trigger1 = time = 20
ID = 7900

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time = 20

;---------------------------------------------------------------------------
[Statedef -2]

;config呼び出し
[State 3001, Super]
type = Helper
triggerall = !NumHelper(10000)
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
id = 10000
name = "config"
pos = -300,0
postype = Left
stateno = 10000
helpertype = normal
keyctrl = 0
pausemovetime = 99999999999999
supermovetime = 99999999999999

;グルーヴセレクト
[state 190, groove]
type = helper
triggerall = time = 0
triggerall = roundstate = 0
triggerall = roundsexisted <= 0
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname = "warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname = "Jesuszilla"
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6000
stateno = 6000
postype = p1
pos = 0,-15
name = "groove"
pausemovetime = 99999999999999
supermovetime = 99999999999999

[state 190, groove]
type = helper
triggerall = time = 0
triggerall = roundstate = 0
triggerall = roundsexisted <= 0
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname = "warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname = "Jesuszilla"
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6050
stateno = 6050
postype = p1
pos = 0,0
name = "Up-Arrow"
keyctrl = 1
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[state 190, groove]
type = helper
triggerall = time = 0
triggerall = roundstate = 0
triggerall = roundsexisted <= 0
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname = "warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname = "Jesuszilla"
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6050
stateno = 6055
postype = p1
pos = 0,0
name = "Down-Arrow"
keyctrl = 1
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

;グルーヴポイント用ヘルパー
[State 3001, Super]
type = Helper
triggerall = numenemy
triggerall = !fvar(3)
triggerall = !NumHelper(6500) && !NumHelper(6000)
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname = "warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname = "Jesuszilla"
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
id = 6500
name = "groove point"
pos = 0,300
postype = Left
stateno = 6500
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

;AI判別
[State -2, 3]
type = VarSet
trigger1 = IsHomeTeam && Roundstate = 0 && Pos X > 0
var(59) = 1

[State 20, 4]
type = AssertSpecial
trigger1 = var(59)
flag = nowalk

;チームモードイントロ判定（自分交代時）
[State -3, Turns Mode Intro]
type = ChangeState
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
trigger1 = time = 0
value = 190

;チームモードイントロ判定（相手交代時）
[State -3, Turns Mode Intro]
type = null;ChangeState
triggerall = roundstate = 0
triggerall = numenemy
triggerall = enemynear,roundsexisted <= 0
triggerall = time = 0
trigger1 = (P2Name = "cvsmai" || P4Name = "cvsmai") && EnemyNear,AuthorName = "H”"
value = 190

;崩れダウン音
[State -3, Bounding Sound]
type = PlaySnd
triggerall = anim = 5950
trigger1 = Animelem = 10
value = 5100,0

[State -3, Bounding Sound]
type = PlaySnd
triggerall = anim = 5950 && roundstate = 2
triggerall = random%2 = 0
trigger1 = Animelemtime(1) = 2
value = 5000, 1
channel = 0

;投げ抜け成功時ボイス
[State 3010,PlaySnd]
type = PlaySnd
trigger1 = stateno = 955 && movetype != H
trigger1 = AnimElem = 1,=3
value = 5940,0

;相手ダウン音
[State -3, Bounding Sound]
type = PlaySnd
triggerall = numtarget
trigger1 = target,stateno = 3900 && target,time = 1
trigger2 = target,stateno = 3910 && target,time = 1
value = 5100,0

;多段技ヒット音
[State 52, Effect]
type = PlaySnd
triggerall = movehit
trigger1 = stateno = 3000
value = 2, 2
channel = 3+(time%4)
ignorehitpause = 1

[State 52, Effect]
type = PlaySnd
triggerall = moveguarded
trigger1 = stateno = 3000
value = 1, 0
channel = 3+(time%4)
ignorehitpause = 1

;「あの根拠のない自信がわからない」
[State 181, 2]
type = PlaySnd
triggerall = anim = 1504
trigger1 = AnimElem = 24
value = 180, 6

;「残した想いが扉を開く」
[State 181, 2]
type = PlaySnd
triggerall = anim = 3305
trigger1 = AnimElem = 13
value = 3300, 11

;勝利時壁
[State -2, BG]
type = Helper
triggerall = roundstate = 3
triggerall = alive
triggerall = !NumHelper(6900)
trigger1 = stateno = 1502
ID = 6900
stateno = 6900
postype = front
pos = 0,0
ignorehitpause = 1

[State -2, BG]
type = Helper
triggerall = roundstate = 3
triggerall = alive
triggerall = !NumHelper(6901)
trigger1 = stateno = 1502
ID = 6901
stateno = 6900
postype = back
pos = 0,0
ignorehitpause = 1

;スナイプエアー（電撃）ヒット移行
[State 901, Throw]
type = TargetState
trigger1 = numtarget
trigger1 = projhittime(1025) = 1
trigger1 = target,Pos Y >= 0
value = 1250
ignorehitpause = 1
persistent = 0

;ギザ！螺旋力キックヒット数
[State -2, 1]
type = VarAdd
trigger1 = stateno = 3100 && movecontact
var(28) = 1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = var(29) = 8
var(29) = 0
ignorehitpause = 1

[State -2, 1]
type = VarAdd
trigger1 = var(29)
var(29) = 1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = stateno = 3100 && movecontact
var(29) = 1
ignorehitpause = 1

;オーバードライブ締め
[State 100, 5]
type = VarSet
triggerall = !var(6)
triggerall = stateno = 3201 && movehit
trigger1 = animelemtime(27) > 0 && !var(5)
trigger2 = animelemtime(35) > 0 && var(5) = 1
trigger3 = animelemtime(50) > 0 && var(5) = 2
var(6) = 1
ignorehitpause = 1

;ガード音追加
[State 5900, 3];剣
type = VarSet
triggerall = projguardedtime(1015) = 1
triggerall = numtarget
trigger1 = target,name = "Tin's Kibagami"
trigger2 = target,name = "Tin's Shiki"
trigger3 = target,name = "YUNFEI"
trigger4 = target,name = "AMAKUSA SHIRO TOKISADA"
trigger5 = target,name = "Apocalypse"
trigger6 = target,name = "Arthur"
trigger7 = target,name = "Major D.Schaefer"
trigger8 = target,name = "Axl Low"
trigger9 = target,name = "Baiken"
trigger10 = target,name = "Dr.baldhead"

trigger11 = target,name = "basara"
trigger12 = target,name = "Benten"
trigger13 = target,name = "Oboro Bishamon"
trigger14 = target,name = "Bishamon"
trigger15 = target,name = "blackpolnareff"
trigger16 = target,name = "Charlotte"
trigger17 = target,name = "Chipp Zanuff"
trigger18 = target,name = "CLESS ALVEIN"
trigger19 = target,name = "nakoruru"
trigger20 = target,name = "Donovan"

trigger21 = target,name = "Foxy"
trigger22 = target,name = "galford"
trigger23 = target,name = "Kibagami Genjuro"
trigger24 = target,name = "GUNDAM HEAVY ARMS"
trigger25 = target,name = "God Gundam"
trigger26 = target,name = "GUNDAM EPYON"
trigger27 = target,name = "Hattori Hanzo"
trigger28 = target,name = "Haohmaru"
trigger29 = target,name = "Hikaru" && target,authorname = "Nyan☆Kiryu"
trigger30 = target,name = "Strider Hiryu"

trigger31 = target,name = "Janne Dulk"
trigger32 = target,name = "Yagyu Jubei"
trigger33 = target,name = "Kanzaki Juzo"
trigger34 = target,name = "kaede"
trigger35 = target,name = "Kaede by Ribeiro"
trigger36 = target,name = "Shinnosuke Kagami"
trigger37 = target,name = "Shinnosuke Kagami By Third"
trigger38 = target,name = "Karasu"
trigger39 = target,name = "Kazama Kazuki"
trigger40 = target,name = "Kenshin"

trigger41 = target,name = "khan"
trigger42 = target,name = "Kojiroh Sanada by MAPPY"
trigger43 = target,name = "Kouryu By Third"
trigger44 = target,name = "KY KISKE"
trigger45 = target,name = "Kyle Dunamis"
trigger46 = target,name = "lion"
trigger47 = target,name = "lyris"
trigger48 = target,name = "Sentinel"
trigger49 = target,name = "MANJIMARU"
trigger50 = target,name = "MASTER GUNDAM"

trigger51 = target,name = "May"
trigger52 = target,name = "Mazinger Z"
trigger53 = target,name = "Mercurius"
trigger54 = target,name = "Minakata Moriya"
trigger55 = target,name = "Moriya Minakata"
trigger56 = target,name = "Mukuro by MAPPY"
trigger57 = target,name = "Musashi Akatsuki By Third"
trigger58 = target,name = "nakoruruss0"
trigger59 = target,name = "Reika Murasame"
trigger60 = target,name = "Rera"

trigger61 = target,name = "RID"
trigger62 = target,name = "rimururu"
trigger63 = target,name = "SAKURA SHINGOUJI"
trigger64 = target,name = "Gundam Sandrock"
trigger65 = target,name = "sazabi"
trigger66 = target,name = "Setsuna"
trigger67 = target,name = "Shining Gundam"
trigger68 = target,name = "Shenlong"
trigger69 = target,name = "Shikyoh BY M@PPY"
trigger70 = target,name = "Silver Samurai"

trigger71 = target,name = "Slash v2.0 by Inverse"
trigger72 = target,name = "Sodom by Splode"
trigger73 = target,name = "Sodom with Samurai Sword"
trigger74 = target,name = "Kazama Sogetsu"
trigger75 = target,name = "Sol Badguy"
trigger76 = target,name = "SETA SOUJIRO"
trigger77 = target,name = "SHIKI"
trigger78 = target,name = "Zechs Marquise"
trigger79 = target,name = "TamTam"
trigger80 = target,name = "Testament"

trigger81 = target,name = "VAYEATE"
trigger82 = target,name = "washizuka"
trigger83 = target,name = "Wing Gundam"
trigger84 = target,name = "WINGGUNDAM ZERO"
trigger85 = target,name = "Yoshitora Tokugawa"
trigger86 = target,name = "Yuki By Third"
trigger87 = target,name = "Yukimura Sanada"
trigger88 = target,name = "zankuro"
trigger89 = target,name = "zantetsu"
trigger90 = target,name = "chaka"

trigger91 = target,name = "Faust"
trigger92 = target,name = "Hayato"
trigger93 = target,name = "ROBO-Ky"
trigger94 = target,name = "Sankuro Yorozu"
trigger95 = target,name = "cvshaohmaru"
trigger96 = target,name = "gg_venom"
trigger97 = target,name = "cvshayato"
trigger98 = target,name = "cvsnakoruru"
trigger99 = target,name = "Predetor Warrior"
trigger100 = target,name = "AXL"

trigger101 = target,name = "svcathena"
trigger102 = target,name = "N.Sieger"
trigger103 = target,name = "Shigen Naoe"
trigger104 = target,name = "War Machine"
trigger105 = target,name = "Iron Man"
trigger106 = target,name = "Sol=Badguy"
trigger107 = target,name = "A.B.A"
trigger108 = target,name = "Ichigo"
trigger109 = target,name = "order-Sol=Badguy"
trigger110 = target,name = "Ky=kiske"

trigger111 = target,name = "cvshaohmaru_normal"
trigger112 = target,name = "cvshaohmaru_ex"

var(30) = 2
ignorehitpause = 1

[State 5900, 3];鞘
type = VarSet
triggerall = projguardedtime(1015) = 1
triggerall = numtarget
trigger1 = target,name = "Amano by Luchini"
trigger2 = target,name = "Anji Mito"
trigger3 = target,name = "Billy Kane"
trigger4 = target,name = "CHAM0731"
trigger5 = target,name = "Chester"
trigger6 = target,name = "Hibiki Takane"
trigger7 = target,name = "Kafuin Gaira"
trigger8 = target,name = "GAMBIT by CAMRAT"
trigger9 = target,name = "Hayate"
trigger10 = target,name = "hibiki"

trigger11 = target,name = "Hibiki_Takane"
trigger12 = target,name = "Hikaru" && target,authorname = "Nyankoro"
trigger13 = target,name = "Hon Fu"
trigger14 = target,name = "JOHNNY"
trigger15 = target,name = "Tatewaki Kuno"
trigger16 = target,name = "KUROKO"
trigger17 = target,name = "kusaregedo"
trigger18 = target,name = "Senryo Kyoshiro"
trigger19 = target,name = "Genryusai Maki"
trigger20 = target,name = "Mina"

trigger21 = target,name = "Mr. Big"
trigger22 = target,name = "NewAkari"
trigger23 = target,name = "Caffeine Nicotine"
trigger24 = target,name = "Genbu Okina"
trigger25 = target,name = "Rasyouzin Miduki"
trigger26 = target,name = "Rolento Schugerg"
trigger27 = target,name = "Shizumaru"
trigger28 = target,name = "sokaku.m"
trigger29 = target,name = "Tachibana Ukyo"
trigger30 = target,name = "Wan-Fu"

trigger31 = target,name = "Yumeji Kurokouchi"
trigger32 = target,name = "cvseagle"
trigger33 = target,name = "cvsrolent"
trigger34 = target,name = "cvskuroko"
trigger35 = target,name = "cham cham"
trigger36 = target,name = "Senna_Kyoudou"
trigger37 = target,name = "senna kyoudou"

var(30) = 3
ignorehitpause = 1

[State 5900, 3];爪
type = VarSet
triggerall = projguardedtime(1015) = 1
triggerall = numtarget
trigger1 = target,name = "Balrog by M.M.R."
trigger2 = target,name = "CHOI BOUNGE"
trigger3 = target,name = "Wolverine"
trigger4 = target,name = "cvsbalrog"
trigger5 = target,name = "kunagi tenrou"

var(30) = 4
ignorehitpause = 1

[State -3, Bounding Sound]
type = PlaySnd
trigger1 = var(30)
value = 1, var(30)
ignorehitpause = 1

[State 5900, 3]
type = VarSet
trigger1 = var(30)
var(30) = 0
ignorehitpause = 1

;ラウンド開始時音楽消去
[State 3105, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = NoMusic

;パーフェクト判定
[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = fvar(12) - Life > 0
fvar(14) = 1
ignorehitpause = 1

;ラウンド勝敗判定
[State -2, 1]
type = VarSet
trigger1 = Win
var(26) = 1

[State -2, 1]
type = VarSet
trigger1 = Lose
var(26) = 2

[State -2, 1]
type = VarSet
trigger1 = Lose || DrawGame
var(54) = 1

[State -2,KO]
type = Varadd
trigger1 = matchover
ignorehitpause = 1
var(56) = 1

[State -2,KO]
type = Varset
trigger1 = !matchover
ignorehitpause = 1
var(56) = 0

[State 180, 1]
type = VarAdd
triggerall = var(56) = 1
trigger1 = !var(54)
var(55)=1
ignorehitpause = 1
persistent = 0

[State 180, 1]
type = VarSet
trigger1 = var(54)
var(55)=0
ignorehitpause = 1

;状態判定
[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (stateno = [0,199]) && !var(18)
var(48) = 0

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (stateno = [200,999]) && !var(18)
var(48) = 1

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (stateno = [1000,2999]) && !var(18)
var(48) = 2

[State -2, 1]
type = VarSet
trigger1 = projhittime(1005) = 1
var(48) = 2

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = ((stateno = [3000,3999]) && var(5)!=2) || var(18)
var(48) = 3

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (stateno = [3000,3999]) && var(5) = 2
var(48) = 4

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2stateno = [0,199]
var(49) = 0

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = stateno = [200,999]
var(49) = 1

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2stateno = [1000,2999]
var(49) = 2

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2stateno = [3000,3999]
var(49) = 3

;グルーヴゲージ表示
[State 3001, Super]
type = Helper
triggerall = !NumHelper(6100) && !NumHelper(6000)
triggerall = numenemy
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname = "warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname = "Jesuszilla"
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
id = 6100
name = "gauge"
pos = 0,300
postype = P1
stateno = 6100+(var(20)*10)
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

;SグルーヴパワーMAXシステム
[State -2, 1]
type = VarSet
triggerall = var(20) = 3
trigger1 = !var(14)
trigger1 = roundstate >= 2
trigger1 = Power >= 1000
var(14) = 750

[State -2, 1]
type = PowerSet
trigger1 = var(14) = 750
value = 0
ignorehitpause = 1

[State -2, 1]
type = PowerSet
trigger1 = var(14) = 1
value = 0
ignorehitpause = 1

[State 200, 3]
type = Playsnd
trigger1 = var(14) = 750
value = 6000,10

[State -2, 1]
type = Varadd
trigger1 = var(14)
var(14) = -1
ignorehitpause = 1

;Kグルーヴ怒りゲージシステム
[State -2, Combo]
type = VarAdd
triggerall = var(20) = 5
triggerall = !var(43)
triggerall = roundstate = 2
triggerall = fvar(13) < 7200
triggerall = stateno != [120,159]
trigger1 = fvar(12) - Life > 0
fvar(13) = ceil((fvar(12)-Life)*14*(10+var(31))/10)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(12) = life
ignorehitpause = 1
persistent = 1

[State -2, 1]
type = VarSet
trigger1 = fvar(13) > 7200
fvar(13) = 7200

[State -2, 1]
type = VarSet
trigger1 = fvar(13) = 7200
var(43) = 1

[State -2, 1]
type = VarSet
trigger1 = fvar(13) <= 1 && ((stateno != [3000,3999]) || roundstate != 2)
var(43) = 0

[State 860, 1]
type = Explod
trigger1 = fvar(13) = 7200 && !NumExplod(8420)
anim = 8420
pos = 0,-70
postype = p1
ontop = 0
ownpal = 1
id = 8420
persistent = 0
;pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = .5,.5

[State 200, 3]
type = Playsnd
trigger1 = fvar(13) = 7200
value = 6000,11

[State -2, 1]
type = Poweradd
trigger1 = fvar(13) = 7200
value = -3000
ignorehitpause = 1

[State -2, 1]
type = Varadd
triggerall = var(20) = 5
triggerall = var(43)
trigger1 = fvar(13) > 0
fvar(13) = -7.2
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = var(20) = 5
trigger1 = fvar(13) && var(43)
Time = 1
mul = 230,ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
ignorehitpause = 1
persistent = 0

[State -2, 1]
type = DefenceMulSet
trigger1 = fvar(13) && var(43)
value = .775

;NグルーヴMAX発動
[State -2, 1]
type = Varadd
trigger1 = var(15)
var(15) = -1
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = var(20) = 4 || var(20) = 6
trigger1 = (GameTime%2)=0
trigger1 = var(15)
time = 1
add = 128,128,0
ignorehitpause = 1

;パワー溜まった時の音
[State -2, PlaySnd]
type = PlaySnd
triggerall = roundstate = 2
trigger1 = (floor(power*.001) - floor(fvar(21)*.001) > 0) && (!var(20) || var(20) = 4 || var(20) = 6)
trigger2 = (floor(power/1500) - floor(fvar(21)/1500) > 0) && var(20) = 2
trigger3 = (floor(power/3000) - floor(fvar(21)/3000) > 0) && var(20) = 3
value = 6000,ifelse(var(20)=6,10,ifelse(var(20)=4,13,12))
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = 1
fvar(21) = power
ignorehitpause = 1

;オリコン
[State -2, 1]
type = Varadd
triggerall = roundstate = 2
trigger1 = var(16)
var(16) = -1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = MoveType = H
var(16) = 0

[State -2, 1]
type = VarSet
trigger1 = !var(16) && ctrl
trigger2 = LoseKO
var(18) = 0

[State -2, 1]
type = Varadd
trigger1 = var(16)
var(19) = -9
ignorehitpause = 1

[State -2, 1]
type = PowerSet
triggerall = var(18)
trigger1 = MoveType = H
value = var(19)/2

[State -3, Kill Juggle Checking]
type = assertspecial
trigger1 = var(18)
trigger1 = P2MoveType = H && P2stateType = A
flag = nojugglecheck

[State -3, No Blocking]
type = assertspecial
trigger1 = var(16)
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

;コンボダメージ
[State -2, PowerReset]
type = VarSet
trigger1 = P2movetype != H
var(53) = P2life

[State 3001, Super]
type = Helper
triggerall = numenemy
triggerall = roundstate = 2
triggerall = (var(53)-P2life)>250
trigger1 = !NumHelper(6800)&&!var(52)
trigger2 = !NumHelper(6800)&&var(52)=1&&!enemynear,NumHelper(6800)
id = 6800
name = "naration_1"
pos = 0,300
postype = Left
stateno = 6803
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

;グルーヴポイント初期数値＆時間による減少
[State -2, PowerReset]
type = VarSet
triggerall = MatchNo = 1
triggerall = RoundNo = 1
trigger1 = roundstate = 0
var(50) = 100000

[State -2, PowerReset]
type = VarSet
trigger1 = var(50) > 9999999
var(50) = 9999999
persistent = 1

[State -2, PowerReset]
type = VarSet
trigger1 = var(50) < -9999999
var(50) = -9999999
persistent = 1

[State -2, PowerReset]
type = VarAdd
trigger1 = roundstate = 2
var(51) = 1
persistent = 1

[State -2, PowerReset]
type = VarAdd
triggerall = roundstate = 2
triggerall = var(50) = [-9999999,9999999]
trigger1 = var(51) >= 600
trigger1 = gametime%60 = 0
var(50) = -500
persistent = 1

[State 3001, Super]
type = Helper
triggerall = !var(58)
triggerall = numenemy
triggerall = roundstate = 2
triggerall = var(51) = 400
trigger1 = !NumHelper(6800)&&!var(52)
trigger2 = !NumHelper(6800)&&var(52)=1&&!enemynear,NumHelper(6800)
id = 6800
name = "naration_1"
pos = 0,300
postype = Left
stateno = 6800
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

;時間停止によるガード不能
[State -2, PowerReset]
type = VarAdd
trigger1 = fvar(36) > 0
fvar(36) = -1

[State 3000, preventguard]
type = AssertSpecial
trigger1 = fvar(36) > 0
flag = unguardable

;空中コンボ制限
[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType != H
trigger2 = numtarget
trigger2 = target,statetype = S
trigger3 = numtarget
trigger3 = target,statetype = C
trigger4 = var(18)
trigger5 = var(22) = -1
trigger6 = var(23) = 1
trigger7 = var(45)
fvar(26) = 0
ignorehitpause = 1

[State -2, PowerReset]
type = VarAdd
triggerall = movehit
triggerall = numtarget
trigger1 = P2MoveType = H && P2stateType = A
trigger2 = target,gethitvar(yvel) && target,stateType != A
trigger3 = target,gethitvar(fall)
fvar(26) = 1
ignorehitpause = 1

[State -3, Kill Juggle Checking]
type = assertspecial
triggerall = P2MoveType = H && P2stateType = A
trigger1 = stateno = 3000 && !var(5) && fvar(26) < 6
trigger2 = stateno = 3000 && var(5) = 1 && fvar(26) < 10
trigger3 = stateno = 3000 && var(5) = 2 && fvar(26) < 14
trigger4 = stateno = 3201 && !var(5) && animelemtime(26) > 0 && fvar(26) < 2
trigger5 = stateno = 3201 && var(5) = 1 && animelemtime(34) > 0 && fvar(26) < 2
trigger6 = stateno = 3201 && var(5) = 2 && animelemtime(49) > 0 && fvar(26) < 2
flag = nojugglecheck

;食らい判定復活用
[State -2, PowerReset]
type = VarAdd
trigger1 = var(45)
var(45) = 1
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
triggerall = var(45)
trigger1 = movehit
trigger2 = projhit = 1
trigger3 = P2MoveType != H
var(45) = 0
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
triggerall = (prevstateno=[195,196]) || (prevstateno=[1000,2999])
triggerall = time = 1
triggerall = P2MoveType = H && P2stateType = A
trigger1 = stateno=3000
trigger2 = stateno=3100
trigger3 = stateno=3200
trigger4 = stateno=3300
var(45) = 1
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
triggerall = prevstateno=[3000,3999]
triggerall = time = 1
triggerall = P2MoveType = H && P2stateType = A
trigger1 = stateno=195
trigger2 = stateno=1000
trigger3 = stateno=1100
trigger4 = stateno=1200
trigger5 = stateno=1300
trigger6 = stateno=1400
trigger7 = stateno=1500
trigger8 = stateno=1600
trigger9 = stateno=1700
trigger10 = stateno=3000
trigger11 = stateno=3100
trigger12 = stateno=3200
trigger13 = stateno=3300
var(45) = 1
ignorehitpause = 1

[State -3, Kill Juggle Checking]
type = assertspecial
trigger1 = var(45)
flag = nojugglecheck

;強制fall=0時juggle判別用
[State -2, PowerReset]
type = null;VarSet
trigger1 = !numtarget
var(22) = 0

[State 901, Throw]
type = null;VarSet
triggerall = numtarget
trigger1 = movehit || projhit = 1
trigger1 = target,gethitvar(fall)
var(22) = 1
ignorehitpause = 1

[State -3, Kill Juggle Checking]
type = null;VarSet
triggerall = numtarget
trigger1 = var(22)
trigger1 = !target,gethitvar(hitshaketime)
trigger1 = target,statetype = S || target,statetype = C
var(22) = -1

[State -3, Kill Juggle Checking]
type = null;assertspecial
trigger1 = var(22) = -1
flag = nojugglecheck

;コンボ制限
[State -3, VarSet]
type = VarSet
trigger1 = P2MoveType != H
trigger2 = numtarget
trigger2 = target,statetype = S
trigger3 = numtarget
trigger3 = target,statetype = C
trigger4 = var(18)
trigger5 = var(22) = -1
trigger6 = var(23) = 1
trigger7 = var(45)
var(40) = -1

[State -3, VarSet]
type = VarSet
trigger1 = P2MoveType != H
trigger2 = numtarget
trigger2 = target,statetype = S
trigger3 = numtarget
trigger3 = target,statetype = C
trigger4 = var(18)
trigger5 = var(22) = -1
trigger6 = var(23) = 1
trigger7 = var(45)
var(42) = -1
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
triggerall = var(40) = -1
triggerall = numtarget
triggerall = movehit || projhit = 1
trigger1 = target,gethitvar(yvel)
trigger2 = target,gethitvar(fall)
var(40) = 1
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
triggerall = var(42) = -1
triggerall = numtarget
triggerall = movehit || projhit = 1
trigger1 = target,gethitvar(yvel)
trigger2 = target,gethitvar(fall)
var(42) = 1
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
triggerall = var(40) = 1
trigger1 = (stateno = [195,799]) && time = 1
trigger2 = stateno = 251 && animelem = 5
trigger3 = stateno = 900 && time = 1
trigger4 = stateno = 970 && time = 1
trigger5 = stateno = 1000 && time = 1
trigger6 = stateno = 1100 && time = 1
trigger7 = stateno = 1200 && time = 1
trigger8 = stateno = 1300 && time = 1
trigger9 = stateno = 1400 && time = 1
trigger10 = stateno = 1500 && time = 1
trigger11 = stateno = 3000 && time = 1
trigger12 = stateno = 3100 && time = 1
trigger13 = stateno = 3200 && time = 1
trigger14 = stateno = 3201 && !var(5) && (time = 1 || animelem = 6 || animelem = 12 || animelem = 18 || animelem = 26)
trigger15 = stateno = 3201 && var(5)=1 && (time = 1 || animelem = 6 || animelem = 12 || animelem = 18 || animelem = 26 || animelem = 34)
trigger16 = stateno = 3201 && var(5)=2 && (time = 1 || animelem = 6 || animelem = 12 || animelem = 18 || animelem = 25 || animelem = 33 || animelem = 41 || animelem = 49)
trigger17 = stateno = 3300 && time = 1
var(40) = 0
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
trigger1 = !var(42)
var(40) = 0
ignorehitpause = 1

[State -3, Kill Juggle Checking]
type = VarSet
triggerall = !var(42)
trigger1 = stateno = 3000 && !var(5) && fvar(26) < 6
trigger2 = stateno = 3000 && var(5) = 1 && fvar(26) < 10
trigger3 = stateno = 3000 && var(5) = 2 && fvar(26) < 14
trigger4 = stateno = 3201 && !var(5) && animelemtime(26) > 0 && fvar(26) < 2
trigger5 = stateno = 3201 && var(5) = 1 && animelemtime(34) > 0 && fvar(26) < 2
trigger6 = stateno = 3201 && var(5) = 2 && animelemtime(49) > 0 && fvar(26) < 2
var(40) = 1
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
trigger1 = !var(40)
var(42) = 0
ignorehitpause = 1

;空中復帰誘導
[State -2, PowerReset]
type = VarSet
triggerall = movetype != H
trigger1 = !NumTarget
trigger2 = P2MoveType != H
trigger3 = movehit
trigger4 = projhit = 1
trigger5 = numtarget
trigger5 = !target,gethitvar(fall)
fvar(38) = 0
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
triggerall = fvar(38) != 2
triggerall = (stateno = [200,799])
trigger1 = stateno != 450
trigger1 = !(stateno = 220 && prevstateno = 830)
fvar(38) = 1
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
triggerall = fvar(38) = 1
triggerall = !var(16)
trigger1 = movehit
fvar(38) = 2
ignorehitpause = 1

[State 901, Throw]
type = TargetState
triggerall = Numtarget
triggerall = fvar(38) = 2
trigger1 = target,stateno = 5050 && target,alive
value = 840
ignorehitpause = 1

;ガード＆ダメージ判定
[State 180, 1]
type = VarSet
trigger1 = 1
fvar(4) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = stateno != [120,159]
trigger1 = fvar(12) - Life > 0
fvar(4) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = stateno = 150 || stateno = 152 || stateno = 154
trigger1 = time = 1
fvar(4) = 2
ignorehitpause = 1

;ガード時グルーヴポイント増減
[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = stateno = 150 || stateno = 152 || stateno = 154
trigger1 = time = 1
trigger1 = Var(25) > 6
var(50)=50
ignorehitpause = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = stateno = 150 || stateno = 152 || stateno = 154
trigger1 = time = 1
trigger1 = Var(25) <= 6
var(50)=ifelse((enemynear,hitdefattr=SCA,NA,NP,NT),101,ifelse((enemynear,hitdefattr=SCA,SA,SP,ST),201,301))
ignorehitpause = 1

;食らい時グルーヴポイント増減
[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = movetype = H
triggerall = stateno != [120,159]
trigger1 = fvar(12) - Life > 0
var(50)=ifelse((enemynear,stateno=[195,999]),-500,ifelse((enemynear,stateno=[1000,2999]),-300,-200))
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(12) = life
ignorehitpause = 1

;リバーサル判定1
[State 180, 1]
type = VarSet
trigger1 = movetype = H
fvar(22) = 2
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = ctrl
trigger1 = fvar(22) = 2
fvar(22) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = fvar(22) = 1
fvar(23) = 1
ignorehitpause = 1

;投げぬけ・受身GPボーナス
[State 180, 1]
type = VarAdd
triggerall = Time = 1
trigger1 = stateno = 5201
trigger2 = stateno = 5210
trigger3 = stateno = 955 && movetype != H
var(50)=500
ignorehitpause = 1

;ボーナスメッセージアイコン表示
[State 180, 1]
type = VarSet
trigger1 = 1
fvar(8) = -1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = movetype != H
trigger1 = stateno = 4000
trigger2 = stateno = 4010
trigger3 = stateno = 4020
fvar(8) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = (stateno != [900,999]) && (stateno != [1500,1599])
trigger1 = movehit
trigger2 = projhit = 1
fvar(8) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = p2movetype = H
trigger1 = (stateno != [900,999]) && (stateno != [1500,1599])
trigger1 = movehit
trigger1 = !var(58)
trigger2 = !var(58)
trigger2 = projhit = 1
trigger3 = var(33)
trigger4 = stateno = 901 && animelem = 5 && !var(58) && movetype != H
trigger5 = stateno = 911 && animelem = 3 && !var(58) && movetype != H && time > 1
trigger6 = stateno = 1501 && animelem = 5 && !var(58) && movetype != H
fvar(8) = ifelse(var(41),-2,2)
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = movetype != H
trigger1 = stateno = 810
fvar(8) = 3
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = movetype != H
trigger1 = stateno = 2800
fvar(8) = 4
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = movetype != H
trigger1 = stateno = 820
fvar(8) = 5
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = movetype != H
trigger1 = stateno = 4100
trigger2 = stateno = 4110
trigger3 = stateno = 4120
fvar(8) = 6
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
trigger1 = stateno = 5201
trigger2 = stateno = 5210
trigger3 = stateno = 955 && movetype != H
fvar(8) = 9
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = fvar(23)
triggerall = movetype != H
triggerall = stateno != [2800,2999]
trigger1 = stateno = [1000,3999]
fvar(8) = 10
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = fvar(7)
triggerall = !NumHelper(6600)
trigger1 = !fvar(8)
trigger2 = fvar(8) = [3,6]
id = 6600
name = "Guard"
pos = 0,0
postype = P1
stateno = 6630
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = fvar(7)
triggerall = !NumHelper(6600)
trigger1 = !fvar(8)
trigger2 = fvar(8) = [3,6]
id = 6600
name = "Guard"
pos = 0,0
postype = P1
stateno = 6620
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = !fvar(6)
triggerall = !NumHelper(6600)
trigger1 = !fvar(8)
trigger2 = fvar(8) = [3,6]
id = 6600
name = "Guard"
pos = 0,0
postype = P1
stateno = 6610
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(5)
triggerall = !NumHelper(6600)
trigger1 = !fvar(8)
trigger2 = fvar(8) = [3,6]
id = 6600
name = "Guard"
pos = 0,0
postype = P1
stateno = 6600
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = fvar(7)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6602
name = "First Attack"
pos = 0,0
postype = P1
stateno = 6632
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = !fvar(7)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6602
name = "First Attack"
pos = 0,0
postype = P1
stateno = 6622
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = !fvar(6)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6602
name = "First Attack"
pos = 0,0
postype = P1
stateno = 6612
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(5)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6602
name = "First Attack"
pos = 0,0
postype = P1
stateno = 6602
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = fvar(7)
triggerall = !NumHelper(6601)
trigger1 = fvar(8) = 1 || fvar(8) = -2
id = 6601
name = "Counter Hit"
pos = 0,0
postype = P1
stateno = 6631
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = !fvar(7)
triggerall = !NumHelper(6601)
trigger1 = fvar(8) = 1 || fvar(8) = -2
id = 6601
name = "Counter Hit"
pos = 0,0
postype = P1
stateno = ifelse(!var(58),6631,6621)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = !fvar(6)
triggerall = !NumHelper(6601)
trigger1 = fvar(8) = 1 || fvar(8) = -2
id = 6601
name = "Counter Hit"
pos = 0,0
postype = P1
stateno = ifelse(!var(58),6621,6611)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(5)
triggerall = !NumHelper(6601)
trigger1 = fvar(8) = 1 || fvar(8) = -2
id = 6601
name = "Counter Hit"
pos = 0,0
postype = P1
stateno = ifelse(!var(58),6611,6601)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = fvar(7)
triggerall = !NumHelper(6603)
trigger1 = fvar(8) = [7,9]
id = 6603
name = "Tech Hit"
pos = 0,0
postype = P1
stateno = 6633
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = !fvar(7)
triggerall = !NumHelper(6603)
trigger1 = fvar(8) = [7,9]
id = 6603
name = "Tech Hit"
pos = 0,0
postype = P1
stateno = 6623
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = !fvar(6)
triggerall = !NumHelper(6603)
trigger1 = fvar(8) = [7,9]
id = 6603
name = "Tech Hit"
pos = 0,0
postype = P1
stateno = 6613
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(5)
triggerall = !NumHelper(6603)
trigger1 = fvar(8) = [7,9]
id = 6603
name = "Tech Hit"
pos = 0,0
postype = P1
stateno = 6603
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = fvar(7)
triggerall = !NumHelper(6604)
trigger1 = fvar(8) = 10
id = 6604
name = "Reversal"
pos = 0,0
postype = P1
stateno = 6634
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = !fvar(7)
triggerall = !NumHelper(6604)
trigger1 = fvar(8) = 10
id = 6604
name = "Reversal"
pos = 0,0
postype = P1
stateno = 6624
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = !fvar(6)
triggerall = !NumHelper(6604)
trigger1 = fvar(8) = 10
id = 6604
name = "Reversal"
pos = 0,0
postype = P1
stateno = 6614
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(5)
triggerall = !NumHelper(6604)
trigger1 = fvar(8) = 10
id = 6604
name = "Reversal"
pos = 0,0
postype = P1
stateno = 6604
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

;投げぬけ・受身GPボーナス
[State 180, 1]
type = VarAdd
trigger1 = fvar(8) = 9
var(50)=500
ignorehitpause = 1

;リバーサルボーナス
[State 180, 1]
type = VarAdd
trigger1 = fvar(8) = 10
var(50) = 2000
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = fvar(23) = 3
trigger2 = (stateno = [1000,3999]) && time = 1
fvar(22) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = fvar(23) = 3
trigger2 = (stateno = [1000,3999]) && time = 1
fvar(23) = 0
ignorehitpause = 1

;フィニッシュヒット判定
[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = var(48) = [0,1]
fvar(9) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = var(48) = 2
fvar(9) = 5
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = var(48) = 3 || var(48) = 4
fvar(9) = 6+((var(20)=[3,5])*5)
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = !numtarget
fvar(15) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = var(48) = 2 && var(49) = 3 && (fvar(8) = 1 || fvar(8) = -2)
trigger2 = var(48) = 3 && var(49) = 3
trigger3 = var(48) = 4 && var(49) = [2,3]
trigger4 = var(18) && var(49) = 3
fvar(15) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = fvar(15) = 1
fvar(9) = 12
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = var(18)
fvar(9) = 3
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = fvar(7)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !var(32)
id = 6700
name = "Finish Hit"
pos = 0,0
postype = P1
stateno = 6730
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = !fvar(7)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !var(32)
id = 6700
name = "Finish Hit"
pos = 0,0
postype = P1
stateno = 6720
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = !fvar(6)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !var(32)
id = 6700
name = "Finish Hit"
pos = 0,0
postype = P1
stateno = 6710
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(5)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !var(32)
id = 6700
name = "Finish Hit"
pos = 0,0
postype = P1
stateno = 6700
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = fvar(7)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = fvar(14) = 1
trigger1 = !var(54)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6734
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = fvar(6)
triggerall = !fvar(7)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = fvar(14) = 1
trigger1 = !var(54)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6724
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = fvar(5)
triggerall = !fvar(6)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = fvar(14) = 1
trigger1 = !var(54)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6714
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(5)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = fvar(14) = 1
trigger1 = !var(54)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6704
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(5)
triggerall = !fvar(3)
triggerall = win
triggerall = alive
trigger1 = fvar(11) = 1
id = 6701
name = "Vital"
pos = 0,0
postype = P1
stateno = 6701
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(6)
triggerall = !fvar(3)
triggerall = win
triggerall = alive
trigger1 = fvar(11) = 1
trigger1 = !fvar(14)
id = 6702
name = "Perfect"
pos = 0,0
postype = P1
stateno = 6712
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(6)
triggerall = !fvar(3)
triggerall = win
triggerall = alive
trigger1 = fvar(11) = 1
trigger1 = fvar(14) = 1
id = 6703
name = "Max Combo"
pos = 0,0
postype = P1
stateno = 6713
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !fvar(7)
triggerall = !fvar(3)
triggerall = win
triggerall = alive
trigger1 = fvar(11) = 1
trigger1 = !fvar(14)
id = 6703
name = "Max Combo"
pos = 0,0
postype = P1
stateno = 6723
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

;燃焼、感電エフェクト継続処理
[State -2, Combo]
type = VarSet
trigger1 = fvar(25)
fvar(25) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit || projhit = 1
fvar(25) = -1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit4005 = 1
fvar(25) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit1035 = 1
trigger1 = numtarget
fvar(25) = 2
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit4005 = 1
fvar(25) = 3
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit1025 = 1
trigger1 = numtarget
fvar(25) = 4
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit4005 = 1
fvar(25) = 5
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit4005 = 1
fvar(25) = 6
ignorehitpause = 1

;燃焼エフェクト発生（ダウン）
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = fvar(25) = 1 || fvar(25) = 5
id = 8300
name = "FireEffect_Down"
pos = 0,0
postype = P2
stateno = 8300
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

;燃焼エフェクト発生（のけぞり）
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = fvar(25) = 2 || fvar(25) = 6
id = 8300
name = "FireEffect_KnockBack"
pos = 0,0
postype = P2
stateno = 8301
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

;感電エフェクト発生（ダウン）
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = fvar(25) = 3
id = 8300
name = "SparkEffect_KnockBack"
pos = 0,0
postype = P2
stateno = 8305
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

;感電エフェクト発生（のけぞり）
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = fvar(25) = 4
id = 8300
name = "SparkEffect_Down"
pos = 0,0
postype = P2
stateno = 8306
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

;カウンターヒットエフェクト発生
[State -3, Blocking5]
type = helper
trigger1 = fvar(8) = 1 || fvar(8) = -2
trigger1 = projhit = 0
id = 8130
name = "COUNTER HIT EFFECT"
pos = Ceil(enemy,Const(size.ground.front)+var(38)),Ceil(Pos Y-enemy,Pos Y+var(39))
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

;ヒット管理
[State -2, Combo]
type = VarSet
trigger1 = numenemy
trigger1 = enemy,MoveType != H
var(17) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = (stateno != [900,999]) && (stateno != [1500,1599])
trigger1 = movehit
trigger2 = projhit = 1
var(17) = 1
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = numenemy
triggerall = roundstate = 2
triggerall = (var(17) = 5 && !var(18)) || (var(17) = 10 && var(18))
trigger1 = !NumHelper(6800)&&!var(52)
trigger2 = !NumHelper(6800)&&var(52)=1&&!enemynear,NumHelper(6800)
id = 6800
name = "naration_3"
pos = 0,0
postype = P1
stateno = 6802
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

[State 180, 1];ファーストストライク判別
type = VarAdd
trigger1 = fvar(8) = -2 || fvar(8) = 2
var(50) = 5000
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = var(51) < 400
triggerall = (!NumHelper(6800)&&!var(52)) || (!NumHelper(6800)&&var(52)=1&&!enemynear,NumHelper(6800))
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6800
name = "naration_2"
pos = 0,300
postype = Left
stateno = 6801
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

[State -2, Combo]
type = VarSet
trigger1 = fvar(8) = -2 || fvar(8) = 2
trigger2 = MoveType = H && (stateno != [150,159]) && (stateno != [4100,4199])
var(58) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1];ヒットボーナス
type = VarAdd
triggerall = roundstate = 2
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(50)=ifelse((hitdefattr=SCA,NA,NP,NT),-50,ifelse((hitdefattr=SCA,SA,SP,ST),-30,-20))
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = !var(41)
triggerall = p2movetype = H
trigger1 = (stateno != [900,999]) && (stateno != [1500,1599])
trigger1 = movehit
trigger2 = projhit = 1
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = (stateno != [900,999]) && (stateno != [1500,1599])
trigger1 = movehit
trigger2 = projhit = 1
var(50)=ifelse((hitdefattr=SCA,NA,NP,NT),1001,ifelse((hitdefattr=SCA,SA,SP,ST),3001,5001))
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = var(41)
triggerall = p2movetype = H
trigger1 = (stateno != [900,999]) && (stateno != [1500,1599])
trigger1 = movehit
trigger2 = projhit = 1
var(50)=1
ignorehitpause = 1
persistent = 1

[State -2, Combo];MAXコンボ数判別
type = VarSet
trigger1 = P2MoveType = H
trigger1 = var(47) < var(17)
var(47) = var(17)
ignorehitpause = 1
persistent = 1

[State 180, 1];コンボボーナス
type = VarAdd
triggerall = roundstate = 2
triggerall = var(17) >= 2
trigger1 = (stateno != [900,999]) && (stateno != [1500,1599])
trigger1 = movehit
trigger2 = projhit = 1
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(36) = ifelse(movehit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(36) = ifelse(moveguarded,2,4)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = Time = 1
trigger1 = stateno != 1005
trigger1 = stateno != 1125
trigger1 = stateno != 1135
trigger1 = stateno != 1305
trigger1 = stateno != 3101
trigger1 = stateno != 3105
trigger1 = stateno != 3201
trigger1 = stateno != 3202
trigger1 = stateno != 3205
var(36) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(24) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
fvar(24) = ifelse(movehit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
fvar(24) = ifelse(moveguarded,2,4)
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

;パワー増加量判定
[State -2, PowerReset]
type = VarSet
trigger1 = !var(20)
var(24) = 0

[State -2, PowerReset]
type = VarSet
trigger1 = var(20) = 1
var(24) = 167

[State -2, PowerReset]
type = VarSet
trigger1 = var(20) = 2
var(24) = -125

[State -2, PowerReset]
type = VarSet
trigger1 = var(20) = 4
var(24) = -222

[State -2, PowerReset]
type = VarSet
trigger1 = var(20) = 6
var(24) = -360

[State -2, PowerReset]
type = VarSet
trigger1 = var(20) = 3 || var(20) = 5
var(24) = -1000

[State -2, PowerReset2]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=100
trigger1 = (100*life/const(data.life))>30
var(31) = 0

[State -2, PowerReset3]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=30
trigger1 = (100*life/const(data.life))>15
var(31) = 2

[State -2, PowerReset4]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(31) = 4

[State -2, PowerReset]
type = VarSet
triggerall = roundstate = 2
trigger1 = 1
var(46) = gethitvar(damage)

;攻撃力変動判定
[State -2, PowerReset]
type = VarSet
triggerall = !var(20) || var(20) = 6
triggerall = !var(18)
triggerall = roundstate = 2
trigger1 = power = [0,999]
var(7) = 0

[State -2, PowerReset]
type = VarSet
triggerall = var(20) != 0 && var(20) != 6
trigger1 = roundstate = 2
var(7) = 0

[State -2, PowerReset]
type = VarSet
triggerall = !var(20) || var(20) = 6
triggerall = !var(18)
triggerall = roundstate = 2
trigger1 = power = [1000,1999]
var(7) = 1

[State -2, PowerReset]
type = VarSet
triggerall = !var(20) || var(20) = 6
triggerall = !var(18)
triggerall = roundstate = 2
trigger1 = power = [2000,2999]
var(7) = 2

[State -2, PowerReset]
type = VarSet
triggerall = !var(20) || var(20) = 6
triggerall = !var(18)
triggerall = roundstate = 2
trigger1 = power >= 3000
var(7) = 5

[State -2, PowerReset]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=100
trigger1 = (100*life/const(data.life))>30
var(8) = 0

[State -2, PowerReset2]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=30
trigger1 = (100*life/const(data.life))>15
var(8) = 5

[State -2, PowerReset3]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(8) = 10

[State -2, PowerReset4]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=100
trigger1 = (100*enemy,life/enemy,const(data.life))>30
var(9) = 0

[State -2, PowerReset5]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=30
trigger1 = (100*enemy,life/enemy,const(data.life))>15
var(9) = -10

[State -2, PowerReset6]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=15
trigger1 = (100*enemy,life/enemy,const(data.life))>0
var(9) = -25

[State -2, PowerReset]
type = VarSet
triggerall = var(20) = 5
triggerall = roundstate = 2
trigger1 = var(43)
var(21) = ifelse((stateno = [195,999]),35,ifelse((stateno = [1000,2999]),30,10))

[State -2, PowerReset]
type = VarSet
triggerall = var(20) = 5
triggerall = roundstate = 2
trigger1 = !var(43)
var(21) = 0

[State -2, PowerReset]
type = VarSet
triggerall = var(20) != 5
triggerall = roundstate = 2
trigger1 = 1
var(21) = 0

[State -2, 1]
type = VarSet
trigger1 = P2movetype != H
var(17) = 0

[State -2]
type = VarSet
trigger1 = var(17) < 10
trigger1 = var(18)
trigger1 = stateno = [0, 2999]
fvar(0) = (10-var(17))*.1*.72
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(17) >= 10
trigger1 = var(18)
trigger1 = stateno = [0, 2999]
fvar(0) = .072
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(18)
trigger1 = stateno = [3000, 3999]
fvar(0) = .8
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !var(18)
trigger1 = var(17) = [6,29]
trigger1 = stateno = [0, 2999]
fvar(0) = (25-(var(17)-5))*.02
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !var(18)
trigger1 = var(17) > 30
trigger1 = stateno = [0, 2999]
fvar(0) = .02
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = !var(18)
trigger1 = var(17) <= 5
trigger2 = stateno = [3000, 3999]
fvar(0) = 1
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = 1
fvar(10) = (100+var(7))*.01*(100+var(8))*.01*(100+var(9))*.01*(100+var(21))*.01*(100+((var(14)>0)*15))*.01*(100+((var(15)>0)*20))*.01*(10+(var(41)*2))*.1*fvar(0)
ignorehitpause = 1

;カウンターヒット
[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType = A
var(41) = 1

[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType != A
var(41) = 0

;地上受身可能判定
[State -2, PowerReset]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = time = 0
trigger1 = P2stateno = [3000,3999]
var(1) = 1

[State -2, PowerReset]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = time = 0
trigger1 = P2stateno != [3000,3999]
trigger2 = movetype != H
var(1) = 0

;振り向き
[State 1300,Turn]
type = Turn
triggerall = P2Dist X < 0
trigger1 = prevstateno = 52
trigger1 = stateno = [1000,3999]
trigger1 = time = 1
ignorehitpause = 1

;削りKO移行
[State -2, 3] 
type = ChangeState
trigger1 = !alive
trigger1 = prevstateno = 130 || prevstateno = 131 || prevstateno = [150,153]
trigger1 = Stateno = [5000,5050]
value = 5950

[State -2,KO]
type = Varset
triggerall = stateno = [120,159]
trigger1 = StateType = S
ignorehitpause = 1
fvar(1) = 0

[State -2,KO]
type = Varset
triggerall = stateno = [120,159]
trigger1 = StateType = C
ignorehitpause = 1
fvar(1) = 1

[State -2,KO]
type = Varset
triggerall = stateno = [120,159]
trigger1 = StateType = A
ignorehitpause = 1
fvar(1) = 2

;ブロッキング入力
[State -2, Blocking-1]
type = VarSet
trigger1 = var(10) >= 20
trigger2 = (stateno = [4000,4020]) && time = 1
var(34) = 0

[State -2, Blocking-1]
type = VarSet
trigger1 = var(10) >= 20
trigger2 = (stateno = [4000,4020]) && time = 1
var(10) = 0

[State -2, Blocking-1]
type = VarAdd
trigger1 = var(10)
var(10) = 1
ignorehitpause = 1

[State -2, Blocking-1]
type = VarSet
triggerall = !var(59)
triggerall = !var(10)
triggerall = var(20) = 2 || var(20) = 6
trigger1 = command = "block" && command != "holddown"&& Command != "holdup"
var(10) = 1

[State -2, Blocking-1]
type = VarSet
trigger1 = var(10) = [1,4]
trigger1 = command != "holdfwd" && Command != "holdback" && command != "holdup" && Command != "holddown"
var(34) = 1

[State -2, Blocking-12
type = VarSet
trigger1 = var(11) >= 20
trigger2 = (stateno = [4000,4020]) && time = 1
var(35) = 0

[State -2, Blocking-2]
type = VarSet
trigger1 = var(11) >= 20
trigger2 = (stateno = [4000,4020]) && time = 1
var(11) = 0

[State -2, Blocking-2]
type = VarAdd
trigger1 = var(11)
var(11) = 1
ignorehitpause = 1

[State -2, Blocking-2]
type = VarSet
triggerall = !var(59)
triggerall = !var(11)
triggerall = var(20) = 2 || var(20) = 6
trigger1 = command = "block2" && command != "holdfwd"&& Command != "holdback"
var(11) = 1

[State -2, Blocking-2]
type = VarSet
trigger1 = var(11) = [1,4]
trigger1 = command != "holdfwd" && Command != "holdback" && command != "holdup" && Command != "holddown"
var(35) = 1

;上段ブロッキング移行
[State -2, 4000] 
type = HitOverride
triggerall = var(20) = 2 || var(20) = 6
triggerall = statetype != A && ctrl
trigger1 = (var(10) = [1,4]) && !var(59)
trigger2 = (var(10) = [5,8]) && var(34) && !var(59)
trigger3 = Random <= 250 && var(59)
slot = 0
stateno = 4000
attr = SA, AA, AP
time = 1

;下段ブロッキング移行
[State -2, 4010]
type = HitOverride
triggerall = var(20) = 2 || var(20) = 6
triggerall = statetype != A && ctrl
trigger1 = (var(11) = [1,4]) && !var(59)
trigger2 = (var(11) = [5,8]) && var(35) && !var(59)
trigger3 = Random <= 250 && var(59)
slot = 0
stateno = 4010
attr = C, AA, AP
time = 1

;空中ブロッキング移行
[State -2, 4020]
type = HitOverride
triggerall = !var(4)
triggerall = var(20) = 2 || var(20) = 6
triggerall = statetype = A && ctrl
trigger1 = (var(10) = [1,4]) && !var(59)
trigger2 = (var(10) = [5,8]) && var(34) && !var(59)
trigger3 = Random <= 250 && var(59)
slot = 0
stateno = 4020
attr = SCA, AA, AP
time = 1

;ジャストディフェンス入力
[State -2, 46]
type = VarSet
trigger1 = roundstate = 0
var(25) = -1

[State -2, 47]
type = VarAdd
trigger1 = var(25) >= 0
var(25) = 1
ignorehitpause = 1

[State -2, 46]
type = VarSet
triggerall = var(25) > 12
triggerall = var(20) = 5 || var(20) = 6
trigger1 = command != "holdback"
var(25) = -1

[State -2, 46]
type = VarSet
triggerall = var(25) = -1
triggerall = var(20) = 5 || var(20) = 6
triggerall = stateno != [140,159]
trigger1 = command = "back"
trigger2 = command = "downback"
var(25) = 0

[State -2, 46]
type = VarSet
triggerall = var(25) = [0,6]
triggerall = var(20) = 5 || var(20) = 6
trigger1 = command != "holdback"
var(25) = 7

;ジャストディフェンス硬直時間
[State 180, 1]
type = VarAdd
trigger1 = var(0)
var(0) = -1
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = stateno = 150 || stateno = 152 || stateno = 154
trigger1 = time = 0
var(0) = GetHitVar(hitshaketime)
ignorehitpause = 1

;上段ジャストディフェンス移行
[State -2, 3] 
type = ChangeState
triggerall = var(20) = 5 || var(20) = 6
triggerall = stateno = 150
triggerall = time = 0
trigger1 = (var(25) = [0,6]) && !var(59)
trigger2 = Random <= 350 && var(59) && prevstateno != [140,159]
value = 4100

;下段ジャストディフェンス移行
[State -2, 3]
type = ChangeState
triggerall = var(20) = 5 || var(20) = 6
triggerall = stateno = 152
triggerall = time = 0
trigger1 = (var(25) = [0,6]) && !var(59)
trigger2 = Random <= 350 && var(59) && prevstateno != [140,159]
value = 4110

;空中ジャストディフェンス移行
[State -2, 3]
type = ChangeState
triggerall = var(20) = 5 || var(20) = 6
triggerall = stateno = 154
triggerall = time = 0
triggerall = !var(4)
trigger1 = (var(25) = [0,6]) && !var(59)
trigger2 = Random <= 350 && var(59) && prevstateno != [140,159]
value = 4120

;KO後AI暴れ防止
[State -2,AI]
type = Varset
trigger1 = roundstate = 3
trigger1 = var(59) = 1
ignorehitpause = 1
var(59) = 2

[State -2,AI]
type = Varset
trigger1 = roundstate = 1
trigger1 = var(59) = 2
ignorehitpause = 1
var(59) = 1

;KO時ボイス
[State -2,AI]
type = Varset
trigger1 = 1
ignorehitpause = 1
fvar(19) = 0

[State -2,AI]
type = Varset
trigger1 = anim = 5950 || stateno = 5950
ignorehitpause = 1
fvar(19) = 1

[State -2,AI]
type = Varset
trigger1 = movetype != H
trigger1 = roundstate = 2
ignorehitpause = 1
var(37) = 0

[State -2,AI]
type = Varset
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = roundstate = 2
trigger1 = time = 0
ignorehitpause = 1
var(37) = gethitvar(hitshaketime)

[State -2, KO]
type = PlaySnd
triggerall = roundstate = [2,3]
trigger1 = !fvar(19) && !fvar(20)
trigger1 = Var(27) = ifelse(!var(37),1,ifelse(var(37)>20,20,var(37)))
trigger2 = !fvar(19) && fvar(20)
trigger2 = Var(27) = 12
ignorehitpause = 1
value = 110, 0

[State -2, KO]
type = PlaySnd
triggerall = roundstate = [2,3]
triggerall = fvar(19)
triggerall = !alive
trigger1 = anim = 5950 && animelemtime(1) = 2
ignorehitpause = 1
value = 5950, 0

[State -2,KO]
type = Varadd
trigger1 = !alive
ignorehitpause = 1
var(27) = 1

[State -2,KO]
type = Varset
trigger1 = alive
ignorehitpause = 1
var(27) = 0

;KO時演出
[State -2, HyperComboFinish]
type = Helper
triggerall = roundstate >= 2
triggerall = WinKo && !var(32)
trigger1 = stateno = [3000, 3999]
trigger2 = Var(18)
trigger3 = fvar(9)=12
ID = 9000
stateno = ifelse(stateno=3305,9050,ifelse(fvar(9)=12,9020,ifelse((var(20)=[3,5]),9010,9000)))
postype = left
pos = -50,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ownpal = 1

[State -2, HyperComboFinish]
type = PlaySnd
triggerall = roundstate >= 2
trigger1 = WinKo && !var(32)
value = 9000,0
ignorehitpause = 1

[State -2, HyperComboFinish]
type = pause
triggerall = roundstate >= 2
trigger1 = WinKo && !var(32)
time = 10
ignorehitpause = 1

[State -2,KO]
type = Varadd
trigger1 = roundstate = 3
ignorehitpause = 1
var(32) = 1

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
ignorehitpause = 1
var(32) = 0

[State -2,KO]
type = Varadd
trigger1 = roundstate = 4
ignorehitpause = 1
fvar(11) = 1

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
ignorehitpause = 1
fvar(11) = 0

;エフェクト除去

;残像消去
[State -2]
type = AfterImageTime
triggerall = !var(16)
trigger1 = MoveType = H
trigger2 = StateNo = [0,49]
trigger3 = StateNo = [100,189]
trigger4 = StateNo = 195
trigger5 = StateNo = [200,799]
trigger6 = StateNo = [850,859]
trigger7 = StateNo = [900,1135]
trigger8 = StateNo = [1200,2999]
time = 0

;ラウンド開始時パワーリセット等
[State -2, 1]
type = PowerSet
triggerall = roundstate = 0
trigger1 = fvar(13) || var(18)
trigger2 = var(20) = 3
value = 0

[State -2, 1]
type = PowerSet
triggerall = roundstate = 0
triggerall = var(20) = 5
trigger1 = var(26) = 2
value = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && (var(43) || var(26) = 2)
fvar(13) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(14) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(15) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(16) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(18) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
var(43) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(47) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(51) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(52) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
var(54) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(58) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(5) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(6) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(7) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
fvar(13) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(14) = 0

[State -2, 1]
type = PalFX
trigger1 = roundstate = 0
Time = 1
add   = 0,0,0
ignorehitpause = 1

;原作判別
[State -2, 1]
type = VarSet
trigger1 = 1
fvar(39) = 1;CAPCOM VS SNK 2

;キャラ判別
[State -2, 1]
type = VarSet
triggerall = numenemy
triggerall = roundstate = 2
trigger1 = enemy,authorname = "warusaki3" && enemy,fvar(39) = 1
trigger2 = enemy,authorname = "mouser" && (P2Name = "Hibiki Takane" || P4Name = "Hibiki Takane")
var(52) = 1

;やられ時にゲージ消去する相手動作の判定
[State -2, 1]
type = VarSet
trigger1 = 1
fvar(20) = 0

[State -2, 1]
type = VarSet
triggerall = numenemy
trigger1 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki"&&enemynear,var(13))
trigger2 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki_normal"&&enemynear,var(13))
trigger3 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki_ex"&&enemynear,var(13))
trigger4 = (enemynear,authorname="SUMI"&&enemynear,name="Destrudo Ryu"&&enemynear,var(16)=1)
trigger5 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal"&&enemynear,var(13))
trigger6 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal_ex"&&enemynear,var(13))
trigger7 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu"&&enemynear,var(13))
trigger8 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu_ex"&&enemynear,var(13))
trigger9 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsg_rugal"&&enemynear,var(13))
trigger10 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgeese"&&enemynear,var(13))
trigger11 = (enemynear,authorname="warusaki3"&&enemynear,name="cvssakura"&&enemynear,var(13))
fvar(20) = 1

;製作用関数表示
[State -2, DEBUG]
trigger1 = 1
type = DisplayToClipboard
ignorehitpause = 1
text = "Groove = %d Parry= %d First Strike =%d Max = %d Groove Point = %d \n "
params = var(59), var(16), ceil(p2bodydist x), ceil(p2bodydist y), ceil(frontedgedist)

[Statedef -3]

[State -3, Bounding Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5100 || StateNo = 5110
value = 5100, 0
channel = 20

[State -3, GetHurt Sound]
type = PlaySnd
triggerall = Random < 500
triggerall = Time = 1
triggerall = alive
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080 || StateNo = 5100
value = 5000, ifelse(StateNo = 5100 || GetHitVar(animtype) = 2, 2, ifelse(GetHitVar(animtype) = 1, 1, 0))
channel = 10

[State 3000, Voice]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5201 || StateNo = 5210
value = 5200,0

[State 820, Voice]
type = Stopsnd
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080 || StateNo = 5100
trigger2 = StateNo = [150,159]
channel = 0
