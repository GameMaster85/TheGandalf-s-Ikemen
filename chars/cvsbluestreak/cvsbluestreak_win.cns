;===================================================================;
;                      CNS File for Bluestreak                      ;
;                                by                                 ;
;                        Diepod & Jesuszilla                        ;
;===================================================================;

;--------------------- Variable List ----------------------

;  Var(0) - Used in Just Defend
;  Var(1) - NoWalk Parry
;  Var(2) - Returns ShakeTime for Just Defense
;  Var(3) - Finest KO, WaruFVar(15)
;  Var(4) - Used in the Long Jump
;  Var(5) - 2: Run/Dash
;           4: Just Defend
;           8: Parry
;          16: Super Combo Cancel
;          32: Counter Attack
;          64: Counter Movement
;         128: Safe Fall
;         256: Air Guard
;  Var(6) - Indicates whether or not Small Jump is activated
;  Var(7) - Stand hitShakeTime
;  Var(8) - Stand hitTime
;  Var(9) - Roll/Dodge
; Var(10) - Gauge Selection
; Var(11) - Stand slideTime
; Var(12) - Command Buffer, ORAORAORA mash time
; Var(13) - GetHitVar(hitTime)
; Var(14) - Just Defend
; Var(15) - Safe Fall Detection
; Var(16) - Counts time in the intro
; Var(17) - S-Groove MAX Power
; Var(18) - N-Groove MAX Power
; Var(19) - K-Groove Rage
; Var(20) - Groove Select
;           0 =  None
;           1 =  C-Groove
;           2 =  A-Groove
;           3 =  P-Groove
;           4 =  S-Groove
;           5 =  N-Groove
;           6 =  K-Groove
;           7 = EX-Groove
; Var(21) - Detects the enemy's MoveType. WaruVar(41)
; Var(22) - Differentiation of commands.
; Var(23) - ORAORAORA main time
; Var(24) - Arc Cannon timer
; Var(25) - Juggle Exceptions
; Var(26) - Special Interactions (to reduce code redundancy)
; Var(27) - Set upon victory/loss.
; Var(28) - WTF, WaruVar(48)
; Var(29) - Power Reset
; Var(30) - Custom Combo
; Var(31) - x2
; Var(32) -
; Var(33) - Hit Counter, Waruvar(47)
; Var(34) - Announcer Time Counter
; Var(35) - Descale Groove Bar, WaruVar(52)
; Var(36) - x5, WaruVar(54)
; Var(37) - x6, WaruVar(58)
; Var(38) - Set upon victory/loss, WaruVar(55)
; Var(39) - x2, WaruVar(56)
; Var(40) - Power Increase
; Var(41) - x2
; Var(42) - Returns Damage
; Var(43) - WTF
; Var(44) - Power
; Var(45) - Returns Life/WaruVar(53)
; Var(46) - Arrow
; Var(47) - Groove Point/WaruVar(50)
; Var(48) - Superpause unguardable time
; Var(49) -
; Var(50) - Combo
; Var(51) - WaruVar(17)
; Var(52) - Used in the combo dampener, WaruVar(7)
; Var(53) - x2, WaruVar(8)
; Var(54) - x3, WaruVar(9)
; Var(55) -
; Var(56) - Cornerpush
; Var(57) - PalFX Add, Combo dampener
; Var(58) - Used in the combo dampener, WaruVar(21)
; Var(59) - State Decision, WaruVar(49)

;--------------------- Float Variable List ----------------------

;  FVar(0) - Descale Groove Bar, WaruFVar(20)
;  FVar(1) - Cheap K.O. Anim; Scaling in Super Effect.
;  FVar(2) - KO Voice; Scaling in the Super Effect.
;  FVar(3) - Fire/Shock Spark, WaruFVar(25)
;  FVar(4) - Power Reset, WaruFVar(5)
;  FVar(5) - Power Reset, WaruFVar(6)
;  FVar(6) - Returns Power, WaruFVar(7)
;  FVar(7) - Announcer Voice
;  FVar(8) - WaruVar(12), Returns Life
;  FVar(9) - Used in the combo dampener.
; FVar(10) - Combo dampener.
; FVar(11) - Throw
; FVar(12) - WaruFVar(24)
; FVar(13) - WaruFVar(4)
; FVar(14) - Throw
; FVar(15) - Power Reset, WaruFVar(14)
; FVar(16) - Juggle System, WaruFVar(27)
; FVar(17) - CvS2 Character
; FVar(18) - Juggle System, WaruFVar(26)
; FVar(19) - x2, WaruFVar(28)
; FVar(20) - GROOVE POINT ON/OFF
; FVar(21) - KSSSSSSSSSHHHHHHHHHH, WaruVar(32)
; FVar(22) - KSSSSSSSSSHHHHHHHHHH, WaruFVar(11)
; FVar(23) - Pos X (freezes Pos X during Shadow Kick)
; FVar(24) - Win Message Axis, WaruFVar(37)
; FVar(25) - Throw
; FVar(26) - x2, WaruVar(38)
; FVar(27) - x3, WaruVar(39)
; FVar(28) - x4, WaruVar(44)
; FVar(29) - x5, WaruVar(45)
; FVar(30) - Reversal Message, WaruFVar(22)
; FVar(31) - x2, WaruFVar(23)
; FVar(32) - Parry Message, WaruFVar(8)
; FVar(33) - Finish Message, WaruFVar(9)
; FVar(34) -
; FVar(35) - KO Voice, WaruVar(37)
; FVar(36) - KO Voice, WaruVar(27)
; FVar(37) - Power Up! Sound, WaruFVar(21)
; FVar(38) -
; FVar(39) - Cornerpush


[Data]
life = 1000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 15
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 150
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = 1                              	;Horizontal scaling factor.
yscale = 1                                  	;Vertical scaling factor.
ground.back = 20	                 	;Player width (back, ground)
ground.front = 20                       	;Player width (front, ground)
air.back = 20	                	        ;Player width (back, air)
air.front = 20	                	        ;Player width (front, air)
height = 60		                	;Height of player (for opponent to jump over)
attack.dist = 160	                	;Default attack distance
proj.attack.dist = 90                   	;Default attack distance for projectiles
proj.doscale = 0                     		;Set to 1 to scale projectiles too
head.pos = 6, -108                   	        ;Approximate position of head
mid.pos = 0, -70                       	;Approximate position of midsection
shadowoffset = 0                     		;Number of pixels to vertically offset the shadow
draw.offset = 0,0                     		;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 2.25			;Walk forward
walk.back = -2		;Walk backward
run.fwd  = 4.875, 0		;Run forward (x, y)
run.back = -6.5,-4.5	;Hop backward (x, y)
jump.neu = 0,-9.375		;Neutral jumping velocity (x, y)
jump.back = -3.25			;Jump back Speed (x, y)
jump.fwd = 3.75			;Jump forward Speed (x, y)
runjump.back = -5.81,-9.4       ;Running jump speeds (opt)
runjump.fwd = 5.25,-9.4

[Movement]
yaccel = .47
stand.friction = .828125           ;Friction coefficient when standing
crouch.friction = .828125          ;Friction coefficient when crouching

[Quotes]
victory0 = "Here's some advice. If you want your kicks to look sexy, wear a hoodie!"
victory1 = "Hahah! That's the Goddamned Tatsumaki!"
victory2 = "We need emotional content. Don't think! Feel."
victory3 = "VIDEOGAMESGETATMEDOG!"
victory4 = "I am the skull and crossbones, poisonous logo."
victory5 = "You're an idiot."
victory6 = "Fuck your feelings, I throw lightning!" 
;victory7 = "Player 2, DEFEATED!"
;victory8 = "Player 1, DEFEATED!"

;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0
velset = 0,0 ;Stop moving PERIOD

[State 0, CtrlSet]
type = CtrlSet
trigger1 = Time = 1 && PrevStateNo = 855
value = 1

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 4] ;Wipe yo'self off... YOU DEAD!
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
;Fondo rojo stand
[Statedef 2]
type = S
movetype = I
physics = N
ctrl = 0
anim = 2
sprpriority = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 =  1
value = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 20000, Turn]
type = Turn
trigger1 = facing != root,facing

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
pos = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = Add

[State 20000, 1]
type = VarSet
trigger1 = time = 0
var(0) = root,anim

[State 1, ChangeAnim]
type = ChangeAnim
trigger1 = parent,stateno = 0 && parent,animelemtime(1) >= 0
trigger1 = parent,stateno = 0 && parent,animelemtime(2) < 0
value = 2
elem = 1

[State 1, ChangeAnim]
type = ChangeAnim
trigger1 = parent,stateno = 0 && parent,animelemtime(2) >= 0
trigger1 = parent,stateno = 0 && parent,animelemtime(3) < 0
value = 2
elem = 2

[State 1, ChangeAnim]
type = ChangeAnim
trigger1 = parent,stateno = 0 && parent,animelemtime(3) >= 0
trigger1 = parent,stateno = 0 && parent,animelemtime(4) < 0
value = 2
elem = 3

[State 1, ChangeAnim]
type = ChangeAnim
trigger1 = parent,stateno = 0 && parent,animelemtime(4) >= 0
trigger1 = parent,stateno = 0 && parent,animelemtime(5) < 0
value = 2
elem = 4

[State 1, ChangeAnim]
type = ChangeAnim
trigger1 = parent,stateno = 0 && parent,animelemtime(5) >= 0
trigger1 = parent,stateno = 0 && parent,animelemtime(6) < 0
value = 2
elem = 5

[State 1, ChangeAnim]
type = ChangeAnim
trigger1 = parent,stateno = 0 && parent,animelemtime(6) >= 0
trigger1 = parent,stateno = 0 && parent,animelemtime(7) < 0
value = 2
elem = 6

[State 1, ChangeAnim]
type = ChangeAnim
trigger1 = parent,stateno = 0 && parent,animelemtime(7) >= 0
trigger1 = parent,stateno = 0 && parent,animelemtime(8) < 0
value = 2
elem = 7

[State 2, changestate]
type = changestate
;trigger1 = parent,stateno = [5000,5999]
;;trigger2 = parent,movetype = H
;trigger2 = animtime = 0
trigger1 = root,anim != var(0)
value=3

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
velset = 0,0

[State 10, 0]
type = AssertSpecial
trigger1 = Time = 0
flag = NoAutoTurn

[State 10, 3]
type = ChangeState
trigger1 = Time = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
sprpriority = 0
velset = 0,0

[State 0, BlockEnd?]
type = ChangeState
trigger1 = PrevStateNo = [140,141]
trigger1 = command != "holddown"
trigger1 = Time = 0
value = 0

[State 12, 1]
type = ChangeAnim
trigger1 = Anim = 12
value = 12
elem = 2 - AnimElemNo(0)

[State 10, 0]
type = ChangeAnim
trigger1 = PrevStateNo = 10
trigger1 = Time = 0
value = 10

[State 10, 0]
type = AssertSpecial
trigger1 = Time = 0
flag = NoAutoTurn

[State 10, 0]
type = AssertSpecial
trigger1 = Time = 0
flag = NoWalk

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
trigger2 = Anim != 6 && Anim != 10 && Anim != 11
trigger3 = Anim = 10 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
velset = 0,0

[State 12, 0]
type = AssertSpecial
trigger1 = Time = 0
flag = NoWalk

[State 12, 1]
type = ChangeAnim
trigger1 = Anim = 10
value = 10
elem = 2 - AnimElemNo(0)

[State 12, 1]
type = ChangeAnim
trigger1 = Anim !=12
value = 12

[State 12, 1]
type = ChangeState
trigger1 = Anim = 12
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Walk (AI)
; Thank you again, Warusaki!
[Statedef 21]
type    = S
physics = N
sprpriority = 0
ctrl = 0
velset = 0,0

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 20, 1]
type = VelSet
trigger1 = !Time
x = ifelse(Var(30),const(velocity.walk.fwd.x),ifElse((Random%6)<=2||P2BodyDist X<50,const(velocity.walk.back.x),const(velocity.walk.fwd.x)))
[State 20, 1]
type = VelSet
triggerall = !Time
trigger1 = P2BodyDist X > 160
trigger2 = numTarget
;trigger2 = fvar(26) < 3
x = const(velocity.walk.fwd.x)
persistent = 0

[State 20, 3]
type = ChangeAnim
triggerall = Vel x > 0
trigger1 = Anim != 20
value = 20
persistent = 0
[State 20, 4]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = Anim != 21
value = 21
persistent = 0

[State 20, 4]
type = ChangeState
trigger1 = Time > 20
trigger1 = P2BodyDist X <= 50 && Anim = 20
trigger2 = Time > 20
trigger2 = P2BodyDist X >= 150 && Anim = 21
trigger3 = InGuardDist
trigger4 = RoundState != 2
trigger5 = Var(30)
trigger5 = P2BodyDist X < 20
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = ifElse(Var(6)>0,50,40)
ctrl = 0
sprpriority = 1
facep2 = 1
velset = 0,0

[State 40, Helper]
type = Helper
trigger1 = AnimTime = 0
id = 8020
name = "Jump Effect"
pos =0,0
postype = p1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = command = "holdfwd"-command = "holdback"

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 40, 4]
type = VarSet
triggerall = Time = 0
trigger1 = (PrevStateNo = 100 || PrevStateNo = 101) && sysvar(1) != -1
trigger2 = Command = "longjump"
trigger3 = Command = "longjump" && Command = "holdfwd"
trigger4 = Command = "longjump" && Command = "holdback"
var(4) = 1

[State 40, 5]
type = VarSet
trigger1 = Var(6) = 1 && command != "holdup"
var(6) = 2

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = !Var(4)
x = ifElse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
[State 40, 7]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(4)
x = ifElse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))

[State 40, 9]
type = VelSet
trigger1 = AnimTime = 0
y = ifElse(Var(4) && !SysVar(1), const(velocity.jump.y)*1.15, const(velocity.jump.y))*ifElse(Var(6)=2,.75,1)

[State 40, Jump Sound]
type = PlaySnd
trigger1 = Time = 0
value = S40,Var(4)
channel = 13

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = N
movetype = I

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50, AfterImage]
type = AfterImage
triggerall = !Var(30)
trigger1 = Time = 0
trigger1 = Var(4)
time = -1
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
length = 9
trans = add1
TimeGap  = 1
FrameGap = 4

[State 50, Variable Height]
type = null;PlayerPush
triggerall = stateType=A && moveType!=H && numEnemy
triggerall = P2bodyDist X = [-(enemyNear,Const(Size.Ground.Back) + enemyNear,Const(Size.Ground.Front)), 0]
trigger1 = P2stateType=S
trigger1 = P2Dist Y >= (enemyNear,Const(Size.Height) - 32); Value depends on each char
trigger2 = P2stateType=C
trigger2 = P2Dist Y >= (enemyNear,Const(Size.Height) - 40); Value depends on each char
trigger3 = P2stateType=L
trigger3 = P2Dist Y >= 12
value=0

[State 920, 0]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0

[State 52, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5

[State 52, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

;[State 52, 3]
;type = CtrlSet
;trigger1 = Time = 1
;value = 1

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,2
channel = 13

[State 52, AfterImageTime]
type = AfterImageTime
triggerall = !Var(30)
trigger1 = Time = 0
time = 0

[State 52, Turn]
type = ChangeState;Turn
trigger1 = Time = 0
trigger1 = P2Dist X < 0
value = 0 + 11*(command = "holddown")
ctrl = 1

[State 52, X]
type = ChangeAnim
trigger1 = Time = 0
value = 47

[State 52, 6]
type = AssertSpecial
trigger1 = Time < 3
flag = NoWalk

[State 52, 3]
type = CtrlSet
trigger1 = !Time && PrevStateNo < 110
value = 1

[State 52, 4]
type = ChangeState
;trigger1 = AnimTime = 0
trigger1 = Time > 2
value = 0 + 11*(command = "holddown")
ctrl = 1

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = 0
velset = 0,0

[State 100, Explod]
type = Explod
trigger1 = Time = 1
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 100, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,3
channel = 13

[State 100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S100,1
channel = 13
[State 100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S100,2
channel = 13

[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, 4]
type = ChangeState
triggerall = AnimElemTime(2) >= 1
trigger1 = command != "holdfwd"
value = 101

;---------------------------------------------------------------------------
; RUN_END
[Statedef 101]
type = S
physics = N
ctrl = 0
anim = 101

[State 101, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 101, 1]
type = VelMul
trigger1 = 1
x = .9

[State 101, 1]
type = VelSet
trigger1 = AnimTime = 0
x = 0

[State 101, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S100,0
channel = 13

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Forward
[Statedef 102]
type    = A
physics = N
ctrl = 0
anim = 102

[State 102, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,3
channel = 13

[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 102, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 6.5
[State 102, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 102, 3]
type = ChangeState
triggerall = AnimElemTime(2) > 0
trigger1 = !AnimTime
value = 103

;---------------------------------------------------------------------------
; Dash Forward Land
[Statedef 103]
type    = S
physics = N
ctrl = 1
anim = 103

[State 103, Spark]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5

[State 103, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S100,1
channel = 13

[State 103, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 103, 1]
type = VelMul
trigger1 = AnimElemTime(2) < 0
x = .92

[State 103, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 0

[State 103, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 103, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Back
[Statedef 105]
type = A
physics = N
ctrl = 0
anim = 105

[State 105, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S105,0
channel = 13

[State 105, Explod]
type = Explod
trigger1 = Time = 0
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 105, 1]
type = VelSet
trigger1 = Time = 5
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)
[State 105, 1]
type = VelMul
trigger1 = Time > 5
x = .98
[State 105, 1]
type = VelAdd
trigger1 = Time > 5
y = .65

[State 105, 3]
type = ChangeState
triggerall = Time > 4
trigger1 = Pos Y + Vel Y >= 0
value = 106

;---------------------------------------------------------------------------
; Dash Back Land
[Statedef 106]
type = S
physics = S
ctrl = 0
anim = 106
velset = 0,0

[State 106, Explod]
type = Explod
trigger1 = Time = 1
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5

[State 106, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,2
channel = 13

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 106, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y + Pos Y >= 0
type = ChangeState
value = 5100

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, ChangeAnim] ; coming down from 5052
type = ChangeAnim
triggerall = Anim = 5052 ;&& AnimElemTime(3) >= 3
trigger1 = Vel Y > 0
trigger1 = Pos Y >= (-26+GetHitVar(yvel))/GetHitVar(yaccel) ;-40
value = 5053
persistent = 0

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 52, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = 1,1;.8,.8;5

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = Null;PosSet
trigger1 = Time = 0
y = 20

[State 5101, 4]
type = VelSet
triggerall = !getHitVar(Xvel)
trigger1 = Time = 0
x = -ifElse(GetHitVar(groundType)=3,1,2.5)
y = -ifElse(GetHitVar(groundType)=3,2.3333,4.5)
[State 5101, 4]
type = VelSet
triggerall = getHitVar(Xvel)
trigger1 = Time = 0
x = facing*ifElse(GetHitVar(groundType)=3,1,2.5)*(getHitVar(Xvel)/abs(getHitVar(Xvel)))
y = -ifElse(GetHitVar(groundType)=3,2.3333,4.5)
[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = ifElse(GetHitVar(groundType)=3,.5625,.5)

[State 5101, 6] ;Hit ground
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 12
trigger1 = Pos Y + Vel Y >= 0
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = null;PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 52, Explod]
type = NULL;Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = 1,1;.8,.8;5

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = PrevStateNo != 5950
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;----------------------------------------------------------------------------------
; Cheap KO
[Statedef 5950]
physics = S
movetype = H
ctrl = 0
velset = 0,0

[State 5950, 1]
type = HitVelSet
trigger1 = Time = 0
x = 2

[State 5950, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5950, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5950, 4]
type = ChangeAnim
trigger1 = !HitOver
value = ifElse(FVar(1)=0,5010,5020)

[State 190, 4]
type = ChangeAnim
trigger1 = HitOver
value = 5950
persistent = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimElem = 7
value = 5150

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 2]
type = ChangeState
trigger1 = Var(26) = 4
value = 184
[State 180, 2]
type = ChangeState
trigger1 = Var(26) = 3
value = 185
[State 180, 2]
type = ChangeState
trigger1 = Var(26) != 4
value = 181+(random%3)

;---------------------------------------------------------------------------
; ...
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,18
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Yeah. That's what I thought.
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(6) = 0
value = S8,17
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 183, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 220
flag = RoundNotOver

;---------------------------------------------------------------------------
; HAHAHAHA you suck
[Statedef 183]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S8,19
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 183, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 220
flag = RoundNotOver

;---------------------------------------------------------------------------
; Win vs. Saiyans
[Statedef 184]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 183, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 220
flag = RoundNotOver

;---------------------------------------------------------------------------
; Win vs. Dr. Doom
[Statedef 185]
type = S
ctrl = 0
anim = 184
velset = 0,0

[State 184, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(6) = 0
value = S180,3
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 183, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 220
flag = RoundNotOver

;---------------------------------------------------------------------------
; Intro decider
[Statedef 190]
type = S
ctrl = 0
velset = 0,0
[State 190, 0]
type = VarSet
trigger1 = !Time
var(16) = 0
[State 190, 1] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro
[State 190, 2]
type = ChangeState
trigger1 = Var(26) = 1 || (Var(26) = [5,7])
value = 191
[State 190, 2]
type = ChangeState
trigger1 = Var(26) = [2,3]
value = 193
[State 190, 2]
type = ChangeState
trigger1 = (Var(26) != [1,3]) && (Var(26) != [5,7])
value = 191+(random%2)

;---------------------------------------------------------------------------
; Introduction 1 - Talking shit
[Statedef 191]
type = S
ctrl = 0
velset = 0,0

[State 190, Blanka]
type = ChangeAnim
trigger1 = Var(26) = 7 && !Time
value = 1923
[State 190, Mr. X]
type = ChangeAnim
trigger1 = Var(26) = 6 && !Time
value = 1922
[State 190, Ken]
type = ChangeAnim
trigger1 = Var(26) = 5 && !Time
value = 1921
[State 190, Rugal]
type = ChangeAnim
trigger1 = Var(26) = 1 && !Time
value = 1920
[State 190, 0]
type = ChangeAnim
triggerall = !Time
trigger1 = Var(26) != 1 && (Var(26) != [5,7])
value = 190+(random%2)
[State 190, 0]
type = ChangeAnim
trigger1 = roundstate = 0
trigger2 = Anim = 1920 && EnemyNear(0), StateNo != 0
value = anim
[State 190, 0]
type = ChangeAnim
triggerall = AnimElemTime(4) >= 0
trigger1 = Anim = 1922 && EnemyNear(0), StateNo != 0
trigger2 = Anim = 1923 && EnemyNear(0), StateNo != 0
value = anim
elem = 3

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Anim = 190 && AnimElemTime(4) = 0
value = S190,0
channel = 0
[State 200, PlaySnd]
type = PlaySnd
trigger1 = Anim = 191 && AnimElemTime(4) = 0
value = S8,13
channel = 0
[State 200, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1920 && AnimElemTime(4) = 0
value = S190,6
channel = 0
[State 200, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1921 && AnimElemTime(4) = 0
value = S190,2
channel = 0
[State 200, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1922 && AnimElemTime(4) = 0
value = S190,3
channel = 0
[State 200, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1923 && AnimElemTime(4) = 0
value = S190,1
channel = 0

[State 190, 1] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction 2
[Statedef 192]
type = S
ctrl = 0
anim = 193
velset = 0,0

[State 190, 0]
type = ChangeAnim
trigger1 = roundstate = 0
value = anim

[State 190, 1] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Superhero Intro
[Statedef 193]
type = A
ctrl = 0
anim = 194
velset = 0,0

[State 190, 0]
type = ChangeAnim
trigger1 = roundstate = 0
value = anim

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 193, 0]
type = PosAdd
trigger1 = Time = 1
y = -300

[State 193, VelAdd]
type = VelAdd
trigger1 = RoundState > 0 && Anim = 194
y = .10

[State 193, 1]
type = PosSet
triggerall = Time > 1
trigger1 = Pos Y + Vel Y >= 0
y = 0
[State 193, 2]
type = VelSet
triggerall = Time > 1
trigger1 = Pos Y + Vel Y >= 0
y = 0

[State 193, ChangeAnim]
type = ChangeAnim
triggerall = Time > 1
trigger1 = Pos Y + Vel Y >= 0
value = 1940
persistent = 0

[State 193, PlaySnd]
type = PlaySnd
triggerall = Time > 1
trigger1 = Anim = 194 && Pos Y >= -200
value = S190,5
channel = 0
persistent = 0

[State 193, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1940 && AnimElemTime(11) = 0
value = S200,4

[State 193, Explod]
type = Explod
trigger1 = Anim = 1940 && AnimElemTime(11) = 0
anim = 1941
pos = 0,0
postype = p1
ownpal = 1
removetime = -2
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = Const(size.Xscale),Const(size.Yscale)

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Anim = 1940 && AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 195+(random%3)

[State 195, PlaySnd]
type = PlaySnd
trigger1 = Anim = 197 && !Time
value = S195,0
channel = 0

[State 195, PlaySnd]
type = PlaySnd
triggerall = Anim = 196
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
value = S200,2
channel = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 200
poweradd = 0
sprpriority = 2
facep2 = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 1 && Random <= 250
value = S8,(random%2)
channel = 0
[State 200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 200, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S3,0
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2;-6*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2;-5*(2-(Var(30)>0))/2
guard.ctrltime = 10
air.type = High
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0;-8.4*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch Follow-up
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 205
poweradd = 0
sprpriority = 2
facep2 = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 1 && Random <= 250
value = S8,(random%2)
channel = 0
[State 200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 200, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 2
attr = S, NA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S3,0
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2;-6*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2;-5*(2-(Var(30)>0))/2
guard.ctrltime = 10
air.type = High
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0;-8.4*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,1+(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 210, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-63)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = High
air.velocity = -3,-7.21875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Punch (close)
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,1+(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,1
channel = 1

[State 205, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 215, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 2 || AnimElem = 3
attr = S, NA
damage = floor(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = High
air.velocity = -3,-7.21875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
persistent = 0
ID = 215

[State 215, Offset]
type = null;VarSet
trigger1 = numTarget(215)
var(23) = 13-time
persistent = 0
ignorehitpause = 1

[State 215, Freeze Anim]
type = null;ChangeAnim
triggerall = numHelper(247)
triggerall = numTarget(215)
triggerall = AnimElemTime(5) >= 0
trigger1 = helper(247), var(0) = [1,Var(23)+ceil(11*(2-(Var(30)>0))/2)]
value = 215
elem = 5
[State 215, Freeze]
type = null;PosFreeze
triggerall = numHelper(247)
triggerall = numTarget(215)
triggerall = AnimElemTime(2) >= 0
trigger1 = helper(247), var(0) = [1,Var(23)+ceil(11*(2-(Var(30)>0))/2)]
value = 1

[State 215, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Punch
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 220+(PrevStateNo=310)
sprpriority = 2
facep2 = 1

[State 200, PlaySnd]
type = PlaySnd
triggerall = Random%2
trigger1 = AnimElem = 4
value = S8,11+(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S0,2
channel = 1
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S200,6
channel = 2
[State 210, PlaySnd]
type = null;StopSnd
trigger1 = AnimElem = 7
channel = 2

[State 1200, Explod]
type = Explod
trigger1 = AnimElemTime(2) = 0
anim = 2220
ID = 2220
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = -2
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = .5*Const(size.Xscale),.5*Const(size.Yscale)

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 4
attr = S, NA
damage = floor(ifElse((91*FVar(10))<7,7,(91*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -3,-7.21875;-5.98828125,-6
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
[State 240, 3]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
triggerall = PrevStateNo = 310
trigger1 = AnimElem = 4
attr = S, NA
damage = floor(ifElse((112*FVar(10))<7,7,(112*FVar(10)))),0
animtype = Heavy
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-77)
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8,-5
guard.velocity = -8.125*(2-(Var(30)>0))/2
air.velocity = -8,-5
airguard.velocity = -6.67,-1
air.type = Low
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Punch (close)
[Statedef 225]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 225
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,1+(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
movetype = I

[State 210, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 4
attr = S, NA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(5*(2-(Var(30)>0))/2),ceil(4*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-63)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -3,-7.21875
airguard.velocity = -5.33,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
[State 210, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 5
attr = S, NA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(5*(2-(Var(30)>0))/2),ceil(4*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = High
air.velocity = -3,-7.21875
airguard.velocity = -5.33,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
[State 210, 3]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 6
attr = S, NA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(5*(2-(Var(30)>0))/2),ceil(4*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-84)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = High
air.velocity = -3,-7.21875
airguard.velocity = -5.33,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
[State 210, 4]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 7
attr = S, NA
damage = floor(ifElse((ifElse(numTarget,21,84)*FVar(10))<7,7,(ifElse(numTarget,21,84)*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(5*(2-(Var(30)>0))/2),ceil(4*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-98)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = High
air.velocity = -3,-7.21875
airguard.velocity = -5.33,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 225, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 230, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-35)
hitsound = S4,0
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 10
air.type = High
air.velocity = -6,-5.34375
airguard.velocity = -5.33,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Kick
[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 235
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 230, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-56)
hitsound = S4,0
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 10
air.type = High
air.velocity = -6,-5.34375
airguard.velocity = -5.33,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 240, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-105)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Kick
[Statedef 245]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 245
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 240, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-14)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
[State 240, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
triggerall = PrevStateNo = 310
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-14)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Kick
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,2
channel = 1

[State 200, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(2) = 0
x = 4
[State 200, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(3) = 0
x = 8
[State 200, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(4) = 0
x = 16

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 250, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
triggerall = Var(50) != [1,2]
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
attr = S, NA
damage = floor(ifElse((98*FVar(10))<7,7,(98*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-56)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 250, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Kick (close)
[Statedef 255]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 255
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 255, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
triggerall = Var(50) != [1,2]
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((49*FVar(10))<7,7,(49*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-98)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -3,-7.21875
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
[State 255, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 5
attr = S, NA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-56)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 255, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Loop Kick
[Statedef 260]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 260
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
value = S1,2
channel = 1

[State 200, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(2) = 0
x = 28
[State 200, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(3) = 0
x = 8
[State 200, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(4) = 0
x = 28
[State 200, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 0
x = 4
[State 200, VelSet]
type = VelSet
trigger1 = AnimElemTime(7) = 1
x = 0
[State 200, PosAdd]
type = null;PosAdd
trigger1 = AnimElemTime(8) = 0
x = 4

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 9
movetype = I

[State 260, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25) || numTarget(430))
trigger1 = AnimElem = 4
attr = S, NA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-56)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*4)
ground.hittime  = 14+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 14+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
ID = ifElse(numTarget(430),430,460)

[State 260, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25) || numTarget(430))
triggerall = !numTarget(260) && !numTarget(270)
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
attr = S, NA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 14+(Var(21)*4)
ground.hittime  = 14+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = High
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 14+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
ID = ifElse(numTarget(430),270,260)

[State 250, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Spinning Back Knuckle
[Statedef 270]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 270
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = AnimElem = 4
value = S8,12
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S1,2
channel = 1

[State 200, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(3) = 0
x = 4
[State 200, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(6) = 0
x = -4

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 270, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 4
attr = S, NA
damage = floor(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-84)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 14+(Var(21)*4)
ground.hittime  = 14+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 14+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 250, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Target Combo (1)
[Statedef 280]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 280
sprpriority = 2
facep2 = 1

[State 280, PosAdd]
type = PosAdd
trigger1 = !Time
x = 4

[State 210, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S8,11
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 240, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-105)
hitsound = S4,1
guardsound = S5,0
ground.type = High
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 280, buffer]
type = VarSet
trigger1 = !Time
var(12) = 0
[State 280, buffer]
type = VarSet
triggerall = !Var(12)
triggerall = Time > 1
triggerall = Command != "holddown" && Command != "holdfwd" && Command != "holdback"
triggerall = Command = "x"
trigger1 = AnimElemTime(3) > 0
trigger1 = AnimElemTime(6) < 0
var(12) = 1
ignorehitpause = 1

[State 240, 5]
type = ChangeState
trigger1 = Var(12) && (Var(50)=[1,2])
;trigger1 = AnimElemTime(6) >= 0
value = stateNo+1
ignorehitpause = 0

[State 240, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Target Combo (2)
[Statedef 281]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 281
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 200, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S3,0
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -2.88*(2-(Var(30)>0))/2
guard.velocity = -2.88*(2-(Var(30)>0))/2
guard.ctrltime = 10
air.type = High
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0;-8.4*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 280, buffer]
type = VarSet
trigger1 = !Time
var(12) = 0
[State 280, buffer]
type = VarSet
triggerall = !Var(12)
triggerall = Command != "holddown" && Command != "holdfwd" && Command != "holdback"
triggerall = Command = "a"
trigger1 = Time > 1
var(12) = 1

[State 240, 5]
type = ChangeState
triggerall = Var(12) ;&& (Var(50)=[1,2])
trigger1 = Time > 4
value = stateNo+1
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Target Combo (3)
[Statedef 282]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 282
sprpriority = 2
facep2 = 1

[State 280, PosAdd]
type = PosAdd
trigger1 = !Time
x = 4

[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 230, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 2
attr = S, NA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-35)
hitsound = S4,0
guardsound = S5,0
ground.type = Low
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -2.88*(2-(Var(30)>0))/2
guard.velocity = -2.88*(2-(Var(30)>0))/2
guard.ctrltime = 10
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -5.33,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 280, buffer]
type = VarSet
trigger1 = !Time
var(12) = 0
[State 280, buffer]
type = VarSet
triggerall = !Var(12)
triggerall = Time > 1
triggerall = Command != "holddown" && Command != "holdfwd" && Command != "holdback"
triggerall = Command = "y"
trigger1 = AnimElemTime(3) < 0
var(12) = 1
[State 280, buffer]
type = VarSet
triggerall = !Var(12)
triggerall = Time > 1
triggerall = Command != "holddown" && Command != "holdfwd" && Command != "holdback"
triggerall = Command = "b"
trigger1 = AnimElemTime(3) < 0
var(12) = 2

[State 240, 5]
type = ChangeState
triggerall = Var(12) && (Var(50)=[1,2])
trigger1 = AnimElemTime(4) >= 0
value = stateNo+Var(12)
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Target Combo (Demon's Wrath)
[Statedef 283]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 283
sprpriority = 2
facep2 = 1

[State 280, PosAdd]
type = PosAdd
trigger1 = !Time
x = 16

[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 230, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 2
attr = S, NA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-63)
hitsound = S3,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 60+(Var(21)*2)
ground.hittime  = 60+(Var(21)*2)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 10
air.type = High
air.velocity = -3,-7.21875
airguard.velocity = -5.33,-1
air.hittime = 60+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
ID = 1283

[State 3000, TargetState]
type = TargetState
triggerall = Time > 1
trigger1 = Var(50) = 1 && numTarget
trigger1 = Target, StateType != A
;trigger1 = Target, HitShakeOver
value = 1283
persistent = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Target Combo (Reign of Terror)
[Statedef 284]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 284
sprpriority = 2
facep2 = 1

[State 280, PosAdd]
type = PosAdd
trigger1 = !Time
x = 4

[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 230, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((49*FVar(10))<7,7,(49*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-21)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -2.88*(2-(Var(30)>0))/2
guard.velocity = -2.88*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 280, buffer]
type = VarSet
trigger1 = !Time
var(12) = 0
[State 280, buffer]
type = VarSet
triggerall = !Var(12)
triggerall = AnimElemTime(3) >= 0
triggerall = Command != "holddown" && Command != "holdfwd" && Command != "holdback"
triggerall = Command = "z"
trigger1 = AnimElemTime(5) < 0
var(12) = 1

[State 240, 5]
type = ChangeState
triggerall = Var(12) && (Var(50)=[1,2])
trigger1 = AnimElemTime(5) > 1
value = 285
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Target Combo (Blue Bolt 1)
[Statedef 285]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 285
sprpriority = 2
facep2 = 1

[State 280, PosAdd]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 6.75
[State 280, PosAdd]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
x = ifElse(Vel X <= 0, 0, -0.0625)

[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 230, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 4
attr = S, NA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*3)
ground.hittime  = 17+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 17+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 280, buffer]
type = VarSet
trigger1 = !Time
var(12) = 0
[State 280, buffer]
type = VarSet
triggerall = !Var(12)
triggerall = AnimElemTime(4) >= 0
triggerall = Command != "holddown" && Command = "holdfwd" && Command != "holdback"
triggerall = Command = "z"
trigger1 = AnimElemTime(5) < 0
var(12) = 1

[State 240, 5]
type = ChangeState
triggerall = Var(12) && (Var(50)=[1,2])
trigger1 = AnimElemTime(5) >= 0
value = 286
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Target Combo (Blue Bolt 2)
[Statedef 286]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 286
sprpriority = 2
facep2 = 1

[State 280, PosAdd]
type = PosAdd
trigger1 = !Time
x = 24

[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 230, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 5
attr = S, NA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-42)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -3,-7.21875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Stun
[Statedef 1283]
type = S
movetype = H
physics = S
;velset = 0,0
[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
[State 5001, 2]
type = ChangeAnim2
trigger1 = !Time
value = 1283+2*(Name = "Gill" && AuthorName = "GM" && Facing = -1)
[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6
[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0
[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "vel x = %f"
params = vel x
[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1284

;----------------------------------------------------------------------
; Collapse, thanks k00p
[Statedef 1284]
type = U
movetype = H
physics = S
;velset = 0,0
[State 1284, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1
;Common Collapse
[State 1510, 2]
type = ChangeAnim
triggerall = Time = 0
trigger1 = SelfAnimExist(5950)
value = 5950
persistent = 0
;Ironmugen (I hope :P)
[State 1510, 2]
type = ChangeAnim
triggerall = authorname = "David Demianoff"
triggerall = Time = 0
trigger1 = SelfAnimExist(6010)
value = 6010
persistent = 0
;KOD, WDA & Sepp
[State 1510, 2]
type = ChangeAnim
triggerall = authorname = "K.O.D" || authorname = "Sepp" ||authorname =  "K.O.D & Vans"
triggerall = Time = 0
trigger1 = SelfAnimExist(5400)
value = 5400
persistent = 0
;Fervicante
[State 1510, 2]
type = ChangeAnim
triggerall = authorname = "Fervicante"
triggerall = Time = 0
trigger1 = SelfAnimExist(5800)
value = 5800
persistent = 0
;Juke Kisaragi
[State 1510, 2]
type = ChangeAnim
triggerall = authorname = "Juke Kisaragi"
triggerall = Time = 0
trigger1 = SelfAnimExist(9219)
value = 9219
persistent = 0
;OrochiKOF97
[State 1510, 2]
type = ChangeAnim
triggerall = authorname = "OrochiKOF97"
triggerall = Time = 0
trigger1 = SelfAnimExist(5130)
value = 5130
persistent = 0
[State 1510, NON-EXISTENT]
type = ChangeAnim2
triggerall = Time = 0
trigger1 = anim != 5950
trigger1 = anim != 5400
trigger1 = anim != 9219
trigger1 = anim != 6010
trigger1 = anim != 5800
trigger1 = anim != 5130
value = 1283
persistent = 0
[State 1510, 2]
type = ChangeAnim
triggerall = anim != 9219
trigger1 = AnimTime = 0
trigger2 = AnimElemTime(AnimElemNo(0)+1)=0
value = IfElse((anim = 5950&&SelfAnimExist(5112)||anim=5400&&SelfAnimExist(5112) ||anim =6010&&SelfAnimExist(5112)||anim =5800&&SelfAnimExist(5112) ||anim =5130 &&SelfAnimExist(5112)),5112,5110)
persistent = 0
[State 1510, 2]
type = ChangeAnim
triggerall = anim = 9219
trigger1 = AnimTime = 0
trigger2 = AnimElemTime(AnimElemNo(0)+1)=0
value = IfElse((anim = 9219&&SelfAnimExist(5111)),5111,5110)
persistent = 0
[State 1510, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "vel x = %f"
params = vel x
ignorehitpause = 1

[State 1510, SelfState]
type = SelfState
trigger1 = AnimTime = 0
trigger2 = AnimElemTime(AnimElemNo(0)+1)=0
value = 5110

;---------------------------------------------------------------------------
; Low Roundhouse
[Statedef 290]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 290
sprpriority = 2
facep2 = 1

[State 290, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 290, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 260, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-56)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*4)
ground.hittime  = 14+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 14+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
ctrl = 0
anim = 400
sprpriority = 2
velset = 0,0
facep2 = 1

[State 400, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,0+(random%2)
channel = 0
[State 400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 2
attr = S, NA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-42)
hitsound = S3,0
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2;-6*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2;-5*(2-(Var(30)>0))/2
guard.ctrltime = 10
air.type = High
air.velocity = -6,-5.34375
airguard.velocity = -5.33,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0;-8.4*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 410
sprpriority = 2
velset = 0,0
facep2 = 1

[State 410, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,1+(random%2)
channel = 0
[State 410, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 410, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 2
attr = C, NA
damage = floor(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-42)
hitsound = S3,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0;-11.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 410, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Strong Punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 420
sprpriority = 2
velset = 0,0
facep2 = 1

[State 420, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,1+(random%2)
channel = 0
[State 420, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S0,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 420, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 4
attr = C, NA
damage = floor(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -2,-8.046875
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 420, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
ctrl = 0
anim = 430
sprpriority = 2
velset = 0,0
facep2 = 1

[State 430, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 430, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 430, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 2
attr = C, NA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-7)
hitsound = S4,0
guardsound = S5,0
ground.type = Low
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 10
air.type = Low
air.velocity = -5,-6.296875
airguard.velocity = -4,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0;-8.4*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
ID = 430

[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 440
sprpriority = 2
velset = 0,0
facep2 = 1

[State 440, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,1+(random%2)
channel = 0
[State 440, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 440, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 2
attr = C, NA
damage = floor(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = L
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-14)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 14
air.type = Low
air.velocity = -6,-5.015625
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0;-11.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 440, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Kick
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 450
sprpriority = 2
velset = 0,0
facep2 = 1

[State 450, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,1+(random%2)
channel = 0
[State 450, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 450, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 4
attr = C, NA
damage = floor(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = L
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-7)
hitsound = S4,2
guardsound = S5,0
ground.type = Trip
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -1,-7.3671875
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = High
air.velocity = -1,-7.3671875
airguard.velocity = -6.67,-1
air.hittime = 18
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0;-11.9*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall = 1
fall.recover = !Var(30)
air.recover = !Var(30)
ID = ifElse(numTarget(430),430,450)

[State 450, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 2

[State 600, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 600, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 600, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElemTime(2) > 0 && AnimElemTime(7) < 0
attr = A, NA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno= S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-28)
hitsound = S3,0
guardsound = S5,0
guard.ctrltime = 12
ground.type = High
ground.slidetime = 9+(Var(21)*2)
ground.hittime  = 9+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
air.type = High
air.velocity = -4,-6.921875
airguard.velocity = -4,-1
air.hittime = 9+(Var(21)*2)
ground.cornerpush.veloff = 0;-4.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Medium Punch
[Statedef 610]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 610
sprpriority = 2

[State 610, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,1+(random%2)
channel = 0
[State 610, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 610, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 2 || AnimElem = 3 || AnimElem = 4
attr = A, NA
damage = floor(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-49)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*3)
ground.hittime  = 12+(Var(21)*3)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = High
air.velocity = -6,-5.34375
airguard.velocity = -5.33,-1
air.hittime = 12+(Var(21)*3)
ground.cornerpush.veloff = 0;-5.6*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Strong Punch
[Statedef 620]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 620
sprpriority = 2

[State 620, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,1+(random%2)
channel = 0
[State 620, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S0,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 620, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 4
attr = A, NA
damage = floor(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-35)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*4)
ground.hittime  = 12+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 20
air.type = High
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 12+(Var(21)*4)
ground.cornerpush.veloff = 0;-7*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0
anim = 630
sprpriority = 2

[State 630, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,(random%2)
channel = 0
[State 630, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 630, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3
attr = A, NA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-84)
hitsound = S4,0
guardsound = S5,0
guard.ctrltime = 12
ground.type = High
ground.slidetime = 9+(Var(21)*2)
ground.hittime  = 9+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
air.type = High
air.velocity = -3,-7.21875
airguard.velocity = -4,-1
air.hittime = 9+(Var(21)*2)
ground.cornerpush.veloff = 0;-4.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Medium Kick
[Statedef 640]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 640
sprpriority = 2

[State 640, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Time = 1
value = S8,1+(random%2)
channel = 0
[State 640, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 640, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = AnimElem = 3 || AnimElem = 4
attr = A, NA
damage = floor(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-63)
hitsound = S4,1
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*3)
ground.hittime  = 12+(Var(21)*3)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = High
air.velocity = -6,-5.015625
airguard.velocity = -5.33,-1
air.hittime = 12+(Var(21)*3)
ground.cornerpush.veloff = 0;-5.6*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Strong Kick
[Statedef 650]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 650+5*(Vel X != 0)
sprpriority = 2

[State 650, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Anim = 650
trigger1 = AnimElem = 4
trigger2 = Anim = 655
trigger2 = AnimElem = 2
value = S8,1+(random%2)
channel = 0
[State 650, PlaySnd]
type = PlaySnd
trigger1 = Anim = 650
trigger1 = AnimElem = 4
trigger2 = Anim = 655
trigger2 = AnimElem = 2
value = S1,2
channel = 1
[State 650, PlaySnd]
type = PlaySnd
trigger1 = Anim = 655
trigger1 = AnimElem = 2
value = S200,0
channel = 2

[State 1200, Explod]
type = Explod
trigger1 = !Time && Anim = 655
anim = 656
ID = 656
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = -2
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = .5*Const(size.Xscale),.5*Const(size.Yscale)

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 650, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = Anim = 650 && (AnimElem = 4 || AnimElem = 5)
attr = A, NA
damage = floor(ifElse((91*FVar(10))<7,7,(91*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = ceil(22*(2-(Var(30)>0))/2),ceil(21*(2-(Var(30)>0))/2);ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
guard.pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-70)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*4)
ground.hittime  = 12+(Var(21)*4)
ground.velocity = -8,-5
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 12
air.type = High
air.velocity = -8,-5
airguard.velocity = -6.67,-1
air.hittime = 12+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
persistent = 0
ID = 650

[State -2, Special Sound]
type = PlaySnd
trigger1 = numTarget(650) && Var(50) = 1 
value = S3,5
channel = 2
persistent = 0
ignorehitpause = 1

[State 650, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
trigger1 = Anim = 655 && AnimElemTime(2) >= 0 && AnimElemTime(6) < 0
attr = A, NA
damage = floor(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-56)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*4)
ground.hittime  = 12+(Var(21)*4)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 20
air.type = High
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 12+(Var(21)*4)
ground.cornerpush.veloff = 0;-7*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall.recover = !Var(30)

persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Throw 1 Attempt
[Statedef 800]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 800
poweradd = 89*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
facep2 = 1
sprpriority = -1

[State 800, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [130,155]
triggerall = Anim = 800
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
;sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = IfElse((command = "holdfwd"),810,815)
p2stateno = IfElse((command = "holdfwd"),820,825)
guard.dist = 0
numhits = 0
;fall = 1

[State 800, 1]
type = HitDef
triggerall = P2StateNo != [130,155]
triggerall = Var(30)
triggerall = Anim = 800
trigger1 = AnimElem = 2
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
;sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = IfElse((command = "holdfwd"),810,815)
p2stateno = IfElse((command = "holdfwd"),820,825)
guard.dist = 0
numhits = 0
;fall = 1

[State 255, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = S8,4
channel = 0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Throw 1 (forward, toss down)
[Statedef 810]
type = S
movetype= A
physics = N
anim = 810
sprpriority = 0

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 7 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = numTarget
trigger1 = Time < 7 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 7 && FVar(2)
value = 950

[State 810, TargetState]
type = TargetState
trigger1 = Time = 0
value = 820

[State 810, PlaySnd]
type = PlaySnd
triggerall = Anim = 810
trigger1 = AnimElem = 1
value = S800,0
channel = 2

[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElem = 2
value = 1

[State 810, Bind 1]
type = TargetBind
triggerall = !((Target,Name = "Felicia_LG" || Target,Name = "cvsfelicia") && Target,AuthorName = "Jesuszilla")
triggerall = !(Target,Name = "Goku Z2")
trigger1 = AnimElem = 1
pos = 46,-ifElse((Target,Const(Size.Head.Pos.Y) > -50),76,96)
time = -1
[State 810, Bind 1]
type = TargetBind
triggerall = ((Target,Name = "Felicia_LG" || Target,Name = "cvsfelicia") && Target,AuthorName = "Jesuszilla")
trigger1 = AnimElem = 1
pos = 48,-70
time = -1
[State 810, Bind 1]
type = TargetBind
triggerall = Target,Name = "Goku Z2"
trigger1 = AnimElem = 1
pos = 40,-96
time = -1
[State 810, Bind 2]
type = TargetBind
triggerall = Target,Name != "Goku Z2"
trigger1 = AnimElem = 2
pos = 62,-102
time = -1
[State 810, Bind 2]
type = TargetBind
triggerall = Target,Name = "Goku Z2"
trigger1 = AnimElem = 2
pos = 42,-10
time = -1
[State 810, Bind 3]
type = TargetBind
triggerall = Target,Name != "Goku Z2"
trigger1 = AnimElemTime(3) = 0
pos = 62,-101
time = 1
[State 810, Bind 3]
type = TargetBind
triggerall = Target,Name = "Goku Z2"
trigger1 = AnimElemTime(3) = 0
pos = 42,-9
time = 1
[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
pos = 62,-90
time = 1
[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElemTime(4) = 1
pos = 64,-38
time = 1
[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElemTime(4) = 2
pos = 66,-8
time = 1
[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 810, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,2
channel = 1
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = S5100,1
channel = 13
[State 810, Explod]
type = Explod
triggerall = Anim = 810
trigger1  = AnimElemTime(5) = 0
anim = 8310
pos = 56,0
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
sprpriority = 1
scale = .5,.5

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElemTime(5) = 0
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(5) = 0
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(5) = 0
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElemTime(5) = 0
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemTime(5) = 0
value = ceil(ifelse((-119*FVar(10))>-7,-7,(-119*FVar(10))))
kill = 1
[State 810, Hurt]
type = TargetPowerAdd
trigger1 = AnimElemTime(5) = 0
value = 35

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 820]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 0
[State 820, ScreenBound]
type = ScreenBound
trigger1 = AnimElemTime(5) < 0
value = 1
movecamera = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0 && !(Name = "Gill" && AuthorName = "GM")
value = 820+(Name="Goku Z2")
[State 820, 2]
type = ChangeAnim2
trigger1 = Time = 0 && (Name = "Gill" && AuthorName = "GM")
value = 1820+(facing=1)

[State 820, VelSet]
type = VelSet
trigger1 = AnimElemTime(5) = 0
x = -5
y = -3.75
[State 820, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(5) > 1
y = .5

[State 820, 3]
type = SprPriority
trigger1 = AnimElemTime(5) = 0
value = 3
[State 820, Turn]
type = Turn
trigger1 = AnimElemTime(5) = 0
[State 820, EnvShake]
type = EnvShake
trigger1 = Pos Y + Vel Y >= 0
time = 20
[State 820, 4]
type = SelfState
trigger1 = AnimElemTime(5) > 0
trigger1 = Pos Y + Vel Y >= 0
value = 5100

;----------------------------------------------------------------------
; Throw 1 (back, Brawl Punch)
[Statedef 815]
type = S
movetype= A
physics = N
anim = 811
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 7 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = numTarget
trigger1 = Time < 7 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 7 && FVar(2)
value = 950

[State 810, TargetState]
type = TargetState
trigger1 = Time = 0
value = 825

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S800,0
channel = 2

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 51,0
time = 1
[State 810, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = 51,0
time = 1
[State 810, Bind 3]
type = null;TargetBind
trigger1 = AnimElemTime(3) = 0
pos = 36,-56
time = 1
[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 810, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

[State 40, Helper]
type = Helper
trigger1 = Target,StateNo=827 && Target,StateTime=1;AnimElem = 3
id = 8150
name = "Jump Effect"
pos =0,0
postype = p2
stateno = 8150
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,2
channel = 1
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,2
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,4
[State 810, Explod]
type = null;Explod
trigger1  = AnimElemTime(4) = 0
anim = 8310
pos = 56,0
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
sprpriority = 1
scale = .5,.5

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 3
anim = 8200+(random%8)
pos = 63,-77
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElemTime(3) = 0
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(3) = 0
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(3) = 0
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElemTime(4) = 0
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 827, Sound]
type = PlaySnd
trigger1 = Target, StateNo = 828 && Target,Time = 1
value = S5100,1
channel = 13

[State 827, Spark]
type = Explod
trigger1 = Target,StateNo=828 && Target,Time = 1
anim = 8315
pos = 10,floor(Target,screenpos y)-50
postype = back
sprpriority = -3
scale = .5,.5

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemTime(3) = 0
value = ceil(ifelse((-63*FVar(10))>-7,-7,(-63*FVar(10))))
kill = 1
[State 810, Hurt]
type = TargetPowerAdd
trigger1 = AnimElemTime(3) = 0
value = 35

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; DUST
[Statedef 8150]
type = A
movetype = I
physics = N
ctrl = 0
anim = 1
velset = 0,0
ownpal = 1

[State 4000, 0]
type = null;BindToTarget
trigger1 = Time > 0
pos = 0,0

[State 4000, Explod2]
type = Explod
trigger1 = Time < 13 && (Time%2)=0
anim = 8020
pos = 0,0
postype = P2
scale = .5,.5
sprpriority = 5
ownpal = 0
ignorehitpause = 1

[State 4000, DestroySelf]
type = DestroySelf
trigger1 = Time >= 20

;----------------------------------------------------------------------
[Statedef 825]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 0
facep2 = 1
[State 820, ScreenBound]
type = ScreenBound
trigger1 = AnimElemTime(4) < 0
value = 1
movecamera = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0 ;&& !(Name = "Gill" && AuthorName = "GM")
value = 825+1000*(Name = "Gill" && AuthorName = "GM" && facing = -1)

[State 820, ChangeAnim]
type = ChangeState
trigger1 = AnimTime = 0;AnimElemTime(4) = 0
value = 826

;------------------
; Hit by Fast Kung Fu Palm - shaking from the hit
; (a custom gethit state)
; See State 1020 for details
[Statedef 826]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = !Time
value = 826+1000*(Name = "Gill" && AuthorName = "GM" && facing = -1)

[State 1025, State]
type = ChangeState
trigger1 = AnimElemTime(8) > 0
value = 827

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 827]
type    = A
movetype= H
physics = N

[State 820, ChangeAnim]
type = null;ChangeAnim
trigger1 = !Time
value = 5052

[State 820, Turn]
type = Turn
trigger1 = Time = 0
[State 820, VelSet]
type = VelSet
trigger1 = Time = 0
x = -15
y = -8
[State 820, VelAdd]
type = VelAdd
trigger1 = Time > 1
y = .5

[State 826, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 826, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 828

[State 826, Hit ground]
type = null;SelfState
triggerall = Time > 2
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 828]
type    = A
movetype= H
physics = N

[State 827, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 827, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 827, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 827, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 827, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 827+1000*(Name = "Gill" && AuthorName = "GM" && facing = 1)

[State 827, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 829

;------------------
; Hit by Fast Kung Fu Palm - bounce off wall
; (a custom gethit state)
[Statedef 829]
type    = A
movetype= H
physics = N

[State 1028, 1]
type = null;NotHitBy
trigger1 = 1
value = , NA, NP

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050+100000*(Name = "Gill" && AuthorName = "GM" && facing = -1)

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052+100000*(Name = "Gill" && AuthorName = "GM" && facing = -1)

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060+100000*(Name = "Gill" && AuthorName = "GM" && facing = -1)

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062+100000*(Name = "Gill" && AuthorName = "GM" && facing = -1)

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
; Throw 2 Attempt
[Statedef 830]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 805
poweradd = 89*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
sprpriority = -1

[State 830, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [130,155]
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
sprpriority = -1
p1facing = 1
p2facing = 1
p1stateno = IfElse((command = "holdfwd"),831,832)
p2stateno = IfElse((command = "holdfwd"),834,836)
guard.dist = 0
numhits = 0
;fall = 1

[State 830, 1]
type = HitDef
triggerall = P2StateNo != [130,155]
triggerall = Var(30)
trigger1 = AnimElem = 1
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
sprpriority = -1
p1facing = 1
p2facing = 1
p1stateno = IfElse((command = "holdfwd"),831,832)
p2stateno = IfElse((command = "holdfwd"),834,835)
guard.dist = 0
numhits = 0

[State 255, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = S8,4
channel = 0

[State 830, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Throw 2 (Blur Kick)
[Statedef 831]
type = S
movetype= A
physics = N
anim = 830
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 4 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = numTarget
trigger1 = Time < 4 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 4 && FVar(2)
value = 950

[State 810, TargetState]
type = TargetState
trigger1 = Time = 0
value = 834

[State 831, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S800,0
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 810, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 44, 0
time = 1
[State 831, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
time = 2
pos = 40,0
[State 831, Bind 2]
type = TargetBind
trigger1 = AnimElem = 3
time = 2
pos = 30,0
[State 831, Bind 3]
type = TargetBind
trigger1 = AnimElem = 4
time = 5
pos = 10,0

[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElem = 3
value = 2

[State 831, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = S1,2
channel = 1
[State 1000, Spark]
type = Explod
triggerall = !NumExplod(8200)
trigger1 = AnimElemTime(5) = 0
anim = 8200+(random%8)
ID = 8200
pos = 25,-73
postype = p1
ownpal = 1
sprpriority = 4
supermovetime = -1
scale = 1,1
[State 832, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = S3,2
channel = 3

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 5
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 5
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 5
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 5
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 832, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElemTime(5) = 0
value = ceil(ifelse((-132*FVar(10))>-7,-7,(-132*FVar(10))))
[State 831, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 5
value = 35

[State 834, TargetState]
type = null;TargetState
trigger1 = Time = 68
value = 835

[State 831, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;52
ctrl = 1

;----------------------------------------------------------------------
; Throw 2 (toss back)
[Statedef 832]
type = S
movetype= A
physics = N
anim = 835
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 4 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = numTarget
trigger1 = Time < 4 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 4 && FVar(2)
value = 950

[State 810, TargetState]
type = TargetState
trigger1 = Time = 0
value = 836
[State 831, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S800,0
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 810, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer
[State 810, Turn]
type = Turn
trigger1 = !AnimTime
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 40, 0
time = 5
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 2
pos = 30, 0
time = 3
[State 831, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3
time = 5
pos = 23,-55
[State 831, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
time = 1
pos = -24,-52

[State 831, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S1,2
channel = 1

[State 831, TargetVelSet]
type = TargetVelSet
trigger1 = AnimElemTime(4) = 1
x = 9
y = -2
[State 831, TargetVelAdd]
type = TargetVelAdd
trigger1 = AnimElemTime(4) > 1
y = .5

[State 1000, Arm]
type = Explod
triggerall = !NumExplod(831)
trigger1 = AnimElemTime(7) = 0
anim = 831
ID = 831
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3
supermovetime = -1
scale = 1,1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElemTime(4) = 0
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(4) = 0
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(4) = 0
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElemTime(4) = 0
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 832, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElemTime(4) = 0
value = ceil(ifelse((-112*FVar(10))>-7,-7,(-112*FVar(10))))
[State 831, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElemTime(4) = 0
value = 35

[State 834, TargetState]
type = null;TargetState
trigger1 = Time = 68
value = 835

[State 831, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;52
ctrl = 1

;----------------------------------------------------------------------
[Statedef 834]
type = S
movetype = H
physics = N
sprpriority = 2
velset = 0,0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = AnimElemTime(5) < 0
value = 1
movecamera = 0,0

[State 834, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 840+1000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(5) = 0
statetype = A
[State 834, VelSet]
type = VelSet
trigger1 = AnimElemTime(5) = 0
x = -5
y = -5
[State 834, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(5) > 1
y = .5

[State 834, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 834, SelfState]
type = SelfState
triggerall = AnimElemTime(5) > 3
trigger1 = Pos Y + Vel Y >= 0
value = 5100

;----------------------------------------------------------------------
[Statedef 836]
type = S
movetype = H
physics = N
sprpriority = 2
velset = 0,0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1;AnimElemTime(4) < 0
value = 1
movecamera = 1,0

[State 834, ChangeAnim2]
type = ChangeAnim2
triggerall = !(Name = "Gill" && AuthorName = "GM")
trigger1 = Time = 0
value = 842
[State 834, ChangeAnim2]
type = ChangeAnim2
triggerall = Name = "Gill" && AuthorName = "GM"
trigger1 = Time = 0
value = ifElse(facing=1,1843,1842)
[State 836, Turn]
type = Turn
triggerall = AnimElemTime(4) > 0
trigger1 = Pos Y + Vel Y >= 0

[State 834, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 834, SelfState]
type = SelfState
triggerall = AnimElemTime(4) > 0
trigger1 = Pos Y + Vel Y >= 0
value = 5100

;---------------------------------------------------------------------------
; Air Throw
[Statedef 860]
type    = A
movetype = A
physics = N
juggle = 0
ctrl = 0
poweradd = 89*(1000+Var(40))/1000*!(Var(29)||Var(30))

[State 860, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = ifElse(Vel X<0,861,860)
elem = AnimElemNo(0)+1

[State 860, StateTypeSet] ; Just to be safe
type = StateTypeSet
trigger1 = Time > 0
movetype = I

[State 860, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [0,35]
triggerall = P2bodydist Y = [-78,-enemynear,const(size.head.pos.y)-70]
trigger1 = Time = 0
attr = A, NT
hitflag = A-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(Vel X >= 0, 1, -1)
p2facing = 1
p1stateno = 861
p2stateno = 864
guard.dist = 0
numhits = 0

[State 860, 1]
type = HitDef
triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [0,35]
triggerall = P2bodydist Y = [-78,-enemynear,const(size.head.pos.y)-70]
triggerall = Var(30)
trigger1 = Time = 0
attr = A, NT
hitflag = AF
priority = 3, Miss
sparkno = -1
p1facing = ifelse(Vel X >= 0, 1, -1)
p2facing = 1
p1stateno = 861
p2stateno = 864
guard.dist = 0
numhits = 0

[State 900, 2]
type = ChangeState
trigger1 = Time > 0
value = 620

;----------------------------------------------------------------------
[Statedef 861]
type = A
movetype= A
physics = N
anim = 862
sprpriority = 1
velset = 0,0

[State 861, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S800,0
[State 861, PlaySnd]
type = null;PlaySnd
trigger1 = AnimElem = 1
value = S8,19
channel = 0

[State 861, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 861, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
time = 7
pos = 57,-128
[State 861, Bind 2]
type = TargetBind
trigger1 = AnimElem = 3
time = 7
pos = 52,-126
[State 861, Bind 3]
type = TargetBind
trigger1 = AnimElem = 5
time = -1
pos = 61,-112

[State 861, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) = 0
x = 2
y = 1
[State 861, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(3) > 0
y = .5

[State 861, ChangeState]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 862

;----------------------------------------------------------------------
[Statedef 862]
type = A
movetype= A
physics = N
anim = 863
sprpriority = 1
velset = 0,0

[State 862, PosSet]
type = PosSet
trigger1 = !Time
y = 0
[State 861, TargetState]
type = TargetState
trigger1 = !Time
value = 865

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S5100,1
channel = 13
[State 810, Explod]
type = Explod
trigger1  = AnimElem = 2
anim = 8310
pos = 42,0
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
sprpriority = 1
scale = .5,.5

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 2
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 2
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 2
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 2
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 2
value = ceil(ifelse((-112*FVar(10))>-7,-7,(-112*FVar(10))))
kill = 1
[State 810, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 2
value = 35

[State 861, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
time = 3
pos = 59,-78
[State 861, Bind 2]
type = TargetBind
triggerall = !(Target,Name = "cvsfelicia" || Target,Name = "Felicia_LG")
trigger1 = AnimElem = 2
time = 3
pos = (Target,Const(Size.Head.Pos.Y)*.10),0
[State 861, Bind 2]
type = TargetBind
triggerall = Target,Name = "cvsfelicia" || Target,Name = "Felicia_LG"
trigger1 = AnimElem = 2
time = 3
pos = (-Target,Const(Size.Head.Pos.Y)*.76),0

[State 810, VelSet]
type = VelSet
trigger1 = AnimElemTime(11) = 0
x = -7.375
[State 810, VelMul]
type = VelMul
trigger1 = AnimElemTime(11) > 0
x = .98
[State 810, VelSet]
type = VelSet
trigger1 = AnimElemTime(13) = 0
x = 0

[State 831, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Thrown by Choke Slam (air)
[Statedef 864]
type = A
movetype= H
physics = N
sprpriority = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger1 = !Time
value = 1864
[State 0, ChangeAnim2]
type = ChangeAnim2
triggerall = !(Name = "Gill" && AuthorName = "GM" && Facing = -1)
trigger1 = !Time
value = 864+2*ifElse((Name = "cvsfelicia" || Name = "Felicia_LG"),1,0)

;----------------------------------------------------------------------
; Thrown by Choke Slam (ground)
[Statedef 865]
type = A
movetype= H
physics = N
sprpriority = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger1 = !Time
value = 1865
[State 0, ChangeAnim2]
type = ChangeAnim2
triggerall = !(Name = "Gill" && AuthorName = "GM" && Facing = -1)
trigger1 = !Time
value = 865+2*ifElse((Name = "cvsfelicia" || Name = "Felicia_LG"),1,0)

[State 903, 2]
type = SelfState
trigger1 = AnimTime = 0
value = 5081

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 888]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = NULL;ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
trigger3 = AnimTime = 0
trigger3 = Anim = 105035 && Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger4 = Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger4 = Time = 0
trigger4 = Anim != 105035
trigger4 = (Anim != [105051, 105059]) && (Anim != [105061, 105069])
trigger4 = Anim != 105090
value = 5050+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 5050, 2] ;Coming down anim
type = NULL;ChangeAnim
trigger1 = (anim = [5050,5059]) || ((Name = "Gill" && AuthorName = "GM" && Facing = -1) && (Anim = [105050,105059]))
trigger1 = Vel Y >= ifelse(anim = 5050+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1), 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3]
type = VelAdd
trigger1 = 1
y = .49

[State 5050, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 816, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;HIT_BOUNCE

;===============================================================================
;                                    SPECIALS
;===============================================================================

;----------------------------------------------------------------------------------
; Arc Shot
[Statedef 1000]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 1
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1000, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse((Command = "QCF_hp" || Command = "QCB_hp"),2,ifElse((Command = "QCF_mp" || Command = "QCB_mp"),1,0))

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 1000+Var(22)*10

[State 1000, PlaySnd]
type = null;PlaySnd
trigger1 = !Time
value = S8,6
channel = 0
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S200,5
channel = 1
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(7) = 0
value = S200,3
channel = 1

[State 1100, Helper]
type = Helper
;triggerall = !NumHelper(1004)
trigger1 = !Time
helpertype = Normal
name = "Bolt"
ID = 1004
stateno = 1004
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .5*Const(size.xscale)
size.yscale = .5*Const(size.yscale)
persistent = 0
[State 1100, Helper]
type = Helper
;triggerall = !NumHelper(1005)
trigger1 = AnimElemTime(7) = 0
helpertype = Normal
name = "Proj"
ID = 1005
stateno = 1005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = Const(size.xscale)
size.yscale = Const(size.yscale)
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Lightning
[Statedef 1004]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1004, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = e||(var(22) := root,Var(22))
value = 1050+var(22)

[State 1004, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
pos = 0,0

[State 1104, Safe]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1004, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 1054
trigger1 = AnimTime = 0
trigger2 = (parent, StateNo != 1000)
trigger3 = (parent, movetype = H)
;trigger4 = !root, NumProjID(1000)
value = 1054

[State 1105, DestroySelf]
type = DestroySelf
trigger1 = Anim = 1054 && AnimTime = 0
trigger2 = parent, Time = 0

;----------------------------------------------------------------------------------
; Projectile
[Statedef 1005]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 220, VarSet]
type = Null
trigger1 = e||(fvar(10) := parent,FVar(10))
trigger1 = e|| (var(21) := parent,Var(21))
trigger1 = e|| (var(22) := parent,Var(22))
trigger1 = e|| (var(28) := parent,Var(28))
trigger1 = e|| (var(29) := parent,Var(29))
trigger1 = e|| (var(30) := parent,Var(30))
trigger1 = e|| (var(30) := parent,Var(31))
trigger1 = e|| (var(40) := parent,Var(40))
trigger1 = e|| (var(41) := parent,Var(41))
trigger1 = e|| (var(51) := parent,Var(51))
trigger1 = e|| (var(22) := parent,Var(59))

[State 1004, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
pos = 0,0

[State 1105, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 1055

[State 1105, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NP,SP,HP
time = -1
[State 1105, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = stateno+1
time = -1
ignorehitpause = 1

[State 1005, This is for fossils]
type = Projectile
trigger1 = Anim = 1055;root,NumProjID(1000)
ProjID = 1000
projanim = anim
projhitanim = -1
projremanim = -1
projscale = 0,0
projpriority = 0
projremovetime = 1;10+(Var(22)*2)
postype = p1
velocity = 0
offset = 0
ownpal = 1
ignorehitpause = 0
[State 1105, Projectile]
type = Hitdef
triggerall = !root, FVar(18) && (root, FVar(19) < 6 || root, Var(31) || root, FVar(13))
trigger1 = !Time
attr = S, SP
damage = ceil(ifElse(((49+(14*(Var(22)&1))+(35*(Var(22)&2)))*FVar(10))<7,7,((49+(14*(Var(22)&1))+(35*(Var(22)&2)))*FVar(10)))),ceil(ifElse(((49+(14*(Var(22)&1))+(35*(Var(22)&2)))/8*FVar(10))<7,7,((49+(14*(Var(22)&1))+(35*(Var(22)&2)))/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
pausetime = 2,ceil(9*(2-(Var(30)>0))/2)
sparkno = -1
guard.sparkno = -1
sparkxy = 65535,65535
yaccel = .5
hitsound = S2,10
guardsound = S5,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
guard.ctrltime = 9
ground.velocity = -8.125
air.velocity = -4, -6.921875
airguard.velocity = -5.33,-1
air.type = Low
air.hittime = 10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ignorehitpause = 1
persistent = 1
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*!(Var(29)||Var(30)),35*(1000+Var(41))/1000*!(Var(29)||Var(30))
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2
guard.dist = 600
ID = 1005

[State 1100, Explod]
type = Explod
trigger1 = MoveHit=1
anim = 8210+(random%8)
pos = 10,-77
postype = p2
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1
[State 1100, Explod]
type = Explod
trigger1 = MoveGuarded=1
anim = 8105
pos = 10,-77
facing = target,facing
postype = p2
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 180, Counter]
type = VarSet
trigger1 = P2MoveType = A
var(21) = 1

[State 180, 1]
type = ParentVarSet
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
trigger2 = projhit = 1
fvar(32) = 1
ignorehitpause = 1
[State 180, 1]
type = ParentVarSet
triggerall = !root,Var(37)
triggerall = p2movetype = H
trigger1 = movehit
fvar(32) = ifElse(Var(21),-2,2)
ignorehitpause = 1

[State 1005, ParentVarSet]
type = ParentVarSet
trigger1 = MoveHit
fvar(3) = ifElse(P2StateType=A,3,4)

[State 180, 1]
type = ParentVarSet
trigger1 = Var(28) = 2 && Var(59) = 3 && (FVar(32) = 1 || FVar(32) = -2)
trigger2 = Var(28) = 3 && Var(59) = 3
trigger3 = Var(28) = 4 && Var(59) = [2,3]
trigger4 = Var(31) && Var(59) = 3
var(3) = 1
ignorehitpause = 1

[State 1005, Helper]
type = Helper
triggerall = root, FVar(32) = 1 || root, FVar(32) = -2
trigger1 = MoveHit=1;root,Var(50)=3;root, ProjHitTime(1105) = 1
ID = 8130
name = "COUNTER HIT EFFECT"
pos = 10,-77
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 1005, I give up]
type = ParentVarSet
trigger1 = var(50)
var(50) = var(50)
[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(50) = 3
ignorehitpause = 1
[State -2, Combo]
type = VarSet
trigger1 = MoveGuarded
trigger2 = ProjGuarded = 1
var(50) = 4
ignorehitpause = 1

[State -2, Combo]
type = ParentVarAdd
trigger1 = movehit
var(51) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarAdd
triggerall = !parent,Var(37)
triggerall = p2movetype = H
trigger1 = movehit
var(47) = 5000
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
triggerall = !parent,Var(37)
trigger1 = movehit && p2movetype = H
trigger2 = parent,MoveType = H
var(37) = 1
ignorehitpause = 1
persistent = 0
[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,Var(51) < 2
trigger1 = moveguarded
var(47)=-20
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,Var(51) < 2
triggerall = Var(21) = 0
triggerall = p2movetype = H
trigger1 = movehit
var(47)=500
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,Var(51) < 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
var(47)=3001
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
var(47)=1000
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,Var(51) >= 2
trigger1 = movehit
var(47)=ifelse(parent,Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = 1
fvar(12) = 0
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = MoveHit
fvar(12) = 3
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = MoveGuarded
fvar(12) = 4
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = !NumHelper(8305)
trigger1 = MoveHit
id = 8305
name = "SparkEffect_KnockBack"
pos =0,0
postype = P2
stateno = 8305
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8305)
trigger1 = MoveHit
id = 8305
name = "SparkEffect_KnockBack"
pos =0,0
postype = P2
stateno = 8305
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1105, VarSet]
type = VarSet
trigger1 = numTarget(1005)
var(2) = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = moveContact
ignorehitpause = 1

[State 180, Counter]
type = VarSet
triggerall = Var(21)
trigger1 = P2MoveType != A
var(21) = 0

[State 1105, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 1

[State 1105, DestroySelf]
type = DestroySelf
trigger1 = (parent, movetype = H)
trigger2 = MoveReversed
trigger3 = var(2) && !numTarget(1005)
trigger4 = Anim = 1 && !numTarget(1005)
trigger5 = parent, Time = 0

[Statedef 1006]
type = S
movetype = A
physics = N
ctrl = 0

[State 1106, DestroySelf]
type = DestroySelf
trigger1 = !Time

;---------------------------------------------------------------------------
; Running Start
[Statedef 1100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = 0
velset = 0,0

[State 100, Explod]
type = Explod
trigger1 = Time = 1
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 100, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,3
channel = 13

[State 100, PlaySnd]
type = PlaySnd
trigger1 = Anim = 100 && AnimElem = 4
value = S100,1
channel = 13
[State 100, PlaySnd]
type = PlaySnd
trigger1 = Anim = 100 && AnimElem = 7
value = S100,2
channel = 13

[State 100, 1]
type = VelSet
trigger1 = Anim = 100 && AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk and from turning
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = NoAutoTurn

[State 1000, ChangeState]
type = ChangeState
triggerall = Anim = 100
triggerall = Time > 3
trigger1 = Command = "x" || Command = "y" || Command = "z"
value = 1110
ctrl = 0
[State 1000, ChangeState]
type = ChangeState
triggerall = Anim = 100
triggerall = Time > 3
trigger1 = Command = "a" || Command = "b" || Command = "c"
value = 1120
ctrl = 0

[State 100, 4]
type = ChangeAnim
triggerall = Anim = 100 && AnimElemTime(2) > 0
trigger1 = Time > 40
trigger2 = P2BodyDist X < 10
value = 101

[State 101, 1]
type = VelMul
trigger1 = Anim = 101
x = .9

[State 101, 1]
type = VelSet
trigger1 = Anim = 101 && AnimTime = 0
x = 0

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Anim = 101 && AnimElem = 1
value = S100,0
channel = 13

[State 101, 3]
type = ChangeState
trigger1 = Anim = 101 && AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Berserker Barrage-type thing
[Statedef 1110]
type    = S
movetype= A
physics = N
anim = 1100
sprpriority = 1
ctrl = 0

[State 1400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8,8
channel = 0

[State 100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 7
value = S0,2

[State 1200, HitDef]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 7
attr = S, SA
damage = ceil(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),ceil(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(3*(2-(Var(30)>0))/2),ceil(4*(2-(Var(30)>0))/2) ; to hold the opponent in place
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-63)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 10
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
air.recover = 0
envshake.time = 10
envshake.ampl = 3

[State 1200, HitDef]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 4 || Var(30) || FVar(13))
trigger1 = AnimElem = 8
attr = S, SA
damage = ceil(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),ceil(ifElse((35/8*FVar(10))<7,7,(35/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(8*(2-(Var(30)>0))/2),ceil(7*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-77)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -4,-6.921875
guard.velocity = -8.125
guard.ctrltime = 10
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
envshake.time = 10
envshake.ampl = 3

[State 100, 1]
type = null;VelAdd
trigger1 = Vel X > 0
x = -0.3046875

[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(7) = 0
x = 0

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Gargoyle Barrage
[Statedef 1120]
type    = S
movetype= A
physics = N
anim = 1150
sprpriority = 1
ctrl = 0

[State 1120, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S9,0
channel = 0
[State 1120, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 11
value = S9,1
channel = 0
[State 1120, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 15
value = S9,2
channel = 0

[State 100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
trigger3 = AnimElem = 11
trigger4 = AnimElem = 15
value = S0,2

[State 1200, Explod]
type = Explod
trigger1 = AnimElemTime(5) = 0
anim = 2150
ID = 2150
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = -2
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = Const(size.Xscale),Const(size.Yscale)
[State 1200, Explod]
type = Explod
trigger1 = AnimElemTime(18) = 0
anim = 2151
ID = 2150
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = -2
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = Const(size.Xscale),Const(size.Yscale)

[State 1200, HitDef]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 3
attr = S, SA
damage = ceil(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),ceil(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(8*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-56)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 15
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
air.recover = 0
envshake.time = 10
envshake.ampl = 3

[State 1200, HitDef]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 7
trigger2 = AnimElem = 11
attr = S, SA
damage = ceil(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),ceil(ifElse((35/8*FVar(10))<7,7,(35/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(8*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-63)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 15
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
air.recover = 0
envshake.time = 10
envshake.ampl = 3

[State 1200, HitDef]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 15
attr = S, SA
damage = ceil(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),ceil(ifElse((42/8*FVar(10))<7,7,(42/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(8*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-56)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -4,16
guard.velocity = -8.125
guard.ctrltime = 15
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
fall.envshake.time = 20
;fall.envshake.freq = 180
;fall.envshake.ampl = -4
air.recover = 0
envshake.time = 10
envshake.ampl = 3

[State 1120, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElemTime(5) >=0 && AnimElemTime(21) < 0
flag = noShadow
ignorehitpause = 1

[State 100, 1]
type = VelAdd
trigger1 = Vel X > 3.875
x = -0.0625

[State 100, 1]
type = VelSet
trigger1 = Vel X <= 3.875
x = 4.875
persistent = 0

[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(15) = 0
x = 0

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Tatsumaki Senpuukyaku
[Statedef 1200]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1200, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse((Command = "QCB_hk" || Command = "QCF_hk"),2,ifElse((Command = "QCB_mk" || Command = "QCF_mk"),1,0))

[State 1200, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 1200+(Var(22)*10)

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S8,24
channel = 0
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
trigger3 = AnimElem = 12
trigger4 = AnimElem = 15 && Var(22)
trigger5 = AnimElem = 19 && Var(22)
trigger6 = AnimElem = 22 && Var(22)=2
trigger7 = AnimElem = 26 && Var(22)=2
trigger8 = AnimElem = 29 && Var(22)=2
value = S1,2
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
trigger3 = AnimElem = 12
trigger4 = AnimElem = 15 && Var(22)
trigger5 = AnimElem = 19 && Var(22)
trigger6 = AnimElem = 22 && Var(22)=2
trigger7 = AnimElem = 26 && Var(22)=2
value = S200,1

[State 1200, Explod]
type = Explod
trigger1 = AnimElemTime(3) = 0
anim = 2000
ID = 2000
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = -2
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = .5*Const(size.Xscale),.5*Const(size.Yscale)
[State 1200, Explod]
type = Explod
trigger1 = AnimElemTime(7) = 0
anim = 2001
ID = 2001
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = 11*(var(22)+1)-2*(Var(22)=2)
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = .5*Const(size.Xscale),.5*Const(size.Yscale)
[State 1200, Explod]
type = Explod
trigger1 = Var(22) = 0 && AnimElemTime(14) = 0
trigger2 = Var(22) = 1 && AnimElemTime(21) = 0
anim = 2002
ID = 2002
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = -2
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = .5*Const(size.Xscale),.5*Const(size.Yscale)

[State 1200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(3) = 0
statetype = A

[State 1200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 14 && Var(22)=0
trigger2 = AnimElem = 21 && Var(22)=1
trigger3 = AnimElem = 30 && Var(22)=2
movetype = I

[State 1200, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) = 0
x = 2.5+(Var(22)*0.625)
y = -4;2.917755126953125 ;CvS2 Gouki value

[State 1200, Helper]
type = Helper
triggerall = !NumHelper(8020)
trigger1 = AnimElem = 3
id = 8020
name = "jump Effect"
pos =0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1200, VelSet]
type = VelSet
trigger1 = AnimElemTime(7) = 0
y = 0
[State 1200, VelSet]
type = VelSet
trigger1 = Var(22)=2 && AnimElemTime(29) = 0
x = 2
y = 0
[State 1200, VelAdd]
type = VelAdd
trigger1 = Var(22)=0 && AnimElemTime(11) > 0
trigger2 = Var(22)=1 && AnimElemTime(18) > 0
trigger3 = Var(22)=2 && AnimElemTime(31) > 0;AnimElemTime(25) > 0
y = .5

[State 1200, Initial Hit]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 4
attr = S, SA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),floor(ifElse((35/8*FVar(10))<7,7,(35/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-56)
hitsound = S2,10
guardsound = S5,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1.5,-6.03125
guard.velocity = -8.125
guard.ctrltime = 17
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 17
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2
[State 1200, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 9 || AnimElem = 16 || AnimElem = 23
attr = S, SA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(21/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-56)
hitsound = S2,10
guardsound = S5,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1.5,-6.03125
guard.velocity = -8.125
guard.ctrltime = 17
air.type = High
air.velocity = -1.5,-6.03125
airguard.velocity = -6.67,-1
air.hittime = 17
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2
[State 1200, 3]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 13 || AnimElem = 20 || AnimElem = 27
attr = S, SA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(21/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-56)
hitsound = S2,10
guardsound = S5,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = ifElse(P2Dist X<0,1,-1)*1.5,-6.03125
guard.velocity = ifElse(P2Dist X<0,1,-1)*8.125
guard.ctrltime = 17
air.type = High
air.velocity = ifElse(P2Dist X<0,1,-1)*1.5,-6.03125
airguard.velocity = ifElse(P2Dist X<0,1,-1)*6.67,-1
air.hittime = 17
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2
[State 1200, Heavy Final]
type = HitDef
triggerall = Var(22) = 2
triggerall = !FVar(18) && (FVar(19) < 4 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 29
attr = S, SA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(21/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-105)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1.5,-6.03125
guard.velocity = -8.125
guard.ctrltime = 17
air.type = High
air.velocity = -1.5,-6.03125
airguard.velocity = -6.67,-1
air.hittime = 17
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2

[State 1100, ChangeState]
type = ChangeState
triggerall = AnimElemTime(3) > 0
trigger1 = Pos Y + Vel Y >= 0
value = 1205

;----------------------------------------------------------------------------------
; Tatsumaki Senpuukyaku
[Statedef 1250]
type = A
movetype = A
physics = N
ctrl = 0
sprpriority = 2
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0

[State 1200, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse((Command = "QCB_hk" || Command = "QCF_hk"),2,ifElse((Command = "QCB_mk" || Command = "QCF_mk"),1,0))

[State 1200, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 1250

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S8,24
channel = 0
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
trigger3 = AnimElem = 10
trigger4 = AnimElem = 14
value = S1,2
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
trigger3 = AnimElem = 10
trigger4 = AnimElem = 14
value = S200,1

[State 1250, VelAdd]
type = VelAdd
trigger1 = AnimElem = 1
x = ifElse(Vel X >= 0, 1+(Var(22)*0.5), -1-(Var(22)*0.5))
[State 1250, VelAdd]
type = VelAdd
trigger1 = Time > 2
y = .325 ;.125

[State 1250, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 16
movetype = I

[State 1200, Explod]
type = Explod
trigger1 = AnimElemTime(2) = 0
anim = 2001
ID = 2001
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = 21
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = .5*Const(size.Xscale),.5*Const(size.Yscale)
[State 1200, Explod]
type = Explod
trigger1 = AnimElemTime(16) = 0
anim = 2002
ID = 2002
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = -2
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = .5*Const(size.Xscale),.5*Const(size.Yscale)

[State 1200, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 4 || AnimElem = 11
attr = S, SA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-56)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1.5,-7.40625
guard.velocity = -8.125
guard.ctrltime = 17
air.type = Low
air.velocity = -1.5,-7.40625
airguard.velocity = -6.67,-1
air.hittime = 17
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2
[State 1200, 3]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 8 || AnimElem = 15
attr = S, SA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-56)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = ifElse(P2Dist X<0,1,-1)*1.5,-7.40625
guard.velocity = ifElse(P2Dist X<0,1,-1)*8.125
guard.velocity = 0
guard.ctrltime = 24
air.type = Low
air.velocity = ifElse(P2Dist X<0,1,-1)*1.5,-7.40625
airguard.velocity = ifElse(P2Dist X<0,1,-1)*6.67,-1
air.hittime = 24
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 1205

;----------------------------------------------------------------------------------
; Custom Land State
[Statedef 1205]
type    = S
physics = S
ctrl = 0
anim = ifElse(prevStateNo=1800,1810,47)
velset = 0,0

[State 1205, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(2001)
id = 2001
[State 1205, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(2002)
id = 2002

[State 52, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,2
channel = 13

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Zeus
[Statedef 1300]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1300, VarSet]
type = VarSet
;triggerall = !AILevel
trigger1 = Time = 0
var(22) = ifElse((Command = "QCB_hp" || Command = "QCF_hp"),2,ifElse((Command = "QCB_mp" || Command = "QCF_mp"),1,0))

[State 1300, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 1300+(Var(22)*10)

[State 1300, VelSet]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 4+Var(22)
[State 1300, VelMul]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
x = ifElse(Vel X <= 0,0,-0.625)
[State 1300, VelSet]
type = VelSet
trigger1 = AnimElemTime(2) > 1 && Vel X <= 0
x = 0

[State 1300, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 1300, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,1
channel = 0
[State 1300, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,1
channel = 1

[State 1300, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 3
attr = S, SA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(5*(2-(Var(30)>0))/2),ceil(4*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-63)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 15
air.type = Low
air.velocity = -5,-5.96875
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = !Var(35)
envshake.time = 10
envshake.ampl = 3
persistent = 0

[State 1300, buffer]
type = VarSet
trigger1 = !Time
var(12) = 0
[State 1300, buffer]
type = VarSet
triggerall = !Var(12)
triggerall = Time > 1
triggerall = Command = "x" || Command = "y" || Command = "z"
trigger1 = AnimElemTime(5) < 0
var(12) = 1
[State 1300, ChangeState]
type = ChangeState
trigger1 = Var(12) && AnimElemTime(4) >= 0
value = 1301

[State 1300, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Part 2
[Statedef 1301]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
anim = 1301

[State 1301, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 0
x = 4+Var(22)
[State 1301, VelMul]
type = VelAdd
trigger1 = AnimElemTime(4) > 0
x = ifElse(Vel X <= 0,0,-0.625)
[State 1301, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) > 1 && Vel X <= 0
x = 0

[State 1301, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S8,0
channel = 0
[State 1301, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S0,1
channel = 1

[State 1300, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 4
attr = S, SA
damage = floor(ifElse((14*FVar(10))<7,7,(14*FVar(10)))),floor(ifElse((14/8*FVar(10))<7,7,(14/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(5*(2-(Var(30)>0))/2),ceil(4*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 15
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0

[State 1301, buffer]
type = VarSet
trigger1 = !Time
var(12) = 0
[State 1301, buffer]
type = VarSet
triggerall = !Var(12)
triggerall = Time > 1
triggerall = Command = "x" || Command = "y" || Command = "z"
trigger1 = AnimElemTime(5) < 0
var(12) = 1
[State 1301, ChangeState]
type = ChangeState
trigger1 = Var(12) && AnimElemTime(5) > 0
value = 1302

[State 1300, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Part 3
[Statedef 1302]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
anim = 1302

[State 1302, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) = 0
x = 4+Var(22)
[State 1302, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(3) > 0
x = ifElse(Vel X <= 0,0,-0.625)
[State 1300, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) > 1 && Vel X <= 0
x = 0

[State 1302, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,11
channel = 0
[State 1302, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,1
channel = 1

[State 1300, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 3
attr = S, SA
damage = floor(ifElse((14*FVar(10))<7,7,(14*FVar(10)))),floor(ifElse((14/8*FVar(10))<7,7,(14/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(5*(2-(Var(30)>0))/2),ceil(4*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 15
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 17
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0

[State 1302, buffer]
type = VarSet
trigger1 = !Time
var(12) = 0
[State 1302, buffer]
type = VarSet
triggerall = !Var(12)
triggerall = Time > 1
triggerall = Command = "x" || Command = "y" || Command = "z"
trigger1 = AnimElemTime(5) < 0
var(12) = 1
[State 1302, ChangeState]
type = ChangeState
trigger1 = Var(12) && AnimElemTime(5) > 0
value = 1303

[State 1302, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Part 4
[Statedef 1303]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
anim = 1303

[State 1300, VarSet]
type = VarSet
trigger1 = !Time
var(22) = var(12)-1

[State 1300, VelSet]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 8+Var(22)
[State 1300, VelMul]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
x = ifElse(Vel X <= 0,0,-0.625)
[State 1300, VelSet]
type = VelSet
trigger1 = AnimElemTime(2) > 1 && Vel X <= 0
x = 0
[State 1300, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(4) = 0
x = 4

[State 1302, PlaySnd]
type = PlaySnd
trigger1 = !Time;AnimElem = 2
value = S8,10
channel = 0
[State 1302, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,1
channel = 1

[State 1302, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 2
attr = S, SA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-63)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5.77;-2,-15
guard.velocity = -5.77
guard.ctrltime = 15
air.type = Low
air.velocity = -2,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 23
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0
ID = 1300

[State 1303, buffer]
type = VarSet
trigger1 = !Time
var(12) = 0
[State 1303, buffer]
type = VarSet
triggerall = !Var(12)
triggerall = Time > 1
triggerall = Command = "up"
trigger1 = AnimElemTime(6) < 0
var(12) = 1
[State 1303, ChangeState]
type = ChangeState
trigger1 = Var(12) && AnimElemTime(6) >= 0
value = 1304

[State 1300, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Final Hit
[Statedef 1304]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
anim = 1304

[State 1300, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) = 0
x = 9+Var(22)
[State 1300, VelMul]
type = VelAdd
trigger1 = AnimElemTime(3) > 0
x = ifElse(Vel X <= 0,0,-0.625)
[State 1300, VelSet]
type = VelSet
trigger1 = AnimElemTime(7) = 0
x = 0

[State 1200, Explod]
type = Explod
trigger1 = !Time
anim = 2010
ID = 2010
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = -2
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = .5*Const(size.Xscale),.5*Const(size.Yscale)

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || numTarget(1300) || Var(25))
trigger1 = AnimElem = 7
attr = S, SA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),floor(ifElse((35/8*FVar(10))<7,7,(35/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-63)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -2,-12
guard.velocity = -5.77
guard.ctrltime = 15
air.type = Low
air.velocity = -2,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = ifElse(P2StateType=A,.5,.67)
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0
ID = 1300

[State 102, Explod]
type = Explod
trigger1 = AnimElemTime(3) = 0
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5
[State 102, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S40,3
channel = 13

[State 1304, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S8,21
channel = 0
[State 1304, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S0,2
channel = 1
[State 1304, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S200,0
channel = 2

[State 1300, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Batwing Revolver
[Statedef 1400]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1200, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse((Command = "DP_hk" || Command = "DB_hk"),2,ifElse((Command = "DP_mk" || Command = "DB_mk"),1,0))

[State 1200, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 1400+(Var(22)*10)

[State 1400, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(3) = 0
statetype = A

[State 1400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,7
channel = 0

[State 1400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S0,2
channel = 1
[State 1400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = S1,2
channel = 1
[State 1400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S40,4
channel = 13

[State 1400, PosAdd]; AND YOU'D NEVER KNOW
type = PosAdd
trigger1 = AnimElemTime(4) = 0
x = 20

[State 1400, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 0
x = 4.125+(Var(22)*1.125);3.625+(Var(22)*1.125)
y = -5-(Var(22)*.5)

[State 1400, Helper]
type = Helper
triggerall = !NumHelper(8020)
trigger1 = AnimElem = 4
id = 8020
name = "jump Effect"
pos =0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1200, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) > 0
y = 0.375;.5

[State 1200, Initial Hit]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 7
attr = S, SA
damage = floor(ifElse(((14+Var(22)*7)*FVar(10))<7,7,((14+Var(22)*7)*FVar(10)))),floor(ifElse(((14+Var(22)*7)/8*FVar(10))<7,7,((14+Var(22)*7)/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-77)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 15
air.type = High
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
;fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2
[State 1200, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 8 || AnimElem = 9 ;|| AnimElem = 10
attr = S, SA
damage = floor(ifElse(((42+Var(22)*7)*FVar(10))<7,7,((42+Var(22)*7)*FVar(10)))),floor(ifElse(((42+Var(22)*7)/8*FVar(10))<7,7,((42+Var(22)*7)/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-91)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -6,-5.015625
guard.velocity = -8.125
guard.ctrltime = 15
air.type = High
air.velocity = -6,-5.015625
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2
persistent = 0
ID = 1100
[State 1200, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 3 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 10
attr = S, SA
damage = floor(ifElse(((42+Var(22)*7)*FVar(10))<7,7,((42+Var(22)*7)*FVar(10)))),floor(ifElse(((42+Var(22)*7)/8*FVar(10))<7,7,((42+Var(22)*7)/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-21)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -6,-5.015625
guard.velocity = -8.125
guard.ctrltime = 15
air.type = High
air.velocity = -6,-5.015625
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2
persistent = 0
noChainID = 1100

[State 1100, ChangeState]
type = ChangeState
triggerall = AnimElemTime(3) > 0
trigger1 = Pos Y + Vel Y >= 0
value = 1405

;----------------------------------------------------------------------------------
; Batwing Revolver (land)
[Statedef 1405]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
juggle = 0
anim = 1405
[State 1400, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 1400, PosAdd]
type = null;PosAdd
trigger1 = !Time
x = 12

[State 1405, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 28, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5
[State 1100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
channel = 1
[State 1100, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S40,2
channel = 13

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 2 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 3
attr = S, SA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),floor(ifElse((21/8*FVar(10))<7,7,(21/8*FVar(10))))
animtype = Heavy
air.animtype = DiagUp
fall.animtype = DiagUp
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -6,-5.25
guard.velocity = -8.125
guard.ctrltime = 21
air.type = High
air.velocity = -6,-5.25
airguard.velocity = -6.67,-1
air.hittime = 21
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3

[State 1405, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Shadow Kick
[Statedef 1500]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 3
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
anim = 1500

[State 1300, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse((Command = "HCF_hk" || Command = "HCB_hk"),2,ifElse((Command = "HCF_mk" || Command = "HCB_mk"),1,0))

[State 1500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 1500, PlayerPush]
type = PlayerPush
trigger1 = Anim = 1500
value = 0
ignorehitpause = 1
[State 1500, Helper]
type = Helper
triggerall = !NumHelper(2500)
trigger1 = Time = 0
id = 2500
name = "Push"
pos =0,0
postype = p1
stateno = 2500
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1500, Helper]
type = Helper
trigger1 = !Time && !NumHelper(10000)
helpertype = normal ;player
name = "Gargoyle"
ID = 10000
stateno = 11500
pos = -56,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 0
size.xscale = Const(Size.Xscale)
size.yscale = Const(Size.Yscale)

[State 1500, ChangeAnim]
type = ChangeAnim
triggerall = NumHelper(10000)
trigger1 = helper(10000),stateNo = 11500
trigger1 = helper(10000),anim = 11500 && helper(10000), animElemTime(9)=5 ; Tick lag
value = 1501

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 1501 && AnimElemTime(1) = 1
x = abs(helper(10000), Pos X+76*Const(Size.Xscale) - Pos X)/3
[State 0, VelSet]
type = VelSet
trigger1 = Anim = 1501 && AnimElemTime(3) = 0
x = 0

[State 1200, Explod]
type = Explod
trigger1 = Anim = 1501
trigger1 = AnimElemTime(3) = 0
anim = 251
ID = 251
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = -2
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = .5*Const(size.Xscale),.5*Const(size.Yscale)

[State 200, PosAdd]
type = PosAdd
trigger1 = Anim = 1501
trigger1 = AnimElemTime(4) = 0
x = 4
[State 200, PosAdd]
type = PosAdd
trigger1 = Anim = 1501
trigger1 = AnimElemTime(5) = 0
x = 8
[State 200, PosAdd]
type = PosAdd
trigger1 = Anim = 1501
trigger1 = AnimElemTime(6) = 0
x = 16

[State 1500, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1501
trigger1 = AnimElem = 3
value = S1,2
channel = 1

[State 250, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || Var(25))
triggerall = Var(50) != [1,2]
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
attr = S, SA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),floor(ifElse((42/8*FVar(10))<7,7,(42/8*FVar(10))))
animtype = Heavy
air.animtype = DiagUp
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-56)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4,-6.921875
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3

[State 1500, ChangeState]
type = ChangeState
trigger1 = Anim = 1501 && AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Gargoyle
[Statedef 11500]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 1
velset = 0,0
juggle = 0
anim = 11500

[State 220, VarSet]
type = VarSet
trigger1 = 1
var(22) = root,Var(22)
ignorehitpause = 1
[State 220, VarSet]
type = VarSet
trigger1 = 1
fvar(10) = parent,FVar(10)
[State 220, VarSet]
type = VarSet
trigger1 = 1
var(30) = parent,Var(30)
[State 220, VarSet]
type = VarSet
trigger1 = 1
var(21) = parent,Var(21)
[State 220, VarSet]
type = VarSet
trigger1 = 1
var(25) = parent,Var(25)
[State 220, VarSet]
type = VarSet
trigger1 = 1
var(29) = parent,Var(29)
[State 220, VarSet]
type = VarSet
trigger1 = 1
var(40) = parent,Var(40)
[State 220, VarSet]
type = VarSet
trigger1 = 1
var(41) = parent,Var(41)
[State 220, VarSet]
type = VarSet
trigger1 = 1
var(50) = parent,Var(50)
[State 220, VarSet]
type = VarSet
trigger1 = 1
var(51) = parent,Var(51)
[State 220, VarSet]
type = VarSet
trigger1 = 1
var(25) = parent,Var(25)
[State 220, VarSet]
type = VarSet
trigger1 = 1
fvar(13) = parent,FVar(13)

[State 11500, ChangeState]
type = ChangeState
trigger1 = root,MoveType=H
value = 12000
[State 11500, NotHitBy]
type = HitBy
trigger1 = 1
value = SCA,AA,AP
time = 1
[State 11500, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP
slot = 3
stateno = 12000
time = -1

[State 220, ScreenBound]
type = ScreenBound
trigger1 = AnimElemTime(4) > 0
value = 1
[State 220, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
[State 1500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 11500, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 0
x = 4+(Var(22)*2)
[State 11500, VelSet]
type = VelSet
trigger1 = AnimElemTime(8) = 0
x = 4.75+(Var(22)*1.125)

[State 11500, VelSet]
type = VelSet
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
x = 0

[State 210, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 6
attr = , SA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),floor(ifElse((35/8*FVar(10))<7,7,(35/8*FVar(10))))
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-77)
hitsound = S4,1
guardsound = S5,0
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -3,-7.21875
guard.velocity = -8.125
guard.ctrltime = 21
air.type = High
air.velocity = -3,-7.21875
airguard.velocity = -5.33,-1
air.hittime = 21
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
[State 210, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13) || Var(25))
trigger1 = AnimElem = 9
attr = , SA
damage = floor(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),floor(ifElse((56/8*FVar(10))<7,7,(56/8*FVar(10))))
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-50),ceil(fvar(27):=-91)
hitsound = S4,1
guardsound = S5,0
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -4,-5.015625
guard.velocity = -8.125
guard.ctrltime = 21
air.type = High
air.velocity = -4,-5.015625
airguard.velocity = -6.67,-1
air.hittime = 21
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .625
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3

[State 11500, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(11) = 0
x = 76*Const(Size.Xscale)

[State 200, PosAdd]
type = BindToRoot
trigger1 = AnimElemTime(12) > 0 && AnimElemTime(16) < 1
pos = 0,0

[State 11500, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElemTime(11) >= 0 && AnimElemTime(16) < 1
value = anim
elem = 8+root,AnimElemNo(0)
ignorehitpause = 0

[State 11500, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 9
value = S1,1
channel = 1
[State 11500, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4 
value = S9,4
channel = 0
[State 11500, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = S9,5
channel = 0
[State 11500, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(13) = 0
value = S9,6
channel = 0
persistent = 0

[State 11500, Kill]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = root, StateNo != 1500
trigger3 = root, StateNo = 1500 && root, Time = 0

;----------------------------------------------------------------------------------
; Gargoyle (hurt)
[Statedef 12000]
type = S
movetype = H
physics = N
ctrl = 0
sprpriority = -1
velset = 0,0
juggle = 0
anim = 12000

[State 12200, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 12000, VarSet]
type = Null
triggerall = !Time
trigger1 = e||(var(0):=GetHitVar(damage))
trigger1 = e||(var(7):=GetHitVar(hitShakeTime))
trigger1 = e||(var(8):=GetHitVar(hitTime)+1)
trigger1 = e||(var(11):=GetHitVar(slideTime))

[State 12000, ParentVarSet]
type = ParentVarSet
trigger1 = !Time
var(7) = var(7)
[State 12000, ParentVarSet]
type = ParentVarSet
trigger1 = !Time
var(8) = var(8)
[State 12000, ParentVarSet]
type = ParentVarSet
trigger1 = !Time
fvar(11) = var(11)

[State 5000, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
value = stateNo+1

;----------------------------------------------------------------------------------
; Gargoyle (hurt)
[Statedef 12001]
type = S
movetype = H
physics = N
ctrl = 0
sprpriority = -1
juggle = 0

[State 12200, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 12201, HitVel2]
type = null;HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 12200, VarAdd]
type = VarAdd
trigger1 = Var(8) > 0
var(8) = -1

[State 12201, Position]
type = PosFreeze
trigger1 = time >= 4

[State 11500, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 1

[State 11500, Kill]
type = DestroySelf
trigger1 = HitOver && !Var(8) && (root,StateNo != [15000,15999])

;---------------------------------------------------------------------------
; Electromagnetic Burst
[Statedef 1600]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
sprpriority = 2
facep2 = 1

[State 1200, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse(Command = "DD_hp",2,ifElse(Command = "DD_mp",1,0))

[State 1600, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 1600+(Var(22)*10)

[State 1600, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S8,6
channel = 0

[State 1600, Looping Sound]
type = Helper
trigger1 = AnimElemTime(3) = 0 
helpertype = normal
name = "Looping Sound"
ID = 1600
stateno = 1605
pos = 0,0
postype = p1
facing = 1
keyctrl = 1
ownpal = 1
supermovetime = 65535
pausemovetime = 65535
size.Xscale = 0
size.Yscale = 0

[State 1600, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I

[State 0, Explod]
type = Explod
trigger1 = AnimElemTime(2) = 0
anim = 2600+(Var(22)*10)
ID = 2600
pos = 0,0
postype = p1
facing = 1
bindtime = -1
removetime = -2
scale = .5,.5
sprpriority = 3
ownpal = 1
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1

[State 1005, Proj Cancel]
type = Projectile
trigger1 = AnimElemTime(6) = 0
trigger2 = AnimElemTime(8) = 0
trigger3 = AnimElemTime(10) = 0
trigger4 = AnimElemTime(12) = 0
trigger5 = Var(22) && AnimElemTime(14) = 0
trigger6 = Var(22) && AnimElemTime(16) = 0
trigger7 = Var(22)=2 && AnimElemTime(18) = 0
trigger8 = Var(22)=2 && AnimElemTime(20) = 0
ProjID = 1600
projanim = anim+50
projhitanim = -1
projremanim = -1
projscale = 0,0
projpriority = 0
projhits = 1
projremovetime = 2
postype = p1
velocity = 0
[State 255, Light]
type = HitDef
triggerall = Var(22) = 0 && !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13) || Var(25))
trigger1 = !Time
attr = S, SA
damage = ceil(ifElse((49*FVar(10))<7,7,(49*FVar(10)))),ceil(ifElse((49/8*FVar(10))<7,7,(49/8*FVar(10))))
animtype = Heavy
air.animtype = Up;Back
fall.animtype = Up;Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-81)
hitsound = S2,10
guardsound = S5,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1.9921875,-7.8125
guard.velocity = -8.125
guard.ctrltime = 17
air.type = Low
air.velocity = -1.9921875,-7.8125
airguard.velocity = -6.67,-1
air.hittime = 17
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
[State 255, Medium]
type = HitDef
triggerall = Var(22) = 1 && !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13) || Var(25))
trigger1 = !Time
attr = S, SA
damage = ceil(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),ceil(ifElse((56/8*FVar(10))<7,7,(56/8*FVar(10))))
animtype = Heavy
air.animtype = Up;Back
fall.animtype = Up;Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-81)
hitsound = S2,10
guardsound = S5,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4,-6.265625
guard.velocity = -8.125
guard.ctrltime = 17
air.type = Low
air.velocity = -4,-6.265625
airguard.velocity = -6.67,-1
air.hittime = 17
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
[State 255, Heavy]
type = HitDef
triggerall = Var(22) = 2 && !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13) || Var(25))
trigger1 = !Time
attr = S, SA
damage = ceil(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),ceil(ifElse((63/8*FVar(10))<7,7,(63/8*FVar(10))))
animtype = Heavy
air.animtype = Up;Back
fall.animtype = Up;Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-81)
hitsound = S2,10
guardsound = S5,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6.296875
guard.velocity = -8.125
guard.ctrltime = 17
air.type = Low
air.velocity = -5,-6.296875
airguard.velocity = -6.67,-1
air.hittime = 17
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0

[State 1700, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Looping Sound
[Statedef 1605]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = Time > 0
v = 1
value = 1
ignorehitpause = 1
pausemovetime = 65535
supermovetime = 65535

[State 1605, Sound]
type = PlaySnd
;trigger1 = Var(1)%57 = 0
;trigger1 = GameTime%57 = 0
trigger1 = (Var(1)%TicksPerSecond) = 0
value = S200,7
channel = 1
ignorehitpause = 1

[State 1605, StopSnd]
type = StopSnd
trigger1 = parent, StateNo != 1600
trigger2 = parent, moveType = H
trigger3 = parent, Var(22) = 0
trigger3 = parent, animElemTime(13) >= 0
trigger4 = parent, Var(22) = 1
trigger4 = parent, animElemTime(17) >= 0
trigger5 = parent, Var(22) = 2
trigger5 = parent, animElemTime(21) >= 0
channel = 1
[State 1605, DestroySelf]
type = DestroySelf
trigger1 = parent, StateNo != 1600
trigger2 = parent, moveType = H
trigger3 = parent, Var(22) = 0
trigger3 = parent, animElemTime(13) >= 0
trigger4 = parent, Var(22) = 1
trigger4 = parent, animElemTime(17) >= 0
trigger5 = parent, Var(22) = 2
trigger5 = parent, animElemTime(21) >= 0

;---------------------------------------------------------------------------
; THE KNEE
[Statedef 1700]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 1700
sprpriority = 2
facep2 = 1

[State 1700, 5]
type = VarSet
trigger1 = !Time
var(12) = 0
ignorehitpause = 1

[State 1700, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2

[State 1700, PlaySnd]
type = PlaySnd
triggerall = Random%2
trigger1 = AnimElem = 3
value = S8,(random%2)
channel = 0

[State 1700, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 255, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
trigger1 = AnimElem = 3
attr = S, SA
damage = ceil(ifElse((49*FVar(10))<7,7,(49*FVar(10)))),ceil(ifElse((49/8*FVar(10))<7,7,(49/8*FVar(10))))
animtype = Heavy
air.animtype = Up;Back
fall.animtype = Up;Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-81)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -1,-7.21875
guard.velocity = -8.125
guard.ctrltime = 17
air.type = Low
air.velocity = -1,-7.21875
airguard.velocity = -6.67,-1
air.hittime = 17
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .4375;.5
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
ID = 1700

[State 1700, 5]
type = VarSet
triggerall = Var(50) && AnimElemTime(3) > 0
trigger1 = Command = "HCF_lk" || Command = "HCF_mk" || Command = "HCF_hk"
var(12) = 1
ignorehitpause = 1

[State 1700, 5]
type = ChangeState
trigger1 = Var(12) && AnimElemTime(4) > 2
value = 1750

[State 1700, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Electrocutioner (attempt)
[Statedef 1750]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 1750
sprpriority = 2
facep2 = 1

[State 1750, 1]
type = HitDef
triggerall = P2StateNo != [130,155]
trigger1 = AnimElem = 1
attr = S, ST
hitflag = MAF
priority = 3, Miss
sparkno = -1
getpower = 70*(1000+Var(40))/1000*!(Var(29)||Var(30))
p1facing = 1
p2facing = 1
p1stateno = 1751
p2stateno = 1752
guard.dist = 0
numhits = 0
fall = 1
givepower = 35,35
chainID = 1700

[State 1500, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
movetype = I

[State 1700, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; KONOO
[Statedef 1751]
type = S
movetype= A
physics = N
anim = 1751
sprpriority = 0

[State 810, TargetState]
type = TargetState
trigger1 = Time = 0
value = 1752
[State 810, TargetState]
type = TargetState
trigger1 = AnimElemTime(3) = 0
value = 1753

[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(5) = 0
value = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S800,0
channel = 2

[State 0, Explod]
type = Explod
trigger1 = AnimElemTime(5) = 0
anim = 8306
ID = 1750
pos = ifElse((target,Name="cvszangief"&&target,AuthorName="Warusaki3"),7,(-target,Const(size.head.pos.x))),(-target,Const(size.head.pos.y)/5)
postype = p2
bindtime = 1
random = 20,14
removetime = 41
pausemovetime = 0
scale = .5,.5
sprpriority = 2
ownpal = 1
removeongethit = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElemTime(5) = 0
anim = 8305
ID = 1750
pos = ifElse((target,Name="cvszangief"&&target,AuthorName="Warusaki3"),7,(-target,Const(size.head.pos.x))),(-target,Const(size.head.pos.y)/3)
postype = p2
bindtime = 1
random = 20,14
removetime = 41
pausemovetime = 0
scale = .5,.5
sprpriority = 2
ownpal = 1
removeongethit = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElemTime(5) = 0
anim = 8307
ID = 1750
pos = ifElse((target,Name="cvszangief"&&target,AuthorName="Warusaki3"),7,(-target,Const(size.head.pos.x))),(-target,Const(size.head.pos.y)/2)
postype = p2
bindtime = 1
random = 20,14
removetime = 41
pausemovetime = 0
scale = .5,.5
sprpriority = 2
ownpal = 1
removeongethit = 1
[State 0, Explod]
type = Explod
trigger1 = AnimElemTime(5) = 0
anim = 8307
ID = 1750
pos = ifElse((target,Name="cvszangief"&&target,AuthorName="Warusaki3"),7,(-target,Const(size.head.pos.x))),(-target,Const(size.head.pos.y)/4)
postype = p2
bindtime = 1
random = 20,14
removetime = 41
pausemovetime = 0
scale = .5,.5
sprpriority = 2
ownpal = 1
removeongethit = 1

;44,-128; 45,-127; 52,-127; 52,-125; 62,-126 (frame 17)
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 3
pos = 44,-128
time = -1
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 4
pos = 45,-127
time = -1
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
trigger4 = AnimElem = 11
trigger5 = AnimElem = 13
trigger6 = AnimElem = 15
pos = 52,-127
time = -1
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 6
trigger2 = AnimElem = 8
trigger3 = AnimElem = 10
trigger4 = AnimElem = 12
trigger5 = AnimElem = 14
trigger6 = AnimElem = 16
pos = 52,-125
time = -1
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 17
pos = 62,-126
time = 1
[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 810, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = S200,5
channel = 13
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(17) = 0
value = S200,3
channel = 13

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElemTime(17) = 0
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(17) = 0
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(17) = 0
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElemTime(17) = 0
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemTime(17) = 0
value = ceil(ifelse((-49*FVar(10))>-7,-7,(-49*FVar(10))))
kill = 1
[State 810, Hurt]
type = TargetPowerAdd
trigger1 = AnimElemTime(17) = 0
value = 35

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 1752]
type = A
movetype = H
physics = N
sprpriority = 1

[State 834, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
[State 834, VelAdd]
type = VelAdd
trigger1 = 1
y = .4375

;----------------------------------------------------------------------
[Statedef 1753]
type = A
movetype = H
physics = N
sprpriority = 1

[State 1753, ScreenBound]
type = ScreenBound
trigger1 = AnimElemTime(2) < 0
value = 1
movecamera = 0,0
[State 1753, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1753, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 1752+(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 0, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(1) = 6
value = 0

[State 0, PalFX]
type = PalFX
trigger1 = AnimElemTime(1) = 5
time = -1
color = 40
sinadd = 120,120,120,3
[State 0, PalFX]
type = PalFX
triggerall = AnimElemTime(2) > 0
trigger1 = Name != "Hauzer"
trigger1 = Vel Y + Pos Y >= 0
trigger2 = Name = "Hauzer"
trigger2 = Vel Y + Pos Y >= -40
time = 0

[State 1753, VelSet]
type = VelSet
triggerall = Anim = 1752 || Anim = 1753
trigger1 = AnimElemTime(2) = 0
x = -5
y = -5
[State 1753, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .5

[State 1753, SelfState]
type = PosAdd
triggerall = !(Name="cvszangief" && AuthorName="Warusaki3")
triggerall = AnimElemTime(2) > 0
trigger1 = Name != "Hauzer"
trigger1 = Vel Y + Pos Y >= 0
trigger2 = Name = "Hauzer"
trigger2 = Vel Y + Pos Y >= -40
x = -(Const(Size.head.pos.Y)-Const(Size.mid.pos.Y))

[State 1753, SelfState]
type = PosAdd
triggerall = Name="cvszangief" && AuthorName="Warusaki3"
triggerall = AnimElemTime(2) > 0
trigger1 = Vel Y + Pos Y >= 0
x = 50

[State 1753, SelfState]
type = SelfState
triggerall = AnimElemTime(2) > 0
trigger1 = Name != "Hauzer"
trigger1 = Vel Y + Pos Y >= 0
trigger2 = Name = "Hauzer"
trigger2 = Vel Y + Pos Y >= -40
value = 5100

;---------------------------------------------------------------------------
; ORAORAORA
[Statedef 1800]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 1800
sprpriority = 2
facep2 = 1

[State 1800, StateTime]
type = VarSet
trigger1 = !Time
var(23) = 60
[State 1800, Timer]
type = VarSet
trigger1 = !Time
var(12) = 10

[State 1800, Decrement]
type = VarAdd
triggerall = Anim = 1800
trigger1 = AnimElemTime(2) >= 0
trigger1 = Var(23) > 0
var(23) = -1
persistent = 1
ignorehitpause = 0
[State 1800, Decrement]
type = VarAdd
triggerall = Anim = 1800
trigger1 = AnimElemTime(2) >= 0
trigger1 = Var(12) > 0
var(12) = -1
persistent = 1
ignorehitpause = 0

[State 1800, Decrement]
type = VarSet
trigger1 = Var(12) < 0
var(12) = 0
persistent = 1
ignorehitpause = 1

[State 1800, Mash]
type = VarSet
;triggerall = (Time%4) = 0
triggerall = Anim = 1800
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
var(12) = 10
persistent = 1
ignorehitpause = 1

[State 1700, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 1800
trigger1 = !Var(12) || !Var(23)
value = 1805

[State 1700, PlaySnd]
type = PlaySnd
triggerall = Anim = 1800
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 6
trigger4 = AnimElem = 8
value = S0,2
[State 1700, PlaySnd]
type = PlaySnd
triggerall = Anim = 1800
trigger1 = AnimElem = 2
value = S8,26
channel = 0
persistent = 0

[State 1700, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 1805
movetype = I
[State 1700, PlaySnd]
type = PlaySnd
triggerall = Anim = 1805
trigger1 = AnimElem = 1
value = S8,27
channel = 0
persistent = 0

[State 1800, VelSet]
type = VelSet
trigger1 = Anim = 1800
x = 2.25*command = "holdfwd" - 1.75*command = "holdback"
y = -.5*command = "holdup" + .475*command="holddown"

[State 1800, VelAdd]
type = VelAdd
trigger1 = Anim = 1800
y = 0.0625
[State 0, VelAdd]
type = VelAdd
trigger1 = Anim = 1805
y = 0.5

[State 255, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 6 || Var(30))
trigger1 = AnimElem = 2
attr = S, SA
damage = ceil(ifElse((7*FVar(10))<7,7,(7*FVar(10)))),ceil(ifElse((7/8*FVar(10))<7,7,(7/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-81)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 11
air.type = Low
air.velocity = -3,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 11
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
air.recover = 0
ID = 1800
[State 255, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 6 || Var(30))
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
attr = S, SA
damage = ceil(ifElse((7*FVar(10))<7,7,(7*FVar(10)))),ceil(ifElse((7/8*FVar(10))<7,7,(7/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-81)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 11
air.type = Low
air.velocity = -3,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 11
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
air.recover = 0
ID = 1800

[State 255, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) < 6 || Var(30))
trigger1 = AnimElem = 8
attr = S, SA
damage = ceil(ifElse((14*FVar(10))<7,7,(14*FVar(10)))),ceil(ifElse((14/8*FVar(10))<7,7,(14/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-81)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 11
air.type = Low
air.velocity = -3,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 11
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
air.recover = 0
ID = 1801

[State 1700, 5]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 1205
ctrl = 1

;----------------------------------------------------------------------------------
; Push
[Statedef 2500]
ctrl=0
anim=2500
sprpriority=0
[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause = 1
[State 2500, Safe]
type=NotHitBy
trigger1=1
value=SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
[State 2500, AssertSpecial]
type=AssertSpecial
trigger1=1
flag=NoShadow
[State 2500, BindToRoot]
type=BindToRoot
trigger1=1
pos=0,0
[State 2500, Kill]
type = DestroySelf
trigger1 = root, Anim != 1500
trigger2 = root,StateNo != 1500
trigger3 = root,MoveType = H

;===============================================================================
;                                      SUPERS
;===============================================================================

;----------------------------------------------------------------------------------
; Unfair Tatsumaki (1)
[Statedef 3000]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
facep2 = 1
juggle = 0

[State 3000, C]
type = VarSet
triggerall = Var(10) != 3
trigger1 = Time = 0
var(22) = IfElse(((Command = "QCFx2_mk" || Command = "QCBx2_mk") && Power >= 2000) || ((Command = "QCFx2_hk" || Command = "QCBx2_hk") && (Power >= 2000 && Power < 3000)),1,IfElse((Command = "QCFx2_hk" || Command = "QCBx2_hk") && Power >= 3000,2,0))
[State 3000, A,S,N]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && !Var(17)) || Var(10) = 5
trigger1 = Time = 0
var(22) = 0
[State 1100, P,S-MAX,K]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17)) || Var(10) = 6
trigger1 = Time = 0
var(22) = 2
[State 1100, N-MAX]
type = VarSet
triggerall = Var(29)
trigger1 = Time = 0
var(22) = 2
[State 1100, A]
type = VarSet
triggerall = Var(30)
trigger1 = Time = 0
var(22) = 0

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = IfElse(!Var(22),54,IfElse(Var(22) = 1,60,65))

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 3000

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 50+(var(22)*2)
movetime = 50+(var(22)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0
[State 3000, Unguardable]
type = VarSet
trigger1 = Time = 4 && enemyNear, stateNo != [120,155]
var(48) = 50+(Var(22)*2)

[State 3000, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 1 || !Var(10)
trigger1 = Time = 0
value = IfElse (!Var(22),-1000,IfElse(Var(22) = 1, -2000, -3000))

[State 3000, N]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 3000, A]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 3000, C,P,K]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || Var(10) = 6 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17))
trigger1 = Time = 0
value = -3000
[State 3000, A]
type = PowerAdd
triggerall = Var(30)
trigger1 = Time = 0
value = -3000
[State 3000, N-MAX]
type = PowerAdd
triggerall = Var(29)
trigger1 = Time = 0
value = -1000

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(17) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(29) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(30) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
fvar(14) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !Var(31) && PrevStateNo != [3000,3999]
trigger1 = Time = 4
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 150)),ifElse(!Var(22), 128, ifelse(Var(22) = 1, 50, 50)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3000, Helper]
type = Helper
trigger1 = Time = 4
ID = 8000
name = "Super"
pos = ceil(35*Const(size.xscale)),ceil(-49*Const(size.yscale))
postype = P1
stateno = ifElse((Var(10) = [4,6]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 1020, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(2) = 0
statetype = A
[State 1020, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(5) = 0
statetype = S

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S8,14
persistent = 0
channel = 0
[State 3100, LK]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
[State 3100, MK]
type = PlaySnd
trigger1 = AnimElem = 13
value = S1,1
[State 3100, HP]
type = PlaySnd
trigger1 = AnimElem = 22
value = S1,1
[State 3100, HK]
type = PlaySnd
trigger1 = AnimElem = 26
trigger2 = AnimElem = 29
trigger3 = AnimElem = 35
value = S1,2

[State 3100, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(2) = 0
trigger2 = AnimElemTime(11) = 0
trigger3 = AnimElemTime(33) = 0
x = 20
[State 3100, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(21) = 0
x = 32

[State 3100, VelSet]
type = VelSet
trigger1 = AnimElemTime(34) = 0
x = 3.25
y = -3.625
[State 3100, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(34) = 0
statetype = A

[State 3100, VelAdd]
type = VelAdd
trigger1 = Vel X > 0
trigger1 = AnimElemTime(34) > 0
x = -.25
[State 3100, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(34) > 0
y = .67

[State 3100, VelAdd]
type = VelSet
trigger1 = Vel X < 0
trigger1 = AnimElemTime(34) > 0
x = 0

[State 3000, 1]
type = HitDef
triggerall = !FVar(18)
triggerall = Anim = 3000
trigger1 = AnimElem = 3
attr = S, HA
damage = floor(ifElse((21+(7*(Var(22)>0))*FVar(10))<7,7,(21+(7*(Var(22)>0))*FVar(10)))),floor(ifElse((21+(7*(Var(22)>0))/8*FVar(10))<7,7,(21+(7*(Var(22)>0))/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 5,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-63)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 2]
type = HitDef
triggerall = !FVar(18)
triggerall = Anim = 3000
trigger1 = AnimElem = 13
attr = S, HA
damage = floor(ifElse((28+(7*(Var(22)>0))*FVar(10))<7,7,(28+(7*(Var(22)>0))*FVar(10)))),floor(ifElse((28+(7*(Var(22)>0))/8*FVar(10))<7,7,(28+(7*(Var(22)>0))/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-84)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 3]
type = HitDef
triggerall = !FVar(18)
triggerall = Anim = 3000
trigger1 = AnimElem = 22
attr = S, HA
damage = floor(ifElse((21+(7*(Var(22)>0))*FVar(10))<7,7,(21+(7*(Var(22)>0))*FVar(10)))),floor(ifElse((21+(7*(Var(22)>0))/8*FVar(10))<7,7,(21+(7*(Var(22)>0))/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 5,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-56)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -7.66
guard.velocity = -7.66
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 4]
type = HitDef
triggerall = !FVar(18)
triggerall = Anim = 3000
trigger1 = AnimElem = 26
attr = S, HA
damage = floor(ifElse((21+(7*(Var(22)>0))*FVar(10))<7,7,(21+(7*(Var(22)>0))*FVar(10)))),floor(ifElse((21+(7*(Var(22)>0))/8*FVar(10))<7,7,(21+(7*(Var(22)>0))/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 5,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-84)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 5]
type = HitDef
triggerall = !FVar(18)
triggerall = Anim = 3000
trigger1 = AnimElem = 29
attr = S, HA
damage = floor(ifElse((14+(7*(Var(22)>0))*FVar(10))<7,7,(14+(7*(Var(22)>0))*FVar(10)))),floor(ifElse((14+(7*(Var(22)>0))/8*FVar(10))<7,7,(14+(7*(Var(22)>0))/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 5,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-35)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, Launcher]
type = HitDef
triggerall = !FVar(18)
triggerall = Anim = 3000
trigger1 = AnimElem = 35
attr = A, HA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),floor(ifElse((35/8*FVar(10))<7,7,(35/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-35)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -1.5,-6.03125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
forcestand = 1
ID = 3100

[State 1000, ChangeState]
type = ChangeState
triggerall = Anim = 3000 && numTarget(3100) && Var(50) = 1
trigger1 = AnimElemTime(36) >= 0
value = 3010

[State 1000, ChangeState]
type = ChangeState
triggerall = Anim = 3000 && AnimElemTime(34) > 0
trigger1 = Vel Y + Pos Y >= 0
value = 3005

;----------------------------------------------------------------------------------
; Whiff Land State
[Statedef 3005]
type    = S
physics = S
ctrl = 0
anim = 3005
velset = 0,0

[State 52, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,2
channel = 13

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Unfair Tatsumaki (2)
[Statedef 3010]
type    = A
physics = N
movetype= A
ctrl = 0
facep2 = 1
juggle = 0
anim = 3010+(Var(22)*5)

[State 3100, VelSet]
type = VelSet
trigger1 = !Time && Var(22) < 2
x = 3+(1.0625*Var(22))
y = -6.25-(Var(22)>0)
[State 3100, Heavy VelSet]
type = VelSet
trigger1 = !Time && Var(22) = 2
x = 4.125
y = -5

[State 3100, PlaySnd]
type = PlaySnd
triggerall = Anim = 3020
trigger1 = Time = 0
value = S8,9
persistent = 0
channel = 0
[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
trigger3 = AnimElem = 8  && Anim = 3015
trigger4 = AnimElem = 12 && Anim = 3020
trigger5 = AnimElem = 16 && Anim = 3020
trigger6 = AnimElem = 19 && Anim = 3020
value = S1,2

[State 3100, VelAdd]
type = VelAdd
trigger1 = Vel X > 0
x = -.0546875
[State 3100, VelSet]
type = VelSet
trigger1 = Vel X <= 0
x = 0

[State 3100, VelAdd]
type = VelAdd
trigger1 = Anim = 3010 && AnimElemTime(8)  < 0
trigger2 = Anim = 3015 && AnimElemTime(11) < 0
trigger3 = Anim = 3020 && AnimElemTime(16) < 0
y = ifElse(Var(22)=2,.125,.25)

[State 3100, VelAdd]
type = VelAdd
trigger1 = Anim = 3010 && AnimElemTime(8)  >= 0
trigger2 = Anim = 3015 && AnimElemTime(12) >= 0
trigger3 = Anim = 3020 && AnimElemTime(17) >= 0
y = .5

[State 3000, 1]
type = HitDef
triggerall = !FVar(18)
trigger1 = AnimElem = 2
attr = S, HA
damage = floor(ifElse((21+(7*(Var(22)>0))*FVar(10))<7,7,(21*FVar(10)))),floor(ifElse((21+(7*(Var(22)>0))/8*FVar(10))<7,7,(21+(7*(Var(22)>0))/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-63)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 2]
type = HitDef
triggerall = !FVar(18)
trigger1 = AnimElem = 5
attr = S, HA
damage = floor(ifElse((21+(7*(Var(22)>0))*FVar(10))<7,7,(21*FVar(10)))),floor(ifElse((21+(7*(Var(22)>0))/8*FVar(10))<7,7,(21+(7*(Var(22)>0))/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-77)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 3]
type = HitDef
triggerall = Var(22) && !FVar(18)
trigger1 = AnimElem = 8
attr = S, HA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),floor(ifElse((35/8*FVar(10))<7,7,(35/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-84)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 20
air.type = High
air.velocity = -4,-6.921875;-3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 4]
type = HitDef
triggerall = Var(22) = 2 && !FVar(18)
trigger1 = AnimElem = 12
attr = S, HA
damage = floor(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),floor(ifElse((84/8*FVar(10))<7,7,(84/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 13,12
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-77)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 1205

;----------------------------------------------------------------------------------
; Arc Cannon
[Statedef 3100]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
facep2 = 1
juggle = 0

[State 3000, C]
type = VarSet
triggerall = Var(10) != 3
trigger1 = Time = 0
var(22) = IfElse(((Command = "QCFx2_mp" || Command = "QCBx2_mp") && Power >= 2000) || ((Command = "QCFx2_hp" || Command = "QCBx2_hp") && (Power >= 2000 && Power < 3000)),1,IfElse((Command = "QCFx2_hp" || Command = "QCBx2_hp") && Power >= 3000,2,0))
[State 3000, A,S,N]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && !Var(17)) || Var(10) = 5
trigger1 = Time = 0
var(22) = 0
[State 1100, P,S-MAX,K]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17)) || Var(10) = 6
trigger1 = Time = 0
var(22) = 2
[State 1100, N-MAX]
type = VarSet
triggerall = Var(29)
trigger1 = Time = 0
var(22) = 2
[State 1100, A]
type = VarSet
triggerall = Var(30)
trigger1 = Time = 0
var(22) = 0

[State 3100, VarSet]
type = VarSet
trigger1 = Time = 0
var(24) = ifElse(Var(22)=2,94,ifElse(Var(22)=1,60,42))
[State 3100, VarSet]
type = VarAdd
trigger1 = AnimElemTime(12) > 0
trigger1 = Var(24)
var(24) = -1
ignorehitpause = 0

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = IfElse(!Var(22),54,IfElse(Var(22) = 1,60,65))

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 3100

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 50+(var(22)*2)
movetime = 50+(var(22)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0
[State 3000, Unguardable]
type = VarSet
trigger1 = Time = 4 && enemyNear, stateNo != [120,155]
var(48) = 50+(Var(22)*2)

[State 3000, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 1 || !Var(10)
trigger1 = Time = 0
value = IfElse (!Var(22),-1000,IfElse(Var(22) = 1, -2000, -3000))

[State 3000, N]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 3000, A]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 3000, C,P,K]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || Var(10) = 6 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17))
trigger1 = Time = 0
value = -3000
[State 3000, A]
type = PowerAdd
triggerall = Var(30)
trigger1 = Time = 0
value = -3000
[State 3000, N-MAX]
type = PowerAdd
triggerall = Var(29)
trigger1 = Time = 0
value = -1000

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(17) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(29) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(30) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
fvar(14) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !Var(31) && PrevStateNo != [3000,3999]
trigger1 = Time = 4
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 150)),ifElse(!Var(22), 128, ifelse(Var(22) = 1, 50, 50)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3000, Helper]
type = Helper
trigger1 = Time = 4
ID = 8000
name = "Super"
pos = ceil(7*Const(size.xscale)),ceil(-77*Const(size.yscale))
postype = P1
stateno = ifElse((Var(10) = [4,6]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 1020, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(2) = 0
statetype = A
[State 1020, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(5) = 0
statetype = S

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S9,3
persistent = 0
channel = 0

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S200,5
persistent = 0
channel = 16
loop = 1
[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(12) = 0
value = S200,3
persistent = 0
channel = 1

[State 1100, Helper]
type = Helper
trigger1 = AnimElemTime(2) = 0
helpertype = Normal
name = "Bolt"
ID = 3104
stateno = 3104
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .5*Const(size.xscale)
size.yscale = .5*Const(size.yscale)
persistent = 0
supermovetime = IfElse(!Var(22),49,IfElse(Var(22) = 1,55,60))
[State 1100, Helper]
type = Helper
trigger1 = AnimElemTime(13) = 1
helpertype = Normal
name = "Proj"
ID = 3105
stateno = 3105
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = Const(size.xscale)
size.yscale = Const(size.yscale)
persistent = 0

[State 3100, ChangeAnim]
type = ChangeAnim
triggerall = Time > 0
trigger1 = Var(24) <= 0
value = 3150
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = Anim = 3150 && AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Lightning
[Statedef 3104]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1004, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = e||(var(22) := root,Var(22))
value = 2120;+var(22)

[State 1004, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
pos = 0,0

[State 1104, Safe]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1004, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 2105
trigger1 = root, Anim = 3150
trigger2 = (parent, StateNo != 3100)
trigger3 = (parent, movetype = H)
trigger4 = root, Time = 0
value = 2105

[State 1105, DestroySelf]
type = DestroySelf
trigger1 = Anim = 2105 && AnimTime = 0

;----------------------------------------------------------------------------------
; Projectile
[Statedef 3105]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 220, VarSet]
type = Null
trigger1 = e||(fvar(10) := parent,FVar(10))
trigger1 = e|| (var(21) := parent,Var(21))
trigger1 = e|| (var(22) := parent,Var(22))
trigger1 = e|| (var(28) := parent,Var(28))
trigger1 = e|| (var(29) := parent,Var(29))
trigger1 = e|| (var(30) := parent,Var(30))
trigger1 = e|| (var(30) := parent,Var(31))
trigger1 = e|| (var(40) := parent,Var(40))
trigger1 = e|| (var(41) := parent,Var(41))
trigger1 = e|| (var(51) := parent,Var(51))
trigger1 = e|| (var(22) := parent,Var(59))

[State 1004, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
pos = 0,0

[State 1105, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 2130

[State 1105, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NP,SP,HP
time = -1
[State 1105, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = stateno;stateno+1
time = -1
ignorehitpause = 1

[State 1005, This is for fossils]
type = Projectile
triggerall = !root, numProjID(3100)
trigger1 = Anim = 2150
ProjID = 3100
projanim = anim
projhitanim = -1
projremanim = -1
projscale = 0,0
projpriority = 0
projremovetime = 5
postype = p1
velocity = 0
offset = 0
ownpal = 1
ignorehitpause = 0
[State 1105, Projectile]
type = Hitdef
triggerall = !root, FVar(18) && (root, FVar(19) < 18 || root, FVar(13))
trigger1 = 1
attr = S, HP
damage = ceil(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),ceil(ifElse((21/8*FVar(10))<7,7,(21/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
pausetime = 0,ceil(9*(2-(Var(30)>0))/2)
sparkno = -1
guard.sparkno = -1
sparkxy = 65535,65535
yaccel = .5
hitsound = S2,10
guardsound = S5,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
guard.ctrltime = 9
ground.velocity = -4, -6.921875
guard.velocity = -8.125
air.velocity = -4, -6.921875
airguard.velocity = -5.33,-1
air.type = Low
air.hittime = 10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ignorehitpause = 1
persistent = 1
getpower = 0,0
givepower = 35,35
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2
guard.dist = 600
ID = 3105

[State 1100, Explod]
type = Explod
trigger1 = MoveHit=1
anim = 8220+(random%8)
pos = 10,-77
postype = p2
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1
[State 1100, Explod]
type = Explod
trigger1 = MoveGuarded=1
anim = 8105
pos = 10,-77
facing = target,facing
postype = p2
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 180, Counter]
type = VarSet
trigger1 = P2MoveType = A
var(21) = 1

[State 180, 1]
type = ParentVarSet
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
trigger2 = projhit = 1
fvar(32) = 1
ignorehitpause = 1
[State 180, 1]
type = ParentVarSet
triggerall = !root,Var(37)
triggerall = p2movetype = H
trigger1 = movehit
fvar(32) = ifElse(Var(21),-2,2)
ignorehitpause = 1

[State 1005, ParentVarSet]
type = ParentVarSet
trigger1 = MoveHit
fvar(3) = ifElse(P2StateType=A,3,4)

[State 180, 1]
type = ParentVarSet
trigger1 = Var(28) = 2 && Var(59) = 3 && (FVar(32) = 1 || FVar(32) = -2)
trigger2 = Var(28) = 3 && Var(59) = 3
trigger3 = Var(28) = 4 && Var(59) = [2,3]
trigger4 = Var(31) && Var(59) = 3
var(3) = 1
ignorehitpause = 1

[State 1005, Helper]
type = Helper
triggerall = root, FVar(32) = 1 || root, FVar(32) = -2
trigger1 = MoveHit=1;root,Var(50)=3;root, ProjHitTime(1105) = 1
ID = 8130
name = "COUNTER HIT EFFECT"
pos = 10,-77
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 1005, I give up]
type = ParentVarSet
trigger1 = var(50)
var(50) = var(50)
[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(50) = 3
ignorehitpause = 1
[State -2, Combo]
type = VarSet
trigger1 = MoveGuarded
trigger2 = ProjGuarded = 1
var(50) = 4
ignorehitpause = 1

[State -2, Combo]
type = ParentVarAdd
trigger1 = movehit
var(51) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarAdd
triggerall = !parent,Var(37)
triggerall = p2movetype = H
trigger1 = movehit
var(47) = 5000
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
triggerall = !parent,Var(37)
trigger1 = movehit && p2movetype = H
trigger2 = parent,MoveType = H
var(37) = 1
ignorehitpause = 1
persistent = 0
[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,Var(51) < 2
trigger1 = moveguarded
var(47)=-20
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,Var(51) < 2
triggerall = Var(21) = 0
triggerall = p2movetype = H
trigger1 = movehit
var(47)=500
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,Var(51) < 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
var(47)=3001
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
var(47)=1000
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = roundstate = 2
triggerall = parent,Var(51) >= 2
trigger1 = movehit
var(47)=ifelse(parent,Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = 1
fvar(12) = 0
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = MoveHit
fvar(12) = 3
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = MoveGuarded
fvar(12) = 4
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = !NumHelper(8305)
trigger1 = MoveHit
id = 8305
name = "SparkEffect_KnockBack"
pos =0,0
postype = P2
stateno = 8305
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8305)
trigger1 = MoveHit
id = 8305
name = "SparkEffect_KnockBack"
pos =0,0
postype = P2
stateno = 8305
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root, StateNo = 3100 && root, Time < 4
value = 1
ignorehitpause = 0

[State 1105, VarSet]
type = VarSet
trigger1 = numTarget(3105)
var(2) = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = moveContact
ignorehitpause = 1

[State 180, Counter]
type = VarSet
triggerall = Var(21)
trigger1 = P2MoveType != A
var(21) = 0

[State 1105, DestroySelf]
type = DestroySelf
trigger1 = root, movetype = H
trigger2 = root, Anim != 3100
trigger3 = Anim = 1 && numHelper(3105) > 1

[Statedef 3106]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1

[State 1106, DestroySelf]
type = DestroySelf
trigger1 = !Time

;----------------------------------------------------------------------------------
; Zeus Major
[Statedef 3200]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
facep2 = 1
juggle = 0
anim = 3200

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = 2

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 65

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 54
movetime = 54
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0
[State 3000, Unguardable]
type = VarSet
trigger1 = Time = 4 && enemyNear, stateNo != [120,155]
var(48) = 54

[State 3100, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 0 || Var(10) = 1
trigger1 = Time = 0
value = -3000
[State 3100, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 3100, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 3100, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || Var(10) = 6 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17))
trigger1 = Time = 0
value = -3000
[State 3100, PowerAdd]
type = PowerAdd
triggerall = Var(30)
trigger1 = Time = 0
value = -3000
[State 3100, PowerAdd]
type = PowerAdd
triggerall = Var(29)
trigger1 = Time = 0
value = -1000

[State 3100, VarSet2]
type = VarSet
trigger1 = Time = 0
var(17) = 0
[State 3100, VarSet2]
type = VarSet
trigger1 = Time = 0
var(29) = 0
[State 3100, VarSet2]
type = VarSet
trigger1 = Time = 0
var(30) = 0
[State 3100, VarSet2]
type = VarSet
trigger1 = Time = 0
fvar(14) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !Var(31) && PrevStateNo != [3000,3999]
trigger1 = Time = 3
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 150)),ifElse(!Var(22), 128, ifelse(Var(22) = 1, 50, 50)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3000, Helper]
type = Helper
trigger1 = Time = 4
ID = 8000
name = "Super"
pos = ceil(-24*Const(size.xscale)),ceil(-77*Const(size.yscale))
postype = P1
stateno = ifElse((Var(10) = [4,6]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = Time = 4
value = S8,23
persistent = 0
channel = 0

[State 102, Explod]
type = Explod
trigger1 = AnimElemTime(56) = 0
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5
[State 102, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 56
value = S40,3
channel = 13

[State 210, HP]
type = PlaySnd
triggerall = Anim = 3200
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
trigger3 = AnimElem = 16
trigger4 = AnimElem = 21
trigger5 = AnimElem = 25
trigger6 = AnimElem = 53
trigger7 = AnimElem = 60
value = S0,2
channel = 1
[State 210, MP]
type = PlaySnd
triggerall = Anim = 3200
trigger1 = AnimElem = 42
value = S0,1
channel = 1
[State 210, HK]
type = PlaySnd
triggerall = Anim = 3200
trigger1 = AnimElem = 37
value = S1,2
channel = 1

[State 3200, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 0
x = 18
[State 3200, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) > 0 && AnimElemTime(7) < 0
x = ifElse(Vel X > 0, -3.0625, 0)
[State 3200, VelSet]
type = VelSet
triggerall = Vel X <= 0
trigger1 = AnimElemTime(4) > 0
x = 0

[State 3200, VelSet]
type = VelSet
trigger1 = AnimElemTime(9) = 0
x = 1.875
[State 3200, VelSet]
type = VelSet
trigger1 = AnimElemTime(15) = 0
x = 2.25
[State 3200, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(9) > 0 && AnimElemTime(56) < 0
x = ifElse(Vel X > 0, -.125, 0)

[State 3200, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(37) = 0
trigger2 = AnimElemTime(40) = 0
trigger3 = AnimElemTime(16) = 0
trigger4 = AnimElemTime(16) = 3
trigger5 = AnimElemTime(18) = 0
trigger6 = AnimElemTime(26) = 0
x = 4
[State 3200, PosAdd]
type = PosAdd
trigger1 = AnimElemTime(20) = 0
trigger2 = AnimElemTime(21) = 0
trigger3 = AnimElemTime(22) = 0
trigger4 = AnimElemTime(36) = 0
trigger5 = AnimElemTime(37) = 0
x = 8

[State 3200, PosAdd]
type = null;VelSet
trigger1 = AnimElemTime(37) = 1
trigger2 = AnimElemTime(40) = 1
trigger3 = AnimElemTime(16) = 1
trigger4 = AnimElemTime(17) = 0
trigger5 = AnimElemTime(18) = 1
trigger6 = AnimElemTime(20) = 1
trigger7 = AnimElemTime(21) = 1
trigger8 = AnimElemTime(22) = 1
trigger9 = AnimElemTime(26) = 1
trigger10 = AnimElemTime(36) = 1
trigger11 = AnimElemTime(37) = 1
x = 0

[State 3200, VelSet]
type = VelSet
trigger1 = AnimElemTime(56) = 0
x = 11
[State 3200, VelMul]
type = VelAdd
trigger1 = AnimElemTime(56) > 0
x = ifElse(Vel X <= 0,0,-0.625)
[State 3200, VelSet]
type = VelSet
trigger1 = AnimElemTime(60) = 0
x = 0

[State 3000, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || FVar(13) || Var(25))
trigger1 = AnimElem = 4
attr = S, HA
damage = floor(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),floor(ifElse((56/8*FVar(10))<7,7,(56/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 12,11
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-56)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
p1facing = 1
p2facing = 1
ID = 3200
[State 3000, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || FVar(13) || Var(25))
trigger1 = AnimElem = 10
attr = S, HA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),floor(ifElse((42/8*FVar(10))<7,7,(42/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 12,11
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-81)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
p1facing = 1
p2facing = 1
ID = 3201
[State 3000, 3]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || FVar(13) || Var(25))
trigger1 = AnimElem = 16
attr = S, HA
damage = floor(ifElse((49*FVar(10))<7,7,(49*FVar(10)))),floor(ifElse((49/8*FVar(10))<7,7,(49/8*FVar(10))))
animtype = Heavy
guardflag = HA
hitflag = MAF
priority = 7, Hit
pausetime = 12,11
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
p1facing = 1
p2facing = 1
ID = 3200
[State 3000, 4]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || FVar(13) || Var(25))
trigger1 = AnimElem = 22
attr = S, HA
damage = floor(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),floor(ifElse((56/8*FVar(10))<7,7,(56/8*FVar(10))))
animtype = Heavy
guardflag = HA
hitflag = MAF
priority = 7, Hit
pausetime = 12,11
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-35)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
p1facing = 1
p2facing = 1
ID = 3200
[State 3000, 5]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || FVar(13) || Var(25))
trigger1 = AnimElem = 26
attr = S, HA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),floor(ifElse((42/8*FVar(10))<7,7,(42/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 12,11
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-77)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 38
ground.hittime  = 38
ground.velocity = 0
guard.velocity = -8.125
guard.ctrltime = 38
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 38
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
p1facing = 1
p2facing = 1
ID = 3201
[State 3000, 6]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || FVar(13) || Var(25))
trigger1 = AnimElem = 37
attr = S, HA
damage = floor(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),floor(ifElse((84/8*FVar(10))<7,7,(84/8*FVar(10))))
animtype = Heavy
guardflag = HA
hitflag = MAF
priority = 7, Hit
pausetime = 12,11
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-35)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 24
envshake.ampl = 9
yaccel = .5
air.fall = 1
fall.recover = 0
p1facing = 1
p2facing = 1
ID = 3206
[State 3000, 7]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || FVar(13) || Var(25) || numTarget(3206))
trigger1 = AnimElem = 42
attr = S, HA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),floor(ifElse((42/8*FVar(10))<7,7,(42/8*FVar(10))))
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 12,11
sparkno = S8220+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 14
air.type = High
air.velocity = -.25,-8.671875
airguard.velocity = -6.67,-1
air.hittime = 14
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
persistent = 0
ID = 3207
[State 3000, 8]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || FVar(13) || Var(25) || numTarget(3207))
trigger1 = AnimElem = 53
attr = S, HA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),floor(ifElse((42/8*FVar(10))<7,7,(42/8*FVar(10))))
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 12,11
sparkno = S8220+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 14
air.type = High
air.velocity = -.25,-8.671875
airguard.velocity = -6.67,-1
air.hittime = 14
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = 3
persistent = 0
p2stateNo = 3251
ID = 3208
[State 3200, 9]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13) || Var(25) || numTarget(3208))
trigger1 = AnimElem = 60
attr = S, HA
damage = floor(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),floor(ifElse((84/8*FVar(10))<7,7,(84/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = 14,13
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-63)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -2,-16
guard.velocity = -5.77
guard.ctrltime = 15
air.type = Low
air.velocity = -2,-14
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
palfx.color = 60
palfx.time = 40
palfx.sinadd = 120,120,120,3
yaccel = .67
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 12
envshake.ampl = 3
ID = 3200
persistent = 0

[State 3200, Q Bounce]
type = TargetState
trigger1 = numTarget(3206)
trigger1 = Var(50) = 1
value = 3250
persistent = 0
ignorehitpause = 1
[State 3200, Low]
type = TargetState
trigger1 = numTarget(3200)
trigger1 = Var(50) = 1
value = ifElse((target,stateType=A),3820,3800)
persistent = 0
[State 3200, High]
type = TargetState
trigger1 = numTarget(3201)
trigger1 = Var(50) = 1
value = ifElse((target,stateType=A),3820,3805)
persistent = 0
[State 3200, Hit 7]
type = TargetState
trigger1 = numTarget(3207)
trigger1 = Var(50) = 1
value = ifElse((target,stateType=A),3820,3800)
persistent = 0

[State 810, Explod]
type = Explod
triggerall = numTarget(3206)
trigger1 = target, stateNo = 3250 && target, Time = 0 
ID = 3210
anim = 8310
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
sprpriority = 1
scale = .5,.5
[State 0, PlaySnd]
type = PlaySnd
triggerall = numTarget(3206)
trigger1 = target, stateNo = 3250 && target, Time = 0 
value = S5100,1
channel = 13
persistent = 0
ignorehitpause = 1

[State 3200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 58
value = S200,0
channel = 2
[State 3200, Explod]
type = Explod
trigger1 = AnimElemTime(56) = 0
anim = 2200
ID = 2200
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
removetime = -2
pausemovetime = 0
supermovetime = 0
ignorehitpause = 0
removeongethit = 1
sprpriority = 4
scale = .5*Const(size.Xscale),.5*Const(size.Yscale)

[State -2, Special Sound]
type = PlaySnd
trigger1 = numTarget(3208) && Var(50) = 1 
value = S200,8
channel = 5
persistent = 0
ignorehitpause = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
; Q style bounce
[Statedef 3250]
type    = A
physics = N
movetype= H
sprpriority = 1
ctrl = 0

[State 1502, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1502, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 5160+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 1502, VelSet]
type = VelSet
trigger1 = Time = 3
x = -.0625
y = -38
persistent = 0
[State 1502, VelAdd]
type = VelAdd
trigger1 = Time > 3
y = 2.5

[State 2502, ChangeState]
type = SelfState
triggerall = Time > 3
trigger1 = Pos Y + Vel Y >= 0
value = 5100
ctrl = 0

;------------------------
; IT'S TIME FOR GOOF TROOP, HYUCKUH
[Statedef 3251]
type    = A
physics = N
movetype= H
sprpriority = 1
ctrl = 0

[State 3251, VelSet]
type = VelSet
trigger1 = !Time
x = -1.875
y = -9

[State 3251, VelSet]
type = VelAdd
trigger1 = Time > 0
y = .375

[State 1502, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1502, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 3250+10000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
[State 0, AngleAdd]
type = AngleAdd
trigger1 = Time%2 = 0
value = -45

[State 2502, ChangeState]
type = SelfState
triggerall = Time > 1
trigger1 = Pos Y + Vel Y >= 0
value = 5100
ctrl = 0

;------------
; ALL THE CRAP BELOW IS OLD SUPER CODE THAT I AM KEEPING JUST IN CASE
[Statedef 203005]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
facep2 = 1
juggle = 0

[State 3005, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 3005+(5*Var(22))

[State 3005, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
value = S1,2
[State 3005, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = S0,1
[State 3005, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 13
value = S1,1
[State 3005, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 17
value = S0,2
[State 0, TargetBind]
type = TargetBind
trigger1 = Anim = 3005 && AnimElemTime(16) < 0
trigger2 = (Anim = [3010,3015]) && AnimElemTime(21) < 0
time = 1
id = -1
pos = 56,0

[State 3005, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Anim = [3005,3015]
trigger1 = AnimElem = 3
attr = S, HA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),floor(ifElse((35/8*FVar(10))<7,7,(35/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 0,2
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-105)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
p1facing = 1
p2facing = 1
kill = 0
p2stateno = 3800
[State 3005, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Anim = [3005,3015]
trigger1 = AnimElem = 6
attr = S, HA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),floor(ifElse((35/8*FVar(10))<7,7,(35/8*FVar(10))))
animtype = Heavy;Medium
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 0,2
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-42)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
p1facing = 1
p2facing = 1
kill = 0
p2stateno = 3805
[State 3005, 3]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Anim = [3005,3015]
trigger1 = AnimElem = 9
attr = S, HA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),floor(ifElse((21/8*FVar(10))<7,7,(21/8*FVar(10))))
animtype = Light
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 0,2
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-77)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,0
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = High
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
p1facing = 1
p2facing = 1
kill = 0
p2stateno = 3800
[State 3005, 4]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Anim = [3005,3015]
trigger1 = AnimElem = 13
attr = S, HA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),floor(ifElse((21/8*FVar(10))<7,7,(21/8*FVar(10))))
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 0,2
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-35)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = -3,-7.821533203125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
p1facing = 1
p2facing = 1
kill = 0
p2stateno = 3805

[State 3000, 5]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Anim = 3005
trigger1 = AnimElem = 16
attr = S, HA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Back
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 12,11
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-63)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.921875
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
forcestand = 1
p1facing = 1
p2facing = 1
kill = !Var(22)
[State 3000, 5]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Anim = [3010,3015]
trigger1 = AnimElem = 16
attr = S, HA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 0,2
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-63)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1
p1facing = 1
p2facing = 1
kill = !Var(22)
p2stateno = 3805

[State 3000, 6]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Anim = 3010
trigger1 = AnimElem = 21
attr = S, HA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 12,11
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2,-9.25
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = -2,-9.25
airguard.velocity = -5.33,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .1
fall = 1
air.fall = 1
fall.recover = 0
forcestand = 1
p1facing = 1
p2facing = 1
kill = !Var(22)
[State 3000, 6]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Anim = 3015
trigger1 = AnimElem = 21
attr = S, HA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Back
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 0,0
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2,-10;-2,-9.25
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = -2,-9.25
airguard.velocity = -5.33,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .1
fall = 1
air.fall = 1
fall.recover = 0
forcestand = 1
p1facing = 1
p2facing = 1
kill = !Var(22)
p2stateno = 3020

[State 3005, ChangeState]
type = ChangeState
trigger1 = Anim = 3015 && !AnimTime
value = 3010

[State 3005, ChangeState]
type = ChangeState
trigger1 = Anim = 3005 && !AnimTime
trigger2 = Anim = 3010 && !AnimTime
value = 0
ctrl = 1

;------------
; 2
[Statedef 203010]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
facep2 = 1
juggle = 0

[State 3010, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 3020

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(3) = 0
statetype = A

[State 40, Helper]
type = Helper
trigger1 = AnimElemTime(3) = 0
id = 8020
name = "Jump Effect"
pos =0,0
postype = p1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 40, Jump Sound]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = S40,4
channel = 13

[State 3005, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) = 0
x = 3.75
y = -8

[State 3005, VelSet]
type = VelSet
trigger1 = AnimElemTime(12) = 0
x = 8
y = 1.5

[State 920, 0]
type = VelAdd
trigger1 = AnimElemTime(3) > 1
y = ifElse(AnimElemTime(12)>0,2,.5)

[State 800, 1]
type = HitDef
trigger1 = !Time
attr = A, HA
hitflag = MAFL
priority = 7, Hit
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 3015
p2stateno = 3025
guard.dist = 0
numhits = 0

;------------
; 2
[Statedef 203015]
type    = A
physics = N
movetype= A
ctrl = 0
velset = 0,0
facep2 = 1
juggle = 0
sprpriority = 1
anim = 3025

[State 3010, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = S8,28

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1 
value = 0
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1
time = 3
id = -1
pos = 42,-7;21,-63
[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2
time = 4
id = -1
pos = 21,-7;14,-49
[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3
time = 1
id = -1
pos = 0,-7;14,-21
[State 0, TargetBind]
type = null;TargetBind
trigger1 = AnimElem = 4
time = 1
id = -1
pos = 0,42
[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(5)>0 && AnimElemTime(25)<3
time = 1
id = -1
pos = 0,21

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 0
y = .5

[State 3000, PlaySnd]
type = PlaySnd
trigger1  = AnimElem = 4,  = 1
trigger2  = AnimElem = 6,  = 1
trigger3  = AnimElem = 8,  = 1
trigger4  = AnimElem = 10, = 1
trigger5  = AnimElem = 12, = 1
trigger6  = AnimElem = 14, = 1
trigger7  = AnimElem = 16, = 1
trigger8  = AnimElem = 18, = 1
trigger9  = AnimElem = 20, = 1
trigger10 = AnimElem = 22, = 1
trigger11 = AnimElem = 24, = 1
trigger12 = AnimElem = 26, = 1
channel = 1
value = S0,2
[State 3000, HitSound]
type = PlaySnd
trigger1  = AnimElem = 4,  = 1
trigger2  = AnimElem = 6,  = 1
trigger3  = AnimElem = 8,  = 1
trigger4  = AnimElem = 10, = 1
trigger5  = AnimElem = 12, = 1
trigger6  = AnimElem = 14, = 1
trigger7  = AnimElem = 16, = 1
trigger8  = AnimElem = 18, = 1
trigger9  = AnimElem = 20, = 1
trigger10 = AnimElem = 22, = 1
trigger11 = AnimElem = 24, = 1
trigger12 = AnimElem = 26, = 1
channel = 3
value = S3,2

[State 3000, 6]
type = HitDef
trigger1 = AnimElem = 4, = 1
trigger2 = AnimElem = 8, = 1
trigger3 = AnimElem = 12, = 1
trigger4 = AnimElem = 16, = 1
trigger5 = AnimElem = 20, = 1
trigger6 = AnimElem = 24, = 1
attr = S, HA
damage = floor(ifElse((14*FVar(10))<7,7,(14*FVar(10)))),floor(ifElse((14/8*FVar(10))<7,7,(14/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAFLD
priority = 7, Hit
pausetime = 0,0
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=0)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S-1;3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,0
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = 0,0
airguard.velocity = -5.33,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .1
fall = 1
air.fall = 1
fall.recover = 0
p1facing = 1
p2facing = 1
kill = 0
p2stateno = 3880
[State 3000, 7]
type = HitDef
trigger1 = AnimElem = 6, = 1
trigger2 = AnimElem = 10, = 1
trigger3 = AnimElem = 14, = 1
trigger4 = AnimElem = 18, = 1
trigger5 = AnimElem = 22, = 1
attr = S, HA
damage = floor(ifElse((14*FVar(10))<7,7,(14*FVar(10)))),floor(ifElse((14/8*FVar(10))<7,7,(14/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAFLD
priority = 7, Hit
pausetime = 0,0
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=0)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S-1;3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,0
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = 0,0
airguard.velocity = -5.33,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .1
fall = 1
air.fall = 1
fall.recover = 0
p1facing = 1
p2facing = 1
kill = 0
;ID = 3007
;chainID = 3007
p2stateno = 3880
[State 3000, 8]
type = HitDef
trigger1 = AnimElem = 26, = 1
attr = S, HA
damage = floor(ifElse((14*FVar(10))<7,7,(14*FVar(10)))),floor(ifElse((14/8*FVar(10))<7,7,(14/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAFLD
priority = 7, Hit
pausetime = 0,0
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=0)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S-1;3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,0
guard.velocity = 0
guard.ctrltime = 20
air.type = Low
air.velocity = 0,0
airguard.velocity = -5.33,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .1
fall = 1
air.fall = 1
fall.recover = 0
p1facing = 1
p2facing = 1
kill = 1
;ID = 3007
;chainID = 3007
fall.xvelocity = -4;-2.5
p2stateno = 3900

[State 810, PlaySnd]
type = PlaySnd
;triggerall = numTarget
trigger1 = Time = 70;Target, Pos Y + Vel Y >= 0
value = S5100,1
channel = 13
persistent = 0
[State 810, Explod]
type = Explod
triggerall = numTarget
trigger1 = Target, Pos Y + Vel Y >= 0
ID = 8310
anim = 8310
pos = 0,0
postype = p2
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
sprpriority = 1
scale = .5,.5
persistent = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(28) > 0
y = .5

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElemTime(28) > 0
trigger1 = Vel Y + Pos Y >= 0
value = 3050

;----------------------------------------------------------------------------------
; Demon's Wrath Land State
[Statedef 203050]
type    = S
physics = S
ctrl = 0
anim = 3050
velset = 0,0

[State 52, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,2
channel = 13

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------
; P2 Hit
[Statedef 203020] 
type    = A
physics = N
movetype= H
ctrl = 0
juggle = 0

[State 1028, 1]
type = NotHitBy
trigger1 = 1
value = , NA,NP,SA,SP,HP

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1 
value = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !Time
x = GetHitVar(xvel)*facing
y = GetHitVar(yvel)

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 3010, ChangeAnim]
type = ChangeAnim2
trigger1 = !Time
value = 3030

;------------
; P2 Hit (caught)
[Statedef 203025] 
type    = A
physics = N
movetype= H
ctrl = 0
velset = 0,0
juggle = 0
sprpriority = 2

[State 1028, 1]
type = NotHitBy
trigger1 = 1
value = , NA,NP,SA,SP,HP

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1 
value = 0
ignorehitpause = 1

[State 0, VelAdd]
type = VelSet
trigger1 = Time = 8
y = 4
[State 0, VelAdd]
type = VelAdd
trigger1 = Time > 8
y = 1

[State 3010, ChangeAnim]
type = ChangeAnim2
trigger1 = !Time
value = 3040

;===============================================================================
;                                HIT STATE RIPOFFS
;===============================================================================
;---------------------------------------------------------------------------
; HITG_SHAKE_High
[Statedef 3800]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 5000+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3801 ;HITG_SLIDE

;---------------------------------------------------------------------------
; HITG_SHAKE_Low
[Statedef 3805]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 5010+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3806 ;HITG_SLIDE

;---------------------------------------------------------------------------
; HITG_SLIDE_High
[Statedef 3801]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITG_SLIDE_Low
[Statedef 3806]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5015+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 3820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype) + 100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && ((SelfAnimExist(5047 + GetHitVar(animtype))) || (SelfAnimExist(105047 + GetHitVar(animtype)) && Name = "Gill" && AuthorName = "GM" && Facing = -1))
value = 5047 + GetHitVar(animtype) + 100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 3830

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 3830]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 4]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0 ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 3850 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 3835 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 3835]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 1]
type = ChangeAnim
trigger1 = Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger1 = Time = 0
trigger1 = SelfAnimExist(105035)
trigger1 = Anim != [105051, 105059] ;Not if in hit up anim
trigger1 = Anim != 105090 ;Not if hit off ground anim
trigger1 = Anim != [10501, 105059)
value = 105035

[State 5035, 2]
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5035, 4]
type = ChangeState
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0 ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0  ;No transition anim
trigger4 = Anim != 5035 ;.
value = 3850 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 3850]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0  ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger1 = AnimTime = 0
trigger1 = Anim = 105035
trigger2 = Time = 0  ;If no transition anim
trigger2 = Anim != 105035
trigger2 = (Anim != [105051, 105059]) && (Anim != [105061, 105069])
trigger2 = Anim != 105090 ;Not if hit off ground anim
value = 105050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = (anim = [5050,5059]) || (Name = "Gill" && AuthorName = "GM" && Facing = -1 && anim = [105050, 105059])
trigger1 = Vel Y >= ifelse(anim = 5050+(Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5050, 6]
type = SelfState
;triggerall = prevStateNo = 3161
trigger1 = Vel Y + Pos Y >= 0
value = 5100

[State 5050, 6]
type = null;ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 3900 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 3880]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse(GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 2]
type = VarAdd
trigger1 = Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger1 = time = 0
trigger1 = (anim = [105081,105089]) || (anim = [105111,105119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)
trigger1 = !SelfAnimExist(5090+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1))
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 3881 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 3830 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 3881]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 3910 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 3900]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = ((anim != [5051,5059]) && (anim != [5061,5069]))
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
triggerall = time = 0
trigger1 = ((anim != [105051,105059]) && (anim != [105061,105069]))
trigger2 = !SelfAnimExist(105100 + (anim % 10))
value = 105100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = ((anim != [5051,5059]) && (anim != [5061,5069]))
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger1 = time = 0
trigger1 = ((anim != [105051,105059]) && (anim != [105061,105069]))
trigger1 = SelfAnimExist(105100 + (anim % 10))
value = 105100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 3910 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 3901

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 3901]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
triggerall = time = 0
trigger1 = anim != [105101,105109]
trigger2 = !SelfAnimExist(105160 + (anim % 10))
value = 105160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
triggerall = time = 0
trigger1 = anim = [105101,105109]
trigger1 = SelfAnimExist(105160 + (anim % 10))
value = 105160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = time > 0
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 3910

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 3910]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
persistent = 0
trigger1 = SelfAnimExist(105110 + (anim % 10))
trigger1 = anim = [105081,105089]
value = 105110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
triggerall = time = 0
triggerall = anim != [105110,105119] ;Not already changed anim
trigger1 = anim != [105161,105169]
trigger2 = !SelfAnimExist(105170 + (anim % 10))
value = 105170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
triggerall = time = 0
triggerall = anim != [105110,105119] ;Not already changed anim
trigger1 = anim = [105161,105169]
trigger1 = SelfAnimExist(105170 + (anim % 10))
value = 105170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9]
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
value = 5110 + (anim % 10)

[State 5110, 10]
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
value = 5110

[State 5110, 9]
type = ChangeAnim
persistent = 0
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
triggerall = anim = [105171,105179]
triggerall = SelfAnimExist(105110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
value = 105110 + (anim % 10)

[State 5110, 10]
type = ChangeAnim
persistent = 0
triggerall = Name = "Gill" && AuthorName = "GM" && Facing = -1
triggerall = Anim != [105111,105119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
value = 105110

[State 5110, 11]
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
trigger3 = (Anim = [5110,5119]) || (Name = "Gill" && AuthorName = "GM" && Facing = -1 && Anim = [105111,105119])
value = 5150

[State 5110, 11]
type = SelfState
trigger1 = time = 70
value = 5120

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

;===============================================================================
;                                    ABILITIES
;===============================================================================
;----------------------------------------------------------------------------------
; Roll
[Statedef 300]
type    = S
physics = N
movetype= I
anim = 300
ctrl = 0
velset = 0,0

[State 300, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S8,ifElse(Random%2=0,1,15)
channel = 0

[State 300, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,2
channel = 13

[State 300, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 5

[State 300, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 300, HitBy]
type = HitBy
trigger1 = Time <= 20
value = SCA,NT,ST,HT

[State 300, PlayerPush]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0

[State 300, AfterImage]
type = AfterImage
triggerall = !Var(30)
trigger1 = AnimElem = 2
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 300, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Dodge
[Statedef 310]
type = S
physics = S
movetype =  I
anim = 310
ctrl = 0
velset = 0,0

[State 310, SprPriority]
type = SprPriority
trigger1 = 1
value = -1

[State 310, PosSet]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 310, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,0
channel = 1

[State 310, PlaySnd2]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,0
channel = 0

[State 310, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 310, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NT,ST,HT

[State 310, AfterImage]
type = AfterImage
triggerall = !Var(30)
trigger1 = AnimElem = 1
time = 26
length = 10
FrameGap = 6
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 310, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Counter Movement (forward)
[Statedef 320]
type = S
physics = N
movetype =  I
ctrl = 0
velset = 0,0

[State 320, 1]
type = VarAdd
trigger1 = time = 0
var(47)=500
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 0 || Var(10) = 1 || Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 3 || Var(10) = 4 || Var(10) = 6
trigger1 = Time = 0
value = -3000

[State 2800, VarSet]
type = VarSet
trigger1 = !Time
fvar(14) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(19) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(17) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(30) = 0

[State 320, PalFX]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 320, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S4000,1
channel = 1

[State 320, Helper]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifElse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
persistent = 0

[State 320, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 320, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 320, 4]
type = ChangeAnim
trigger1 = Time <= 12
value = Anim

[State 320, 4]
type = ChangeAnim
trigger1 = Time = 13
value = 300

[State 320, PlaySnd]
type = Playsnd
triggerall = Anim = 300
trigger1 = AnimElem = 1
value = ifElse(random<500,180,181),0
channel = 0

[State 320, VelSet]
type = VelSet
triggerall = Anim = 300
trigger1 = AnimElem = 2
x = 4.5

[State 320, VelSet]
type = VelSet
triggerall = Anim = 300
trigger1 = AnimElem = 8
x = 0

[State 320, HitBy]
type = HitBy
trigger1 = Time <= 32
value = SCA, NT,ST,HT

[State 320, PlayerPush]
type = PlayerPush
triggerall = Anim = 300
trigger1 = AnimElemTime(2) > 0
value = 0

[State 320, AfterImage]
type = AfterImage
triggerall = Anim = 300
trigger1 = AnimElem = 3
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 320, ChangeState]
type = ChangeState
triggerall = Anim = 300
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Counter Movement (back)
[Statedef 330]
type = A
physics = N
ctrl = 0
velset = 0,0

[State 330, 1]
type = VarAdd
trigger1 = Time = 0
var(47)=-1000
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 0 || Var(10) = 1 || Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 3 || Var(10) = 4 || Var(10) = 6
trigger1 = Time = 0
value = -3000

[State 2800, VarSet]
type = VarSet
trigger1 = !Time
fvar(14) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(19) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(17) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(30) = 0

[State 330, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 330, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 22

[State 330, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S4000,1
channel = 1

[State 330, Helper]
type = Helper
trigger1 = Time = 0
ID = 8070
name = "GUARD CANCEL"
pos = 10,-ifElse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
persistent = 0

[State 330, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 330, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 330, Width]
type = Width
trigger1 = 1
edge = 1,0

[State 330, 4]
type = ChangeAnim
trigger1 = Time <= 12
value = Anim

[State 330, 4]
type = ChangeAnim
trigger1 = Time = 13
value = 105

[State 330, AfterImage]
type = Afterimage
triggerall = Anim = 105
trigger1 = AnimElem = 2
time = 22
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 330, PlaySnd]
type = PlaySnd
triggerall = Anim = 105
trigger1 = AnimElem = 1
value = S40,0
channel = 13

[State 330, Explod]
type = Explod
triggerall = Anim = 105
trigger1 = AnimElem = 1
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
;bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 330, 1]
type = VelSet
triggerall = Anim = 105
trigger1 = AnimElem = 2
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)
[State 330, 1]
type = VelMul
triggerall = Anim = 105
trigger1 = AnimElemTime(2) > 0
x = .98
[State 330, 1]
type = VelAdd
triggerall = Anim = 105
trigger1 = AnimElemTime(2) > 0
y = .65

[State 330, 3]
type = ChangeState
triggerall = Anim = 105
triggerall = AnimElemTime(2) > 1
trigger1 = Pos Y + Vel Y >= 0
value = 106

;----------------------------------------------------------------------------------
; Power Charge
[Statedef 900]
type = S
physics = S
movetype= I
anim = 900
ctrl = 0
velset = 0,0

[State 900, PlaySnd]
type = PlaySnd
triggerall = Anim = 900
trigger1 = Time = 1
value = S8,9
channel = 0

[State 900, PowerAdd]
type = PowerAdd
triggerall = Anim = 900
trigger1 = 1
value = 2*((Time+10)/10)

[State 900, ChangeAnim]
type = ChangeAnim
triggerall = Time > 4
trigger1 = (Command != "hold_c" || Command != "hold_z") || (power >= 1000 && Var(10) = 4) || (power >= 3000 && Var(10) = 0)
value = 901
persistent = 0

[State 900, StopSnd]
type = StopSnd
trigger1 = Anim = 901
channel = 0
persistent = 0

[State 900, Helper]
type = Helper
trigger1 = !NumHelper(8500)
trigger1 = Time = 1
id = 8500
name = "Charge"
pos =0,0
postype = P1
stateno = 8500
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 900, CtrlSet]
type = CtrlSet
triggerall = Ctrl = 0
trigger1 = Anim = 901
value = 1

[State 900, ChangeState]
type = ChangeState
trigger1 = Anim = 901 && AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; MAX Activation
[Statedef 960]
type = S
physics = S
movetype= I
anim = 950
ctrl = 0
velset = 0,0

[State 960, 1]
type = Explod
trigger1 = Time = 6
anim = 8415
pos = 0,-60
postype = p1
bindtime = -1
sprpriority = 4
ontop = 0
ownpal = 1
scale = .5,.5
pausemovetime = -1

[State 960, 2]
type = PlaySnd
trigger1 = Time = 6
value = S6000,2
channel = 7

[State 960, 2]
type = PlaySnd
trigger1 = Time = 3;Time = 6
value = S8,0
channel = 0

[State 960, 4]
type = PowerAdd
trigger1 = Time = 6
value = -1000

[State 960, 5]
type = VarSet
trigger1 = Time = 6
var(29) = 675

[State 960, 5]
type = VarSet
trigger1 = Time = 6
var(18) = 1

[State 960, Super]
type = Helper
trigger1 = Time = 6
ID = 6170
name = "Time"
pos =0,0
postype = P1
stateno = 6170
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
facing = facing*IfElse(teamside=1,1,-1)

[State 960, CtrlSet]
type = CtrlSet
trigger1 = Time = 16
value = 1

[State 960, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Standing Custom Combo
[Statedef 970]
type = S
physics = S
movetype = I
anim = 970
ctrl = 0
velset = 0,0

[State 970, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 37
movetime = 37
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, Helper]
type = Helper
trigger1 = Time = 4
persistent = 0
ID = 8080
name = "custcom"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999999
pausemovetime = 99999999

[State 970, 2]
type = PlaySnd
trigger1 = Time = 4
value = S8,20
channel = 0

[State 970, AfterImage]
type = AfterImage
trigger1 = Time = 4
time = 9999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 970, 5]
type = VarSet
trigger1 = Time >= 4
var(30) = 334

[State 970, 5]
type = VarSet
trigger1 = Time = 0
var(31) = 1

[State 970, 5]
type = VarSet
trigger1 = AnimTime = 0
var(43) = 3000

[State 970, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 50

[State 970, 1]
type = PowerAdd
trigger1 = AnimTime = 0
value = -3000
ignorehitpause = 1

[State 970, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Aerial Custom Combo
[Statedef 975]
type = A
movetype = I
physics = N
anim = 975
ctrl = 0

[State 975, PosFreeze]
type = PosFreeze
trigger1 = 1

[State 975, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 37
movetime = 37
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 975, Helper]
type = Helper
trigger1 = Time = 4
persistent = 0
ID = 8080
name = "custcom"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = Normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999999
pausemovetime = 99999999

[State 975, 2]
type = PlaySnd
trigger1 = Time = 4
value = S8,20
channel = 0

[State 975, AfterImage]
type = AfterImage
trigger1 = Time = 4
time = 9999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 970, 5]
type = VarSet
trigger1 = Time >= 4
var(30) = 334

[State 970, 5]
type = VarSet
trigger1 = Time = 0
var(31) = 1

[State 970, 5]
type = VarSet
trigger1 = AnimTime = 0
var(43) = 3000

[State 975, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 50

[State 975, PowerAdd]
type = PowerAdd
trigger1 = AnimTime = 0
value = -3000
ignorehitpause = 1

[State 975, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;----------------------------------------------------------------------------------
; Counter Attack
[Statedef 2800]
type    = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0

[State 180, 1]
type = VarAdd
trigger1 = Time = 0
var(47)=1000
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 1 || Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 3 || Var(10) = 4 || Var(10) = 6
trigger1 = Time = 0
value = -3000
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(17) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(30) = 0

[State 902, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 17

[State 1100, Effect]
type = PlaySnd
trigger1 = Time = 1
value = S4000,1
channel = 1

[State -3,Super]
type = Helper
trigger1 = Time = 0
ID = 8070
name = "GUARD CANCEL"
pos = 10,-ifElse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
persistent = 0
size.xscale = 1
size.yscale = 1

[State 2800, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 1,0
player = 5,5

[State 190, 4]
type = ChangeAnim
trigger1 = Time <= 12
value = anim
[State 190, 4]
type = ChangeAnim
trigger1 = Time = 13
value = 2800

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = Time = 13
value = S8,11
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S1,2
channel = 1

[State 200, VelSet]
type = VelSet
trigger1 = Anim = 2800 && AnimElemTime(3) = 0
x = 4
[State 200, VelSet]
type = VelSet
trigger1 = Anim = 2800 && AnimElemTime(4) = 1
x = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(31))
trigger1 = AnimElem = 4
attr = A, SA
damage = floor(ifElse((49*FVar(10))<7,7,(49*FVar(10)))),0
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -4,-6.59375
guard.velocity = -8.125
air.velocity = -4,-6.59375
air.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5
persistent = 0
getpower = 0
givepower = 35, 35
kill = 0

[State 2800, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= I
physics = N
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5201, 3]
type = VelSet
trigger1 = Time = 0
x = -6

[State 5201, 3]
type = VelMul
trigger1 = 1
x = .95

[State 5201, Explod]
type = Explod
trigger1 = Time = 1
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5

[State 5201, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S8,22
channel = 0

[State 5201, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,2
channel = 13

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; WE SUNK
[Statedef 247]
anim = 1

[State -2, VarSet]
type = VarSet
trigger1 = !Parent, Var(50)
trigger2 = !Parent, MoveContact
trigger3 = Enemy,MoveReversed = 1
var(1) = 0
[State -2, VarSet]
type = VarSet
trigger1 = Parent, Var(50) = [1,2]
trigger2 = Parent, MoveContact
var(1) = 1

[State -2, Combo]
type = VarSet
trigger1 = !parent, numTarget
trigger2 = Var(0) && parent, HitPauseTime > 0
trigger3 = !root, Var(50)
trigger4 = Enemy,MoveReversed = 1
var(0) = 0
ignorehitpause = 1
[State -2, Combo]
type = VarAdd
trigger1 = Var(1)
var(0) = 1
ignorehitpause = 1
[State -2, Combo]
type = VarSet
trigger1 = !parent, numTarget
trigger2 = !root, Var(50)
trigger3 = Enemy,MoveReversed = 1
var(2) = 0
ignorehitpause = 1
[State -2, Combo]
type = VarAdd
trigger1 = Var(1)
var(2) = 1
ignorehitpause = 1

[State -2, Intro Variable]
type = VarRandom
trigger1 = !Time
v = 3
range = 0,2

[State -2, DTC]
type = DisplayToClipboard
trigger1 = NumHelper(247)
text = "MoveContact = %d, MoveHitTime = %d"
params = Var(0), Var(2)

;---------------------------------------------------------------------------
; Statedef -3
;---------------------------------------------------------------------------
[Statedef -3]
;---------------------
; Stand
; Thanks, Warusaki3!
[State -3, Stand (trip)]
type = ChangeState
triggerall = NumHelper(10000)
triggerall = StateNo != [5000,5999]
triggerall = StateNo != [15000,15999]
trigger1 = StateType != A && helper(10000),GetHitVar(groundtype)=3
trigger1 = helper(10000),StateNo=12000 && helper(10000),Time=1
trigger2 = StateType != A && helper(10000),GetHitVar(groundtype)=3
trigger2 = helper(10000),StateNo=12001
trigger3 = StateType = A && helper(10000),GetHitVar(airtype)=3
trigger3 = helper(10000),StateNo=12000 && helper(10000),Time=1
trigger4 = StateType = A && helper(10000),GetHitVar(airtype)=3
trigger4 = helper(10000),StateNo=12001
value = 15070
ctrl = 0

[State -3, Stand (standing)]
type = ChangeState
triggerall = NumHelper(10000)
triggerall = StateNo != [5000,5999]
triggerall = StateNo != [15000,15999]
triggerall = StateType = S
trigger1 = helper(10000),StateNo=12000 && helper(10000),Time=1
trigger2 = helper(10000),StateNo=12001
value = 15000
ctrl = 0

[State -3, Stand (crouching)]
type = ChangeState
triggerall = NumHelper(10000)
triggerall = StateNo != [5000,5999]
triggerall = StateNo != [15000,15999]
triggerall = StateType = C
trigger1 = helper(10000),StateNo=12000 && helper(10000),Time=1
trigger2 = helper(10000),StateNo=12001
value = 15010
ctrl = 0

[State -3, Stand (aerial)]
type = ChangeState
triggerall = NumHelper(10000)
triggerall = StateNo != [5000,5999]
triggerall = StateNo != [15000,15999]
triggerall = StateType = A
trigger1 = helper(10000),StateNo=12000 && helper(10000),Time=1
trigger2 = helper(10000),StateNo=12001
value = 15020
ctrl = 0

[State -3, NoShadow]
type = AssertSpecial
triggerall = NumHelper(10000)
trigger1 = helper(10000),Anim != 1
flag = NoShadow
ignorehitpause = 1

;---------------------
; Sound
[State -3, Bounding Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5100 || StateNo = 5110 || StateNo = 15100
value = S5100,0
freqmul = ifElse(StateNo = 5110,0.97,1)
channel = 13
persistent = 0

[State -3, Hurt Sound]
type = PlaySnd
triggerall = Random < 500
triggerall = Time = 1
triggerall = Alive
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080 || StateNo = 5100
value = S5000,ifElse(StateNo = 5100||GetHitVar(animtype) = 2,2,ifElse(GetHitVar(animtype) = 1,1,0))
channel = 4

[State -3, Variable Height]
type = PlayerPush
triggerall = StateType = A && MoveType != H && NumEnemy
triggerall = P2BodyDist X = [-(EnemyNear,const(Size.ground.back) + EnemyNear,const(Size.ground.front)), 0]
trigger1 = P2StateType = S
trigger1 = P2Dist Y >= (EnemyNear,Const(Size.height) - 12)
trigger2 = P2StateType = C
trigger2 = P2Dist Y >= (EnemyNear,Const(Size.height) - 28)
trigger3 = P2StateType = L
trigger3 = P2Dist Y >= 12
value = 0
ignorehitpause = 1

[State -3, Bounding Sound]
type = StopSnd
trigger1 = PrevStateNo = [190,199]
trigger1 = StateNo = 0
channel = 0
persistent = 0

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]
;---------------------------------------------------------------------------
; DTC
[State -2, Display to Clipboard]
type = DisplaytoClipboard
trigger1 = (GameTime%100) = 0
ignorehitpause = 1
text = "cvsbluestreak by Diepod & Jesuszilla"

[State -2, Display to Clipboard]
type = DisplaytoClipboard
trigger1 = (GameTime%400) = 0
ignorehitpause = 1
text = "http://www.trinitymugen.net/"

[State -2, DisplaytoClipboard]
type = null;DisplaytoClipboard
trigger1 = (GameTime%100) = 0
ignorehitpause = 1
text = "Var(20) = %d, Var(5) = %d, Var(6) = %d, Var(7) = %d, Var(8) = %d"
params = Var(20), Var(5), Var(6), Var(7), Var(8)

[State - 2, DTC]
type = Null;DisplaytoClipboard
trigger1 = (GameTime%200) = 0
ignorehitpause = 1
text = "Var(9) = %d, Var(10) = %d, Var(11) = %d, Var(12) = %d, Var(13) = %d"
params = Var(9), Var(10), Var(11), Var(12), Var(13)

[State -2, DTC]
type = Null;DisplaytoClipboard
trigger1 = (GameTime%300) = 0
ignorehitpause = 1
text = "Var(14) = %d, Var(15) = %d, Var(16) = %d, Var(30) = %d"
params = Var(14), Var(15), Var(16), Var(47)

[State -2, DTC]
type = null;DisplayToClipboard
trigger1 = 1
text = "Combo = %d, Var(11) = %d, Cornerpush = %f, Var(56) = %d, Reflector = %d"
params = Var(50), Var(11), FVar(39), Var(56), Var(55)

[State -2, juggle info]
type = null;DisplayToClipboard
trigger1 = 1
text = "SC Juggle = %f Limit  = %f Juggle = %f\nshit = %f exception = %d"
params = FVar(16), FVar(18), FVar(19), FVar(13), Var(25)

[State -2, misc]
type = DisplayToClipboard
trigger1 = 1
text = "Unguardable = %d, GP = %f"
params = Var(48), FVar(20)

[State -2, DTC]
type = null;DisplayToClipboard
trigger1 = 1
text = "Var(3) = %d, stateNo = %d, P2stateNo = %d, Hit = %f"
params = Var(3), Var(28), Var(59), fvar(32)

;----------------------------------------------------------------------------------
; Dizzy FX
[State -2]
type = null;Helper
trigger1 = !NumHelper(777)
trigger1 = RoundState = 2
helperType = normal
name = "dizzy"
ID = 777
pos = Const(size.head.pos.X)+10,Const(size.head.pos.Y)
postype = p1
facing = 1
StateNo = 777
keyctrl = 1
ownpal = 1
supermoveTime = 65535
pausemoveTime = 65535

;----------------------------------------------------------------------------------
; Special Interactions
[State -2, Reset]
type = VarSet
trigger1 = roundstate = 0
var(26) = 0

[State -2, Rugal]
type = VarSet
triggerall = NumEnemy
trigger1 = Enemy, Name = "cvsrugal" || Enemy, Name = "Rugal" || Enemy, Name = "rugal bernstein" || Enemy, Name = "rugal98" || Enemy, Name = "Rugal.B"
trigger2 = Enemy, Name = "Tin 2002_rugal" || Enemy, Name = "rugal94" || Enemy, Name = "Rugal94(BOSS)" || Enemy, Name = "Omega Rugal" || Enemy, Name = "omega rugal98"
trigger3 = Enemy, Name = "Rugal_TLE" || Enemy, Name = "cvsrugal_normal" || Enemy, Name = "cvsrugal_ex" || Enemy, Name = "cvsg_rugal" || Enemy, Name = "Tin G_rugal"
trigger4 = Enemy, Name = "God Rugal" || Enemy, Name = "Segalow" || Enemy, Name = "rugal_B" || Enemy, Name = "Rugal CvS" || Enemy, Name = "Rugal.B"
trigger5 = Enemy, Name = "omega-rugal" || Enemy, Name = "D-Rugal" || Enemy, Name = "Rugal_Excrement"
var(26) = 1

[State -2, Heroes]
type = VarSet
triggerall = NumEnemy
; baman
trigger1 = Enemy, Name = "Batman" || Enemy, Name = "CN_Batman" || Enemy, Name = "Goddamn_Batman" || Enemy, Name = "Normal_Batman" || Enemy, Name = "Batman_West"
trigger2 = Enemy, Name = "DKR Batman" || Enemy, Name = "infinitybatman" || Enemy, Name = "Batman Beyond" ||  Enemy, Name = "Iron Batman" || Enemy, Name = "Batzarro"
trigger3 = Enemy, Name = "Robin" || Enemy, Name = "Nightwing" || Enemy, Name = "Dick Grayson" || Enemy, Name = "Tim Drake" || Enemy, Name = "Jason Todd"
trigger4 = Enemy, Name = "Red Hood" || Enemy, Name = "Tim Drake" || Enemy, Name = "Damian Wayne"
trigger5 = Enemy, Name = "The Joker" || Enemy, Name = "Joker"  || Enemy, Name = "Two-Face" || Enemy, Name = "Two Face" || Enemy, Name = "twoface"
trigger6 = Enemy, Name = "Harvey Dent" || Enemy, Name = "The Riddler" || Enemy, Name = "Riddler" || Enemy, Name = "Penguin" || Enemy, Name = "The Penguin"
trigger7 = Enemy, Name = "Catwoman" || Enemy, Name = "Bane" || Enemy, Name = "Poison Ivy" || Enemy, Name = "Harley Quinn" || Enemy, Name = "Phantasm"
trigger8 = Enemy, Name = "The Phantasm" || Enemy, Name = "Scarecrow" || Enemy, Name = "Ten" || Enemy, Name = "Catman" || Enemy, Name = "Black Mask"
trigger9 = Enemy, Name = "Onomatopoiea" || Enemy, Name="Catman" || Enemy, Name = "Barbara Gordon" || Enemy, Name = "Batgirl"
; piderman
trigger3 = Enemy, Name = "spiderman" || Enemy, Name = "Spider Man" || Enemy, Name = "Spider-Man" || Enemy, Name = "mvcspiderman" || Enemy, Name = "mvc_spiderman"
trigger4 = Enemy, Name = "Spider-Man 2099" || Enemy, Name = "Symbiote Spider-Man" || Enemy, Name = "Scarlet Spider" || Enemy, Name = "SPY-DAMA"
trigger5 = Enemy, Name = "Black Cat" || Enemy, Name = "Felicia Hardy" || Enemy, Name = "Electro" || Enemy, Name = "Electro the rip-off of Elec Man"
trigger6 = Enemy, Name = "Toxin" || Enemy, Name = "Green Goblin" || Enemy, Name = "Hobgoblin"
trigger7 = Enemy, Name = "VenomScorp" || Enemy, Name="mutantspidey" || Enemy, Name = "Agony" || Enemy, Name = "Vulture" || Enemy, Name = "Scream"
trigger8 = Enemy, Name = "Shocker" || Enemy, Name = "Sandman" || Enemy, Name = "RHINO" || Enemy, Name = "Hydroman"
trigger9 = Enemy, Name = "Venom" || Enemy, Name = "Venom_MMV" || Enemy, Name = "Carnage"
trigger10 = Enemy, Name = "Spider-Woman"
; Justice League
trigger11 = Enemy, Name = "Superman" || Enemy, Name = "Wonder Woman" || Enemy, Name = "Wonder Woman Reloaded" || Enemy, Name = "The Flash" || Enemy, Name = "Flash"
trigger12 = Enemy, Name = "TheFlash" || Enemy, Name = "JSA Flash" || Enemy, Name = "Aquamapfffthahahahaha" || Enemy, Name = "Aquaman"
; Teen Titans
trigger13 = Enemy, Name = "Starfire" || Enemy, Name = "HCF Starfire" || Enemy, Name = "Firestar" || Enemy, Name = "Cyborg" || Enemy, Name = "Raven"
trigger14 = Enemy, Name = "Beast Boy" || Enemy, Name = "Beastboy" || Enemy, Name = "Solstice" || Enemy, Name = "Kid Flash" || Enemy, Name = "Red Robin"
trigger15 = Enemy, Name = "Superboy" || Enemy, Name = "Kon-El" || Enemy, Name = "KonEl"
; Superman Villains
trigger16 = Enemy, Name = "Lex Luthor" || Enemy, Name = "Luthor"
trigger17 = Enemy, Name = "Darkseid" || Enemy, Name = "JLTF_DARKSEID" || Enemy, Name = "Darkseid 16 bits" || Enemy, Name = "Darksied"
trigger18 = Enemy, Name = "Black Adam" || Enemy, Name = "Superboy Prime" || Enemy, Name = "Black Manta" || Enemy, Name = "BRAINIAC" || Enemy, Name="Boomerang"
trigger19 = Enemy, Name = "Cyborg Superman" || Enemy, Name = "Despero" || Enemy, Name = "Doomsday" || Enemy,name="Gentleman Ghost"
trigger20 = Enemy, Name = "Major Force" || Enemy, Name = "Zoom" || Enemy, Name = "Professor Zoom" ||  Enemy, Name = "Sinestro" || Enemy, Name = "Silver Banshee"
trigger21 = Enemy, Name = "Shade" || Enemy, Name = "Parasite" || Enemy, Name = "Lobo" ; EEENF EEENF EEENF EEENF EEENF EEENF DAIMONMAU AVATAR
trigger22 = Enemy, Name = "Bizarro" || ((Enemy,Name="Superman")&&(Enemy,palNo=[8,9])) || Enemy, Name = "BUCK BUCK, BIZARRO I LOVE YOU"
trigger23 = Enemy, Name = "Mongul DCvsM" || enemy, Name = "Mongul"
; Other shit
trigger24 = Enemy, Name = "Spawn" || Enemy, Name = "CVG_Spawn" || Enemy, Name = "H.spawn" || Enemy, Name = "HellSpawn"
trigger25 = Enemy, Name = "[o_O]'s Blackheart" || Enemy, Name = "Blackheart" || Enemy, Name="DCvsMGhostRider" || Enemy, Name = "Ghost Rider"
trigger26 = Enemy, Name = "DCvsMEtrigan" || Enemy, Name = "Etrigan" || Enemy, Name = "Etrigan the Demon" || Enemy, Name = "Hellboy"
trigger27 = Enemy, Name = "Thanos" || Enemy, Name = "mvcthanos" || Enemy, Name = "mvc_thanos" || Enemy, Name = "Thanos of Titan"
trigger28 = Enemy, Name = "Thor" || Enemy, Name = "The Mighty Thor" || Enemy, Name = "Thanatos"
trigger29 = Enemy, Name = "Marvel_Medusa" || Enemy, Name = "Marvel_Nova" || Enemy, Name = "CVG_Nova" || Enemy,name = "Marvel_Quasar" || Enemy, Name = "Marvel_Drax"
trigger30 = Enemy, Name = "Marvel_Ronan" || Enemy, Name = "Marvel_Gladiator" || Enemy, Name = "Power Girl" || Enemy, Name = "BOOBS" || Enemy, Name = "Madman"
trigger31 = Enemy, Name = "Mole Man" || Enemy, Name = "Moleman" || Enemy, Name = "Hyperion" || Enemy, Name = "Luke Cage" || Enemy, Name = "Iron Fist"
trigger32 = Enemy, Name = "Vixen" || Enemy, Name = "Animal Man" || Enemy, Name = "Hawkman" || Enemy, Name = "Daredevil" || Enemy, Name = "firestorm"
trigger33 = Enemy, Name = "DrStrange" || Enemy, Name = "Dr. Strange" || Enemy, Name = "Dr.Strange"
trigger34 = Enemy, Name = "Captain Atom" || Enemy, Name = "Atom" || Enemy, Name = "The Atom"
trigger35 = Enemy, Name = "Captain Marvell" || Enemy, Name = "Captain Marvel" || Enemy, Name = "Shazam"
trigger36 = Enemy, Name = "Crystal of The Avengers" || Enemy, Name = "Crystal" || Enemy, Name = "CVG_Skrull" || Enemy, Name = "Super Skrull"
trigger37 = Enemy, Name = "Elektra" || Enemy, Name = "Elektra Natchios" || Enemy, Name = "Erradicator" || Enemy, Name = "Eradicator"
trigger38 = Enemy, Name = "ElongatedMan" || Enemy, Name = "Kallark" || Enemy, Name = "Ice" || Enemy, Name = "Invisible Woman" || Enemy, Name = "Sue Storm"
trigger39 = Enemy, Name = "Green Lantern Hal Jordan" || Enemy, Name = "Hal Jordan" || Enemy, Name = "John Stewart" || Enemy, Name = "GREEN LANTERN"
trigger40 = Enemy, Name = "Green Lantern Guy" || Enemy, Name = "Guy Gardner Warrior" || Enemy, Name = "Blackest Night Hal Jordan"
trigger41 = Enemy, Name = "Atrocitus" || Enemy, Name = "Red Lantern" || Enemy, Name = "Larfleeze" || Enemy, Name = "Orange Lantern" || Enemy, Name = "Agent Orange"
trigger42 = Enemy, Name = "Indigo-1" || Enemy, Name = "Indigo Lantern" || Enemy, Name = "Black Lantern" || Enemy, Name = "Star Sapphire"
trigger43 = Enemy, Name = "Martian Manhunter" || Enemy, Name = "J'onn J'onzz" || Enemy, Name = "Klrt" || Enemy, Name = "Kl'rt" || Enemy, Name = "Odin"
trigger44 = Enemy, Name = "Miss Marvel" || Enemy, Name = "Ms. Marvel" || Enemy, Name = "Mr. Fantastic" || Enemy, Name = "Mister Fantastic"
trigger45 = Enemy, Name = "Spiral by Luchini" || Enemy, Name = "Spiral" || Enemy, Name = "Quasar" ||  Enemy, Name = "Kyle Rayner" || Enemy, Name = "Red Tornado"
trigger46 = Enemy, Name = "Homem Borracha" || Enemy, Name = "Plastic Man" || Enemy, Name = "Sentry" || Enemy, Name = "Captain Marvel DC" || Enemy, Name = "Azrael"
trigger47 = Enemy, Name = "Steel" || Enemy, Name = "Conner Kent" || Enemy, Name = "Supergirl" || Enemy, Name = "thequestion" || Enemy, Name = "The Question"
trigger48 = Enemy, Name = "Zatanna" || Enemy, Name = "Shuma Gorath" || Enemy, Name = "Ultimate Cap" || Enemy, Name = "Yellow Jacket" || Enemy, Name = "Ares"
trigger49 = Enemy, Name = "The Thing" || Enemy, Name = "Thing" || Enemy, Name = "Mole" || Enemy, Name = "La Mole" 
trigger50 = Enemy, Name = "Songbird" || Enemy, Name = "Scarlet Witch" || Enemy, Name = "Underdog" || Enemy, Name = "Black Widow" || Enemy, Name = "Captain Agent"
trigger51 = Enemy, Name = "Silver Surfer" || Enemy, Name = "SilverSurfer" || Enemy, Name = "Marvel_SilverSurfer" || Enemy, Name = "silversurferv2"
trigger52 = Enemy, Name = "CaptainAmerica" || Enemy, Name = "Captain America" || Enemy, Name = "Ultimate Cap" || Enemy, Name = "Captain Bucky" || Enemy, Name = "KoldCap"
trigger53 = Enemy, Name = "BB DaCosta Fire" || Enemy, Name = "Hercules" || Enemy, Name = "Human Torch" || Enemy, Name = "DexStarr"
trigger54 = Enemy, Name = "Nick Fury" || Enemy, Name = "Nickolas Fury" || Enemy, Name = "Deadpool" || Enemy, Name = "DeadPoolx" || Enemy, Name = "Annoying Cunt"
; Iron Man & War Machine
trigger55 = Enemy, Name = "Ironman DCvsM" || Enemy, Name = "Iron-Man" || Enemy, Name = "Ironman 07" || Enemy, Name = "IronMan_ZEROGOU" || Enemy, Name = "IronMan"
trigger56 = Enemy, Name = "Iron Man by Xasor" || Enemy, Name = "mvcironman" || Enemy, Name = "mvc_ironman" || Enemy, Name = "IronPatriot" || Enemy, Name = "War"
trigger57 = Enemy, Name = "Marvel vs. Capcom's WarMachine" || Enemy, Name = "War Machine" || Enemy, Name = "WarMachine" || Enemy, Name = "mvcwarmachine"
trigger58 = Enemy, Name = "mvc_warmachine"
; X-Men
trigger59 = Enemy, Name = "Scott Summers" || Enemy, Name = "Scott Summers MVC2 + MSHVSF + MUA + XML2" || Enemy, Name = "[Vanessa]'s Cyclops" || Enemy, Name = "Cyclops"
trigger60 = Enemy, Name = "Wolverine" || Enemy, Name = "Wolverine 71113" || Enemy, Name = "MvC-EoH Wolverine" || Enemy, Name = "WxDCvsMC" || Enemy, Name = "[Wx2]"
trigger61 = Enemy, Name = "logan" || Enemy, Name = "Wolvenom" || Enemy, Name = "Maskless Wolverine" || Enemy, Name = "Wolverine2" || Enemy, Name = "WOLVERINE-MC2"
trigger62 = Enemy, Name = "WOLVERINE-Xvsf" || Enemy, Name = "Selfish Dickhead"
trigger63 = Enemy, Name = "Storm by WhiteMagic2002" || Enemy, Name = "[Shinta]'s Storm" || Enemy, Name = "Storm"
trigger64 = Enemy, Name = "Magneto" || Enemy, Name = "[Kyoko]'s Magneto" || Enemy, Name = "Magneto(MC2)" || Enemy, Name = "Magneto MVC2ver"
trigger65 = Enemy, Name = "Sabretooth" || Enemy, Name = "MvC2 Sabretooth By Kamekaze" || Enemy, Name = "Sabre Tooth"
trigger66 = Enemy, Name = "Omega Red" || Enemy, Name = "Apocalypse" || Enemy, Name = "Marrow" || Enemy, Name = "ZeroMarrow" || Enemy, Name = "Archangel"
trigger67 = Enemy, Name = "Angel" && Enemy, AuthorName != "Vans" && Enemy, AuthorName != "Juke Kisaragi" && Enemy, AuthorName != "jin"
trigger68 = Enemy, Name = "cvspsylocke" || Enemy, Name = "Psylocke by WhiteMagic2002" || Enemy, Name = "Psylocke" || Enemy, Name = "Psylocke Beta 03"
trigger69 = Enemy, Name = "Psylocke_EOH" || Enemy, Name = "[Rugal]'s Psylocke" || Enemy, Name = "Eternity of Heroes: Dark Psylocke"
trigger70 = Enemy, Name = "Beast" || Enemy, Name = "The Beast - Henry "
trigger71 = Enemy, Name = "Sunfire" || Enemy, Name = "Marvel vs Capcom 2 Cable" || Enemy, Name = "Cable" || Enemy, Name = "Quicksilver" ||  Enemy, Name = "Shard"
trigger72 = Enemy, Name = "MvDC Iceman" || Enemy, Name = "Iceman by Splode" || Enemy, Name = "Iceman"
trigger73 = Enemy, Name = "Silver Samurai" || Enemy, Name = "Marvel Vs Capcom 2 Colossus" || Enemy, Name = "Colossus" || Enemy, Name = "YEAH"
trigger74 = Enemy, Name = "Marvel_Vulcan" || Enemy, Name = "Marvel_MarvelGirl" || Enemy, Name = "Shadowcat" || Enemy, Name = "Shadow Cat" || Enemy, Name = "shadownyat"
trigger75 = Enemy, Name = "Mr.Sinister" || Enemy, Name = "Lady Deathstrike" || Enemy, Name = "Avalanche" || Enemy, Name = "Banshee" || Enemy, Name = "Bishop"
trigger76 = Enemy, Name = "Blob" || Enemy, Name = "The Blob" || Enemy, Name = "De Blob" || Enemy, Name = "CannonBall" || Enemy, Name = "Dazzler"
trigger77 = Enemy, Name = "Emma Frost" || Enemy, Name = "White Queen" || Enemy, Name = "Skank" || Enemy, Name = "Strong Guy" || Enemy, Name = "Guido"
trigger78 = Enemy, Name = "Havok" || Enemy, Name = "Caliban" || Enemy, Name = "Morph" || Enemy, Name = "Multiple Man" || Enemy, Name = "Mystique"
trigger79 = Enemy, Name = "Jean Grey" || Enemy, Name = "Phoenix (Jean Grey)" || Enemy, Name = "Phoenix" || Enemy, Name = "Hussy who ruined X-Men"
trigger80 = Enemy, Name = "Jubilation Lee" || Enemy, Name = "Jubilee" || Enemy, Name = "Remember when we used to do stuff?"
trigger81 = Enemy, Name = "Namor" || Enemy, Name = "nate" || Enemy, Name = "Nightcrawler" || Enemy, Name = "Night Crawler" || Enemy, Name = "Onslaught"
trigger82 = Enemy, Name = "Symbiote Onslaught- Forms 1 & 2" || Enemy, Name = "Polaris" || Enemy, Name = "Lorna Dane" || Enemy, Name = "Pietro Maximoff"
trigger83 = Enemy, Name = "Professor X" || Enemy, Name = "Madrox" || Enemy, Name = "Wasp"
trigger84 = Enemy, Name = "MvC2 Juggernaut By Kamekaze" || Enemy, Name = "Juggernaut by Splode" || Enemy, Name = "Juggernaut" || Enemy, Name = "Juggernault"
trigger85 = Enemy, Name = "MvC2 Gambit By Kamekaze" || Enemy, Name = "GAMBIT by CAMRAT" || Enemy, Name = "Masta Gambit" 
trigger86 = Enemy, Name = "OH NO MASSAH GAMBIT DON' BEAT LITTLE OL' ME" || Enemy, Name = "Marvel vs Capcom - Eternity of Heroes: Gambit"
trigger87 = Enemy, Name = "Gambit" || Enemy, Name = "Remy Lebeau"
; TMNT
trigger88 = Enemy, Name = "DcatDonatello" || Enemy, Name = "DcatLeonardo" || Enemy, Name = "DcatMichelangelo" || Enemy, Name = "DcatRaphael"
trigger89 = Enemy, Name = "Donatello" || Enemy, Name = "Leonardo" || Enemy, Name = "Michelangelo" || Enemy, Name = "Raphael"
var(26) = 2

[State -2, Dr. Doom]
type = VarSet
triggerall = NumEnemy
trigger1 = Enemy, Name = "Dr.Doom" || Enemy, Name = "MvC2 Doom By Kamekaze" || Enemy, Name = "Dr. Doom by WhiteMagic2002"
trigger2 = Enemy, Name = "Marvel vs Capcom - Eternity of Heroes: Dr.Doom" || Enemy, Name = "DrDoom" || Enemy, Name = "Dr. Doom"
var(26) = 3

[State -2, Saiyans]
type = VarSet
triggerall = NumEnemy
trigger1 = Enemy, Name = "Goku" || Enemy, Name = "Songoku" || Enemy, Name = "Son Goku" || Enemy, Name = "GokuHR" || Enemy, Name = "Goku Z2"
trigger2 = Enemy, Name = "Goku-n-hd by EmuBoarding" || Enemy, Name = "SFXVI Goku" || Enemy, Name = "Goku by Komodo"
trigger3 = Enemy, Name = "Another Goku by HyperionX & Iron Mask" || Enemy, Name = "SSJ Goku" || Enemy, Name = "Goku SSJ" || Enemy, Name = "SSJ2 Goku"
trigger4 = Enemy, Name = "Goku Super Sayajin 2 by ribeiro" || Enemy, Name = "[Necromancer's] Goku" || Enemy, Name = "Goku-SSJ2"
trigger5 = Enemy, Name = "SSJ Goku by Ryon" || Enemy, Name = "Sup. Goku" || Enemy, Name = "Sup.Goku" || Enemy, Name = "Goku Super Sayajin by Roken"
trigger6 = Enemy, Name = "NeoKakaroto" || Enemy, Name = "Son Goku by Duende Macabro" || Enemy, Name = "SSJ2 Goku Hyper Demension"
trigger7 = Enemy, Name = "Goku By Hyper" || Enemy, Name = "SSJ2-GOKU by BARDOCK" || Enemy, Name = "Goku Legend" || Enemy, Name = "Goku by ynvaser"
trigger8 = Enemy, Name = "Goku Super Saiyajin" || Enemy, Name = "SSJ3 Goku" || Enemy, Name = "ss3goku" || Enemy, Name = "Son-Goku-SSJ3"
trigger9 = Enemy, Name = "Super Sayan 3" || Enemy, Name = "GokuSSJ3" || Enemy, Name = "Gotenks" || Enemy, Name = "vegeta-n-3 by EmuBoarding"
trigger10 = Enemy, Name = "SSJ3 Gotenks Hyper Demension" || Enemy, Name = "super ssj3 goku v2" || Enemy, Name = "Gotenks by Pextin"
trigger11 = Enemy, Name = "Vegeta" || Enemy, Name = "SSJ Vegeta" || Enemy, Name = "Majin Vegeta" || Enemy, Name = "MajinVedita"
trigger12 = Enemy, Name = "Vegeta Normal 2 by EB" || Enemy, Name = "Vegeta Super Sayjin 4 by EB and BS" || Enemy, Name = "SSJ Vegeta by Ryon"
trigger13 = Enemy, Name = "Mystiq Vegeta" || Enemy, Name = "DK-Super Vegeta " || Enemy, Name = "Bejiita by Seifer Firehart" || Enemy, Name = "Vegeta Z2"
trigger14 = Enemy, Name = "Prince Vegeta" || Enemy, Name = "Bebi Vegeta" || Enemy, Name = "Bejita" || Enemy, Name = "BAYJEETA?!"
trigger15 = Enemy, Name = "Majin Vedita by Bacteria" || Enemy, Name = "Majin Vegeta by Komodo" || Enemy, Name = "Practice Vegeta by Detah"
trigger16 = Enemy, Name = "BebiVegeta by Princevegeta" || Enemy, Name = "Vegeta by DM" || Enemy, Name = "Vegeta Alpha" || Enemy, Name = "EvilFighter Vegeta"
trigger17 = Enemy, Name = "VEGETA GT BY NICO" || Enemy, Name = "MAJIN-VEGETA by BARDOCK" || Enemy, Name = "Vegeta Saiyan BY franciynaldo"
trigger18 = Enemy, Name = "Supa Saiyajin Tsu Bejiita" || Enemy, Name = "OS USSJ Vegeta" || Enemy, Name = "=El Principe Saiyajin Vegeta= By Team OS"
trigger19 = Enemy, Name = "Vegeta-Type-R" || Enemy, Name = "KiKi's Vegeta" || Enemy, Name = "Vegeta-GT-SSJ2" || Enemy, Name = "Vegita"
trigger20 = Enemy, Name = "Trunks" || Enemy, Name = "Mirai Trunks" || Enemy, Name = "SSJ Trunks" || Enemy, Name = "sstrunks"
trigger21 = Enemy, Name = "N-Trunks by EmuBoarding" || Enemy, Name = "Trunks por ssonic" || Enemy, Name = "Trunkz" || Enemy, Name = "Trunks by [Wasaby]"
trigger22 = Enemy, Name = "Kid Goku" || Enemy, Name = "Goku DB" || Enemy, Name = "Goten" || Enemy, Name = "Goten by Alunfl@"
trigger23 = Enemy, Name = "Son goku 3D by stopmotiontoys" || Enemy, Name = "Teen Gohan" || Enemy, Name = "SSJ2 Gohan" || Enemy, Name = "Songohan"
trigger24 = Enemy, Name = "Kid Gohan" || Enemy, Name = "Son Gohan by EmuBoarding" || Enemy, Name = "SSJ Gohan" || Enemy, Name = "SSJ Gohan By Kamekaze"
trigger25 = Enemy, Name = "Gohan Movie 9 2.00" || Enemy, Name = "Messy hair Gohan" || Enemy, Name = "Movie 9 Gohan" || Enemy, Name = "Super 2 Gohan"
trigger26 = Enemy, Name = "PGohanSSJ2" || Enemy, Name = "Gohan" || Enemy, Name = "SSJ Gohan by Ryon" || Enemy, Name = "Mystic Gohan"
trigger27 = Enemy, Name = "Mystic_Gohan" || Enemy, Name = "Mystic Gohan by Zero_X" || Enemy, Name = "GohanZ" || Enemy, Name = "Mystic Gohan Hyper Demension"
trigger28 = Enemy, Name = "||>(Zerberus-:-Dante)<|| Gohan Sword`s User" || Enemy, Name = "What the fuck, was that even English?"
trigger29 = Enemy, Name = "great saiyaman by Franciynaldo" || Enemy, Name = "Gohan Z2" || Enemy, Name = "Shameless Goku Z2 headswap"
trigger30 = Enemy, Name = "Mistico gohan by franciynaldo" || Enemy, Name = "Pan Dragonball GT por Ssonic" || Enemy, Name = "Poor recipient of a pregnant fetish"
trigger31 = Enemy, Name = "Raditz" || Enemy, Name = "Bardock" || Enemy, Name = "Turles" || Enemy, Name = "paragus"
trigger32 = Enemy, Name = "Broly" || Enemy, Name = "[Necromancer's] Broli" || Enemy, Name = "Broly557" || Enemy, Name = "Broli Remix ver1.2"
trigger33 = Enemy, Name = "LSSJ Broli by Ryon" || Enemy, Name = "Broli SSJ4" || Enemy, Name = "Broly by ynvaser" || Enemy, Name = "Broly mode soft" 
trigger34 = Enemy, Name = "Broly 'le cauchemar' super saiyen nv3" || Enemy, Name = "jesus christ there's as many brolys as gokus"
trigger35 = Enemy, Name = "Napa by Bardock" || Enemy, Name = "Nappa" || Enemy, Name = "NAPA: the parts store"
trigger36 = Enemy, Name = "C-Trunks by EmuBoarding" || Enemy, Name = "TrunksHB" || Enemy, Name = "Nowhere near as badass as Future Trunks, fuck this kid"
trigger37 = Enemy, Name = "Sup. Vegito" || Enemy, Name = "Vegito ssj2" || Enemy, Name = "Sup.Gogeta" || Enemy, Name = "Vegeta Super Sayjin 4 by EB and BS"
trigger38 = Enemy, Name = "Goku SSJ4 by _Vision and MRP" || Enemy, Name = "Goku Type-Z" || Enemy, Name = "Gotenks SSJ4 HD by Orochi Koe"
trigger39 = Enemy, Name = "Vegetto EX by Shishi-Ryu" || Enemy, Name = "Vegito Ex by [Wasaby]" || Enemy, Name = "Super Vegetto by [Wasaby]" 
trigger40 = Enemy, Name = "Ultra SSj4 Goku by Princevegeta" || Enemy, Name = "Vegeth@ by Nemesis82 & Biohazard82" || Enemy, Name = "Gogeta"
trigger41 = Enemy, Name = "Vegetto by [C]CSFF7H" || Enemy, Name = "VegetaSsj4" || Enemy, Name = "vegeta_ssj4"
var(26) = 4

[State -2, Ken]
type = VarSet
triggerall = NumEnemy
trigger1 = Enemy, Name = "cvsken" || Enemy, Name = "svcken" || Enemy, Name = "Ken" || Enemy, Name = "Ken Masters" || Enemy, Name = "SSKen"
trigger2 = Enemy, Name = "KenKOP" || Enemy, Name = "Marvel vs Capcom - Eternity of Heroes Ken" || Enemy, Name = "Ken-X" || Enemy, Name = "SSF2HD_Ken"
trigger3 = Enemy, Name = "KenGang" || Enemy, Name = "ChosenKen" || Enemy, Name = "CVS3 Ken version Retro" || Enemy, Name = "cvsken_ex" || Enemy, Name = "Evil Ken"
trigger4 = Enemy, Name = "Dark Ken" || Enemy, Name = "Sennou Ken" || Enemy, Name = "Violent Ken" || Enemy, Name = "ViolentKen_MvC" || Enemy, Name = "Evil Ken SF'2"
trigger5 = Enemy, Name = "MvC3 ken By Kamekaze"
var(26) = 5

[State -2, Mr. X]
type = VarSet
triggerall = NumEnemy
trigger1 = Enemy, Name = "Mr. X"
var(26) = 6

[State -2, Blanka]
type = VarSet
triggerall = NumEnemy
trigger1 = Enemy, Name = "cvsblanka" || Enemy, Name = "Blanka"
var(26) = 7

;----------------------------------------------------------------------------------
; Edge fix
[State -2, Width]
type = Width
triggerall = numenemy
trigger1 = facing != enemynear, facing
trigger1 = movetype != H
edge = 7,0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Remove FX
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = StateNo != 1200 && StateNo != 1250
trigger2 = StateNo = 1200 && !Time
trigger3 = StateNo = 1250 && !Time
trigger4 = MoveType = H
ID = 2000
[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(2001)
trigger1 = StateNo = 1200 && Var(22)=0 && AnimElemTime(14)>0
trigger2 = StateNo = 1200 && Var(22)=1 && AnimElemTime(21)>0
trigger3 = StateNo = 1200 && Var(22)=2 && AnimElemTime(28)>0
trigger4 = StateNo = 1250 && AnimElemTime(16) > 0
trigger5 = StateNo != 1200 && StateNo != 1250
trigger6 = StateNo = 1200 && !Time
trigger7 = StateNo = 1250 && !Time
trigger8 = MoveType = H
ID = 2001
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = StateNo != 1304
trigger2 = MoveType = H
ID = 2010
[State 1200, Explod]
type = RemoveExplod
trigger1 = StateNo != 650
ID = 656

;----------------------------------------------------------------------------------
; Var Helper
[State -2, 0]
type = Helper
triggerall = NumEnemy
triggerall = !NumHelper(247)
trigger1 = !Time
helpertype = normal
name = "Var"
ID = 247
pos = 0,0
postype = p1
stateno = 247
keyctrl = 0

; Reset State Timer
[State 1405, VarSet]
type = VarSet
trigger1 = StateNo != 3100
var(24) = 0

; Stop Arc Cannon Sound
[State 1405, VarSet]
type = StopSnd
trigger1 = StateNo != 3100
trigger2 = MoveType = H
trigger3 = Anim != 3100
channel = 16

; Reset Small Jump
[State 52, VarSet]
type = VarSet
triggerall = Var(6) = 2
trigger1 = StateType != A
trigger2 = MoveType = H
var(6) = 1

;===============================================================================
; ------- CvS2 Cornerpush System by Vans & Jesuszilla --------
;===============================================================================
[State -2, Reset Time counter]
type = VarSet
triggerall = NumHelper(247)
trigger1 = Helper(247), Var(0) = 1
var(56) = 0

[State -2, Accel]
type = VarSet
triggerall = roundstate = 2
triggerall = numTarget ;>= 1
triggerall = target, HitShakeOver
trigger1 = StateNo != 970 && StateNo != 975 && StateNo != 3000 && StateNo != 3100 && StateNo != 3200
trigger2 = (StateNo = [3000,3200]) && !Var(48)
fvar(39) = (target,GetHitVar(Xvel)*exp((-0.1886)*((Var(56)))))

[State -2, Push]
type = PosAdd
triggerall = roundstate = 2
triggerall = numTarget >= 1
triggerall = (target, BackEdgeBodyDist <= 0) || (target, FrontEdgeBodyDist <= 0)
triggerall = Var(50) < 3;ProjContact = 0, < 50
triggerall = P2StateType != A
triggerall = StateNo != [800,839]
triggerall = StateNo != [102,106]
triggerall = P2StateType != A
triggerall = StateType != A; OR IS IT
trigger1 = StateNo != 970 && StateNo != 975 && StateNo != 3000 && StateNo != 3100 && StateNo != 3200
trigger2 = (StateNo = [3000,3200]) && !Var(48)
x = ifelse(facing = -1,FVar(39),-FVar(39));SysFVar(0)

[State -2, Increase]
type = VarSet
triggerall = numTarget
triggerall = target, HitShakeOver
triggerall = Var(56)
trigger1 = !Var(48)
var(56) = Var(56)+1

[State -2, Time counter]
type = VarSet
trigger1 = !Var(56)
trigger1 = FVar(39)
var(56) = 1

[State -2, Freeze Pos During Superpause]
type = PosFreeze
trigger1 = Var(48)
value = 1

[State -2, Drop]
type = VarSet
triggerall = FVar(39)
trigger1 = !numTarget
trigger2 = Var(50) = [3,4]
trigger3 = NumHelper(247)
trigger3 = Helper(247), Var(0) = 1
fvar(39) = 0

;----------------------------------------------------------------------------------
; Config
[State -2, Helper]
type = Helper
triggerall = !NumHelper(10001)
trigger1 = Time = 0
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
ID = 10001
name = "config"
pos = -300,0
postype = Left
stateno = 10001
helpertype = normal
keyctrl = 0
pausemovetime = 65535
supermovetime = 65535

;----------------------------------------------------------------------------------
; Message Icon
[State -2, Message Icon Y-Axis]
type = VarSet
trigger1 = Var(20) > 9000
fvar(24) = 9001

;----------------------------------------------------------------------------------
; Groove Select
[State -2, Groove]
type = Helper
;triggerall = MatchNo = 1; Select only once and be stuck with it for rest of Arcade
triggerall = NumEnemy
triggerall = Time = 1
triggerall = roundstate = 0
triggerall = roundsexisted <= 0
triggerall = Var(20) > -1
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname="Jesuszilla"
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6000
stateno = 6000
postype = p1
size.xscale = .5
size.yscale = .5
pos = 0,-15
name = "groove"
ontop = 1
bindtime = -1

[State -2, Arrow]
type = Helper
triggerall = NumEnemy
triggerall = Time = 1
triggerall = roundstate = 0
triggerall = roundsexisted <= 0
triggerall = Var(20) > -1
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname="Jesuszilla"
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6050
stateno = 6050
postype = p1
size.xscale = .5
size.yscale = .5
pos = 0,0
name = "Up-Arrow"
ontop = 1
bindtime = -1
keyctrl = 1
ownpal = 1

[State -2, Arrow]
type = Helper
triggerall = NumEnemy
triggerall = Time = 1
triggerall = roundstate = 0
triggerall = roundsexisted <= 0
triggerall = Var(20) > -1
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname="Jesuszilla"
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6050
stateno = 6055
postype = p1
size.xscale = .5
size.yscale = .5
pos = 0,0
name = "Down-Arrow"
ontop = 1
bindtime = -1
keyctrl = 1
ownpal = 1

;----------------------------------------------------------------------------------
; Groove Point
[State -2, Helper]
type = Helper
triggerall = NumEnemy
triggerall = Var(20) > -1
triggerall = FVar(20)
triggerall = !NumHelper(6500) && !NumHelper(6000)
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname="Jesuszilla"
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6500
name = "groove point"
pos = 0,300
postype = Left
stateno = 6500
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999
supermovetime = 99999999999999
size.xscale = 1
size.yscale = 1

;----------------------------------------------------------------------------------
; NoWalk
;[State -2, AssertSpecial]
;type = AssertSpecial
;trigger1 = AILevel
;flag = nowalk
;----------------------------------------------------------------------------------
; No Music
[State -2, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = NoMusic

; PERFECT
[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = FVar(8) - Life > 0
fvar(15) = 1
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Vars set upon victory/loss.
[State -2, 1]
type = VarSet
trigger1 = Win
var(27) = 1

[State -2, 1]
type = VarSet
trigger1 = Lose
var(27) = 2

[State -2, 1]
type = VarSet
trigger1 = Lose || DrawGame
var(36) = 1

[State -2,KO]
type = VarAdd
trigger1 = MatchOver
ignorehitpause = 1
var(39) = 1

[State -2,KO]
type = VarSet
trigger1 = !MatchOver
ignorehitpause = 1
var(39) = 0

[State 180, 1]
type = VarAdd
triggerall = Var(39) = 1
trigger1 = !Var(36)
var(38)= 1
ignorehitpause = 1
persistent = 0

[State 180, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
var(38)= 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; STATE DECISION
[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (StateNo = [0,199]) && !Var(31)
var(28) = 0

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (StateNo = [200,999]) && !Var(31)
var(28) = 1

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (StateNo = [1000,2999]) && !Var(31)
var(28) = 2

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = ((StateNo = [3000,3999]) && Var(22)!=2) || Var(31)
var(28) = 3

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (StateNo = [3000,3999]) && Var(22) = 2
var(28) = 4

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2StateNo = [0,199]
var(59) = 0

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = StateNo = [200,999]
var(59) = 1

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2StateNo = [1000,2999]
var(59) = 2

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2StateNo = [3000,3999]
var(59) = 3

;----------------------------------------------------------------------------------
; Turns Mode Intro
[State -3, Turns Mode Intro]
type = ChangeState
triggerall = NumEnemy
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
trigger1 = Time = 0
value = 190

; Special Intro
[State -3, Turns Mode Intro]
type = ChangeState
triggerall = roundstate = 0
triggerall = NumEnemy
triggerall = EnemyNear, roundsexisted <= 0
triggerall = Time = 0
trigger1 = (Var(26) = [1,3]) || (Var(26) = [5,7])
value = 190

;---------------------
; Gauge
[State -2, Helper]
type = Helper
triggerall = Var(10)
triggerall = !NumHelper(6100) && !NumHelper(6000)
triggerall = numenemy
triggerall = Var(20) < 9001
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname="Jesuszilla"
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname = "N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6100
name = "gauge"
pos = 0,300
postype = P1
stateno = 6090+(Var(10)*10)
helpertype = normal
keyctrl = 0
ownpal = 1
;ignorehitpause = 1
persistent = 0
supermovetime = 99999999999999
pausemovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

;---------------------
; S-Gauge MAX
[State -2, 1]
type = VarSet
triggerall = Var(10) = 4
trigger1 = !Var(17)
trigger1 = roundstate >= 2
trigger1 = Power >= 1000
var(17) = 750

[State -2, 1]
type = PowerSet
trigger1 = Var(17) = 750
value = 0
ignorehitpause = 1

[State -2, 1]
type = PowerSet
trigger1 = Var(17) = 1
value = 0
ignorehitpause = 1

[State 200, 3]
type = PlaySnd
trigger1 = Var(17) = 750
value = S6000,2

[State -2, 1]
type = VarAdd
trigger1 = Var(17)
var(17) = -1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = Var(17)
var(44) = 1

[State -2, 1]
type = VarSet
trigger1 = !Var(17) && ctrl
var(44) = 0

;---------------------
; N-Gauge MAX
[State -2, 1]
type = VarAdd
trigger1 = Var(29)
var(29) = -1
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = Var(10) = 5
trigger1 = (GameTime%2)=0
trigger1 = Var(29)
time = 1
add = 128,128,0
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = !Var(29) && ctrl
var(18) = 0

;---------------------
; K-Gauge RAGE
[State -2, Combo]
type = VarAdd
triggerall = Var(10) = 6
triggerall = !Var(19)
triggerall = roundstate = 2
triggerall = FVar(14) < 7200
trigger1 = FVar(8) - Life > 0
fvar(14) = ceil((FVar(8)-Life)*14*(10+Var(41))/10)
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = FVar(14) > 7200
fvar(14) = 7200

[State -2, 1]
type = VarSet
trigger1 = FVar(14) = 7200
var(19) = 1

[State -2, 1]
type = VarSet
trigger1 = FVar(14) <= 1 && ((StateNo != [3000,3999]) || roundstate != 2)
var(19) = 0

[State 860, 1]
type = Explod
trigger1 = FVar(14) = 7200 && !NumExplod(8420)
anim = 8420
pos = 0,-70
postype = p1
ontop = 0
ownpal = 1
ID = 8420
persistent = 0
pausemovetime = -1
scale = .5,.5

[State 200, 3]
type = PlaySnd
trigger1 = FVar(14) = 7200
value = S6000,5

[State -2, 1]
type = PowerAdd
trigger1 = FVar(14) = 7200
value = -3000
ignorehitpause = 1

[State -2, 1]
type = VarAdd
triggerall = Var(10) = 6
triggerall = Var(19)
trigger1 = FVar(14) > 0
fvar(14) = -7.2
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = Var(10) = 6
trigger1 = FVar(14) && Var(19)
time = 1
mul = 230,ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
ignorehitpause = 1
persistent = 0

[State -2, 1]
type = DefenceMulSet
triggerall = Var(10) = 6
trigger1 = FVar(14) && Var(19)
value = 0.775

[State -2, 1]
type = DefenceMulSet
trigger1 = !Var(19)
value = 1

;----------------------------------------------------------------------------------
; Power Up! Sound
[State -2, PlaySnd]
type = PlaySnd
triggerall = roundstate = 2
trigger1 = (floor(power*.001) - floor(FVar(37)*.001) > 0) && (Var(10) = 1 || Var(10) = 5)
trigger2 = (floor(power/1500) - floor(FVar(37)/1500) > 0) && Var(10) = 2
trigger3 = (floor(power/3000) - floor(FVar(37)/3000) > 0) && (Var(10) = 3 || Var(10) = 4)
value = 6000,IfElse(Var(10)=5,3,4)
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = 1
fvar(37) = power
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Power Reset
[State -2, 1]
type = VarAdd
triggerall = roundstate = 2
trigger1 = Var(30)
var(30) = -1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = MoveType = H
var(30) = 0

[State -2, 1]
type = VarSet
trigger1 = !Var(30) && ctrl
trigger2 = LoseKO
var(31) = 0

[State -2, 1]
type = VarAdd
trigger1 = Var(30)
var(43) = -9
ignorehitpause = 1

[State -2, 1]
type = PowerSet
triggerall = Var(31)
trigger1 = MoveType = H
value = Var(43)/2

[State -2, Kill Juggle Checking]; I GOTTA BELIEVE!
type = AssertSpecial
trigger1 = 1;Var(31)
;trigger1 = P2MoveType = H && P2stateType = A
flag = NoJuggleCheck

[State -2, No Blocking]
type = AssertSpecial
trigger1 = Var(30)
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

;---------------------
; NoAirGuard
[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = !(var(5)&256)
flag = NoAirGuard

;---------------------
; Combo Damage
[State -2, PowerReset]
type = VarSet
trigger1 = P2movetype != H
var(45) = P2life

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = numenemy
triggerall = roundstate = 2
triggerall = (Var(45)-P2life)>250
trigger1 = !NumHelper(6800)&&!Var(35)
trigger2 = !NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)
ID = 6800
name = "narration_1"
pos = 0,300
postype = Left
stateno = 6803
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

; No guard during superpause
[State -2, Unguardable]
type = VarAdd
trigger1 = Var(48) > 0
var(48) = -1
[State -2, Unguardable]
type = AssertSpecial
trigger1 = Var(48) > 0
flag = unguardable

;Starting Groove Points & Decrease Groove Points by Time
[State -2, PowerReset]
type = VarSet
triggerall = MatchNo = 1
triggerall = RoundNo = 1
trigger1 = roundstate = 0
var(47) = 100000

[State -2, PowerReset]
type = VarSet
trigger1 = Var(47) > 9999999
var(47) = 9999999
persistent = 1

[State -2, PowerReset]
type = VarSet
trigger1 = Var(47) < -9999999
var(47) = -9999999
persistent = 1

[State -2, PowerReset]
type = VarAdd
trigger1 = roundstate = 2
var(34) = 1
persistent = 1

[State -2, PowerReset]
type = VarAdd
triggerall = roundstate = 2
triggerall = Var(47) = [-9999999,9999999]
trigger1 = Var(34) >= 600
trigger1 = gametime%60 = 0
var(47) = -500
persistent = 1

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = !Var(37)
triggerall = numenemy
triggerall = roundstate = 2
triggerall = Var(34) = 400
trigger1 = !NumHelper(6800)&&!Var(35)
trigger2 = !NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)
ID = 6800
name = "narration_1"
pos = 0,300
postype = Left
stateno = 6800
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

;-------------------------------------
; Super Combo Juggling
;-------------------------------------
; Super States that should juggle
; after canceling from a special
; should go here.

[State -2, Super Combo Juggling]
type = null;VarSet    ; Keep null if you have none, otherwise go nuts.
triggerall = P2MoveType = H && P2stateType = A
triggerall = ((PrevStateNo=[1000,2999]) && !FVar(16)) || ((PrevStateNo=[1000,2999]) && FVar(16) = -1 && Time = 1)
trigger1 = StateNo=3000
fvar(16) = 1
ignorehitpause = 1

[State -2, PowerReset]
type = VarAdd
trigger1 = FVar(16) > 0
fvar(16) = 1

[State -2, PowerReset]
type = VarSet
triggerall = FVar(16) > 1
trigger1 = MoveHit = 1
trigger2 = ProjHit = 1
fvar(16) = -1
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
trigger1 = FVar(16) > 120
trigger2 = NumEnemy
trigger2 = Enemy,MoveType != H
fvar(16) = 0
ignorehitpause = 1

;-------------------------------------
; Basic, Command, and Special Juggling
;-------------------------------------
; This is the limiter for juggling.
; When set to 1, it disallows juggling
; for all situations.
[State -2, Limiter]
type = VarSet
trigger1 = FVar(13) && FVar(18)
trigger2 = P2MoveType != H && P2StateType != A && P2StateNo != 5040
fvar(18) = 0
ignorehitpause = 1

[State -2, Limiter]
type = VarSet
triggerall = !FVar(13) && !FVar(18)
trigger1 = P2StateNo = 5040
fvar(18) = 1
ignorehitpause = 1

[State -2, JuggleCount]
type = VarAdd
;triggerall = !FVar(13)
;triggerall = P2MoveType = H && P2StateType = A
trigger1 = MoveHit = 1;Var(50)=[1,2]
trigger2 = numHelper(1005)
trigger2 = helper(1005), moveHit = 1
trigger3 = numHelper(3105)
trigger3 = helper(3105), moveHit = 1
fvar(19) = 1
ignorehitpause = 1

[State -2, JuggleCount]
type = VarAdd
trigger1 = MoveHit = 1 && numTarget(1300)
fvar(19) = 3
ignorehitpause = 1

[State -2, JuggleCount]
type = VarAdd
trigger1 = MoveHit = 1 && numTarget(3209)
fvar(19) = 6
ignorehitpause = 1

[State -2, JuggleCount]
type = VarSet
triggerall = FVar(19) && NumEnemy
trigger1 = P2MoveType != H || (P2StateType != A && (P2StateNo != [5100,5109]) && (enemy,time>=1)) || P2StateNo = [120,155]
fvar(19) = 0
ignorehitpause = 1

;-------------------------------------
; Free Juggling After a Lv. 2 Cancel
;-------------------------------------
; Anything that should juggle after a
; Level 2 cancel is performed should
; go here.
[State -2, Cancel]
type = VarAdd
trigger1 = FVar(13)
fvar(13) = 1

[State -2, Lvl2 Cancel Juggling]
type = VarSet
triggerall = PrevStateNo=[3000,3999]
triggerall = Time = 1
triggerall = P2MoveType = H && P2StateType = A
trigger1 = StateNo=1000
trigger2 = StateNo=1100
trigger3 = StateNo=1200
trigger4 = StateNo=[1300,1304]
trigger5 = StateNo=[1400,1405]
trigger6 = StateNo=1500
trigger7 = StateNo=1600
trigger8 = StateNo=1700
trigger9 = StateNo=3000
fvar(13) = 1
ignorehitpause = 1

[State -2, Cancel]
type = VarSet
triggerall = FVar(13) > 1
trigger1 = MoveHit = 1
trigger2 = ProjHit = 1
trigger3 = FVar(13) > 120
trigger3 = numenemy
trigger3 = enemy, MoveType != H
trigger4 = numHelper(1005)
trigger4 = helper(1005), moveHit = 1
trigger5 = numHelper(3105)
trigger5 = helper(3105), moveHit = 1
fvar(13) = 0
ignorehitpause = 1

;Exceptions
[State -2, Combo]
type = VarSet
trigger1 = MoveHit = 1
trigger2 = ProjHit = 1
trigger3 = P2MoveType != H
var(25) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = MoveHit = 1
trigger1 = StateNo = 1700
trigger1 = P2MoveType = H
var(25) = 1
ignorehitpause = 1

;-------------------------------------
; Basic move auto-recover
;-------------------------------------
[State -2, Aerial Hit]
type = VarSet
triggerall = P2MoveType = H && P2StateType = A
triggerall = MoveHit = 1
triggerall = !Var(30)
trigger1 = (StateNo = [200,799])
trigger1 = !(StateNo = 260 && numTarget(430)) && !numTarget(270)
trigger1 = !numTarget(650)
fvar(34) = 1
ignorehitpause = 1
[State -2, PowerReset]
type = VarSet
trigger1 = !numTarget
trigger2 = P2MoveType != H
fvar(34) = 0
ignorehitpause = 1
[State 901, Throw]
type = TargetState
triggerall = roundState = 2
triggerall = numTarget
triggerall = FVar(34)
trigger1 = target,StateNo = 5050
value =  840
persistent = 0

;----------------------------------------------------------------------------------
;Groove points increase/decrease when damage is taken
[State -2, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = StateNo = 5000 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = Time = 1
var(47)=ifElse((enemynear,hitdefattr=SCA,NA,NP,NT),-500,ifElse((enemynear,hitdefattr=SCA,SA,SP,ST),-300,-200))
ignorehitpause = 1

[State -2, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = movetype = H
triggerall = (StateNo != 5000 && StateNo != 5020 && StateNo != 5070 && StateNo != 5080)
trigger1 = FVar(8) - Life > 0
var(47)=ifElse((enemynear,StateNo=[195,999]),-500,ifElse((enemynear,StateNo=[1000,2999]),-300,-200))
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(8) = life
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Messages
;Reversal Condition 1
[State 180, 1]
type = VarSet
trigger1 = movetype = H
fvar(30) = 2
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = ctrl
trigger1 = FVar(30) = 2
fvar(30) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = FVar(30) = 1
fvar(31) = 1
ignorehitpause = 1

;Bonus Message
[State 180, 1]
type = VarSet
trigger1 = 1
fvar(32) = -1
ignorehitpause = 1

[State 180, Parry]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 700
trigger2 = stateno = 710
trigger3 = stateno = 720
fvar(32) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
trigger3 = NumHelper(1005)
trigger3 = Helper(1005), MoveHit
fvar(32) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = !Var(37)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
trigger3 = stateno = 810 && animelem = 4 && movetype != H
trigger4 = stateno = 815 && animelem = 3 && movetype != H
trigger5 = stateno = 831 && animelem = 5 && movetype != H
trigger6 = stateno = 832 && animelem = 4 && movetype != H
trigger7 = NumHelper(1005)
trigger7 = Helper(1005), MoveHit
fvar(32) = ifElse(Var(21),-2,2)
ignorehitpause = 1

[State 180, Guard Cancel]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 320
fvar(32) = 3
ignorehitpause = 1

[State 180, Counter Attack]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 2800
fvar(32) = 4
ignorehitpause = 1

[State 180, Guard Cancel]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 330
fvar(32) = 5
ignorehitpause = 1

[State 180, Just Defend]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = Var(14) = 1
fvar(32) = 6
ignorehitpause = 1

[State 180, Tech Bonus]
type = null;VarSet
trigger1 = Var(12)
fvar(32) = 7
ignorehitpause = 1

[State 180, Tech Bonus]
type = VarSet
triggerall = Time = 1
trigger1 = stateno = 5201
trigger2 = stateno = 5210
trigger3 = stateno = 955 && movetype != H
fvar(32) = 9
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = FVar(31)
triggerall = movetype != H
triggerall = stateno != [2800,2999]
trigger1 = stateno = [1000,3999]
fvar(32) = 10
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6630
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6620
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6610
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6600
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
trigger2 = NumHelper(77)
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = 6631
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
trigger2 = NumHelper(77)
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = ifelse(Var(37)=0,6631,6621)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
trigger2 = NumHelper(77)
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = ifelse(Var(37)=0,6621,6611)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
trigger2 = NumHelper(77)
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = ifelse(Var(37)=0,6611,6601)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = NumHelper(78)
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6632
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = NumHelper(78)
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6622
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = NumHelper(78)
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6612
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = NumHelper(78)
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6602
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6633
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6623
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6613
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6603
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6634
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6624
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6614
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6604
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

;Tech Hit Points
[State 180, 1]
type = VarAdd
trigger1 = FVar(32) = 9
var(47)=500
ignorehitpause = 1

;Reversal Points
[State 180, 1]
type = VarAdd
trigger1 = FVar(32) = 10
var(47) = 2000
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = FVar(31) = 3
trigger2 = (stateno = [1000,3999]) && time = 1
fvar(30) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = FVar(31) = 3
trigger2 = (stateno = [1000,3999]) && time = 1
fvar(31) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(28) = [0,1]
fvar(33) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(28) = 2
fvar(33) = 5
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(28) = 3 || Var(28) = 4
fvar(33) = 6+((Var(10)=[4,6])*5)
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = !numTarget
trigger1 = stateNo != 1000
trigger2 = stateNo = 1000 && animElemTime(7) < 0
var(3) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = Var(28) = 2 && Var(59) = 3 && (FVar(32) = 1 || FVar(32) = -2)
trigger2 = Var(28) = 3 && Var(59) = 3
trigger3 = Var(28) = 4 && Var(59) = [2,3]
trigger4 = Var(31) && Var(59) = 3
var(3) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(31) ;&& !Var(3)
fvar(33) = 3
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(3) = 1
fvar(33) = 12
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6730
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6720
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6710
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6700
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = FVar(15) = 1
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6734
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = FVar(15) = 1
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6724
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = FVar(15) = 1
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6714
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = FVar(15) = 1
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6704
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
id = 6701
name = "Vital"
pos =0,0
postype = P1
stateno = 6701
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
trigger1 = !FVar(15)
id = 6702
name = "Perfect"
pos =0,0
postype = P1
stateno = 6712
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
trigger1 = FVar(15) = 1
id = 6703
name = "Max Combo"
pos =0,0
postype = P1
stateno = 6713
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
trigger1 = !FVar(15)
id = 6703
name = "Max Combo"
pos =0,0
postype = P1
stateno = 6723
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

;----------------------------------------------------------------------------------
; Burn/Shock Sparks
[State -2, Combo]
type = VarSet
trigger1 = FVar(3)
fvar(3) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = MoveHit || ProjHit = 1
fvar(3) = -1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = StateNo = 1200 && MoveHit
trigger2 = StateNo = 1250 && MoveHit
trigger3 = StateNo = 1304 && MoveHit
trigger4 = StateNo = 1600 && MoveHit
trigger5 = StateNo = 3200 && AnimElemTime(60) > 0 && MoveHit
fvar(3) = 3
ignorehitpause = 1
[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = StateNo = 220 && MoveHit
trigger2 = StateNo = 650 && Anim = 655 && MoveHit
fvar(3) = 4
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = FVar(3) = 1
id = 8300
name = "FireEffect_Down"
pos = 0,0
postype = P2
stateno = 8300
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = FVar(3) = 2
id = 8300
name = "FireEffect_KnockBack"
pos =0,0
postype = P2
stateno = 8301
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = !NumHelper(8305)
trigger1 = FVar(3) = 3
id = 8305
name = "SparkEffect_KnockBack"
pos =0,0
postype = P2
stateno = 8305
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8305)
trigger1 = FVar(3) = 4
id = 8305
name = "SparkEffect_Down"
pos =0,0
postype = P2
stateno = 8306
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

;----------------------------------------------------------------------------------
; Counter Hit Effect
[State -3, Blocking5]
type = Helper
trigger1 = FVar(32) = 1 || FVar(32) = -2
trigger1 = ProjHit = 0
trigger1 = !NumHelper(1005)
ID = 8130
name = "COUNTER HIT EFFECT"
pos = Ceil(enemy,Const(size.ground.front)+FVar(26)),Ceil(Pos Y-enemy,Pos Y+FVar(27))
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
size.xscale = 1
size.yscale = 1

;----------------------------------------------------------------------------------
; Announcer Voice
[State -2, Combo]
type = VarSet
trigger1 = NumEnemy
trigger1 = Enemy,MoveType != H
var(51) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = (StateNo != [800,899])
trigger1 = MoveHit
trigger2 = ProjHit = 1
var(51) = 1
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = NumEnemy
triggerall = roundstate = 2
triggerall = (Var(51) = 5 && !Var(31)) || (Var(51) = 10 && Var(31))
triggerall = StateNo != 810
triggerall = StateNo != 3200
trigger1 = !NumHelper(6800)&&!Var(35)
trigger2 = !NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)
ID = 6800
name = "narration_3"
pos =0,0
postype = P1
stateno = 6802
helpertype = Normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

[State 180, 1];First Attack
type = VarAdd
trigger1 = FVar(32) = 2 || FVar(32) = -2
var(47) = 5000
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = Var(34) < 400
triggerall = NumEnemy
triggerall = (!NumHelper(6800)&&!Var(35)) || (!NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)) || (NumHelper(78))
trigger1 = FVar(32) = 2 || FVar(32) = -2
ID = 6800
name = "narration_2"
pos = 0,300
postype = Left
stateno = 6801
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

[State -2, Combo]
type = VarSet
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = MoveType = H && (StateNo != [150,159]) && (StateNo != [500,599])
var(37) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1];Hit bonus
type = VarAdd
triggerall = roundstate = 2
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(47)=IfElse((hitdefattr=SCA,NA,NP,NT),-50,IfElse((hitdefattr=SCA,SA,SP,ST),-30,-20))
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = !Var(21)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
var(47)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
var(47)=IfElse((hitdefattr=SCA,NA,NP,NT),1001,IfElse((hitdefattr=SCA,SA,SP,ST),3001,5001))
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
trigger2 = projhit = 1
var(47)=1000
ignorehitpause = 1
persistent = 1

[State -2, Combo];MAX Power Combo Bonus
type = VarSet
trigger1 = P2MoveType = H
trigger1 = Var(33) < Var(51)
var(33) = Var(51)
ignorehitpause = 1
persistent = 1

[State 180, 1];Combo bonus
type = VarAdd
triggerall = roundstate = 2
triggerall = Var(51) >= 2
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
var(47) = IfElse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(50) = ifElse(MoveHit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = MoveGuarded
trigger2 = ProjGuarded = 1
trigger3 = MoveReversed
var(50) = ifElse((MoveGuarded||MoveReversed),2,4)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = Time = 1
trigger1 = StateNo != 1205
trigger1 = StateNo != 1405
var(50) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(12) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
fvar(12) = ifElse(MoveHit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
trigger3 = MoveReversed
fvar(12) = ifElse((MoveGuarded||MoveReversed),2,4)
ignorehitpause = 1

[State -2, MoveHitReset]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Power Increase
[State -2, Power]
type = VarSet
trigger1 = Var(10) = 1
var(40) = 0

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 2
var(40) = 167

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 3
var(40) = -125

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 5
var(40) = -222

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 4 || Var(10) = 6
var(40) = -1000

[State -2, Power2]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=100
trigger1 = (100*life/const(data.life))>30
var(41) = 0

[State -2, Power3]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=30
trigger1 = (100*life/const(data.life))>15
var(41) = 2

[State -2, Power4]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(41) = 4

[State -2, Power]
type = VarSet
triggerall = RoundState = 2
trigger1 = 1
var(42) = GetHitVar(damage)

;----------------------------------------------------------------------------------
; Combo Dampener
[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = roundstate = 2
trigger1 = power = [0,999]
var(52) = 0

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) != 1 && Var(10) != 0
trigger1 = roundstate = 2
var(52) = 0

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = roundstate = 2
trigger1 = power = [1000,1999]
var(52) = 1

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = roundstate = 2
trigger1 = power = [2000,2999]
var(52) = 2

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = roundstate = 2
trigger1 = power >= 3000
var(52) = 5

[State -2, PowerReset]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=100
trigger1 = (100*life/const(data.life))>30
var(53) = 0

[State -2, PowerReset2]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=30
trigger1 = (100*life/const(data.life))>15
var(53) = 5

[State -2, PowerReset3]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(53) = 10

[State -2, PowerReset4]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=100
trigger1 = (100*enemy,life/enemy,const(data.life))>30
var(54) = 0

[State -2, PowerReset5]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=30
trigger1 = (100*enemy,life/enemy,const(data.life))>15
var(54) = -10

[State -2, PowerReset6]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=15
trigger1 = (100*enemy,life/enemy,const(data.life))>0
var(54) = -25

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 6
triggerall = roundstate = 2
trigger1 = Var(19)
var(58) = ifElse((Stateno = [195,999]),35,ifElse((Stateno = [1000,2999]),30,10))

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 6
triggerall = roundstate = 2
trigger1 = !Var(19)
var(58) = 0

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) != 6
triggerall = roundstate = 2
trigger1 = 1
var(58) = 0

[State -2, 1]
type = VarSet
trigger1 = P2movetype != H
var(51) = 0

[State -2]
type = VarSet
trigger1 = Var(51) < 10
trigger1 = Var(31)
trigger1 = StateNo = [0, 2999]
fvar(9) = (10-Var(51))*.1*.72
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = Var(51) >= 10
trigger1 = Var(31)
trigger1 = StateNo = [0, 2999]
fvar(9) = .072
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = Var(31)
trigger1 = StateNo = [3000, 3999]
fvar(9) = .8
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !Var(31)
trigger1 = Var(51) = [6,29]
trigger1 = StateNo = [0, 2999]
fvar(9) = (24-(Var(51)-5))*.0375;.0417
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !Var(31)
trigger1 = Var(51) >= 30
trigger1 = StateNo = [0, 2999]
fvar(9) = .0375;.0417
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = !Var(31)
trigger1 = Var(51) <= 5
trigger2 = StateNo = [3000, 3999]
fvar(9) = 1
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = 1
fvar(10) = (100+Var(52))*.01*(100+Var(53))*.01*(100+Var(54))*.01*(100+Var(58))*.01*(100+((Var(17)>0)*15))*.01*(100+((Var(29)>0)*20))*.01*(10+(Var(21)*2))*.1*FVar(9)
ignorehitpause = 1

;---------------------
; Counter Hit
[State -2, VarSet]
type = VarSet
trigger1 = P2MoveType = A
var(21) = 1

[State -2, VarSet]
type = VarSet
trigger1 = P2MoveType != A
var(21) = 0

;---------------------
; Safe Fall
[State -2, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo= 5070 || StateNo= 5080
trigger1 = Time = 1
trigger1 = P2StateNo = [3000,3999]
var(15) = 1

[State -2, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo= 5070 || StateNo= 5080
trigger1 = Time = 1
trigger1 = P2StateNo != [3000,3999]
trigger2 = MoveType != H
var(15) = 0

;---------------------
; Cheap KO Anim
[State -2, 3]
type = ChangeState
trigger1 = !Alive
trigger1 = PrevStateNo = 130 || PrevStateNo = 131 || PrevStateNo = [150,153]
trigger1 = Stateno = [5000,5050]
value = 5950

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = S
ignorehitpause = 1
fvar(1) = 0

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = C
ignorehitpause = 1
fvar(1) = 1

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = A
ignorehitpause = 1
fvar(1) = 2

;---------------------
; Sound
[State -3, Bounding Sound]
type = PlaySnd
triggerall = Anim = 5950 && roundstate = 2
triggerall = random%2 = 0
trigger1 = AnimElemTime(1) = 2
value = S5000,2
channel = 0

[State -3, Bounding Sound]; Ground Hit
type = PlaySnd
triggerall = Anim = 5950
trigger1 = AnimElem = 8
value = S5100,0

[State 3010,PlaySnd]
type = PlaySnd
triggerall = AnimElem = 1,=3
trigger1 = stateno = 950 && movetype != H
trigger2 = stateno = 955 && movetype != H
value = S5000,0
channel = 0

;----------------Parry-------------------------------------------------------
; Thanks, Phantom.of.the.Server!
[State -2, Parry]
type = Helper
triggerall = (var(5)&8)>0
triggerall = RoundState = 2 && !NumHelper(725) && !Var(31)
triggerall = (MoveType=I && Ctrl) || (StateNo=[700,720])
triggerall = (command != "release_up" && command != "release_down" && command != "release_back" && command != "release_fwd")
trigger1 = (StateType = S || StateType = C) && (command="parry" || command="parry2")
trigger2 = StateType = A && command="parry" && Var(6) < 2
helpertype = Normal
stateno = 725
ID = 725
name = "Parry Detection"
postype = p1
pausemovetime = 65535
supermovetime = 65535

[State -2, Attack]
type = ChangeState
trigger1 = (StateNo != [700,720]) && NumHelper(725)
trigger1 = Helper(725), StateNo = 726
value = ifElse((Helper(725), Anim=727), 720, ifElse((Helper(725), Anim=726), 710, 700))
ignorehitpause = 1

[State -2, Proj-S]
type = HitOverRide
trigger1 = (StateNo!=[700,720]) && NumHelper(725)
trigger1 = !(Helper(725),Var(0)) && (Helper(725),Anim=725)
attr = SA,AP
stateno = 700
slot=0
time=1
ignorehitpause = 1
[State -2, Proj-C]
type = HitOverRide
trigger1 = (StateNo!=[700,720]) && NumHelper(725)
trigger1 = !(Helper(725),Var(0)) && (Helper(725),Anim=726)
attr = C,AP
stateno = 710
slot=0
time=1
ignorehitpause = 1
[State -2, Proj-A]
type = HitOverRide
trigger1 = (StateNo!=[700,720]) && NumHelper(725)
trigger1 = !(Helper(725),Var(0)) && (Helper(725),Anim=727)
attr = SCA,AP
stateno = 720
slot=0
time=1
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = Var(1) > 0
trigger1 = Var(1) := (Var(1)-1)
flag=NoWalk

;------------Just Defense----------------------------------------------------
;----------------------------------------------------------------------------
; Again, thank you Warusaki.

;Just Defense Input
[State -2, VarSet]
type = VarSet
trigger1 = RoundState = 0
var(0) = -1

[State -2, VarAdd]
type = VarAdd
trigger1 = Var(0) >= 0
var(0) = 1
ignorehitpause = 1

[State -2, 46]
type = VarSet
triggerall = Var(0) > 12
trigger1 = Command != "holdback"
var(0) = -1

[State -2, 46]
type = VarSet
triggerall = Var(0) = -1
triggerall = StateNo != [140,149]
trigger1 = Command = "back"
trigger2 = Command = "downback"
var(0) = 0

[State -2, 46]
type = VarSet
triggerall = Var(0) = [0,6]
trigger1 = Command != "holdback"
var(0) = 7

[State -2, 46]
type = VarSet
trigger1 = StateNo != [120,155]
var(14) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Decrease shakeTime and hitTime for Just Defense
[State -2, WTF]
type = VarAdd
trigger1 = Var(2) > 0
var(2) = -1
ignorehitpause = 1

[State -2, WTF]
type = VarAdd
trigger1 = !Var(2)
trigger1 = Var(13) > 0
var(13) = -1
ignorehitpause = 1

;Standing Just Defense
[State -2, 3]
type = VarSet
triggerall = (var(5)&4)>0
triggerall = Var(14) != -1
triggerall = StateNo = 150 && !Time
trigger1 = Var(0) = [0,6]
var(14) = 1

;Crouching Just Defense
[State -2, 3]
type = VarSet
triggerall = (var(5)&4)>0
triggerall = Var(14) != -1
triggerall = StateNo = 152 && !Time
trigger1 = Var(0) = [0,6]
var(14) = 1

;Aerial Just Defense
[State -2, new]
type = HitOverride
triggerall = (var(5)&4)>0
triggerall = Var(14) != -1
triggerall = StateType = A && Ctrl && (-Pos Y >= Vel Y)
triggerall = Var(6) != 2
trigger1 = Var(0) = [0,6]
slot = 0
stateno = 154
attr = SCA, AA, AP
time = 1

[State -2, 46]
type = VarSet
triggerall = StateNo = 154
triggerall = Time = 0
trigger1 = PrevStateNo = 5020
var(14) = 1
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Stand coding
[State -2, VarAdd]
type = VarAdd
trigger1 = Var(7) > 0
var(7) = -1
ignorehitpause = 1

[State -2, VarAdd]
type = VarAdd
trigger1 = !Var(7) && Var(11) > 0
var(11) = -1
ignorehitpause = 1

[State -2, VarAdd]
type = VarAdd
trigger1 = !Var(7) && Var(8) > 0
var(8) = -1
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = Time = 0
var(11) = GetHitVar(slideTime)
ignorehitpause = 1
[State -2, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = Time = 0
var(7) = GetHitVar(hitShakeTime)
ignorehitpause = 1
[State -2, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = time = 0
var(8) = GetHitVar(hitTime)+1
ignorehitpause = 1

;----------------------------------------------------------------------------------
; KO Voice
[State -2,AI]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(2) = 0

[State -2,AI]
type = VarSet
trigger1 = Anim = 5950 || StateNo = 5950
ignorehitpause = 1
fvar(2) = 1

[State -2,AI]
type = VarSet
trigger1 = movetype != H
trigger1 = roundstate = 2
ignorehitpause = 1
fvar(35) = 0

[State -2,AI]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = roundstate = 2
trigger1 = Time = 0
ignorehitpause = 1
fvar(35) = GetHitVar(hitshaketime)

[State -2, KO]
type = PlaySnd
triggerall = roundstate = 3
triggerall = !(Enemy, Name = "Oswald_WLS" && (StateNo = [920,921]))
trigger1 = !FVar(2) && !FVar(0)
trigger1 = FVar(36) = ifElse(!FVar(35),1,ifelse(FVar(35)>20,20,FVar(35)))
trigger2 = !FVar(19) && FVar(0)
trigger2 = FVar(36) = 12
ignorehitpause = 1
value = S111,0

[State -2, KO]
type = PlaySnd
triggerall = roundstate = 3
triggerall = FVar(2)
trigger1 = Anim = 5950 && AnimElemTime(1) = 1
ignorehitpause = 1
value = S5950,0

[State -2, KO]
type = PlaySnd
triggerall = NumEnemy
trigger1 = (Enemy, Name = "cvsgouki_ex" || Enemy, Name = "cvsgouki" && Enemy, Var(12))
trigger1 = StateNo = 3305 && MoveType = H
trigger1 = Time = 35
ignorehitpause = 1
value = S5950,0

[State -2,KO]
type = Varadd
trigger1 = !Alive
ignorehitpause = 1
fvar(36) = 1

[State -2,KO]
type = Varset
trigger1 = Alive
ignorehitpause = 1
fvar(36) = 0

;----------------------------------------------------------------------------------
; Do this crap when KO'd
[State -2, HyperComboFinish]
type = Helper
triggerall = WinKo && !FVar(21)
trigger1 = StateNo = [3000, 3999]
trigger2 = Var(31)
trigger3 = FVar(33) = 12
;trigger4 = projhittime(3005) = 1 || projhittime(3405) = 1
ID = 9000
stateno = ifElse(FVar(33) = 12,9002,ifElse((Var(10)=[4,6]),9010,9000))
postype = left
pos = -50,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
persistent = 0

[State -2, HyperComboFinish]
type = Pause
trigger1 = WinKo && !FVar(21)
time = 10
ignorehitpause = 1

[State -2, HyperComboFinish]
type = PlaySnd
trigger1 = WinKo && !FVar(21)
value = S9000,0
ignorehitpause = 1

[State -2,KO]
type = VarAdd
trigger1 = roundstate = 3
ignorehitpause = 1
fvar(21) = 1

[State -2,KO]
type = VarSet
trigger1 = roundstate = 0
ignorehitpause = 1
fvar(21) = 0

[State -2,KO]
type = VarAdd
trigger1 = roundstate = 4
ignorehitpause = 1
fvar(22) = 1

[State -2,KO]
type = VarSet
trigger1 = roundstate = 0
ignorehitpause = 1
fvar(22) = 0

[State -2,VarSet] ; for reflectors
type = null;VarSet
trigger1 = Var(12)
var(12) = 0

;-------
; AfterImage Remover
[State -2, AfterImageTime]
type = AfterImageTime
triggerall = !Var(30)
trigger1 = MoveType = H
trigger2 = StateNo = [0,49]
trigger3 = StateNo = [52,199]
trigger4 = StateNo = [200,299]
trigger5 = StateNo = [400,499]
trigger6 = StateNo = [600,699]
trigger7 = StateNo = [800,1599]
time = 0

[State -2, VarSet]
type = VarSet
triggerall = !Var(30)
trigger1 = MoveType = H
trigger2 = StateNo != [40,50]
var(4) = 0

;===============================================================================
; ------- NotHitBy fix by Caddie --------
;===============================================================================
[State -2, hitby]
type = hitby
trigger1 = life > 0
trigger1 = stateno = 5100 || stateno = 5110 || stateno = 5120
trigger1 = anim != 5120
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
time = 1

;----------------------------------------------------------------------------------
; Reset Power & MAX
[State -2, 1]
type = PowerSet
triggerall = roundstate = 0
trigger1 = FVar(14)
trigger2 = Var(10) = 4
value = 0

[State -2, 1]
type = PowerSet
triggerall = RoundState = 0
triggerall = Var(10) = 6
trigger1 = Var(27) = 2
value = 0

[State -2, 1]
type = VarSet
trigger1 = Roundstate = 0 && (Var(19) || Var(27) = 2) && RoundNo != 1
trigger2 = Roundstate = 0 && roundno = 1
fvar(14) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 || (stateNo = [180,189])
var(17) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 || (stateNo = [180,189])
var(29) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 || (stateNo = [180,189])
var(30) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 || (stateNo = [180,189])
var(31) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
var(19) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(33) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(34) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(35) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
var(36) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(37) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(4) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(5) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(6) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
fvar(14) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(15) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(16) = 0

[State -2, 1]
type = PalFX
trigger1 = roundstate = 0
Time = 1
add   = 0,0,0
ignorehitpause = 1

;CvS2 Character
[State -2, 1]
type = VarSet
trigger1 = 1
fvar(17) = 1;CAPCOM VS SNK 2

;----------------------------------------------------------------------------------
; Descale Groove Bar
[State -2, 1]
type = VarSet
triggerall = numenemy
triggerall = roundstate = 2
trigger1 = enemy,authorname = "warusaki3" && enemy,fvar(39) = 1
trigger2 = enemy,authorname = "mouser" && (P2Name = "Hibiki Takane" || P4Name = "Hibiki Takane")
trigger3 = enemy,authorname = "Jesuszilla" && enemy,fvar(17) = 1
trigger4 = enemy,authorname = "N64Mario" && enemy, Name = "Zero" && enemy,fvar(17) = 1
trigger5 = enemy,authorname = ".\/." && enemy,fvar(17) = 1
trigger6 = enemy,authorname = "H”" && enemy,fvar(39) = 1
var(35) = 1

[State -2, 1]
type = VarSet
trigger1 = 1
fvar(0) = 0

[State -2, 1]
type = VarSet
triggerall = numenemy
trigger1 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki"&&enemynear,var(13))
trigger2 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki_normal"&&enemynear,var(13))
trigger3 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki_ex"&&enemynear,var(13))
trigger4 = (enemynear,authorname="SUMI"&&enemynear,name="Destrudo Ryu"&&enemynear,var(16)=1)
trigger5 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal"&&enemynear,var(13))
trigger6 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal_ex"&&enemynear,var(13))
trigger7 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu"&&enemynear,var(13))
trigger8 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu_ex"&&enemynear,var(13))
trigger9 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsg_rugal"&&enemynear,var(13))
trigger10 = (enemynear,authorname="warusaki3"&&enemynear,name="cvssakura"&&enemynear,var(13))
fvar(0) = 1

[Statedef 69]
[State -2, 69]
type = ChangeState
trigger1 = 1
value = 69;@#

[State -2, OH SHI-]
type = ChangeState
triggerall = numenemy
trigger1 = enemy, AuthorName = "RyouWin"
trigger2 = enemy, AuthorName = "Ex-Inferis"
trigger3 = enemy, AuthorName = "Tetchi"
trigger4 = enemy, AuthorName = "bomb"
trigger5 = enemy, AuthorName = "beppu"
trigger6 = enemy, AuthorName = "Overmind"
trigger7 = enemy, AuthorName = "@ndroide"
trigger8 = enemy, AuthorName = "Moldredd"
trigger9 = enemy, AuthorName = "Smoke"
trigger10 = enemy, Name = "Lord Roger"

value = 69;@#

[State -2, OH SHI-]
type = ChangeState
triggerall = numpartner
trigger1 = Partner, AuthorName = "RyouWin"
trigger2 = Partner, AuthorName = "Ex-Inferis"
trigger3 = Partner, AuthorName = "Tetchi"
trigger4 = Partner, AuthorName = "bomb"
trigger5 = Partner, AuthorName = "beppu"
trigger6 = Partner, AuthorName = "Overmind"
trigger7 = Partner, AuthorName = "@ndroide"
trigger8 = Partner, AuthorName = "Moldredd"
trigger9 = Partner, AuthorName = "Smoke"
trigger10 = Partner, Name = "Lord Roger"

value = 69;@#


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
