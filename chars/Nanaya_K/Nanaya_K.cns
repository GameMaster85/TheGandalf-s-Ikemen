; Constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
life = 1000			;Amount of life to start with
power = 3000		;Amount of maximum power
attack = 100		;attack power (more is stronger)
defence = 100		;defensive power (more is stronger)
fall.defence_up = 50	;Percentage to increase defense everytime player is knocked down
liedown.time = 60		;Time which player lies down for, before getting up
airjuggle = 15		;Number of points for juggling
sparkno = 2			;Default hit spark number for HitDefs
guard.sparkno = 40	;Default guard spark number
KO.echo = 0			;1 to enable echo on KO
volume = 255			;Volume offset (negative for softer)
IntPersistIndex = 60	;Variables with this index and above will not have their values
FloatPersistIndex = 40  ;reset to 0 between rounds or matches. There are 60 int variables,
  				;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
  				;If omitted, then it defaults to 60 and 40 for integer and float
  				;variables repectively, meaning that none are persistent, i.e. all
  				;are reset. If you want your variables to persist between matches,
  				;you need to override state 5900 from common1.cns.


[Size]
xscale = 1			;Horizontal scaling factor.
yscale = 1			;Vertical scaling factor.
ground.back = 13		;Player width (back, ground)
ground.front = 13		;Player width (front, ground)
air.back = 13		;Player width (back, air)
air.front = 13		;Player width (front, air)
height = 65			;Height of player (for opponent to jump over)
attack.dist = 160		;Default attack distance
proj.attack.dist = 90	;Default attack distance for projectiles
proj.doscale = 0		;Set to 1 to scale projectiles too   
head.pos = -5, -95	;Approximate position of head
mid.pos = -5, -55		;Approximate position of midsection
shadowoffset = 0		;Number of pixels to vertically offset the shadow
draw.offset = 0,0		;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 1.2		;Walk forward
walk.back = -0.9		;Walk backward
run.fwd  = 5, 0		;Run forward (x, y)
run.back = -4.5,-3.8	;Hop backward (x, y)
jump.neu = 0,-9.91		;Neutral jumping velocity (x, y)
jump.back = -1.6		;Jump back Speed (x, y)
jump.fwd = 1.8		;Jump forward Speed (x, y)
runjump.back = -3.2,-9.91;Running jump speeds (opt)
runjump.fwd = 3.2,-9.91	;.
airjump.neu = 0,-9.4	;.
airjump.back = -1.6	;Air jump speeds (opt)
airjump.fwd = 1.8		;.

[Movement]
airjump.num = 0		;Number of air jumps allowed (opt)
airjump.height = 35	;Minimum distance from ground before you can air jump (opt)
yaccel = .55		;Vertical acceleration
stand.friction = .85	;Friction coefficient when standing
crouch.friction = .82	;Friction coefficient when crouching

[Quotes]
Victory1 = "Absolutely terrble. You should try fixing that in your next life."
Victory2 = "Well then think of it this way: You're going to die one day, so you lose nothing by dying here...right?"
Victory3 = "I am the spider that spins the web. Welcome to this wonderful killing chamber."
Victory4 = "Do you know where you will go when you die? If you happen to end up in Hell, give the devil my regards."
Victory5 = "Death by decapitation. You're not going to need those six coins where you're going."
Victory6 = "A judgment beyond the deepest valleys of Hades. Your death was predestined by the scripture of the mountains."
Victory7 = "Ah...I think you're going about this the wrong way. If you want to keep up with me, be ready to grow back an arm or two."
Victory8 = "Hm? My knife isn't as sharp as rumors say? Of course, my dear. But do take note: we are both becoming a little rough around the edges."
Victory9 = "If it was up to me, I would've liked to meet in a more secluded place with a few items around. Perhaps a dismantled table or chair? Wouldn't it be just like a scary story?"
Victory10 = "The first was for my mother and the second was for my father. Now then...how many more must be broken so that a demon can come for me? Karmic monotony is truly what makes this transient world a bother."
Victory11 = "I am on a completely different level from the likes of you. With your head sliced open like that, it would be polite to die quietly wouldn't it?"
Victory12 = "The responsible ones as yourself are the ones who die first. You may vanish without worry, Shiki. I'll be filling the spot you left behind."
Victory13 = "What the hell? Is that it Crimson Red Vermillion...!? Are you going to vanish again, just like you did that night!?"
Victory14 = "Uh oh, that was too close. Looks like I spanked her a bit too hard. If she dies on me, I'm done for as well. I'm trying to hold myself back as much as I can, but really I can't tell who the master is in this little relationship."
Victory15 = "You can't see everything at nighttime even if it's clear. Stop wandering around when it's late and stay in the mansion for your own good."

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
; Win pose 1
; CNS difficulty: basic
[StateDef 181]
Type = S
Ctrl = 0
Anim = 180
VelSet = 0,0

[State 181, VarRandom]
type = VarRandom
trigger1 = Time = 0
V = 0
Range = 0,4

[State 181, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S180,0+Var(0)
Channel = 0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [1,200]
flag = RoundNotOver

[State 181, ChangeAnim]
type = ChangeAnim
triggerAll = Anim = 180
trigger1 = Time = [75,105]
trigger1 = Var(0) = 1
trigger2 = Time = [30,60]
trigger2 = Var(0) = 3
value = 180
Elem = 4

[State 181, ChangeAnim]
type = ChangeAnim
triggerAll = Anim = 180
trigger1 = Time = 150
trigger1 = Var(0) = 0
trigger2 = Time = 165
trigger2 = Var(0) = 1
trigger3 = Time = 125
trigger3 = Var(0) = 2
trigger4 = Time = 125
trigger4 = Var(0) = 3
trigger5 = Time = 165
trigger5 = Var(0) = 4
value = 181

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[StateDef 190]
Type = S
Ctrl = 0
Anim = 190
VelSet = 0,0

[State 190, ChangeState]
type = ChangeState
triggerall = Enemy,AuthorName = "Kohaku" && Enemy,Name = "VAkiha_K"
trigger1 = Time = 0
value = 7300

[State 190, AssertSpecial]
type = AssertSpecial
trigger1 = 1
Flag = Intro

[State 190, VarRandom]
type = VarRandom
trigger1 = Time = 20
V = 0
Range = 0,4

[State 190, PlaySnd]
type = PlaySnd
trigger1 = Time = 20
value = S190,0+Var(0)
Channel = 0

[State 190, ChangeAnim]
Type = ChangeAnim
triggerAll = Anim = 190
trigger1 = Time = [35,80]
trigger1 = Var(0) = 0
trigger2 = Time = [80,125]
trigger2 = Var(0) = 1
trigger3 = Time = [50,80]
trigger3 = Var(0) = 2
trigger4 = Time = [65,80]
trigger4 = Var(0) = 3
trigger5 = Time = [65,110]
trigger5 = Var(0) = 4
value = 190
Elem = 2

[State 190, ChangeAnim]
type = ChangeAnim
triggerAll = Anim = 190
trigger1 = Time = 140
trigger1 = Var(0) = 0
trigger2 = Time = 230
trigger2 = Var(0) = 1
trigger3 = Time = 170
trigger3 = Var(0) = 2
trigger4 = Time = 170
trigger4 = Var(0) = 3
trigger5 = Time = 215
trigger5 = Var(0) = 4
value = 191

[State 190, ChangeState]
type = ChangeState
trigger1 = Anim = 191
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S195,0
channel = 0

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air				;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 200				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 200, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%3
channel = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,0

[State 200, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 24,IfElse(var(45) > 0,2,0)
animtype = Light
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,6
guard.pausetime = 6, 6
hitsound = S200,0
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8050))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -78))
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -4
down.velocity = -4,-2
air.type = High
air.velocity = -2,-2
yaccel = .54
getpower = 20

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Punch
; CNS difficulty: easy
[StateDef 210]
type = S
movetype= A
physics = S
poweradd = 35
ctrl = 0
velset = 0,0
anim = 210

[State 210, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = 12

[State 210, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%5
channel = 0

[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S100,1

[State 210, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S,NA
animtype  = Medium
damage = 35,IfElse(var(45) > 0,3,0)
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 8,9
guard.pausetime = 8,8
hitsound = S200,1
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8051))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -65))
ground.type = Low
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -6.5
air.velocity = -1.4,-2
down.velocity = -2.8,-2
yaccel = .54
air.fall = 1
fall.recover = 1
getpower = 20
envshake.time = 9
envshake.ampl = 2

[State 210, ChangeState]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Punch
; CNS difficulty: easy
[Statedef 220]
type = S
movetype= A
physics = S
poweradd = 45
ctrl = 0
velset = 0,0
anim = 220

[State 220, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 700
trigger1 = time = 1
value = S400,6+random%3
channel = 0

[State 220, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S100,2

[State 220, VelSet]
type = velSet
trigger1 = AnimElem = 3
x = 5

[State 220, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
damage = 58,IfElse(var(45) > 0,5,0)
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 8, 8
sparkno = -1+(0*(var(41) := 8052))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -60))
hitsound = S200,5
guardsound = S300,0
ground.type = high
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -7
airguard.ctrltime = 2
guard.velocity = -5
air.velocity = -3.5,-5
getpower = 20
givepower = 15
envshake.time = 9
envshake.ampl = 3
yaccel = 0.35

[State 220, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 221
ID = 221
sprpriority = 4
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Kick
; CNS difficulty: easy
[Statedef 230]
type    = S
movetype= A
physics = S
poweradd = 15
ctrl = 0
velset = 0,0
anim = 230

[State 230, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%3
channel = 0

[State 230, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,0

[State 230, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 24,IfElse(var(45) > 0,2,0)
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8,8
sparkno = -1+(0*(var(41) := 8050))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -70))
hitsound = S200,0
guardsound = S300,0
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -4,0
airguard.velocity = -1.4,-3.5
air.type = High
air.velocity = -1.4,-3.6
guard.kill = 0
air.fall = 1
getpower = 20
yaccel = 0.35

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Kick
; CNS difficulty: easy
[StateDef 240]
type = S
movetype= A
physics = S
poweradd = 35
ctrl = 0
velset = 0,0
anim = 240

[State 240, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%5
channel = 0

[State 240, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S100,1

[State 240, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = medium
hitflag = MAF
guardflag = MA
ground.type = low
sparkno = -1+(0*(var(41) := 8051))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -60))
hitsound = S200,1
guardsound = S300,0
damage = 43,IfElse(var(45) > 0,4,0)
priority = 3, Hit
getpower = 24, 12
givepower = 24, 12
pausetime = 8, 7
ground.slidetime = 12
guard.slidetime = 12
ground.hittime = 14
guard.hittime = 14
guard.ctrltime = 14
air.hittime = 14
ground.velocity = -4.5
air.velocity = -2, -4.5
airguard.velocity = -2.5, -5
envshake.time = 9
envshake.ampl = 2

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Kick
; CNS difficulty: easy
[Statedef 250]
type = S
movetype= A
physics = S
poweradd = 45
ctrl = 0
velset = 0,0
anim = 250

[State 250, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 700
trigger1 = time = 1
value = S400,6+random%3
channel = 0

[State 250, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S100,2

[State 250, PosAdd]
type = PosAdd
trigger1 = Time = [2,3]
x = 9

[State 250, PosAdd]
type = PosAdd
trigger1 = Time = [4,5]
x = 7

[State 250, PosAdd]
type = PosAdd
trigger1 = Time = [6,7]
x = 5

[State 250, PosAdd]
type = PosAdd
trigger1 = Time = [8,9]
x = 3

[State 250, PosAdd]
type = PosAdd
trigger1 = Time = [10,13]
x = 1

[State 250, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Hard
damage = 53,IfElse(var(45) > 0,5,0)
hitflag = MAF
guardflag = HA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8052))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -75))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -7
air.velocity = -1.6,-2
down.velocity = -3.2,-2
yaccel = .54
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 30
envshake.time = 9
envshake.ampl = 3

[State 250, ChangeState]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Punch
; CNS difficulty: easy
; Description: Simple crouching attack. The HitDef's guardflag parameter
;     is set to "L", meaning that the move can only be guarded low
;     (crouching), and not by standing or jumping opponents.
;     Like for all light attacks, it's a good idea to keep the slidetime
;     and hittime parameters at a smaller number, so the opponent isn't
;     stunned for too long. For all crouching attacks you have to
;     remember to set the attr parameter to indicate that it is crouching
;     attack. In this case, "C, NA" stands for "crouching, normal attack".
;     The HitDef's priority is set at 3, instead of the default of 4,
;     so this attack has a lower priority than most others, meaning the
;     player will get hit instead of trading hits with the opponent if
;     their attack collision boxes (Clsn1) intersect each other's Clsn2
;     boxes at the same time.
[StateDef 400]
type = C
movetype= A
physics = C
poweradd = 19
ctrl = 0
anim = 400
VelSet = 0,0

[State 400, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%3
channel = 0

[State 400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S100,0

[State 400, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = medium
hitflag = MAF
guardflag = MA
ground.type = low
sparkno = -1+(0*(var(41) := 8050))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -50))
hitsound = S200,0
guardsound = S300,0
damage = 41,IfElse(var(45) > 0,4,0)
priority = 4, Hit
getpower = 19
givepower = 19
pausetime = 8, 7
ground.slidetime = 11
guard.slidetime = 11
ground.hittime = 13
guard.hittime = 13
guard.ctrltime = 13
air.hittime = 13
ground.velocity = -4
air.velocity = -2, -4.5
airguard.velocity = -2.5, -5

[State 400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Punch
[Statedef 410]
type    = C
movetype= A
physics = C
poweradd = 40
ctrl = 0
anim = 410
sprpriority = 2
VelSet = 0,0

[State 410, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%5
channel = 0

[State 410, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,1

[State 410, PosAdd]
type = PosAdd
trigger1 = Time = [4,6]
x = 3

[State 410, PosAdd]
type = PosAdd
trigger1 = Time = [7,9]
x = 2

[State 410, PosAdd]
type = PosAdd
trigger1 = Time = [10,13]
x = 1

[State 410, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Hard
damage = 34,IfElse(var(45) > 0,3,0)
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 8,8
guard.pausetime = 8,8
hitsound = S200,9
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8051))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -35))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -4.5
air.velocity = -1.4,-2
down.velocity = -2.8,-2
yaccel = .54
air.fall = 1
fall.recover = 1
fall.recovertime = 25
getpower = 25
envshake.time = 9
envshake.ampl = 2

[State 410, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Strong Punch
[Statedef 420]
type    = C
movetype= A
physics = C
poweradd= 40
ctrl = 0
anim = 420
VelSet = 0,0

[State 420, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 700
trigger1 = time = 1
value = S400,6+random%3
channel = 0

[State 420, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S100,2

[State 420, explod]
type = Explod
trigger1 = AnimElem = 5
anim = 421
ID = 421
sprpriority = 3
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 420, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype = Hard
damage = 48,IfElse(var(45) > 0,5,0)
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 8,8
guard.pausetime = 8,8
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8052))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -55))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -6.5
air.velocity = -1.4,-6
down.velocity = -4,-2
yaccel = .54
air.fall = 1
fall.recover = 1
fall.recovertime = 35
getpower = 25
envshake.time = 9
envshake.ampl = 3

[State 420, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
poweradd = 22
ctrl = 0
anim = 430
VelSet = 0,0

[State 430, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%3
channel = 0

[State 430, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S100,0

[State 430, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Hard
damage = 22,IfElse(var(45) > 0,2,0)
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 7,9
guard.pausetime = 7,9
hitsound = S200,0
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8050))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -15))
ground.type = High
ground.slideTime = 12
ground.hitTime  = 12
ground.velocity = -3.5
air.velocity = -2,-3.5
down.velocity = -2,-3
yaccel = .54
air.fall = 1
fall.recover = 1
getpower = 20

[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Kick
; CNS difficulty: easy
[StateDef 440]
type    = C
movetype= A
physics = C
poweradd= 22
ctrl = 0
anim = 440
VelSet = 0,0

[State 440, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%5
channel = 0

[State 440, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S100,1

[State 440, PosAdd]
type = PosAdd
trigger1 = Time = [5,6]
x = 8

[State 440, PosAdd]
type = PosAdd
trigger1 = Time = [7,8]
x = 6

[State 440, PosAdd]
type = PosAdd
trigger1 = Time = [9,10]
x = 4

[State 440, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = Hard
damage = 46,IfElse(var(45) > 0,5,0)
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,1
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8051))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -15))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -3.5
air.velocity = -1.4,-2
down.velocity = -2,-4
yaccel = .54
air.fall = 1
fall.recover = 1
fall.recovertime = 35
getpower = 25
envshake.time = 9
envshake.ampl = 2

[State 440, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Kick
; CNS difficulty: easy
; Description: This move uses "Trip" for the "ground.type" parameter in
;     its HitDef. It's a special type that puts the opponent in a tripped
;     animation as he falls. Also, the hitflag parameter in the HitDef
;     is set to "MAFD". The "D" indicates that a downed opponent can be
;     hit by the attack.
[Statedef 450]
type    = C
movetype= A
physics = C
poweradd= 50
ctrl = 0
anim = 450
VelSet = 0,0

[State 450, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 700
trigger1 = time = 1
value = S400,6+random%3
channel = 0

[State 450, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S100,2

[State 450, PosAdd]
type = PosAdd
trigger1 = Time = [10,12]
x = 10

[State 450, PosAdd]
type = PosAdd
trigger1 = Time = [13,15]
x = 8

[State 450, PosAdd]
type = PosAdd
trigger1 = Time = [16,18]
x = 6

[State 450, PosAdd]
type = PosAdd
trigger1 = Time = [19,21]
x = 4

[State 450, PosAdd]
type = PosAdd
trigger1 = Time = [22,24]
x = 2

[State 450, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = Hard
damage = 48,IfElse(var(45) > 0,5,0)
hitflag = MAF
guardflag = L
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8052))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -15))
ground.type = Trip
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -0.5,-3.6
air.velocity = -1.4,-6
yaccel = .54
air.fall = 1
fall.recover = 0
getpower = 45
envshake.time = 9
envshake.ampl = 3

[State 450, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 11
ctrl = 0
anim = 600

[State 600, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%3
channel = 0

[State 600, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,0

[State 600, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Light
damage = 22,IfElse(var(45) > 0,2,0)
hitflag = MAF
guardflag = HA
priority = 4, Hit
pausetime = 6,6
guard.pausetime = 6,6
hitsound = S200,0
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8050))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -70))
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -4
air.velocity = -1.4,-2
down.velocity = -2.8,-2
yaccel = .54
air.fall = 1
fall.recover = 1
fall.recovertime = 15
getpower = 12

[State 600, 5]
type = CtrlSet
trigger1 = Time >= 21
value = 1

;---------------------------------------------------------------------------
; Jump Medium Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 35
ctrl = 0
anim = 610

[State 610, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%5
channel = 0

[State 610, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,1

[State 610, explod]
type = Explod
trigger1 = AnimElem = 3
anim = 611
ID = 611
sprpriority = 3
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 0
ownpal = 1

[State 610, HitDef]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
attr = S, NA
animtype = Med
damage = 25,IfElse(var(45) > 0,3,0)
hitflag = MAF
guardflag = HA
priority = 4, Hit
pausetime = 8,8
guard.pausetime = 8,8
hitsound = S200,4
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8051))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -40))
ground.type = High
ground.slideTime = 11
ground.hitTime  = 11
ground.velocity = -4.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
air.fall = 1
fall.recover = 1
fall.recovertime = 25
getpower = 25
envshake.time = 9
envshake.ampl = 2

[State 610, 5]
type = CtrlSet
trigger1 = Time >= 32
value = 1

;---------------------------------------------------------------------------
; Jump Strong Punch
; CNS difficulty: easy
[StateDef 620]
type    = A
movetype= A
physics = A
poweradd= 50
ctrl = 0
anim = 620
sprpriority = 2

[State 620, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 700
trigger1 = time = 1
value = S400,6+random%3
channel = 0

[State 620, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,2

[State 620, explod]
type = Explod
trigger1 = AnimElem = 3
anim = 621
ID = 621
sprpriority = 3
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 620, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Hard
damage = 48,IfElse(var(45) > 0,5,0)
hitflag = MAF
guardflag = HA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,9
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8052))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -40))
ground.type = High
ground.slideTime = 15
ground.hitTime  = 15
ground.velocity = -5
air.velocity = -1.8,-2
down.velocity = -3.6,-2
yaccel = .54
air.fall = 1
fall.recover = 1
fall.recovertime = 35
getpower = 35
envshake.time = 9
envshake.ampl = 3

[State 620, 5]
type = CtrlSet
trigger1 = Time >= 30
value = 1

;---------------------------------------------------------------------------
; Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
poweradd= 11
ctrl = 0
anim = 630

[State 630, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%3
channel = 0

[State 630, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,0

[State 630, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Light
damage = 22,IfElse(var(45) > 0,2,0)
hitflag = MAF
guardflag = HA
priority = 4, Hit
pausetime = 6,6
guard.pausetime = 6,6
hitsound = S200,0
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8050))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -70))
ground.type = High
ground.slideTime = 11
ground.hitTime  = 11
ground.velocity = -4
air.velocity = -1.4,-2
down.velocity = -2.8,-2
yaccel = .54
air.fall = 1
fall.recover = 1
fall.recovertime = 15
getpower = 12

[State 630, 5]
type = CtrlSet
trigger1 = Time >= 25
value = 1

;---------------------------------------------------------------------------
; Jump Medium Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = A
poweradd= 35
ctrl = 0
anim = 640

[State 640, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 650
trigger1 = time = 1
value = S400,0+random%5
channel = 0

[State 640, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,1

[State 640, explod]
type = Explod
trigger1 = AnimElem = 3
anim = 611
ID = 611
sprpriority = 3
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 0
ownpal = 1

[State 640, HitDef]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
attr = S, NA
animtype = Med
damage = 25,IfElse(var(45) > 0,3,0)
hitflag = MAF
guardflag = HA
priority = 4, Hit
pausetime = 8,8
guard.pausetime = 8,8
hitsound = S200,4
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8051))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -40))
ground.type = High
ground.slideTime = 11
ground.hitTime  = 11
ground.velocity = -4.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
air.fall = 1
fall.recover = 1
fall.recovertime = 25
getpower = 25
envshake.time = 9
envshake.ampl = 2

[State 640, 5]
type = CtrlSet
trigger1 = Time >= 32
value = 1

;---------------------------------------------------------------------------
; Jump Strong Kick
; CNS difficulty: easy
[Statedef 650]
type    = A
movetype= A
physics = A
poweradd= 50
ctrl = 0
anim = 650

[State 650, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 700
trigger1 = time = 1
value = S400,6+random%3
channel = 0

[State 650, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = S100,2

[State 650, HitDef]
Type = HitDef
Trigger1 = AnimElem = 10
Attr = A, NA
Damage = 75,IfElse(var(45) > 0,7,0)
HitFlag = MAF
GuardFlag = HA
Priority = 3, Hit
PauseTime = 10,10
Guard.PauseTime = 10,10
HitSound = S200,2
GuardSound = S300,0
sparkno = -1+(0*(var(41) := 8052))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -40))
AnimType = Hard
Ground.Type = High
Ground.SlideTime = 15
Ground.HitTime  = 15
Ground.Velocity = -5.5
Guard.Velocity = -8.5
Air.Velocity = -1.6,-3.8
AirGuard.Velocity = -3,-1.4
Down.Velocity = -3.2,-2.5
Ground.CornerPush.VelOff = -6.5
Air.CornerPush.VelOff = -2.6
Down.CornerPush.VelOff = -4.2
YAccel = .48
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = 27
GetPower = 35
GivePower = 15
envshake.time = 9
envshake.ampl = 3

[State 650, 5]
type = CtrlSet
trigger1 = Time = 28
value = 1

[StateDef 700]
type = S
physics = S
movetype = I
anim = 700
ctrl = 0
velset = 0,0
sprpriority = -1

[State 700, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S410,23
channel = 0

[State 700, PosSet]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 700, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 700, HitBy]
type = HitBy
trigger1 = Time = 0
value = SCA, NT,ST,HT
time = 19

[State 700, AfterImage]
type = Afterimage
trigger1 = AnimElem = 1
time = 17
timegap = 1
framegap = 4
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
palpostbright = 0,0,0
paladd = 0,0,0
palmul = .9,.9,.9
trans = add1

[State 700, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 750]
type = S
physics = N
movetype = I
anim = 750
ctrl = 0
velset = 0,0
sprpriority = -1

[State 750, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S40,3

[State 750, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S400,0
Channel = 0

[State 750, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 750, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 5

[State 750, VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 750, HitBy]
type = HitBy
trigger1 = time <= 14
value = SCA, NT,ST,HT

[State 750, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 750, AfterImage]
type = Afterimage
trigger1 = AnimElem = 3
time = 22
timega p= 1
framegap = 4
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
palpostbright = 0,0,0
paladd = 0,0,0
palmul = .9,.9,.9
trans = add1

[State 750, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 751]
type = S
physics = N
movetype = I
anim = 750
ctrl = 0
velset = 0,0
sprpriority = -1

[State 751, Turn]
type = Turn
trigger1 = time = 0

[State 751, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S40,3

[State 751, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S400,0
Channel = 0

[State 751, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 751, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 5

[State 751, VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 751, HitBy]
type = HitBy
trigger1 = time <= 14
value = SCA, NT,ST,HT

[State 751, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 751, AfterImage]
type = Afterimage
trigger1 = AnimElem = 3
time = 22
timega p= 1
framegap = 4
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
palpostbright = 0,0,0
paladd = 0,0,0
palmul = .9,.9,.9
trans = add1

[State 751, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw - Attempt
; CNS difficulty: medium-advanced
; Description: Throws are not difficult to make, although then can be
;     tedious at times. Throw attempt states have a HitDef of a
;     special format. The key parameters in a throw are p1stateno
;     and p2stateno. If the HitDef successfully connects, then
;     the attacker will change to the state number specified by
;     p1stateno, and the opponent will be change to the state
;     number assigned to p2stateno. The special thing about p2stateno
;     is that the opponent will be temporarily brought into the
;     attacker's state file. In this case, no matter who the
;     opponent is, he will be taken to state 820 of this file (kfm.cns)
;     and remain here until the end of the throw (look at his debug
;     information when he is being thrown; the text changes to yellow
;     to mean that he is in another player's state file).
[StateDef 800]
Type = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 800
SprPriority = 2

[State 800, HitDef]
type = HitDef
Trigger1 = AnimElem = 3
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno = -1
sprpriority = 1
hitsound = S800,3
p1facing = ifelse(command = "holdback", 1, -1)
p2facing = 1
p1stateno = 810
p2stateno = 820
guard.dist = 0
fall = 1

[State 800, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S800,1+Random%2
channel = 0

[State 800, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throwing the opponent
; Description: In this state, the player throws the opponent by binding him to
;     various offsets based on his current frame of animation. For
;     example, [State 810, Bind 1] binds the opponent to an offset of
;     28 pixels in front of the player. That puts him around where the hand
;     is at. Is is important to keep the opponent bound using a
;     TargetBind controller at all times, until you let him go. This
;     is especially important if your player has a Clsn2 box that
;     allows him to get hit while throwing someone. Each time a player
;     gets hit, all his bound targets will be set to a fall state. If
;     the opponent is not bound, then he might get stuck in his thrown
;     state when his attacker is knocked out of the throw halfway.
; Notes: There is a TargetLifeAdd controller to decrease the opponent's
;     life, and a TargetState controller to change his state to a
;     falling state when KFM lets go of him.
[StateDef 810]
Type = S
MoveType = A
Physics = N
VelSet = 0,0
Anim = 810

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = S800,0
channel = 0

[State 810, PosAdd]
type = PosAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
trigger4 = AnimElem = 9
trigger5 = AnimElem = 10
x = -8

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 1
pos = 30, 0

[State 810, Width]
type = Width
trigger1 = 1
edge = 30,5

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 4
pos = 30, -5

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 5
pos = 30, -25

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 6
pos = 15, -40

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 7
pos = 10, -40

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 7
pos = 8, -42

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 8
pos = 10, -105

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 9
pos = 5, -105

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 10
pos = 0, -105

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 11
pos = -5, -105

[State 810, TargetBind]
type = TargetBind
trigger1 = AnimElem = 12
pos = -80, -5

[State 810, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1
value = 50

[State 810, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 12
value = IfElse(Var(45) > 0,-125,-100)

[State 810, EnShake]
type = EnvShake
trigger1 = AnimElem = 12
time = 16
freq = 90
ampl = 4

[State 810, VelSet]
type = VelSet
trigger1 = Time = 25
x = -1
y = -2

[State 810, VelAdd]
type = VelAdd
trigger1 = Time >= 26
y = .4

[State 810, TargetState]
type = TargetState
trigger1 = Time <= 20
value = 820

[State 810, TargetState]
type = TargetState
trigger1 = Time = [21,24]
value = 821

[State 810, TargetState]
type = TargetState
trigger1 = Time = 25
value = 822

[State 810, Turn]
Type = Turn
Trigger1 = AnimElem = 18

[State 810, ChangeState]
Type = ChangeState
Trigger1 = AnimElem = 19
Value = 51

;---------------------------------------------------------------------------
; Opponent Thrown
; (a custom gethit state)
; Description: This is the state that the opponent changes to after being
;     hit by the throw HitDef. The important thing here is to use a
;     ChangeAnim2 controller. The difference between ChangeAnim2 and
;     ChangeAnim is that ChangeAnim2 changes the player's animation to
;     an action in the AIR file of the attacker (in this case, kfm.air),
;     whereas ChangeAnim always changes the player to an action in his
;     own AIR file. Look at Action 820 in kfm.air for some extra
;     comments.
[StateDef 820]
Type = A
MoveType = H
Physics = N
VelSet = 0,0

[State 820, HitOverride]
type = HitOverRide
trigger1 = 1
attr = , NT, ST, HT
time = 1

[State 820, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 820, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5010

[State 820, SelfState]
type = SelfState
trigger1 = Time >= 10
trigger1 = P2MoveType != A
value = 5035

;---------------------------------------------------------------------------
; Opponent thrown into the air
; (a custom gethit state)
; Description: This state has the opponent flying through the air and
;     falling down onto the ground. The SelfState controller sets the
;     opponent back using to his own state file when he his the ground.
;     Controllers 821,2 and 821,3 allow the opponent to recover by
;     hitting his recovery command when he is falling.
[StateDef 821]
Type = A
MoveType= H
Physics = N
VelSet = 0,0

[State 821, HitOverride]
type = HitOverRide
trigger1 = 1
attr = , NT, ST, HT
time = 1

[State 821, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 821, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 821, AngleSet]
type = AngleSet
trigger1 = 1
value = -90

[State 821, ChangeAnim2]
type = ChangeAnim2
trigger1 = 1
value = 820

[State 821, SelfState]
type = SelfState
trigger1 = Time >= 10
trigger1 = P2MoveType != A
value = 5035

[StateDef 822]
Type = A
MoveType= H
Physics = N
VelSet = 0,10

[State 822, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 30

[State 822, ChangeAnim]
type = ChangeAnim
triggerAll = SelfAnimExist(5030)
trigger1 = Time = 0
value = 5030

[State 822, ChangeAnim]
type = ChangeAnim
triggerAll = SelfAnimExist(5035)
trigger1 =! SelfAnimExist(5030)
trigger1 = Time = 0
trigger2 = Anim = 5030
trigger2 = AnimTime = 0
value = 5035

[State 822, ChangeAnim]
type = ChangeAnim
triggerAll = SelfAnimExist(5050)
trigger1 =! SelfAnimExist(5030)
trigger1 =! SelfAnimExist(5035)
trigger1 = Time = 0
trigger2 = Anim = 5030
trigger2 = AnimTime = 0
trigger3 = Anim = 5035
trigger3 = AnimTime = 0
value = 5050

[State 822, VelAdd]
type = VelAdd
trigger1 = 1
y = .5

[State 822, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 1

[State 822, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

[Statedef 850]
type = S
movetype = I
physics = S
anim = 850
velset = 0,0
ctrl = 0
sprpriority = 2
facep2 = 1
poweradd = 75

[State 850, ChangeAnim]
type = changeanim
value = 853
trigger1 = Time = 10

[State 850, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AT
time = 1

[State 850, Pause]
type = Pause
trigger1 = Time = 0
time = 20
movetime = 20

[State 850, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 850, EnvShake]
type = EnvShake
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
time = 10
ampl = 2
freq = 180
phase = 40

[State 850 PlaySnd]
type = playsnd
value = S850,0
trigger1 = !time

[State 850, Explod]
type = Explod
ID = 855
anim = 860
pos = 49,-67
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -2
scale = .5,.5
trigger1 = !time
PauseMoveTime = 9999
SuperMoveTime = 9999

[State 850, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = NoStandGuard
flag3 = NoCrouchGuard

[State 850, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[StateDef 851]
type = C
movetype = I
physics = C
anim = 851
velset = 0,0
ctrl = 0
sprpriority = 2
facep2 = 1
poweradd = 75

[State 851, ChangeAnim]
type = changeanim
value = 854
trigger1 = Time = 10

[State 851, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AT
time = 1

[State 851, Pause]
type = Pause
trigger1 = Time = 0
time = 20
movetime = 20

[State 851, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 851, EnvShake]
type = EnvShake
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
time = 10
ampl = 2
freq = 180
phase = 40

[State 851, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 16

[State 851 PlaySnd]
type = playsnd
value = S850,0
trigger1 = !time

[State 851, Explod]
type = Explod
ID = 855
anim = 860
pos = 49,-37
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -2
scale = .5,.5
trigger1 = !time
PauseMoveTime = 9999
SuperMoveTime = 9999

[State 851, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = NoStandGuard
flag3 = NoCrouchGuard

[State 851, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

[StateDef 852]
type = A
movetype = I
physics = N
anim = 852
velset = 0,0
ctrl = 0
sprpriority = 2
facep2 = 1
poweradd = 75

[State 852, ChangeAnim]
type = changeanim
value = 855
trigger1 = Time = 10

[State 852, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AT
time = 1

[State 852, Pause]
type = Pause
trigger1 = Time = 0
time = 20
movetime = 20

[State 852, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 852, EnvShake]
type = EnvShake
trigger1 = time = 1
persistent = 0
ignorehitpause = 1
time = 10
ampl = 2
freq = 180
phase = 40

[State 852, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 16

[State 852 PlaySnd]
type = playsnd
value = S850,0
trigger1 = !time

[State 852, Explod]
type = Explod
ID = 855
anim = 860
pos = 49,-55
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -2
scale = .5,.5
trigger1 = !time
PauseMoveTime = 9999
SuperMoveTime = 9999

[State 852, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = NoStandGuard
flag3 = NoCrouchGuard

[State 852, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 853

[StateDef 853]
type = A
physics = N
ctrl = 1
anim = 48

[State 853, Gravity]
type = Gravity
trigger1 = 1

[State 853, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

[StateDef 854]
type = A
physics = N
movetype = I
anim = IfElse(Root,StateType = C,857,IfElse(Root,StateType = A,856,858))
velset = 0,0
ctrl = 0

[State 854, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 854, BindToRoot]
type = BindToRoot
trigger1 = 1
time = -1

[State 854, ChangeAnim]
type = ChangeAnim
triggerall = !time
trigger1 = Root,Command = "down"
value = 857

[State 854, ChangeAnim]
type = ChangeAnim
triggerall = !time
trigger1 = Root,Command = "fwd"
value = ifelse((Root,Statetype = A),858,856)

[State 854, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 856 || Anim = 858
value = IfElse((Root,StateType = A),858,856)

[State 854, VarSet]
type = VarSet
trigger1 = time >= IfElse((Root,StateType = A),7,8)
trigger2 = facing != (Root,facing)
var(0) = 1

[State 854, VarSet]
type = varset
trigger1 = (Root,Command = "holdback")
trigger2 = time < 4 && (Root,Command = "holdfwd" + Root,Command = "holddown") > 1
trigger3 = time >= 4 && (Root,Command = "holdfwd" || Root,Command = "holddown")
trigger4 = time >= 1 && (((Anim = 856 || Anim = 858) && Root,Command = "fwd") || (Anim = 857 && Root,Command = "down"))
var(0) = 1

[State 854, disable]
type = ChangeAnim
trigger1 = var(0) = 1
value = 99999

[State 854, ReversalDef]
type = ReversalDef
trigger1= !var(0) && (Anim = 856 || Anim = 858)
reversal.attr = SCA,AA
p1stateno = 855
pausetime = 0,0
sparkno = -1
numhits = 0

[State 854, ReversalDef]
type = ReversalDef
trigger1 = !var(0) && Anim = 857
reversal.attr = SC,AA
p1stateno = 855
pausetime = 0,0
sparkno = -1
numhits = 0

[State 854, ReversalDef]
type = ReversalDef
trigger1 = var(0) = 1
reversal.attr =
pausetime = 0,0
sparkno = -1
numhits = 0

[State 854, DestroySelf]
type = DestroySelf
trigger1 = time >= 18
trigger2 = (Root,MoveType != I)
trigger3 = !(Root,Ctrl) && (Root,StateNo != [850,852])
trigger4 = (Root,StateNo = [850,852]) && (Root,time <= 1)

[StateDef 855]
movetype = I
ctrl = 0

[State 855, VarSet]
type = varset
trigger1 = 1
var(0) = 1

[State 855, DestroySelf]
type = DestroySelf
trigger1 = Root,StateNo = [850,852]
trigger2 = time >= 2

[StateDef 900]
type = S
physics = S
movetype = I
anim = 900
velset = 0,0
ctrl = 0

[State 900, PowerAdd]
type = PowerAdd
triggerall = power < const(data.power) && power < powermax
trigger1 = (command = "hold_b" && command = "hold_y")
value = 2 + ifelse(time < 60, 0, (time-60)/12)

[State 900, PlaySnd]
type = PlaySnd
trigger1= !time
value = S410,13
channel = 0

[State 900, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 75+ceil(sin(time/6.0*pi)*75), 25+ceil(sin(time/6.0*pi)*25), 0

[State 900, Helper]
type = Helper
trigger1 = !NumHelper(902)
helpertype = normal
stateno = 902
ID = 902
name ="Power_Charge"
postype = p1
pausemovetime = 9999
supermovetime = 9999
ownpal = 1

[State 900, Helper]
type = Helper
trigger1 = !numhelper(903)
helpertype = normal
stateno = 903
ID = 903
name="Particles"
postype = p1
pausemovetime = 9999
supermovetime = 9999
ownpal = 1

[State 900, ChangeState]
type = ChangeState
trigger1 = power >= const(data.power) || power >= powermax || roundstate != 2
trigger2 = (command != "hold_b" || command != "hold_y")
value = 901
ctrl = 1

[StateDef 901]
type = S
physics = S
movetype = I
anim = 901
velset = 0,0
ctrl = 1

[State 901, StopSnd]
type = StopSnd
trigger1 = !time
channel = 0

[State 901, PlaySnd]
type = PlaySnd
trigger1 = !time && power >= const(data.power)
value = S410,22
channel = 0

[State 901, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 902]
type = A
physics = N
movetype = I
anim = 99999
ctrl = 0
velset = 0,0

[State 902, BindtoRoot]
type = BindtoRoot
trigger1 = (root,stateno = 900)
pos = 4,5

[State 902, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S900,0
Channel = 1

[State 902, Explod]
type = Explod
trigger1 = !numexplod(902)
ID = 902
anim = 902
sprpriority = 3
postype = p1
bindtime = -1
removetime = -1
scale = .5,.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 902, Explod]
type = Explod
trigger1 = !(time%6)
anim = 904
sprpriority = -3
postype = p1
pos = 0,-ceil(pos y)
scale = .5,.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 902, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(902) && root,power < 3000
ID = 902
scale = .5, .1 + .4*(root,power/3000.0)

[State 902, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(902) && root,power >= 3000
ID = 902
scale = .5, .5

[State 902, PlaySnd]
type = Stopsnd
trigger1 = Root,StateNo != 900
channel = 1

[State 902, RemoveExplod]
type = RemoveExplod
trigger1 = Root,StateNo != 900

[State 902, DestroySelf]
type = DestroySelf
trigger1 = Root,StateNo != 900

[StateDef 903]
type = A
physics = N
movetype = I
anim = 99999
ctrl = 0
velset = 0,0

[State 903, BindtoRoot]
type = BindtoRoot
trigger1 = !(time%8)
pos = ceil(-153+(random/3.125)),ceil(82-(random/3.125))

[State 903, Explod]
type = Explod
trigger1 = (time%8) = 1
anim = 903
sprpriority = ifelse(random < 750,5,-1)
postype = p1
vel = ((rootdist x-0)/32.0), ((rootdist y-70)/32.0)
scale = ifelse(random < 500,.5,-.5), ifelse(random < 500,.5,-.5)
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 903, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Stateno != 900

[State 903, DestroySelf]
type = DestroySelf
trigger1 = Root,StateNo != 900

[StateDef 950]
Type = S
MoveType = A
Physics = N
VelSet = 0,0
Anim = 950
ctrl = 0

[State 950, PlaySnd]
type = PlaySnd
triggerall = MoveType != H && Random < 700
trigger1 = time = 1
value = S400,6+random%3
channel = 0

[State 950, PowerAdd]
type = PowerAdd
trigger1 = time = 0
value = -1000

[State 950, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 20
movetime = 20
anim = -1
sound = -1
pos = 0,0
p2defmul = 1
poweradd = 0
darken = 0
unhittable = 1

[State 950, Helper]
type = Helper
trigger1 = Time = 0
Helpertype = normal
StateNo = 951
ID = 951
name = "Guard_Counter"
postype = p1
pos = ceil(10 * const(size.xscale)), ceil(-53 * const(size.yscale))
supermovetime = 9999
pausemovetime = 9999
ownpal = 1

[State 950, explod]
type = Explod
trigger1 = AnimElem = 6
anim = 421
ID = 950
sprpriority = 3
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 1

[State 950, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = S100,2

[State 950, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S10000,4

[state 950, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[state 950, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 20

[State 950, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S,SA
animtype = Hard
damage = 100
hitflag = MAF
guardflag =
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -55))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -3,-12
air.velocity = -3,-12
down.velocity = -4,-2
yaccel = .54
fall = 1
fall.recover = 0
getpower = 0
envshake.time = 10
envshake.ampl = 3
envshake.freq = 90

[State 950, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 951]
Type = A
Physics = N
MoveType = I
Anim = 99999
ctrl = 0
velset = 0,0

[State 951, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 1
color= 16*time
mul = 16*time, 16*time, 16*time

[State 951, Explod]
type = Explod
trigger1 = Time = 0
Anim = 951
ID = 951
sprpriority = 3
postype = p1
removetime = 16
supermovetime = -1
ownpal = 1

[State 951, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(951)
ID = 951
scale = (.0625*time), (.0625*time)
trans = addalpha
alpha = 256-(16*time), 256

[State 951, Explod]
type = Explod
trigger1 = time = 0
anim = 952
ID = 952
sprpriority = -2
postype = p1
pos = 0,-ceil(pos y)
supermovetime = -1
ownpal = 1

[State 951, DestroySelf]
type = DestroySelf
trigger1= time >= 16

[StateDef 1000]
Type = S
MoveType= A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1000
SprPriority = 2
Poweradd = 60

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 9
ID = 1000
postype = P1
pos = 36,-30
Anim = 2109
ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1
bindtime = -1

[State 1000, PlaySnd]
Type = PlaySnd
Trigger1 = Time = [11,23]
Value = S100,1
Channel = 1
Persistent = 4

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10
attr = S,SA
animtype = Hard
damage = 18,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 1,5
guard.pausetime = 1,5
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-70)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
envshake.time = 9
envshake.ampl = 1

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 12
trigger2 = AnimElem = 14
attr = S,SA
animtype = Hard
damage = 18,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-50)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
envshake.time = 10
envshake.ampl = 2

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 16
attr = S,SA
animtype = Hard
damage = 18,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-60)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
envshake.time = 10
envshake.ampl = 2

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 18
attr = S,SA
animtype = Hard
damage = 18,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-60)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -1,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
envshake.time = 10
envshake.ampl = 2

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 1010]
Type = S
MoveType= A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1010
SprPriority = 2
Poweradd = 60

[State 1010, PosAdd]
type = PosAdd
trigger1 = Time = [2,3]
x = 6

[State 1010, PosAdd]
type = PosAdd
trigger1 = Time = [4,5]
x = 3

[State 1010, PosAdd]
type = PosAdd
trigger1 = Time = [6,7]
x = 2

[State 1010, PosAdd]
type = PosAdd
trigger1 = Time = [10,11]
x = 6

[State 1010, PosAdd]
type = PosAdd
trigger1 = Time = [12,13]
x = 3

[State 1010, PosAdd]
type = PosAdd
trigger1 = Time = [13,14]
x = 2

[State 1010, Explod]
type = Explod
trigger1 = AnimElem = 9
ID = 1000
postype = P1
pos = 36,-30
Anim = 2109
ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1
bindtime = -1

[State 1010, PlaySnd]
Type = PlaySnd
Trigger1 = Time = [16,29]
Value = S100,1
Channel = 1
Persistent = 4

[State 1010, HitDef]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10
attr = S,SA
animtype = Hard
damage = 18,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-70)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
envshake.time = 10
envshake.ampl = 2

[State 1010, HitDef]
type = HitDef
trigger1 = AnimElem = 12
trigger2 = AnimElem = 14
attr = S,SA
animtype = Hard
damage = 18,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-50)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
envshake.time = 10
envshake.ampl = 2

[State 1010, HitDef]
type = HitDef
trigger1 = AnimElem = 16
attr = S,SA
animtype = Hard
damage = 18,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-60)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
envshake.time = 10
envshake.ampl = 2

[State 1010, HitDef]
type = HitDef
trigger1 = AnimElem = 18
attr = S,SA
animtype = Hard
damage = 18,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-60)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
envshake.time = 10
envshake.ampl = 2

[State 1010, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 1020]
Type = S
MoveType= A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1020
SprPriority = 2
Poweradd = 60

[State 1020, PosAdd]
type = PosAdd
trigger1 = Time = [2,3]
x = 8

[State 1020, PosAdd]
type = PosAdd
trigger1 = Time = [4,5]
x = 4

[State 1020, PosAdd]
type = PosAdd
trigger1 = Time = [6,7]
x = 2

[State 1020, Explod]
type = Explod
trigger1 = Time = [19,38]
ID = 1000
postype = P1
pos = 36,-30
Anim = 2109
ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 12
RemoveTime = -2
RemoveOnGetHit = 1
bindtime = -1

[State 1020, PlaySnd]
Type = PlaySnd
Trigger1 = Time = [21,44]
Value = S100,1
Channel = 1
Persistent = 4

[State 1020, HitDef]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10
trigger3 = AnimElem = 20
trigger4 = AnimElem = 22
attr = S,SA
animtype = Hard
damage = 17,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-70)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
envshake.time = 10
envshake.ampl = 2

[State 1020, HitDef]
type = HitDef
trigger1 = AnimElem = 12
trigger2 = AnimElem = 14
trigger3 = AnimElem = 24
trigger4 = AnimElem = 26
attr = S,SA
animtype = Hard
damage = 17,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-50)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
envshake.time = 10
envshake.ampl = 2

[State 1020, HitDef]
type = HitDef
trigger1 = AnimElem = 16
trigger2 = AnimElem = 18
attr = S,SA
animtype = Hard
damage = 17,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-60)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
envshake.time = 10
envshake.ampl = 2

[State 1020, HitDef]
type = HitDef
trigger1 = AnimElem = 28
attr = S,SA
animtype = Hard
damage = 17,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-60)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
envshake.time = 10
envshake.ampl = 2

[State 1020, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 1030]
Type = S
MoveType= A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1030
SprPriority = 2

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 12

[State 1030, VarSet]
type = VarSet
trigger1 = !time
var(25) = 30

[State 1030, VarAdd]
type = VarAdd
trigger1 = Time = 0
trigger1 = var(45) > 0
var(45) = -120
ignorehitpause = 1

[State 1030, Explod]
type = Explod
trigger1 = !time
anim = 11000
sprpriority = 3
postype = p1
pos = ceil(-5 * const(size.xscale)), ceil(-60 * const(size.yscale))
scale = 0.5,0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 1030, PowerAdd]
type = PowerAdd
trigger1 = Time = 0
value = IfElse(Var(45) > 0,0,-500)

[State 1030, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S10000,3

[State 1030, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S410,12
Channel = 0

[State 1030, VelSet]
type = VelSet
triggerall = Time = [12,58]
triggerall = Command != "holdback"
trigger1 = Command = "holdfwd"
x = 3

[State 1030, VelSet]
type = VelSet
triggerall = Time = [12,58]
triggerall = Command != "holdfwd"
trigger1 = Command = "holdback"
x = -3

[State 1030, VelSet]
type = VelSet
trigger1 = Command != "holdback"
trigger1 = Command != "holdfwd"
x = 0

[State 1030, Explod]
type = Explod
trigger1 = Time = [11,45]
ID = 1000
postype = P1
pos = 36,-30
Anim = 2109
ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 12
RemoveTime = -2
RemoveOnGetHit = 1
bindtime = -1

[State 1030, PlaySnd]
Type = PlaySnd
Trigger1 = Time = [11,46]
Value = S100,1
Channel = 1
Persistent = 4

[State 1030, HitDef]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10
trigger3 = AnimElem = 20
trigger4 = AnimElem = 22
trigger5 = AnimElem = 30
attr = S,SA
animtype = Hard
damage = 14,2
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-70)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -4
air.velocity = -1,-2
down.velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1030, HitDef]
type = HitDef
trigger1 = AnimElem = 12
trigger2 = AnimElem = 14
trigger3 = AnimElem = 24
trigger4 = AnimElem = 26
trigger5 = AnimElem = 32
trigger6 = AnimElem = 34
attr = S,SA
animtype = Hard
damage = 14,2
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-50)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1030, HitDef]
type = HitDef
trigger1 = AnimElem = 16
trigger2 = AnimElem = 18
trigger3 = AnimElem = 28
trigger4 = AnimElem = 36
attr = S,SA
animtype = Hard
damage = 14,2
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-60)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1030, HitDef]
type = HitDef
trigger1 = AnimElem = 38
attr = S,SA
animtype = Hard
damage = 14,2
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 3,6
guard.pausetime = 3,6
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := ceil(enemy,Pos Y-60)))
ground.type = High
ground.slideTime = 13
ground.hitTime  = 13
ground.velocity = -8.5
air.velocity = -2,-2
down.velocity = -4,-2
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1030, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 1100]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1100
SprPriority = 2
PowerAdd = 30

[State 1100, PosAdd]
type = PosAdd
trigger1 = Time = [2,3]
x = 2

[State 1100, PosAdd]
Type = PosAdd
Trigger1 = Time = [4,7]
X = 1

[State 1100, VelSet]
type = VelSet
trigger1 = AnimElem = 6, = 1
x = 4.5
y = -7.5

[State 1100, VelAdd]
type = VelAdd
trigger1 = Time = [10,22]
x = -.3

[State 1100, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6, = 1
StateType = A
Physics = A

[State 1100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S410,3
Channel = 0

[State 1100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
Value = S100,10

[State 1100, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 1101
PosType = P1
pos = -2,42
Anim = 1101
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1
ignorehitpause = 0

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S,SA
animtype = Hard
damage = 70,7
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -40))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2,-8.4
air.velocity = -2,-8.4
down.velocity = -4,-2
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 30
envshake.time = 10
envshake.ampl = 3

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = A,SA
animtype = Hard
damage = 35,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -70))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2,-8.6
air.velocity = -2,-8.6
down.velocity = -4,-2
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
envshake.time = 10
envshake.ampl = 3

[State 1100, ChangeState]
Type = ChangeState
Trigger1 = Command = "a" || Command = "b" || Command = "c"
Trigger1 = AnimElem = 11, >= 0
Value = 1105

[StateDef 1105]
Type = A
MoveType = A
Physics = A
Ctrl = 0
Anim = 1105
SprPriority = 2

[State 1105, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = -1.5
y = -7.5

[State 1105, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S400,4+Random%2
channel = 0

[State 1105, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S100,2

[State 1105, Explod]
type = Explod
trigger1 = AnimElem = 2
Anim = 1106
ID = 1106
postype = P1
pos = 0,25
ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 1105, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A,SA
animtype = Hard
damage = 50,5
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -50))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2,-8
air.velocity = -2,-8
down.velocity = -4,-2
yaccel = .57
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 42
getpower = 20
envshake.time = 10
envshake.ampl = 3

[StateDef 1110]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1100
SprPriority = 2
PowerAdd = 30

[State 1110, PosAdd]
type = PosAdd
trigger1 = Time = [2,3]
x = 2

[State 1110, PosAdd]
Type = PosAdd
Trigger1 = Time = [4,7]
X = 2

[State 1110, VelSet]
type = VelSet
trigger1 = AnimElem = 6, = 1
x = 5
y = -10

[State 1110, VelAdd]
type = VelAdd
trigger1 = Time = [10,22]
x = -.25

[State 1110, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6, = 1
StateType = A
Physics = A

[State 1110, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S410,3
Channel = 0

[State 1110, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
Value = S100,10

[State 1110, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 1101
PosType = P1
pos = -2,42
Anim = 1101
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1
ignorehitpause = 0

[State 1110, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S,SA
animtype = Hard
damage = 70,7
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -40))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2,-8.4
air.velocity = -2,-8.4
down.velocity = -4,-2
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 30
envshake.time = 10
envshake.ampl = 3

[State 1110, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = A,SA
animtype = Hard
damage = 35,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -70))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2,-8.6
air.velocity = -2,-8.6
down.velocity = -4,-2
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
envshake.time = 10
envshake.ampl = 3

[State 1110, ChangeState]
Type = ChangeState
Trigger1 = Command = "a" || Command = "b" || Command = "c"
Trigger1 = AnimElem = 11, >= 0
Value = 1105

[StateDef 1120]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1100
SprPriority = 2
PowerAdd = 30

[State 1120, PosAdd]
type = PosAdd
trigger1 = Time = [5,6]
x = 3

[State 1120, PosAdd]
Type = PosAdd
Trigger1 = Time = [7,10]
X = 3

[State 1120, VelSet]
type = VelSet
trigger1 = AnimElem = 6, = 1
x = 7
y = -9.6

[State 1120, VelAdd]
type = VelAdd
trigger1 = Time = [14,28]
x = -.4

[State 1120, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6, = 1
StateType = A
Physics = A

[State 1120, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S410,3
Channel = 0

[State 1120, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
Value = S100,10

[State 1120, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 1101
PosType = P1
pos = -2,42
Anim = 1101
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1
ignorehitpause = 0

[State 1120, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S,SA
animtype = Hard
damage = 70,7
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -40))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2,-8.4
air.velocity = -2,-8.4
down.velocity = -4,-2
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 30
envshake.time = 10
envshake.ampl = 3

[State 1120, HitDef]
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
attr = A,SA
animtype = Hard
damage = 25,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -70))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2,-8.6
air.velocity = -2,-8.6
down.velocity = -4,-2
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 10
envshake.time = 10
envshake.ampl = 3

[State 1120, ChangeState]
Type = ChangeState
Trigger1 = Command = "a" || Command = "b" || Command = "c"
Trigger1 = AnimElem = 11, >= 0
Value = 1105

[StateDef 1130]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1130
SprPriority = 2

[State 1130, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 1130, VarAdd]
type = VarAdd
trigger1 = Time = 0
trigger1 = var(45) > 0
var(45) = -120
ignorehitpause = 1

[State 1130, VarSet]
type = VarSet
trigger1 = !time
var(25) = 30

[State 1130, Explod]
type = Explod
trigger1 = !time
anim = 11000
sprpriority = 3
postype = p1
pos = ceil(-5 * const(size.xscale)), ceil(-45 * const(size.yscale))
scale = 0.5,0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 1130, PowerAdd]
type = PowerAdd
trigger1 = Time = 0
value = IfElse(Var(45) > 0,0,-500)

[State 1130, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S10000,3

[State 1130, PosAdd]
type = PosAdd
trigger1 = Time = [6,7]
x = 4

[State 1130, PosAdd]
Type = PosAdd
Trigger1 = Time = [9,10]
X = 3

[State 1130, PosAdd]
Type = PosAdd
Trigger1 = Time = 11
X = 2

[State 1130, VelSet]
type = VelSet
trigger1 = AnimElem = 6, = 1
x = 7.5
y = -10

[State 1130, VelAdd]
type = VelAdd
trigger1 = Time = [12,25]
x = -.4

[State 1130, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6, = 1
StateType = A
Physics = A

[State 1130, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S410,4
Channel = 0

[State 1130, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S410,5
Channel = 0

[State 1130, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
Value = S100,10

[State 1130, Helper]
type = Helper
trigger1 = Time = 0
StateNo = 1131
ID = 1131
Name = "Clone"
PosType = P1
pos = 0,0
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0

[State 1130, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 1101
PosType = P1
pos = -2,42
Anim = 1101
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 1130, HitDef]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
attr = S,SA
animtype = Hard
damage = 25,7
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 1,1
guard.pausetime = 1,1
hitsound = S200,6+Random%3
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 30 && var(44) := -40))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2.5,-9.8
air.velocity = -2.5,-9.8
down.velocity = -5,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 48
getpower = 0
envshake.time = 10
envshake.ampl = 3

[State 1130, HitDef]
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
trigger4 = AnimElem = 10
attr = A,SA
animtype = Hard
damage = 10,2
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 1,1
guard.pausetime = 1,1
hitsound = S200,6+Random%3
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 30 && var(44) := -70))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2.5,-9.8
air.velocity = -2.5,-9.8
down.velocity = -5,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 48
getpower = 0
envshake.time = 10
envshake.ampl = 3

[State 1130, Pause]
type = Pause
triggerAll = AnimElem = 7, < 0
trigger1 = MoveHit = 1
trigger2 = MoveGuarded = 1
Time = 4
IgnoreHitPause = 1

[State 1130, Pause]
type = Pause
triggerAll = AnimElem = 7, >= 0
trigger1 = MoveHit = 1
trigger2 = MoveGuarded = 1
Time = 2
IgnoreHitPause = 1

[StateDef 1131]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1131
SprPriority = 5

[State 1131, PosSet]
type = PosSet
trigger1 = Time = 0
x = EnemyNear(Root,Var(23)),Pos X+35*Facing

[State 1131, Turn]
type = Turn
trigger1 = Time = 0

[State 1131, PosAdd]
type = PosAdd
trigger1 = Time = [6,7]
x = 4

[State 1131, PosAdd]
Type = PosAdd
Trigger1 = Time = [9,10]
X = 3

[State 1131, PosAdd]
Type = PosAdd
Trigger1 = Time = 11
X = 2

[State 1131, VelSet]
type = VelSet
trigger1 = AnimElem = 6, = 1
x = 7.5
y = -10

[State 1131, VelAdd]
type = VelAdd
trigger1 = Time = [12,25]
x = -.4

[State 1131, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6, = 1
StateType = A
Physics = A

[State 1131, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
Value = S100,10

[State 1131, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 1131
PosType = P1
pos = -2,42
Anim = 1101
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 1131, HitDef]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
attr = S,SA
animtype = Hard
damage = ceil(25*root,fvar(1)),7
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 1,1
guard.pausetime = 1,1
hitsound = S200,6+Random%3
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 0 && var(44) := -40))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2.5,-9.8
air.velocity = -2.5,-9.8
down.velocity = -5,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 48
getpower = 0
envshake.time = 10
envshake.ampl = 3

[State 1131, HitDef]
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
trigger4 = AnimElem = 10
attr = A,SA
animtype = Hard
damage = ceil(10*root,fvar(1)),2
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 1,1
guard.pausetime = 1,1
hitsound = S200,6+Random%3
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -70))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2.5,-9.8
air.velocity = -2.5,-9.8
down.velocity = -5,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
air.fall = 1
fall.recover = 1
fall.recovertime = 48
getpower = 0
envshake.time = 10
envshake.ampl = 3

[State 1131, Pause]
type = Pause
triggerAll = AnimElem = 7, < 0
trigger1 = MoveHit = 1
trigger2 = MoveGuarded = 1
Time = 4
IgnoreHitPause = 1

[State 1131, Pause]
type = Pause
triggerAll = AnimElem = 7, >= 0
trigger1 = MoveHit = 1
trigger2 = MoveGuarded = 1
Time = 2
IgnoreHitPause = 1

[State 1131, VarSet]
type = VarSet
trigger1 = MoveContact = 1 && var(40)<0
var(40) = hitpausetime
ignorehitpause = 1

[State 1131, Helper]
type = Helper
trigger1 = Var(40) = hitpausetime
trigger1 = MoveContact = 1
helpertype = normal
name ="Hit_Spark"
stateno = ifelse(moveguarded,9000,8054)
ID = 8050
postype = p1
pos = ceil(ifelse(p2dist x<var(43),p2dist x,var(43))*const(size.xscale)),ceil(var(44)*const(size.yscale))
ownpal = 1
keyctrl = 0
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1

[State 1131, VarSet]
type = VarSet
trigger1 = 1
var(40) = -1

[State 1131, DestroySelf]
type = DestroySelf
trigger1 = Time = 46
trigger2 = Vel Y > 0 && Pos Y >= 0
trigger3 = Root,MoveType = H
trigger4 = Root,Stateno != 1130

[StateDef 1200]
Type = S
Physics = S
Ctrl = 0
Anim = 1200

[State 1200, NotHitBy]
type = NotHitBy
trigger1 = Time = [21,29]
value = SCA

[State 1200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S100,16

[State 1200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 12
value = S100,6

[State 1200, Helper]
type = Helper
trigger1 = AnimElem = 7
helpertype = normal
stateno = 8030
ID = 8030
name = "Dash Dust"
postype = p1
pausemovetime = 9999
supermovetime = 9999
ownpal = 1

[State 1200, VelSet]
type = VelSet
trigger1 = Time = [27,41]
x = 11

[State 1200, VelSet]
type = VelSet
trigger1 = Time = 42
x = 8

[State 1200, VelSet]
type = VelSet
trigger1 = Time = [43,44]
x = 6

[State 1200, VelSet]
type = VelSet
trigger1 = Time = [45,46]
x = 4

[State 1200, VelSet]
type = VelSet
trigger1 = Time = [47,48]
x = 3

[State 1200, VelSet]
type = VelSet
trigger1 = Time = [49,50]
x = 2

[State 1200, VelSet]
type = VelSet
trigger1 = Time = [51,52]
x = 1

[State 1200, ChangeState]
Type = ChangeState
Trigger1 = Time = [30,41]
Trigger1 = P2BodyDist X = [-10,10]
Trigger1 = P2BodyDist Y = [-40,0]
Value = 1201

[State 1200, ChangeState]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

[StateDef 1201]
Type = A
MoveType= A
Physics = A
VelSet = 0,0
Ctrl = 0
Anim = 1201
SprPriority = 2

[State 1201, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = S410,16
Channel = 0

[State 1201, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 1202
ID = 1202
sprpriority = 4
pos = 0,-40
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 1201, PosAdd]
type = PosAdd
trigger1 = AnimElem = 1
y = -10

[State 1201, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S100,11

[State 1201, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 2.5
y = -7.6

[State 1201, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1201, Turn]
type = Turn
trigger1 = AnimElem = 7

[State 1201, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,SA
animtype = hard
hitflag = MAF
guardflag = HA
ground.type = high
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -60))
hitsound = S200,5
guardsound = S300,0
damage = 100,5
priority = 6, Hit
pausetime = 1,11
ground.slidetime = 16
guard.slidetime = 16
ground.hittime = 16
guard.hittime = 16
guard.ctrltime = 16
air.hittime = 16
ground.velocity = 2,-7.4
guard.velocity = -3
air.velocity = 1.5,-7.5
airguard.velocity = -3,-1.4
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -9
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = -5
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 32
getpower = 30
envshake.time = 10
envshake.ampl = 3

[State 1201, ChangeState]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 52
Ctrl = 0

[StateDef 1210]
Type = S
MoveType = I
Physics = S
Ctrl = 0
Anim = 1210

[State 1210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S100,16

[State 1210, Helper]
type = Helper
trigger1 = AnimElem = 7
helpertype = normal
stateno = 8030
ID = 8030
name = "Dash Dust"
postype = p1
pausemovetime = 9999
supermovetime = 9999
ownpal = 1

[State 1210, VelSet]
type = VelSet
trigger1 = Time >= 5
x = 10

[State 1210, ChangeState]
type = ChangeState
triggerAll = EnemyNear,BackEdgeBodyDist > 10
trigger1 = Time = 6
trigger1 = P2BodyDist X = [-19,19]
trigger1 = P2BodyDist Y = [-40,0]
value = 1211

[State 1210, ChangeState]
type = ChangeState
trigger1 = Time = [7,9]
trigger1 = P2BodyDist X = [-19,19]
trigger1 = P2BodyDist Y = [-40,0]
trigger2 = AnimTime = 0
value = 1212

[StateDef 1211]
Type = S
MoveType = A
Physics = S
Ctrl = 0
Anim      = 1211

[State 1211, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S100,11

[State 1211, PlayerPush]
type = PlayerPush
trigger1 = Time = [0,5]
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 1211, VelSet]
type = VelSet
trigger1 = Time = [0,8]
x = 12

[State 1211, VelSet]
type = VelSet
trigger1 = Time = [9,13]
x = 6

[State 1211, VelSet]
type = VelSet
trigger1 = Time = [14,16]
x = 3

[State 1211, VelSet]
type = VelSet
trigger1 = Time = [17,19]
x = 2

[State 1211, VelSet]
type = VelSet
trigger1 = Time = [20,22]
x = 1

[State 1211, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 1213
ID = 1213
sprpriority = 3
pos = 0,0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 1
trans = add

[State 1211, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,SA
animtype = Hard
damage = 90,8
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 1,11
guard.pausetime = 1,11
hitsound = S200,5
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -50))
ground.type = High
ground.slideTime = 16
ground.hitTime = 16
ground.velocity = 0,-9.4
air.velocity = 0,-9
down.velocity = -3,-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -9
Air.CornerPush.VelOff = -4
Down.CornerPush.VelOff = -4
yaccel = .48
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 50
envshake.time = 10
envshake.ampl = 3
getpower = 35

[State 1211, ChangeState]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

[StateDef 1212]
Type = S
MoveType = A
Physics = S
Ctrl = 0
Anim = 1212

[State 1212, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S100,11

[State 1212, VelSet]
type = VelSet
trigger1 = Time = [0,8]
x = 10

[State 1212, VelSet]
type = VelSet
trigger1 = Time = [9,13]
x = 6

[State 1212, VelSet]
type = VelSet
trigger1 = Time = [14,15]
x = 3

[State 1212, VelSet]
type = VelSet
trigger1 = Time = [16,17]
x = 2

[State 1212, VelSet]
type = VelSet
trigger1 = Time = [18,19]
x = 1

[State 1212, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 1213
ID = 1214
sprpriority = 3
pos = 0,0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 1
trans = add
ownpal = 1

[State 1212, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S,SA
animtype = Hard
damage = 80,8
hitflag = MAF
guardflag = MA
priority = 2, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,4
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -50))
ground.type = High
ground.slideTime = 16
ground.hitTime = 16
ground.velocity = -8,-5
air.velocity = -8,-5
down.velocity = -4,-2.5
Ground.CornerPush.VelOff = -3
Guard.CornerPush.VelOff = -9
Air.CornerPush.VelOff = -3
Down.CornerPush.VelOff = -6
yaccel = .48
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 50
envshake.time = 10
envshake.ampl = 3
envshake.freq = 90
getpower = 35

[State 1212, ChangeState]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

[StateDef 1220]
Type  = S
Physics = S
Ctrl = 0
Anim = 1220

[State 1220, NotHitBy]
Type = NotHitBy
Trigger1 = Time = [21,29]
Value = SCA

[State 1220, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = S410,20
Channel = 0

[State 1220, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S100,16

[State 1220, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 12
value = S100,6

[State 1220, Helper]
type = Helper
trigger1 = AnimElem = 7
helpertype = normal
stateno = 8030
ID = 8030
name = "Dash Dust"
postype = p1
pausemovetime = 9999
supermovetime = 9999
ownpal = 1

[State 1220, VelSet]
type = VelSet
trigger1 = Time = [27,37]
x = 12

[State 1220, VelSet]
type = VelSet
trigger1 = Time = [38,39]
x = 6

[State 1220, VelSet]
type = VelSet
trigger1 = Time = [40,41]
x = 3

[State 1220, VelSet]
type = VelSet
trigger1 = Time = [42,43]
x = 2

[State 1220, VelSet]
type = VelSet
trigger1 = Time = [44,45]
x = 1

[State 1220, ChangeState]
type = ChangeState
trigger1 = Time = [30,37]
trigger1 = P2BodyDist X = [-10,10]
trigger1 = P2BodyDist Y = [-40,0]
value = 1221

[State 1220, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 1221]
Type = S
MoveType= A
Physics = S
Ctrl = 0
Anim = 1221
SprPriority = 2

[State 1221, HitDef]
type = HitDef
Trigger1 = AnimElem = 3
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno = -1
sprpriority = 1
hitsound = S800,3
p1stateno = 810
p2stateno = 820
guard.dist = 0
fall = 1

[State 1221, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S800,1+Random%2
channel = 0

[State 1221, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 1300]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1300
SprPriority = 2
Poweradd = 30

[State 1300, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = S100,10

[State 1300, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = S410,8
Channel = 0

[State 1300, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 2108
PosType = P1
pos = -70,-10
Anim = 2108
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 1300, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
StateType = A
Physics = N

[State 1300, VelAdd]
type = VelAdd
trigger1 = Time > 20
y = 0.55

[State 1300, VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = 13
y = -0.5

[State 1300, VelAdd]
type = VelAdd
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 10, < 0
x = -.65

[State 1300, VelSet]
type = VelSet
trigger1 = AnimElem = 10
y = 0

[State 1300, HitDef]
type = HitDef
trigger1 = !MoveContact
attr = S,SA
animtype = Hard
damage = 80,8
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -50))
ground.type = High
ground.slideTime = 16
ground.hitTime = 16
ground.velocity = -2,-6.2
air.velocity = -2,-6.2
down.velocity = -4,-2
yaccel = .55
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 36
envshake.time = 10
envshake.ampl = 3
getpower = 25

[State 1300, ChangeState]
type = ChangeState
trigger1 = Command = "a" || Command = "b" || Command = "c"
trigger1 = AnimElem = 8, >= 0
trigger1 = AnimElem = 11, <= 1
value = 1305

[State 1300, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1301

[StateDef 1301]
Type = S
MoveType = I
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 47
SprPriority = 2

[State 1301, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1301, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,0

[State 1301, Explod]
type = Explod
trigger1 = Time = 0
anim = 8020
sprpriority = -3
postype = p1
scale= 0.5,0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 1301, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 1305]
Type = A
MoveType = A
Physics = N
Ctrl = 0
VelSet = 0,0
Anim = 1305
SprPriority = 2

[State 1305, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S100,2

[State 1305, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S410,9
channel = 0

[State 1305, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 2105
PosType = P1
pos = 0,0
Anim = 2105
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 1305, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 3
y = -5

[State 1305, VelAdd]
type = VelAdd
trigger1 = Time = [1,14]
trigger2 = AnimElem = 10, >= 1
y = .6

[State 1305, VelAdd]
type = VelAdd
trigger1 = Time = [10,14]
x = -.5

[State 1305, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = -1.5
y = -5

[State 1305, HitDef]
type = HitDef
trigger1 = !MoveContact
attr = S,SA
animtype = Hard
damage = 50,5
hitflag = MAF
guardflag = HA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -55))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -9
air.velocity = -4,15
down.velocity = -4,-2
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0
envshake.time = 10
envshake.ampl = 3

[State 1305, ChangeState]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Vel Y + Pos Y >= 0)
Value = 52

[StateDef 1310]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1300
SprPriority = 2
Poweradd = 30

[State 1310, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = S100,10

[State 1310, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = S410,8
Channel = 0

[State 1310, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 2108
PosType = P1
pos = -70,-10
Anim = 2108
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 1310, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
StateType = A
Physics = N

[State 1310, VelAdd]
type = VelAdd
trigger1 = Time > 20
y = 0.55

[State 1310, VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = 13
y = -2

[State 1310, VelAdd]
type = VelAdd
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 10, < 0
x = -.85

[State 1310, VelSet]
type = VelSet
trigger1 = AnimElem = 10
y = 0

[State 1310, HitDef]
type = HitDef
trigger1 = !MoveContact
attr = S,SA
animtype = Hard
damage = 80,8
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -50))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2,-7
air.velocity = -2,-7
down.velocity = -4,-2
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 36
envshake.time = 10
envshake.ampl = 3
getpower = 25

[State 1310, ChangeState]
type = ChangeState
trigger1 = Command = "a" || Command = "b" || Command = "c"
trigger1 = AnimElem = 8, >= 0
trigger1 = AnimElem = 11, <= 1
value = 1305

[State 1310, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1301

[StateDef 1320]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1320
SprPriority = 2
Poweradd = 30

[State 1320, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = S100,10

[State 1320, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = S410,8
Channel = 0

[State 1320, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 2108
PosType = P1
pos = -70,-10
Anim = 2108
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 1320, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
StateType = A
Physics = N

[State 1320, VelAdd]
type = VelAdd
trigger1 = Time > 30
y = 0.55

[State 1320, VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = 15
y = -0.5

[State 1320, VelAdd]
type = VelAdd
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 10, < 0
x = -.65

[State 1320, VelSet]
type = VelSet
trigger1 = AnimElem = 10
y = 0

[State 1320, HitDef]
type = HitDef
trigger1 = !MoveContact
attr = S,SA
animtype = Hard
damage = 100,10
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -50))
ground.type = High
ground.slideTime = 18
ground.hitTime  = 18
ground.velocity = -4,-8.4
air.velocity = -4,-8.4
down.velocity = -4,-2
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 36
envshake.time = 10
envshake.ampl = 3
getpower = 25

[State 1320, ChangeState]
type = ChangeState
trigger1 = Command = "a" || Command = "b" || Command = "c"
trigger1 = AnimElem = 8, >= 0
trigger1 = AnimElem = 11, <= 1
value = 1305

[State 1320, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1301

[StateDef 1330]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 1330
SprPriority = 2

[State 1330, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 11

[State 1330, VarSet]
type = VarSet
trigger1 = !time
var(25) = 30

[State 1330, VarAdd]
type = VarAdd
trigger1 = Time = 0
trigger1 = var(45) > 0
var(45) = -120
ignorehitpause = 1

[State 1330, Explod]
type = Explod
trigger1 = !time
anim = 11000
sprpriority = 3
postype = p1
pos = ceil(-5 * const(size.xscale)), ceil(-50 * const(size.yscale))
scale = 0.5,0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 1330, PowerAdd]
type = PowerAdd
trigger1 = Time = 0
value = IfElse(Var(45) > 0,0,-500)

[State 1330, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S10000,3

[State 1330, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = S100,10

[State 1330, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = S410,10
Channel = 0

[State 1330, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 16
value = S100,10

[State 1330, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 16
value = S410,8
Channel = 0

[State 1330, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 1330
PosType = P1
pos = -70,-10
Anim = 2108
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1
ignorehitpause = 0

[State 1330, Explod]
type = Explod
trigger1 = AnimElem = 15
ID = 1331
PosType = P1
pos = -2,42
Anim = 1101
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1
ignorehitpause = 0

[State 1330, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
StateType = A
Physics = N

[State 1330, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 15, = 1
StateType = A
Physics = A

[State 1330, VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = 12.5
y = -0.5

[State 1330, VelAdd]
type = VelAdd
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 10, < 0
x = -.65

[State 1330, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = 0
y = 0

[State 1330, PosAdd]
type = PosAdd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 13
trigger3 = AnimElem = 14
x = 2

[State 1330, VelSet]
type = VelSet
trigger1 = AnimElem = 15, = 1
x = 5.8
y = -9.6

[State 1330, VelAdd]
type = VelAdd
trigger1 = AnimElem = 16, >= 0
trigger1 = AnimElem = 20, < 0
x = -.35

[State 1330, HitDef]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
trigger4 = AnimElem = 9
attr = S,SA
animtype = Hard
damage = 20,3
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,7
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -60))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2,-5
air.velocity = -2,-5
down.velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 50
envshake.time = 10
envshake.ampl = 3
getpower = 0

[State 1330, HitDef]
type = HitDef
trigger1 = AnimElem = 14
attr = S,SA
animtype = Hard
damage = 30,12
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,8
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -50))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2.5,-9.8
air.velocity = -2.5,-9.8
down.velocity = -5,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 50
envshake.time = 10
envshake.ampl = 3
getpower = 0

[State 1330, HitDef]
type = HitDef
trigger1 = AnimElem = 16
trigger2 = AnimElem = 17
attr = S,SA
animtype = Hard
damage = 35,5
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 6,6
guard.pausetime = 6,6
hitsound = S200,7
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -70))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2.5,-8.8
air.velocity = -2.5,-8.8
down.velocity = -5,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
getpower = 0

[StateDef 1400]
Type = A
MoveType = A
Physics = N
VelSet = 0,0
Ctrl = 0
Anim = 1400
SprPriority = 2

[State 1400, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 3.5
y = 8.5

[State 1400, VelAdd]
type = VelAdd
trigger1 = AnimElem = 3, >= 1
y = .2

[State 1400, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = S100,2

[State 1400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S410,21
channel = 0

[State 1400, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A,SA
animtype = Hard
damage = 90,6
hitflag = MAF
guardflag = HA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -20))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -7
air.velocity = -1.8,-2
airguard.velocity = -3.6,-1
down.velocity = -3.6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 30
envshake.time = 10
envshake.ampl = 3

[State 1400, ChangeState]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 52
Ctrl = 0

[StateDef 1410]
Type = A
MoveType = A
Physics = N
VelSet = 0,0
Ctrl = 0
Anim = 1400
SprPriority = 2

[State 1410, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 5.5
y = 7.5

[State 1410, VelAdd]
type = VelAdd
trigger1 = AnimElem = 3, >= 1
y = .18

[State 1410, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = S100,2

[State 1410, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S410,21
channel = 0

[State 1410, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A,SA
animtype = Hard
damage = 90,6
hitflag = MAF
guardflag = HA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -20))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -7
air.velocity = -1.8,-2
airguard.velocity = -3.6,-1
down.velocity = -3.6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 30
envshake.time = 10
envshake.ampl = 3

[State 1410, ChangeState]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 52
Ctrl = 0

[StateDef 1420]
Type = A
MoveType = A
Physics = N
VelSet = 0,0
Ctrl = 0
Anim = 1400
SprPriority = 2

[State 1420, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 7.5
y = 6.5

[State 1420, VelAdd]
type = VelAdd
trigger1 = AnimElem = 3, >= 1
y = .16

[State 1420, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = S100,2

[State 1420, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S410,21
channel = 0

[State 1420, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A,SA
animtype = Hard
damage = 90,6
hitflag = MAF
guardflag = HA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,2
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8054))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -20))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -7
air.velocity = -1.8,-2
airguard.velocity = -3.6,-1
down.velocity = -3.6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
yaccel = .54
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 30
getpower = 30
envshake.time = 10
envshake.ampl = 3

[State 1420, ChangeState]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 52
Ctrl = 0

[StateDef 2000]
Type = S
MoveType= A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 2000
SprPriority = 2

[State 2000, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1
value = IfElse(Var(45) > 0,0,-1000)

[State 2000, VarAdd]
type = VarAdd
trigger1 = Time = 0
trigger1 = var(45) > 0
var(45) = -240
ignorehitpause = 1

[State 2000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
anim = -1
time = 61
movetime = 61
p2defmul = 1
darken = 0
unhittable = 1

[State 2000, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
stateno = 10000
ID = 10000
name = "Superpause FX"
postype = p1
pos = ceil(0 * const(size.xscale)), ceil(-40 * const(size.yscale))
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 2000, Helper]
type = Helper
trigger1 = AnimElem = 1
stateno = 20100
ID = 20100
name = "Super_Portrait"
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 2000, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "AfterImage"
ID = 7000
stateno = 7000
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 2000, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "AfterImage"
ID = 7001
stateno = 7001
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 2000, VarSet]
type = VarSet
trigger1 = Time <= 61
trigger1 = Command != "holddown"
V = 0
value = 0

[State 2000, VarSet]
type = VarSet
triggerall = Var(45) <= 0
trigger1 = Time = 61
trigger1 = Command = "holddown"
trigger1 = Command != "holdfwd" && Command != "holdback"
V = 0
value = 1

[State 2000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S410,0
channel = 0

[State 2000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S100,9

[State 2000, Helper]
type = Helper
trigger1 = Time >= 60
StateNo = 2005
ID = 2005
Name = "Fade to Black"
postype = P1
pos = 0,0
ownpal = 1
sprpriority = -5
ignorehitpause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 2000, Helper]
type = Helper
trigger1 = Var(0) = 0
trigger1 = Time >= 61
StateNo = 2004
ID = 2004
Name = "AfterImage2"
ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 0
Persistent = 8

[State 2000, Helper]
type = Helper
triggerall = Var(45) <= 0
trigger1 = Var(0) = 1
trigger1 = Time = 61
StateNo = 2004
ID = 2004
Name = "AfterImage2"
ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 0
Persistent = 8

[State 2000, Pause]
type = Pause
trigger1 = Time >= 61
Anim = -1
Time = 2
P2DefMul = 1
darken = 0
persistent = 1

[State 2000, VelSet]
type = VelSet
triggerall = Var(45) <= 0
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 12, < 0
x = 4

[State 2000, VelSet]
type = VelSet
triggerall = Var(45) <= 0
trigger1 = AnimElem = 12, >= 0
trigger1 = AnimElem = 23, < 0
x = 4

[State 2000, VelSet]
type = VelSet
triggerall = Var(45) > 0
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 12, < 0
x = 5

[State 2000, VelSet]
type = VelSet
triggerall = Var(45) > 0
trigger1 = AnimElem = 12, >= 0
trigger1 = AnimElem = 23, < 0
x = 6.5

[State 2000, VelSet]
type = VelSet
trigger1 = Var(0) = 0
trigger1 = Time = 81
y = -4

[State 2000, VelSet]
type = VelSet
triggerall = Var(45) <= 0
trigger1 = Var(0) = 1
trigger1 = Time = 81
y = -2

[State 2000, VelAdd]
type = VelAdd
trigger1 = Var(0) = 0
trigger1 = Time = [82,103]
y = .35

[State 2000, VelAdd]
type = VelAdd
triggerall = Var(45) <= 0
trigger1 = Var(0) = 1
trigger1 = Time = [82,103]
y = .175

[State 2000, VelSet]
type = VelSet
trigger1 = AnimElem = 23
x = 0
y = 0

[State 2000, PosSet]
type = PosSet
trigger1 = AnimElem = 23
y = 0

[State 2000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 23
value = S40,0

[State 2000, Explod]
type = Explod
trigger1 = AnimElem = 23
anim = 8020
sprpriority = -3
postype = p1
scale= 0.5,0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 2000, HitDef]
Type = HitDef
triggerall = Var(45) <= 0
trigger1 = Var(0) = 1
trigger1 = !MoveContact
trigger1 = AnimElem = 7, >= 0
attr = S,HT
animtype = Hard
damage = 0
hitflag = MAF
guardflag = L
priority = 3, Miss
pausetime = 1,10
guard.pausetime = 1,10
guardsound = S300,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
ground.type = High
ground.SlideTime = 16
ground.HitTime  = 16
ground.Velocity = -5
air.Velocity = -1.5,-2
down.Velocity = -3,-2
ground.CornerPush.VelOff = 0
air.CornerPush.VelOff = 0
down.CornerPush.VelOff = 0
P1StateNo = 2001
P2StateNo = 2002
P2Facing = 1
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0

[State 2000, HitDef]
Type = HitDef
triggerall = Var(45) <= 0
trigger1 = Var(0) = 0
trigger1 = !MoveContact
trigger1 = AnimElem = 11, >= 0
attr = S,HT
animtype = Hard
damage = 0
hitflag = MAF
guardflag = M
priority = 3, Miss
pausetime = 1,10
guard.pausetime = 1,10
guardsound = S300,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
ground.type = High
ground.SlideTime = 16
ground.HitTime  = 16
ground.Velocity = -5
air.Velocity = -1.5,-2
down.Velocity = -3,-2
ground.CornerPush.VelOff = 0
air.CornerPush.VelOff = 0
down.CornerPush.VelOff = 0
P1StateNo = 2001
P2StateNo = 2002
P2Facing = 1
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0

[State 2000, HitDef]
Type = HitDef
triggerall = Var(45) > 0
trigger1 = Var(0) = 0
trigger1 = !MoveContact
trigger1 = AnimElem = 11, >= 0
attr = S,HT
animtype = Hard
damage = 0
hitflag = MAF
guardflag =
priority = 3, Miss
pausetime = 1,10
guard.pausetime = 1,10
guardsound = S300,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
ground.type = High
ground.SlideTime = 16
ground.HitTime  = 16
ground.Velocity = -5
air.Velocity = -1.5,-2
down.Velocity = -3,-2
ground.CornerPush.VelOff = 0
air.CornerPush.VelOff = 0
down.CornerPush.VelOff = 0
P1StateNo = 2001
P2StateNo = 2002
P2Facing = 1
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0

[State 2000, Helper]
type = Helper
trigger1 = MoveGuarded && NumEnemy
helpertype = normal
stateno = 9000
ID = 9000
name = "Guard_Spark"
postype = p1
Pos = Ceil(EnemyNear,Pos X - Pos X) * Facing,Ceil(EnemyNear,Pos Y - Pos Y - 60)
ownpal = 1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1
persistent = 0

[State 2000, ChangeState]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

[StateDef 2001]
Type = S
MoveType= A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 2001
SprPriority = 2

[State 2001, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 999
PalBright = 0,0,0
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 0.75,0.75,0.75
TimeGap = 2
FrameGap = 4
Trans = Add1
length = 9

[State 2001, VarSet]
type = VarSet
trigger1 = AnimElem = 6
v = 0
value = 0

[State 2001, Pause]
type = Pause
trigger1 = Time <= 5
Anim = -1
Time = 2
P2DefMul = 1
Darken = 0
Persistent = 1

[State 2001, PlaySnd]
type = PlaySnd
trigger1 = Var(0) = 0
trigger1 = AnimElem = 2
value = S410,1
channel = 0

[State 2001, PlaySnd]
type = PlaySnd
trigger1 = Var(0) = 1
trigger1 = AnimElem = 2
value = S410,2
channel = 0

[State 2001, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S100,11

[State 2001, PlaySnd]
Type = PlaySnd
Trigger1 = Time = 9
Value = S100,10

[State 2001, Explod]
type = Explod
trigger1 = Var(0) = 0
trigger1 = AnimElem = 2
ID = 2002
PosType = Back
Pos = -32,ceil((1.33*gameheight/gamewidth)*280)
Anim = 2002
Ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
Trans = Add

[State 2001, Explod]
type = Explod
trigger1 = Var(0) = 1
trigger1 = AnimElem = 2
ID = 2003
PosType = Back
Pos = -32,ceil((1.33*gameheight/gamewidth)*280)
Anim = 2003
Ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
Trans = Add

[State 2001, PosAdd]
type = PosAdd
trigger1 = Time = [0,5]
x = 25-Ceil(Pos Y*1.5)

[State 2001, PosSet]
type = PosSet
trigger1 = Time = 5
y = 0

[State 2001, TargetLifeAdd]
type = TargetLifeAdd
triggerall = Var(45) <= 0
trigger1 = Var(0) = 0
trigger1 = Time = 9
value = ceil(-250*(fvar(1)*fvar(2)))

[State 2001, TargetLifeAdd]
type = TargetLifeAdd
triggerall = Var(45) > 0
trigger1 = Var(0) = 0
trigger1 = Time = 9
value = ceil(-200*(fvar(1)*fvar(2)))

[State 2001, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = Var(0) = 1
trigger1 = Time = 9
value = ceil(-200*(fvar(1)*fvar(2)))

[State 2001, Helper]
type = Helper
trigger1 = Time = 9
ID = 8053
stateno = 8053
name = "Hit_Spark"
postype = p1
Pos = Ceil(EnemyNear,Pos X - Pos X) * Facing,Ceil(EnemyNear,Pos Y - Pos Y - 60)
pausemovetime = 9999
supermovetime = 9999
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 2001, PlaySnd]
type = PlaySnd
trigger1 = Time = 9
value = S200,10

[State 2001, EnShake]
type = EnvShake
trigger1 = Time = 9
time = 12
freq = 80
ampl = -8

[State 2001, TargetState]
type = TargetState
trigger1 = Time = 21
value = 2003

[State 2001, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 2002]
Type = A
MoveType = H
Physics = N
VelSet = 0,0

[State 2002, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 2002, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 2004

[State 2002, SelfState]
type = SelfState
trigger1 = Time >= 60
trigger1 = P2MoveType != A
value = 5035

[StateDef 2003]
Type = A
MoveType = H
Physics = N

[State 2003, ChangeAnim]
type = ChangeAnim
triggerall =! SelfAnimExist(5061)
triggerall = SelfAnimExist(5030)
trigger1 = Time = 0
value = 5030

[State 2003, ChangeAnim]
type = ChangeAnim
triggerall =! SelfAnimExist(5061)
triggerall = SelfAnimExist(5035)
trigger1 =! SelfAnimExist(5030)
trigger1 = Time = 0
trigger2 = Anim = 5030
trigger2 = AnimTime = 0
value = 5035

[State 2003, ChangeAnim]
type = ChangeAnim
triggerall =! SelfAnimExist(5061)
triggerall = SelfAnimExist(5050)
trigger1 =! SelfAnimExist(5030)
trigger1 =! SelfAnimExist(5035)
trigger1 = Time = 0
trigger2 = Anim = 5030
trigger2 = AnimTime = 0
trigger3 = Anim = 5035
trigger3 = AnimTime = 0
value = 5050

[State 2003, ChaneAnim]
type = ChangeAnim
triggerall = SelfAnimExist(5061)
trigger1 = Time = 0
value = 5061

[State 2003, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0
y = -12.5

[State 2003, VelAdd]
Type = VelAdd
Trigger1 = 1
y = .55

[State 2003, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 20

[State 2003, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 1

[State 2003, SelfState]
type = SelfState
trigger1 = Time = 44
value = 5100

[StateDef 2004]
Type = A
Physics = N
SprPriority = -5

[State 2004, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2004, varSet]
type = VarSet
trigger1 = Time = 0
V = 1
value = Root,Anim

[State 2004, VarSet]
type = VarSet
trigger1 = Time = 0
V = 2
value = Root,AnimElemNo(0)

[State 2004, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = Var(1)
elem  = Var(2)

[State 2004, VarAdd]
type = VarAdd
trigger1 = Time >= 2
V = 3
value = 6

[State 2004, Trans]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256-Var(3),256

[State 2004, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,1]
Flag = Noshadow
Flag2 = Invisible
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 2004, AssertSpecial]
type = AssertSpecial
trigger1 = 1
Flag = Noshadow
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 2004, DestroySelf]
type = DestroySelf
trigger1 = Time = 43

[StateDef 2005]
Type = A
Physics = N
Anim = 99999
SprPriority = -5

[State 2005, VarSet]
type = VarSet
trigger1 = Root,Anim = 2001
trigger1 = Root,AnimElem = 2, = 0
V = 4
value = 128

[State 2005, varSet]
type = VarSet
trigger1 = Root,Anim = 2001
trigger1 = Root,AnimElem = 2, = 1
V = 4
value = 64

[State 2005]
type = VarSet
trigger1 = Root,Anim = 2001
trigger1 = Root,AnimElem = 3, = 0
V = 4
value = 0

[State 2005, BGPalFX]
Type = BGPalFX
trigger1 = Root,Anim = 2000
trigger1 = Root,Time >= 40
trigger2 = Root,Anim = 2001
trigger2 = Root,AnimElem = 2, < 0
trigger3 = Root,Anim = 2001
trigger3 = Root,AnimElem = 3, >= 0
trigger3 = Root,AnimElem = 8, < 0
Add = -128,-128,-128
Time = 2

[State 2005, BGPalFX]
type = BGPalFX
trigger1 = Root,Anim = 2001
trigger1 = Root,AnimElem = 2, = 0
Add = 0,0,0
Time = 1

[State 2005, AllPalFX]
type = AllPalFX
trigger1 = Root,Anim = 2001
trigger1 = Root,AnimElem = 2, >= 0
trigger1 = Root,AnimElem = 3, < 0
Add = Var(4),Var(4),Var(4)
Time = 1

[State 2005, EnvColor]
type = EnvColor
trigger1 = Root,Anim = 2001
trigger1 = Root,AnimElem = 2, >= 0
trigger1 = Root,AnimElem = 3, <= 0
time = 1
value = Var(4),Var(4),Var(4)
under = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 2005, ASsertSpecial]
type = AssertSpecial
trigger1 = 1
Flag = Noshadow
Flag2 = Invisible
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 2005, DestroySelf]
Type = DestroySelf
trigger1 = Root,Anim = 2000
trigger1 = Root,AnimTime = 0
trigger2 = Root,Anim = 2001
trigger2 = Root,AnimElem = 8

[StateDef 2100]
type = S
movetype = A
physics = N
velset = 0, 0
ctrl = 0
anim = 2100
sprpriority = 2

[State 2100, VarAdd]
type = VarAdd
trigger1 = Time = 0
trigger1 = var(45) > 0
var(45) = -240
ignorehitpause = 1

[State 2100, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 6

[State 2100, AfterImage]
type = AfterImage
trigger1 = AnimElem = 3
time = 999
PalBright = 0,0,0
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 0.75,0.75,0.75
TimeGap = 2
FrameGap = 4
Trans = Add1
length = 9

[State 2100, SuperPause]
type = SuperPause
trigger1 = AnimElem = 3
anim = -1
time = 61
movetime = 61
p2defmul = 1
darken = 0
unhittable = 1

[State 2100, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1
value = IfElse(Var(45) > 0,0,-1000)

[State 2100, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
stateno = 10000
ID = 10000
name = "Superpause FX"
postype = p1
pos = ceil(-35 * const(size.xscale)), ceil(-72 * const(size.yscale))
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 2100, Helper]
type = Helper
trigger1 = AnimElem = 3
stateno = 20100
ID = 20100
name = "Super_Portrait"
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 2100, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "AfterImage"
ID = 7002
stateno = 7002
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 2100, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "AfterImage"
ID = 7003
stateno = 7003
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 2100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S410,6
channel = 0

[State 2100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S100,2

[State 2100, Explod]
type = explod
trigger1 = AnimElem = 4
anim = 2106
ID = 2106
sprpriority = 3
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 1
trans = add
ownpal = 1

[State 2100, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 6

[State 2100, VelAdd]
type = VelAdd
trigger1 = AnimElem = 6
x = -5

[State 2100, VelAdd]
type = VelAdd
trigger1 = AnimElem = 7
x = -1

[State 2100, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
animtype = hard
hitflag = MAF
guardflag = MA
ground.type = high
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -65))
hitsound = S200,10
guardsound = S300,0
damage = 30,12
priority = 6, Hit
pausetime = 12, 11
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 34
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = -4
guard.velocity = -6
air.velocity = 0, 0
airguard.velocity = -2.5, -5
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0
envshake.time = 10
envshake.ampl = 4
kill = 0
guard.kill = 1

[State 2100, TargetBind]
type = TargetBind
trigger1 = MoveHit
pos = floor(60 * const(size.xscale)), 0
ignorehitpause = 1

[State 2100, ChangeState]
type = ChangeState
trigger1 = MoveContact
value = 2101

[State 2100, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 2101]
type = S
movetype = A
physics = N
velset = 0, 0
ctrl = 0
anim = 2101
sprpriority = 2

[State 2101, PlaySnd]
Type = PlaySnd
Trigger1 = Time = [11,21]
Value = S100,1
Channel = 1
Persistent = 4

[State 2101, VelSet]
type = VelSet
trigger1 = Time >= 10
trigger1 = Time < 21
x = 2

[State 2102, Explod]
type = Explod
trigger1 = AnimElem = 7, = 1
Anim = 2109
ID = 2109
PosType = P1
pos = 42,-30
ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 2101, HitDef]
type = HitDef
trigger1 = AnimElemNo(0) = [7, 17]
attr = S, HA
animtype = hard
hitflag = MAF
guardflag = MA
ground.type = Low
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -60))
hitsound = S200,3+Random%3
guardsound = S300,0
damage = 12,6
priority = 6, Hit
pausetime = 3,3
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 24
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = 0
guard.velocity = -2
air.velocity = 0,-2.5
airguard.velocity = -2.5, -5
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0
envshake.time = 5
envshake.ampl = 2
kill = 0
guard.kill = 1

[State 2101, ChangeState]
type = changeState
trigger1 = AnimTime = 0
value = 2102

[StateDef 2102]
type = S
movetype = A
physics = N
velset = 0, 0
ctrl = 0
anim = 2102
sprpriority = 2

[State 2102, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 18

[State 2102, VelAdd]
type = VelAdd
trigger1 = AnimElem = 3
x = -14

[State 2102, VelAdd]
type = VelAdd
trigger1 = AnimElem = 4
x = -4

[State 2102, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S410,7
Channel = 0

[State 2102, Explod]
type = Explod
trigger1 = AnimElem = 3
Anim = 2107
ID = 2107
sprpriority = 3
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 0
trans = add
ownpal = 1

[State 2102, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype = Back
air.animtype = Heavy
hitflag = MAF
guardflag = MA
ground.type = Low
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -70))
hitsound = S200,10
guardsound = S300,0
damage = 35,10
priority = 6, Hit
pausetime = 5,5
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 24
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = -4,0
guard.velocity = -5
air.velocity = -4,-4
airguard.velocity = -2.5, -5
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 4
getpower = 0
kill = 0
guard.kill = 1

[State 2102, ChangeState]
type = changeState
trigger1 = AnimTime = 0
value = 2103

[StateDef 2103]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 2103
SprPriority = 2

[State 2103, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S100,10

[State 2103, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 2103
PosType = P1
pos = -70,-10
Anim = 2108
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 2103, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
StateType = A
Physics = N

[State 2103, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
StateType = A
Physics = N

[State 2103, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 13
y = -0.4

[State 2103, VelAdd]
type = VelAdd
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 8, < 0
x = -.65

[State 2103, VelSet]
type = VelSet
trigger1 = AnimElem = 8
y = 0

[State 2103, HitDef]
type = HitDef
trigger1 = !MoveContact
attr = S,HA
animtype = Hard
damage = 55,10
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,8
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -50))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -2,-4.4
air.velocity = -2,-4.4
down.velocity = -4,-2
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 4
getpower = 0
kill = 0
guard.kill = 1

[State 2103, ChangeState]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 2104

[StateDef 2104]
Type = A
MoveType = A
Physics = N
Ctrl = 0
VelSet = 0,0
Anim = 2104
SprPriority = 2

[State 2104, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S100,2

[State 2104, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S410,8
channel = 0

[State 2104, Explod]
type = Explod
trigger1 = AnimElem = 6
ID = 2105
PosType = P1
pos = 0,0
Anim = 2105
ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 2104, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 3
y = -5

[State 2104, VelAdd]
type = VelAdd
trigger1 = Time = [1,14]
trigger2 = AnimElem = 10, >= 1
y = .6

[State 2104, VelAdd]
type = VelAdd
trigger1 = Time = [10,14]
x = -.5

[State 2104, VelSet]
type = VelSet
trigger1 = AnimElem = 10
x = -1.5
y = -5

[State 2104, HitDef]
type = HitDef
trigger1 = AnimElem = 10
attr = S,HA
animtype = Hard
damage = 80,8
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 10,10
guard.pausetime = 10,10
hitsound = S200,8
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -55))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = -9
air.velocity = -4,15
down.velocity = -4,-2
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0
envshake.time = 10
envshake.ampl = 4

[State 2104, ChangeState]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Vel Y + Pos Y >= 0)
Value = 52

[StateDef 3000]
Type = S
MoveType = A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 3000
SprPriority = 2

[State 3000, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1
value = -2000

[State 3000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
anim = -1
time = 40
movetime = 40
p2defmul = 1
darken = 0
unhittable = 1

[State 3000, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
stateno = 10010
ID = 10010
name = "Superpause FX"
postype = p1
pos = ceil(0 * const(size.xscale)), ceil(-40 * const(size.yscale))
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 3000, Helper]
type = Helper
trigger1 = AnimElem = 1
stateno = 20100
ID = 20100
name = "Super_Portrait"
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 3000, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "AfterImage"
ID = 7000
stateno = 7000
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 3000, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "AfterImage"
ID = 7001
stateno = 7001
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 3000, Pause]
type = Pause
trigger1 = Time >= 61
anim = -1
time = 2
Persistent = 1

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S410,11
channel = 0

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S100,9

[State 3000, Helper]
type = Helper
trigger1 = Time >= 60
StateNo = 3004
ID = 3006
Name = "Fade to Black"
postype = P1
pos = 0,0
ownpal = 1
sprpriority = -5
ignorehitpause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3000, Helper]
Type = Helper
Trigger1 = Time = 61
StateNo = 3003
ID = 3005
Name = "Clone"
Ownpal = 1
Keyctrl = 0
SprPriority = -5

[State 3000, Helper]
Type = Helper
Trigger1 = Time = 62
StateNo = 3003
ID = 3003
Name = "Clone"
Ownpal = 1
Keyctrl = 0
SprPriority = -5

[State 3000, Helper]
Type = Helper
Trigger1 = Time = 63
StateNo = 3003
ID = 3004
Name = "Clone"
Ownpal = 1
Keyctrl = 0
SprPriority = -5

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 12, < 0
x = 6

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 12, >= 0
trigger1 = AnimElem = 29, < 0
x = 4

[State 3000, VelSet]
type = VelSet
trigger1 = Time = 72
y = -6.5

[State 3000, VelAdd]
type = VelAdd
trigger1 = Time = [73,105]
y = .4

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElem = 29
x = 0
y = 0

[State 3000, PosSet]
type = PosSet
trigger1 = AnimElem = 29
y = 0

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 29
value = S40,0

[State 3000, Explod]
type = Explod
trigger1 = AnimElem = 29
anim = 8020
sprpriority = -3
postype = p1
scale= 0.5,0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 3000, ChangeState]
type = ChangeState
trigger1 = Time = [71,104]
trigger1 = P2BodyDist X = [-11,11]
trigger1 = P2BodyDist Y >= -60
value = 3001

[State 3000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 3001]
Type = S
MoveType= A
Physics = S
Ctrl = 0
VelSet = 0,0
Anim = 3001
SprPriority = 2

[State 3001, Helper]
type = Helper
trigger1 = AnimElem = 2
StateNo = 3002
ID = 3002
Name = "Attack"
postype = Back
pos = 0,0
ownpal = 1
keyctrl = 0
SprPriority = -5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 2
ID = 2002
PosType = Back
Pos = -32,ceil((1.33*gameheight/gamewidth)*280)
Anim = 2002
Ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
Trans = Add

[State 3001, Explod]
type = Explod
trigger1 = AnimElem = 3
ID = 2003
PosType = Back
Pos = -32,ceil((1.33*gameheight/gamewidth)*280)
Anim = 2003
Ownpal = 1
SprPriority = 5
Persistent = 0
BindTime = -1
RemoveTime = -2
Trans = Add

[State 3001, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 999
PalBright = 0,0,0
PalContrast = 32,32,160
PalAdd = 0,0,0
PalMul = 0.75,0.75,0.75
TimeGap = 2
FrameGap = 4
Trans = Add1
length = 9

[State 3001, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
value = S100,11

[State 3001, Pause]
Type = Pause
Trigger1 = Time <= 14
Anim = -1
Time = 1
Persistent = 1

[State 3001, PosAdd]
type = PosAdd
trigger1 = Time = [0,5]
x = 20-Ceil(Pos Y*1.5)

[State 3001, PosSet]
type = PosSet
trigger1 = Time = 5
y = 0

[State 3001, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 3002]
Type = A
MoveType = A
Physics = N
SprPriority = 1
Anim = 3002

[State 3002, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s1205, 0

[State 3002, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s1205, 0

[State 3002, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S,HA
animtype = Up
damage = ceil(175*root,fvar(1))
hitflag = MAFD
guardflag =
priority = 4, Hit
pausetime = 2,10
guard.pausetime = 2,10
hitsound = S200,4
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 150 && var(44) := -35))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = 0,-12
air.velocity = 0,-12
down.velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
sprpriority = 5
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0
envshake.time = 15
envshake.freq = 85
envshake.ampl = -8

[State 3002, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,HA
animtype = Up
damage = ceil(175*root,fvar(1))
hitflag = MAF
guardflag =
priority = 4, Hit
pausetime = 2,10
guard.pausetime = 2,10
hitsound = S200,10
guardsound = S300,0
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 150 && var(44) := -65))
ground.type = High
ground.slideTime = 16
ground.hitTime  = 16
ground.velocity = 0,-12
air.velocity = 0,-12
down.velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
sprpriority = 5
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0
envshake.time = 15
envshake.freq = 85
envshake.ampl = -8

[State 3002, VarSet]
type = VarSet
trigger1 = MoveContact = 1 && var(40)<0
var(40) = hitpausetime
ignorehitpause = 1

[State 3002, Helper]
type = Helper
trigger1 = Var(40) = hitpausetime
trigger1 = MoveContact = 1
helpertype = normal
name ="Hit_Spark"
stateno = ifelse(moveguarded,9000,8053)
ID = 8050
postype = p2
pos = 0,ceil(var(44)*const(size.yscale))
ownpal = 1
keyctrl = 0
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1

[State 3002, VarSet]
type = VarSet
trigger1 = 1
var(40) = -1

[State 3002, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Noshadow
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3002, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[StateDef 3003]
Type = A
Physics = N

[State 3003, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3003, SprPriority]
type = SprPriority
trigger1 = IsHelper(3005)
value = -5

[State 3003, SprPriority]
type = SprPriority
trigger1 = !IsHelper(3005)
value = -4

[State 3003, Trans]
type = Trans
trigger1 = IsHelper(3003)
trans = AddAlpha
Alpha = 256,128

[State 3003, Trans]
type = Trans
trigger1 = IsHelper(3004)
trans = AddAlpha
Alpha = 128,200

[State 3002, VarSet]
type = VarSet
trigger1 = 1
V = 0
value = Root,Anim

[State 3002, VarSet]
type = VarSet
trigger1 = 1
V = 1
value = Root,AnimElemNo(0)

[State 3003, ChangeAnim]
type = ChangeAnim
trigger1 = 1
Value = Var(0)
Elem = Var(1)

[State 3003, PosSet]
type = PosSet
trigger1 = IsHelper(3003)
trigger1 = Time < 45
x = Root,Pos X-5*(Facing)

[State 3003, PosSet]
type = PosSet
trigger1 = IsHelper(3004)
trigger1 = Time < 43
x = Root,Pos X-10*(Facing)

[State 3003, PosSet]
type = PosSet
trigger1 = IsHelper(3005)
x = Root,Pos X

[State 3003, VelSet]
type = VelSet
trigger1 =! IsHelper(3005)
trigger1 = Time = 10
y = -6.5

[State 3003, VelAdd]
type = VelAdd
trigger1 =! IsHelper(3005)
trigger1 = Time = [11,43]
y = .4

[State 3003, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Noshadow
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3003, DestroySelf]
type = DestroySelf
trigger1 =! IsHelper(3005)
trigger1 = Root,Anim = 3000
trigger1 = Root,AnimElem = 29

[State 3003, DestroySelf]
type = DestroySelf
trigger1 = Root,Anim = 3000
trigger1 = Root,AnimElem = 31
trigger2 = Root,Anim = 3001
trigger3 = Root,Anim != 3000 && Root,MoveType = H

[StateDef 3004]
Type = A
Physics = N
Anim = 99999
SprPriority = -5

[State 3004, VarSet]
type = VarSet
trigger1 = Root,Anim = 3001
trigger1 = Root,AnimElem = 2, = 0
V = 4
value = 128

[State 3004, varSet]
type = VarSet
trigger1 = Root,Anim = 3001
trigger1 = Root,AnimElem = 2, = 1
V = 4
value = 64

[State 3004, VarSet]
type = VarSet
trigger1 = Root,Anim = 2001
trigger1 = Root,AnimElem = 3, = 0
V = 4
value = 0

[State 3004, BGPalFX]
Type = BGPalFX
trigger1 = Root,Anim = 3000
trigger1 = Root,Time >= 40
trigger2 = Root,Anim = 3001
trigger2 = Root,AnimElem = 2, < 0
trigger3 = Root,Anim = 3001
trigger3 = Root,AnimElem = 3, >= 0
trigger3 = Root,AnimElem = 8, < 0
Add = -128,-128,-128
Time = 2

[State 3004, BGPalFX]
type = BGPalFX
trigger1 = Root,Anim = 3001
trigger1 = Root,AnimElem = 2, = 0
Add = 0,0,0
Time = 1

[State 3004, AllPalFX]
type = AllPalFX
trigger1 = Root,Anim = 3001
trigger1 = Root,AnimElem = 2, >= 0
trigger1 = Root,AnimElem = 3, < 0
Add = Var(4),Var(4),Var(4)
Time = 1

[State 3004, EnvColor]
type = EnvColor
trigger1 = Root,Anim = 3001
trigger1 = Root,AnimElem = 2, >= 0
trigger1 = Root,AnimElem = 3, <= 0
time = 1
value = Var(4),Var(4),Var(4)
under = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3004, ASsertSpecial]
type = AssertSpecial
trigger1 = 1
Flag = Noshadow
Flag2 = Invisible
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3004, DestroySelf]
Type = DestroySelf
trigger1 = Root,Anim = 3000
trigger1 = Root,AnimTime = 0
trigger2 = Root,Anim = 3001
trigger2 = Root,AnimElem = 8

[StateDef 3100]
type = S
movetype = A
physics = N
velset = 0, 0
ctrl = 0
anim = 3100
sprpriority = 2

[State 3100, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 6

[State 3100, AfterImage]
type = AfterImage
trigger1 = AnimElem = 3
time = 999
PalBright = 0,0,0
PalContrast = 32,32,160
PalAdd = 0,0,0
PalMul = 0.75,0.75,0.75
TimeGap = 2
FrameGap = 4
Trans = Add1
length = 9

[State 3100, SuperPause]
type = SuperPause
trigger1 = AnimElem = 3
anim = -1
time = 61
movetime = 61
p2defmul = 1
darken = 0
unhittable = 1

[State 3100, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1
value = -2000

[State 3100, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
stateno = 10010
ID = 10010
name = "Superpause FX"
postype = p1
pos = ceil(-35 * const(size.xscale)), ceil(-72 * const(size.yscale))
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 3100, Helper]
type = Helper
trigger1 = AnimElem = 3
stateno = 20100
ID = 20100
name = "Super_Portrait"
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 3100, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "AfterImage"
ID = 7002
stateno = 7002
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 3100, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "AfterImage"
ID = 7003
stateno = 7003
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S410,15
channel = 0

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S100,2

[State 3100, Explod]
type = explod
trigger1 = AnimElem = 4
anim = 2106
ID = 2106
sprpriority = 3
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 1
trans = add

[State 3100, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 6

[State 3100, VelAdd]
type = VelAdd
trigger1 = AnimElem = 6
x = -5

[State 3100, VelAdd]
type = VelAdd
trigger1 = AnimElem = 7
x = -1

[State 3100, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
animtype = hard
hitflag = MAF
guardflag = MA
ground.type = high
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -65))
hitsound = S200,10
guardsound = S300,0
damage = 30,10
priority = 6, Hit
pausetime = 12, 11
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 34
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = -4
guard.velocity = -6
air.velocity = 0, 0
airguard.velocity = -2.5, -5
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0
kill = 0
guard.kill = 1
envshake.time = 10
envshake.ampl = 4

[State 3100, TargetBind]
type = TargetBind
trigger1 = MoveHit
pos = floor(60 * const(size.xscale)), 0
ignorehitpause = 1

[State 3100, ChangeState]
type = ChangeState
trigger1 = MoveContact
value = 3101

[State 3100, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 3101]
type = S
movetype = A
physics = N
velset = 2, 0
ctrl = 0
anim = 3101
sprpriority = 2

[State 3101, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 38
value = S410,9
channel = 0

[State 3101, PlaySnd]
type = playSnd
trigger1 = AnimElem = 51
value = S410,16
channel = 0

[State 3101, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 11
trigger3 = AnimElem = 38
trigger4 = AnimElem = 42
trigger5 = AnimElem = 51
value = S100,2

[State 3101, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 46
Value = S100,10

[State 3101, PlaySnd]
Type = PlaySnd
Trigger1 = Time = [34,44]
Value = S100,1
Channel = 1
Persistent = 4

[State 3101, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 41
Value = S40,2

[State 3101, VelAdd]
type = VelAdd
trigger1 = AnimElem = 37
x = 2

[State 3101, VelAdd]
type = velAdd
trigger1 = AnimElem = 41
y = -2

[State 3101, VelAdd]
type = VelAdd
trigger1 = AnimElem = 44
x = -2
y = -2

[State 3101, VelAdd]
type = VelAdd
trigger1 = AnimElem = 49
y = 3

[State 3101, VelAdd]
type = VelAdd
trigger1 = AnimElem = 50
y = -5

[State 3101, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(52) >= 0
y = 0.4

[State 3101, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 41
statetype = A
physics = N

[State 3101, Helper]
type = Helper
trigger1 = AnimElem = 40
helpertype = normal
stateno = 8010
ID = 8010
name = "Jump Dust"
postype = p1
ownpal = 1

[State 3101, Explod]
type = Explod
trigger1 = AnimElem = 17, = 1
Anim = 2109
ID = 3101
PosType = P1
pos = 42,-30
ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State 3101, Explod]
type = Explod
trigger1 = AnimElem = 3
Anim = 2107
ID = 3102
sprpriority = 3
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 0
trans = add

[State 3101, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 3102
ID = 3103
sprpriority = 3
pos = 0, 0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 0
trans = add

[State 3101, Explod]
type = Explod
trigger1 = AnimElem = 37
anim = 3103
ID = 3104
sprpriority = 3
pos = -40,0
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 1
trans = add

[State 3101, Explod]
type = Explod
trigger1 = AnimElem = 46
anim = 1101
ID = 3105
sprpriority = 3
pos = -2,42
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 0
trans = add

[State 3101, Explod]
type = Explod
trigger1 = AnimElem = 50
anim = 1106
ID = 3106
sprpriority = 3
pos = 0,25
postype = p1
bindtime = -1
removeongethit = 1
ignorehitpause = 0
trans = add

[State 3101, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype = Back
air.animtype = Heavy
hitflag = MAF
guardflag = MA
ground.type = Low
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -70))
hitsound = S200,5
guardsound = S300,0
damage = 37,8
priority = 6, Hit
pausetime = 5,5
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 24
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = -4,0
guard.velocity = -5
air.velocity = -4,-4
airguard.velocity = -2.5, -5
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 4
getpower = 0
kill = 0
guard.kill = 1

[State 3101, second]
type = HitDef
trigger1 = AnimElem = 12
attr = S, HA
animtype = hard
hitflag = MAF
guardflag = MA
ground.type = high
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -40))
hitsound = S200,9
guardsound = S300,0
damage = 40,12
priority = 5, Hit
pausetime = 8, 7
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 24
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = 0
guard.velocity = -12
air.velocity = 0, 0
airguard.velocity = -2.5, -5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0
kill = 0
guard.kill = 1

[State 3101, HitDef]
type = HitDef
trigger1 = AnimElemNo(0) = [17,27]
attr = S, HA
animtype = hard
hitflag = MAF
guardflag = MA
ground.type = Low
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -60))
hitsound = S200,3+Random%3
guardsound = S300,0
damage = 12,5
priority = 6, Hit
pausetime = 3,3
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 24
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = 0
guard.velocity = -2
air.velocity = 0,-2.5
airguard.velocity = -2.5, -5
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0
envshake.time = 5
envshake.ampl = 2
kill = 0
guard.kill = 1

[State 3101, HitDef]
type = HitDef
trigger1 = AnimElem = 39
attr = S, HA
animtype = hard
hitflag = MAF
guardflag = MA
ground.type = high
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -60))
hitsound = S200,4
guardsound = S300,0
damage = 36,8
priority = 5, Hit
pausetime = 8, 7
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 24
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = 0
guard.velocity = -12
air.velocity = 0, 0
airguard.velocity = -2.5, -5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0
kill = 0
guard.kill = 1

[State 3101, HitDef]
type = HitDef
trigger1 = AnimElem = 43
attr = S, HA
animtype = hard
hitflag = MAF
guardflag = MA
ground.type = high
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -60))
hitsound = S200,6
guardsound = S300,0
damage = 35,10
priority = 5, Hit
pausetime = 16, 15
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 24
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = -2.8, -8
guard.velocity = -12
air.velocity = -2.8, -8
airguard.velocity = -2.5, -5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = 0.33
envshake.time = 10
envshake.ampl = 4
getpower = 0
kill = 0
guard.kill = 1

[State 3101, HitDef]
type = HitDef
trigger1 = AnimElem = 48
attr = S, HA
animtype = hard
hitflag = MAF
guardflag = MA
ground.type = high
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -60))
hitsound = S200,7
guardsound = S300,0
damage = 40,12
priority = 5, Hit
pausetime = 8, 7
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 24
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = -2.8, -8
guard.velocity = -12
air.velocity = -2.8, -8
airguard.velocity = -2.5, -5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = 0.33
envshake.time = 10
envshake.ampl = 4
getpower = 0
kill = 0
guard.kill = 1

[State 3101, HitDef]
type = HitDef
trigger1 = AnimElem = 52
attr = S, HA
animtype = hard
hitflag = MAF
guardflag = MA
ground.type = high
sparkno = -1+(0*(var(41) := 8053))
guard.sparkno = -1+(0*(var(42) := 9000))
sparkxy = 0,0+(0*(var(43) := 100 && var(44) := -80))
hitsound = S200,8
guardsound = S300,0
damage = 70,17
priority = 5, Hit
pausetime = 10,10
ground.slidetime = 24
guard.slidetime = 24
ground.hittime = 24
guard.hittime = 24
guard.ctrltime = 24
air.hittime = 24
ground.velocity = -5, -5.5
guard.velocity = -12
air.velocity = -5, -5.5
airguard.velocity = -2.5, -5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = 0.454
envshake.time = 10
envshake.ampl = 4
getpower = 0

[State 3101, ChangeState]
type = changeState
trigger1 = AnimElemTime(52) > 0
trigger1 = Pos Y >= 0
value = 52

[StateDef 4000]
type = S
movetype = A
physics = S
ctrl = 0
anim = 4000
sprpriority = 2

[State 4000, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal
stateno = 10020
ID = 10020
name = "Superpause FX"
postype = p1
pos = ceil(5 * const(size.xscale)), ceil(-130 * const(size.yscale))
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 4000, Helper]
type = Helper
trigger1 = AnimElem = 1
stateno = 20100
ID = 20100
name = "Super_Portrait"
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 4000, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal
name = "AfterImage"
ID = 7004
stateno = 7004
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 4000, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal
name = "AfterImage"
ID = 7005
stateno = 7005
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 4000, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
anim = -1
time = 61
movetime = 61
p2defmul = 1
darken = 0
unhittable = 1

[State 4000, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 1
value = -3000

[State 4000, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 999
PalBright = 0,0,0
PalContrast = 160,32,32
PalAdd = 0,0,0
PalMul = 0.75,0.75,0.75
TimeGap = 2
FrameGap = 4
Trans = Add1
length = 9

[State 4000, Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 4005
ID = 4005
scale = 1,1
postype = p1
Pos = -160-Ceil(Pos X*Facing),50
sprpriority = 4
supermove = 0
ownpal = 1

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S410,17
Channel = 0

[State 4000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = S100,2

[State 4000, HitDef]
type = HitDef
trigger1 = AnimElem = 11
attr = S,HA
damage = 0
animtype  = Hard
hitflag = MAF
guardflag = M
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S200,9
guardsound = S300,0
ground.type = low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -1.1,-9
air.cornerpush.veloff = 0
air.velocity = -1.1,-9
down.velocity = -0.1,0.1
p1stateno = 4002
p2stateno = 4008
getpower = 0
fall = 1
fall.recover = 0
kill = 0
ID = 4002

[State 4000, Helper]
type = Helper
trigger1 = MoveGuarded  = 1
helpertype = normal
stateno = 9000
ID = 9000
name = "Guard_Spark"
postype = p1
Pos = Ceil(EnemyNear,Pos X - Pos X) * Facing,Ceil(EnemyNear,Pos Y - Pos Y - 50)
ownpal = 1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1

[State 4000, Helper]
type = Helper
trigger1 = AnimElem = 11
name = "Knife"
Stateno = 4006
ID = 4006
pos = 0,-68
ownpal = 1

[State 4000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 4000, ChangeState]
type = ChangeState
trigger1 = AnimElem = 17
value = 4001
ctrl = 0

[StateDef 4001]
type = S
movetype = I
physics = S
ctrl = 0
anim = 4001
sprpriority = 2

[State 4001, PosSet]
type = posset
trigger1 = time = 0
x = var(0)

[State 4001, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 20

[State 4001, PosSet]
type = PosSet
trigger1 = time >= 0
y = 0

[State 4001, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S410,19
Channel = 0

[State 4001, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S100,12

[State 4001, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 4002]
type = S
movetype = A
physics = S
ctrl = 0
anim = 99999
sprpriority = 2

[State 4002, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S100,15

[State 4002, Helper]
type = Helper
trigger1 = time = 0
Name = "Clone"
Stateno = 4005
ID = 4005
pos = 0,0
ownpal = 1

[State 4002, Helper]
type = Helper
trigger1 = time = 0
Name = "Nanaya"
Stateno = 4004
ID = 4004
Pos = -5,EnemyNear,Const(Size.Head.Pos.Y)+25
Postype = p2
ownpal = 1

[State 4002, AllPalFX]
type = ALLPalFX
trigger1 = time > 0
trigger1 = time <= 16
add = 255-var(1),255-var(1),255-var(1)
time = 1

[State 4002, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
pausemovetime = 9999
supermovetime = 9999

[State 4002, VarSet]
type = VarSet
trigger1 = time = 0
var(1) = 0

[State 4002, VarAdd]
type = VarAdd
trigger1 = time >= 0
var(1) = 16

[State 4002, TargetState]
type = TargetState
trigger1 = time = 54
value = 4010

[State 4010, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = time = 54
value = ceil(-400*fvar(1))
absolute = 1

[State 4002, ChangeState]
type = ChangeState
trigger1 = time >= 50
trigger1 = NumHelper(4004) = 0
value = 4003
ctrl = 0

[StateDef 4003]
type = S
movetype = I
physics = S
ctrl = 0
anim = 2001
sprpriority = 2

[State 4003, Turn]
type = Turn
trigger1 = time = 0
value = 1

[State 4003, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S100,10

[State 4003, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S410,18

[State 4003, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 4004]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,10
anim = 99999
sprpriority = 3

[State 4004, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 83
PalBright = 0,0,0
PalContrast = 160,32,32
PalAdd = 0,0,0
PalMul = 0.75,0.75,0.75
TimeGap = 2
FrameGap = 4
Trans = Add1
length = 9

[State 4004, AllPalFX]
type = AllPalFX
trigger1 = Time >= 65
trigger1 = Time < 83
time = 1
add = 255-((Time-65)*14),255-((Time-65)*14),255-((Time-65)*14)
mul = 255,0,0
sinadd = 0,0,0,10
invertall = 0
color = 256

[State 4004, ChangeAnim]
type = ChangeAnim
trigger1 = P2BodyDist Y <= 90
trigger1 = time >=0
value = 4003
persistent = 0

[State 4004, VelSet]
type = VelSet
trigger1 = P2BodyDist Y <= 90
trigger1 = time >=0
y = 0
persistent = 0

[State 4004, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 4
value = S100,14

[State 4004, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 4
value = S200,8

[State 4004, EnvShake]
type = EnvShake
trigger1 = AnimElem = 4
time = 27
freq = 90
ampl = 13
phase = 90

[State 4004, HitAdd]
type = HitAdd
trigger1 = AnimElem = 4
value = 1

[State 4004, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
pausemovetime = 9999
supermovetime = 9999

[State 4004, Explod]
type = Explod
trigger1 = AnimElem = 4
Anim = 4006
ID = 4006
postype = p2
Pos = -10,EnemyNear,Const(Size.Head.Pos.Y)+25
sprpriority = -2
supermove = 0
ownpal = 1

[State 4004, Helper]
type = Helper
trigger1 = AnimElem = 4
ID = 8053
stateno = 8053
name = "Hit_Spark"
postype = p1
Pos = Ceil(EnemyNear,Pos X - Pos X) * Facing,Ceil(EnemyNear,Pos Y - Pos Y - 80)
pausemovetime = 9999
supermovetime = 9999
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 4004, DestroySelf]
type = DestroySelf
trigger1 = time = 83

[StateDef 4005]
type = A
movetype = I
physics = N
anim = 4002
ctrl = 0
sprpriority = -1

[State 4005, AssertSpecial]
type = AssertSpecial
trigger1 =1
flag = noshadow

[State 4005, VarSet]
type = VarSet
trigger1 = time = 0
var(2) = -3

[State 4005, VarAdd]
type = VarAdd
trigger1 = time >= 1
var(2) = -5

[State 4005, PalFX]
type = PalFX
trigger1 = time >= 0
add = var(2),var(2),var(2)
time = 1

[State 4005, DestroySelf]
type = DestroySelf
trigger1 = var(2) < -234

[StateDef 4006]
type = A
movetype = I
physics = N
anim = 99999
ctrl = 0
sprpriority = 1

[State 4006, VelSet]
type = VelSet
trigger1 = Time = 0
x = 14.3

[State 4006, ChangeState]
type = ChangeState
trigger1 = FrontEdgeDist <= 3
value = 4007

[State 4006, DestroySelf]
type = DestroySelf
trigger1 = Root,StateNo != 4000

[StateDef 4007]
type = A
movetype = I
physics = N
anim = 4004
ctrl = 0
sprpriority = 1

[State 4007, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S100,13

[State 4007, VelSet]
type = VelSet
trigger1 = Time = 0
x = -1
y = -4.3

[State 4007, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.2

[State 4007, AngleSet]
type = AngleSet
trigger1 = Time = 0
value = 0

[State 4007, AngleAdd]
type = AngleAdd
trigger1 = Time >= 0
value = 20

[State 4007, AngleDraw]
type = AngleDraw
trigger1 = Pos Y <= 10

[State 4007, TargetBind]
type = TargetBind
trigger1 = time = 20
ID = -1
pos = 0,0
time = 1

[State 4007, ParentVarSet]
type = ParentVarSet
trigger1 = time >= 0
var(0) = Ceil(pos x)

[State 4007, DestroySelf]
type = Destroyself
trigger1 = (Vel y > 0) && (Pos y >= 0)
trigger2 = Root,StateNo = 4001

[StateDef 4008]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = -1

[State 4008, VelSet]
type = VelSet
trigger1 = time = 0
x = 0

[State 4008, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5010

[State 4008, ChangeState]
type = ChangeState
trigger1 = time = 2
value = 4009

[StateDef 4009]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = -1

[State 4009, VelSet]
type = VelSet
trigger1 = time = 0
x = 0

[State 4009, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 4007

[StateDef 4010]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = -1

[State 4010, VelSet]
type = VelSet
trigger1 = time = 0
x = 0

[State 4010, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 4008

[State 4010, ChangeAnim]
type = ChangeAnim
trigger1 = time = 30
trigger1 = SelfAnimExist(5030)
value = 5030

[State 4010, ChangeAnim]
type = ChangeAnim
trigger1 = time = 30
trigger1 = SelfAnimExist(5060)
value = 5060

[State 4010, ChangeAnim]
type = ChangeAnim
trigger1 = time = 30
trigger1 = SelfAnimExist(5051)
value = 5051

[State 4010, ChangeAnim]
type = ChangeAnim
trigger1 = time = 30
trigger1 = SelfAnimExist(5052)
value = 5052

[State 4010, ChangeAnim]
type = ChangeAnim
trigger1 = time = 50
trigger1 = anim != 5052
trigger1 = SelfAnimExist(5061)
value = 5061

[State 4010, VelSet]
type = VelSet
trigger1 = Time = 30
x = 0
y = -8.5

[State 4010, VelAdd]
type = VelAdd
trigger1 = time >= 30
y = 0.4

[State 4010, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
trigger1 = alive = 1
value = 5100

[State 4010, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
trigger1 = alive = 0
value = 5110

[StateDef 6000]
Type = S
Physics = S
MoveType = I
Anim = 6000
VelSet = 0,0
ctrl = 0
sprpriority = 2

[State 6000, VarSet]
type = VarSet
trigger1 = Time = 0
v = 45
value = 0

[State 6000, VarAdd]
type = VarAdd
trigger1 = Time = 0
var(45) = 1200
ignorehitpause = 1

[State 6000, PowerAdd]
type = PowerAdd
trigger1 = Time = 0
value = -3000

[State 6000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 30

[State 6000, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 6000, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal
stateno = 6001
ID = 6001
name = "MAX"
postype = p1
pos = ceil(-6 * const(size.xscale)), ceil(-64 * const(size.yscale))
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 6000, Helper]
type = Helper
trigger1 = Time = 0
stateno = 6020
ID = 6020
name = "Awakening"
SuperMovetime = 9999
PauseMovetime = 9999
ownpal = 1

[State 6000, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 30
movetime = 30
anim = -1
sound = S10000,5
p2defmul = 1
darken = 0

[State 6000, CtrlSet]
type = CtrlSet
trigger1 = Time = 25
value = 1

[State 6000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[StateDef 6001]
Type = A
Physics = N
MoveType = I
Anim = 6001
Ctrl = 0
velset = 0,0
sprpriority = 5

[State 6001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6001, BGPalFX]
type = BGPalFX
trigger1 = time < 25
time = 1
mul = 128,128,128

[State 6001, AngleSet]
type = AngleSet
trigger1 = Time = 0
value = 6*(random%60)

[State 6001, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -6

[State 6001, AngleDraw]
type = AngleDraw
trigger1 = time < 8
scale = (.0625*time), (.0625*time)

[State 6001, AngleDraw]
type = AngleDraw
trigger1 = time >= 8
scale = .5, .5

[State 6001, Trans]
type = Trans
trigger1 = time < 16
trans = AddAlpha
alpha = 256, 256

[State 6001, Trans]
type = Trans
trigger1 = time >= 16
trans = AddAlpha
alpha = ceil(256 - 25.6*(time-16)), 256

[State 6001, Explod]
type = explod
trigger1 = Time = 0
anim = 6002
ID = 6002
sprpriority = 5
postype = p1
facing = IfElse(random<500,-1,1)
vfacing = IfElse(random<500,-1,1)
removetime = 16
supermovetime = -1

[State 6001, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(6002)
ID = 6002
scale = 2-(.125*time), 2-(.125*time)
trans = AddAlpha
alpha = IfElse(time<4, 64*time, 256), 256

[State 6001, Explod]
type = Explod
trigger1 = time = 16
anim = 6003
ID = 6003
sprpriority = 5
postype = p1
removetime = 32
supermovetime = -1

[State 6001, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(6003)
ID = 6003
scale = (.1*(time-16)), (.1*(time-16))
trans = AddAlpha
alpha = ceil(256 - 25.6*(time-16)), 256

[State 6001, RemoveExplod]
type = RemoveExplod
trigger1 = time >= 26

[State 6001, DestroySelf]
type = DestroySelf
trigger1 = time >= 26

[StateDef 6002]
anim = 0
ctrl = 0
sprpriority = -6

[State 6002, Bindtoroot]
type = BindToRoot
trigger1 = 1

[State 6002, Turn]
type = turn
trigger1 = facing != Root,facing

[State 6002, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 6002, VarSet]
type = VarSet
trigger1 = Root, HitPauseTime = 0
var(0) = Root, AnimElemNo(0)

[State 6002, Anim]
type = ChangeAnim
triggerall = SelfAnimExist(Root, Anim)
triggerall = AnimExist(Root, Anim)
trigger1 = Root, Anim < 6003
value = Root, Anim
elem = Var(0)

[State 6002, Anim]
type = ChangeAnim
triggerall = SelfAnimExist(Root,Anim)
triggerall = AnimExist(Root,Anim)
triggerall = Root,HitPauseTime > 0
trigger1 = Root,AnimElemNo(0) > AnimElemNo(0)
value = Root,Anim
elem = Root,AnimElemNo(0)

[State 6002, AssertSpecial]
type = AssertSpecial
trigger1 = Time <= 0
trigger2 = !SelfAnimExist(Root,Anim)
trigger3 = !AnimExist(Root,Anim)
trigger4 = Root,StateNo >= 160
trigger4 = Root,StateNo < 5000
trigger4 = Root,MoveType = H
trigger5 = Root,StateNo >= 6000
trigger5 = Root,MoveType = H
trigger6 = Root,Anim >= 160
trigger6 = Root,Anim < 5000
trigger6 = Root,MoveType = H
trigger7 = Root,Anim >= 6000
trigger7 = Root,MoveType = H
trigger8 = Root,Stateno = [190,194]
trigger9 = Root,Stateno = 5150
flag = Invisible

[State 6002, AngleDraw]
type = angledraw
trigger1 = 1
scale = 1+var(1)*.002,1+var(1)*.0015

[State 6002, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State 6002, PalFx]
type = PalFX
trigger1 = 1
time = 1
add = 255,-220,-220
invertall = 0
color = 256

[State 6002, VarAdd]
type = varadd
trigger1 = 1
var(2) = 1

[State 6002, VarAdd]
type = varadd
trigger1 = var(2) <= 30
var(1) = 1

[State 6002, VarAdd]
type = varadd
trigger1 = var(2) > 30
var(1) = -1

[State 6002, VarAdd]
type = varset
trigger1 = var(2) >= 60
var(2) = 0

[State 6002, DestroySelf]
type = DestroySelf
trigger1 = Root,Var(45) <= 0

[StateDef 6010]
movetype = I
physics = N
anim = 99999
ctrl = 0

[State 6010, Null]
type = Null
trigger1 = Root,NumPartner!=0
trigger1 = (Partner,ID) < (Root,ID)
trigger1 = Partner,Authorname = "Kohaku"
trigger1 = var(4):=1

[State 6010, Explod]
type = explod
trigger1 = time = 0
trigger1 = Numexplod(6010)=0
ID = 6010
anim = IfElse(Teamside = 1,6010,6012)
pos = Ifelse(Teamside = 1,15,209),ceil((1.33*gameheight/gamewidth)*230-(30*(var(4))))
postype = left
scale = 0.5,0.5
ownpal = 1
bindtime = -1
removetime = -1
pausemovetime = -1
supermove = 1
ontop = 1
facing = 1

[State 6010, Explod]
type = explod
trigger1 = time = 0
id = 6011
anim = 6011
pos = Ifelse(Teamside = 1,15,304),ceil((1.33*gameheight/gamewidth)*230-(30*(var(4))))
postype = left
scale = 0.5,0.5
ownpal = 1
bindtime = -1
removetime = -1
pausemovetime = -1
supermove = 1
ontop = 1
facing = ifelse(teamside=1,1,-1)

[State 6010, ModifyExplod]
type = modifyexplod
trigger1 = 1
id = 6011
Scale = .5*Root,Var(45)/1200,0.50

[State 6010, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Var(45) <= 0
ID = 6010

[State 6010, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Var(45) <= 0
ID = 6011

[State 6010, DestroySelf]
type = DestroySelf
trigger1 = Root,Var(45) <= 0

[StateDef 6020]
Type = S
Physics = N
MoveType = I
Anim = 99999
Ctrl = 0
velset = 0,0
sprpriority = 5

[State 6020, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6020, Explod]
type = Explod
trigger1 = time = 0
anim = 6020
id = 6020
pos = ceil(gamewidth/2.0),ceil(gameheight/2.0-20)
postype = left
sprpriority = -8
bindtime = -1
ownpal = 1
Scale = .5,.5
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 6020, Explod]
type = Explod
trigger1 = time = 0
anim = 6021
ID = 6021
pos = ceil(gamewidth/2.0),ceil(gameheight/2.0-20)
postype = left
sprpriority = -7
bindtime = -1
ownpal = 1
Scale = .5,.5
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 6020, ModifyExplod]
type = ModifyExplod
trigger1 = time >= 65
ID = 6020
Scale = 0.5,0.5-((time-65)*0.1)

[State 6020, ModifyExplod]
type = ModifyExplod
trigger1 = time >= 65
ID = 6021
Scale = 0.5,0.5-((time-65)*0.1)

[State 6020, RemoveExplod]
type = RemoveExplod
trigger1 = Time >= 70
trigger2 = NumHelper(20100) = 1
ID = 6020

[State 6020, RemoveExplod]
type = RemoveExplod
trigger1 = Time >= 70
trigger2 = NumHelper(20100) = 1
ID = 6021

[State 6020, DestroySelf]
type = DestroySelf
trigger1 = Time >= 70
trigger2 = NumHelper(20100) = 1

[StateDef 7000]
physics = N
anim = 7000

[State 7000, SprPriority]
type = SprPriority
trigger1 = 1
value = 0

[State 7000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 7000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 7000, BindToRoot]
type = BindToRoot
trigger1 = time = 0
time = 1
pos = 0,0

[State 7000, VelSet]
type = VelSet
trigger1 = 1
x = .4
y = ifelse((root,statetype != A),0,-.4)

[State 7000, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 120-2*(time),256

[State 7000, DestroySelf]
type = DestroySelf
trigger1 = Time >= 61
trigger2 = root,movetype = H

[StateDef 7001]
physics = N
anim = 7000

[State 7001, SprPriority]
type = SprPriority
trigger1 = 1
value = 0

[State 7001, BindToRoot]
type = BindToroot
trigger1 = time = 0
time = 1
pos = 0,0

[State 7001, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7001, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 7001, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 7001, VelSet]
type = VelSet
trigger1 = 1
x = -.4
y = ifelse((root,statetype != A),0,.4)

[State 7001, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 120-2*(time),256

[State 7001, DestroySelf]
type = DestroySelf
trigger1 = Time >= 61
trigger2 = root,movetype = H

[StateDef 7002]
physics = N
anim = 7001

[State 7002, SprPriority]
type = SprPriority
trigger1 = 1
value = 0

[State 7002, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7002, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 7002, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 7002, BindToRoot]
type = BindToRoot
trigger1 = time = 0
time = 1
pos = 0,0

[State 7002, VelSet]
type = VelSet
trigger1 = 1
x = .4
y = ifelse((root,statetype != A),0,-.4)

[State 7002, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 120-2*(time),256

[State 7002, DestroySelf]
type = DestroySelf
trigger1 = Time >= 61
trigger2 = root,movetype = H

[StateDef 7003]
physics = N
anim = 7001

[State 7003, SprPriority]
type = SprPriority
trigger1 = 1
value = 0

[State 7003, BindToRoot]
type = BindToroot
trigger1 = time = 0
time = 1
pos = 0,0

[State 7003, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7003, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 7003, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 7003, VelSet]
type = VelSet
trigger1 = 1
x = -.4
y = ifelse((root,statetype != A),0,.4)

[State 7003, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 120-2*(time),256

[State 7003, DestroySelf]
type = DestroySelf
trigger1 = Time >= 61
trigger2 = root,movetype = H

[StateDef 7004]
physics = N
anim = 7002

[State 7004, SprPriority]
type = SprPriority
trigger1 = 1
value = 0

[State 7004, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7004, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 7004, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 7004, BindToRoot]
type = BindToRoot
trigger1 = time = 0
time = 1
pos = 0,0

[State 7004, VelSet]
type = VelSet
trigger1 = 1
x = .4
y = ifelse((root,statetype != A),0,-.4)

[State 7004, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 120-2*(time),256

[State 7004, DestroySelf]
type = DestroySelf
trigger1 = Time >= 61
trigger2 = root,movetype = H

[StateDef 7005]
physics = N
anim = 7002

[State 7005, SprPriority]
type = SprPriority
trigger1 = 1
value = 0

[State 7005, BindToRoot]
type = BindToroot
trigger1 = time = 0
time = 1
pos = 0,0

[State 7005, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7005, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 7005, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 7005, VelSet]
type = VelSet
trigger1 = 1
x = -.4
y = ifelse((root,statetype != A),0,.4)

[State 7005, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 120-2*(time),256

[State 7005, DestroySelf]
type = DestroySelf
trigger1 = Time >= 61
trigger2 = root,movetype = H

[StateDef 8010]
type = A
anim = 99999
velset = 0,0

[State 8010, BindtoParent]
type = BindtoParent
trigger1 = 1

[State 8010, Explod]
type = Explod
trigger1 = Time = 0
anim = 8010
sprpriority = 3
postype = p1
pos = 0,10
scale = 0.5,0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 8010, Explod]
type = Explod
trigger1 = Time = 0
trigger2 = Time = 2
trigger3 = Time = 6
anim = 8000
ID = 8000
sprpriority = 3
postype = p1
scale = 0.5,0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 8010, ModifyExplod]
type = ModifyExplod
trigger1 = time > 1
ID = 8000
scale = 0.5-((Time-1)*0.05),0.5-((Time-1)*0.05)

[State 8010, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 11
ID = 8000

[State 8100, DestroySelf]
type = DestroySelf
trigger1 = time = 11

[StateDef 8030]
type = A
anim = 99999
velset = 0, 0
sprpriority = 5

[State 8030, PosSet]
type = PosSet
trigger1 = !time = 0
y = 0

[State 8030, Explod]
type = Explod
trigger1 = time = 0 || time = 3 || time = 6
anim = 8030
ID = ifelse((time = 6), 8032, ifelse((time = 3), 8031, 8030))
postype = p1
pos = 0, -4
random = 8, 8
vel = -3 -(random / 1000.0), -2 -(random / 2000.0)
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
removetime = 16
sprpriority = 3
pausemovetime = -1
supermovetime = -1

[State 8030, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(8030)
ID = 8030
scale = 0.1 + (0.025 * time), 0.1 + (0.025 * time)
trans = addalpha
alpha = 256 -(16 * time), 256

[State 8030, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(8031)
ID = 8031
scale = 0.1 + (0.025 * (time -3)), 0.1 + (0.025 * (time -3))
trans = addalpha
alpha = 256 -(16 * (time -3)), 256

[State 8030, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(8032)
ID = 8032
scale = 0.1 + (0.025 * (time -6)), 0.1 + (0.025 * (time -6))
trans = addalpha
alpha = 256 -(16 * (time -6)), 256

[State 8030, RemoveExplod]
type = RemoveExplod
trigger1 = time >= 22

[State 8030, DestroySelf]
type = DestroySelf
trigger1 = !NumExplod

[StateDef 8050]
type = A
physics = N
movetype = I
anim = 8050
velset=0,0
sprpriority=5

[State 8050, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8050, AngleSet]
type = AngleSet
trigger1 = !time
value = 30*(random%12)

[State 8050, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State 8050, AngleDraw]
type = AngleDraw
trigger1 = time < 10
scale = .3-(time*.03), .3-(time*.03)

[State 8050, AngleDraw]
type = AngleDraw
trigger1= time >= 10
scale = 0,0

[State 8050, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 8050, Explod]
type = Explod
trigger1 = !time
anim = 8051
ID = 8051
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 5
removetime = 16
pausemovetime = -1
supermovetime = -1

[State 8050, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(8051)
ID = 8051
scale = .15+(.009375*time),.15+(.009375*time)
trans = addalpha
alpha = 256-(16*time),256

[State 8050, Explod]
type = Explod
trigger1 = !time
anim = 8052
ID = 8052
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 5
removetime = 16
pausemovetime = -1
supermovetime = -1

[State 8050, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(8052)
ID = 8052
scale = .15+(.009375*time),.15+(.009375*time)
trans = addalpha
alpha = 256-(16*time),256

[State 8050, Explod]
type = Explod
trigger1= !time
anim = 8053
ID = 8053
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 3
removetime = 8
pausemovetime = -1
supermovetime = -1

[State 8050, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(8053)
ID = 8053
scale = .3-(.0375*time),.3-(.0375*time)
trans = addalpha
alpha = 128-(16*time),256

[State 8050, RemoveExplod]
type = RemoveExplod
trigger1 = time >= 16

[State 8050, DestroySelf]
type = DestroySelf
trigger1 = time >= 16

[StateDef 8051]
type = A
physics = N
movetype = I
anim = 8050
velset = 0,0
sprpriority = 5

[State 8051, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8051, AngleSet]
type = AngleSet
trigger1 = !time
value = 30*(random%12)

[State 8051, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State 8051, AngleDraw]
type = AngleDraw
trigger1 = time<10
scale = .35-(time*.035), .35-(time*.035)

[State 8051, AngleDraw]
type = AngleDraw
trigger1 = time >= 10
scale = 0,0

[State 8051, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 8051, Explod]
type = Explod
trigger1 = !time
anim = 8051
ID = 8051
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 5
removetime = 16
pausemovetime = -1
supermovetime = -1

[State 8051, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(8051)
ID = 8051
scale =.175+(.0109375*time),.175+(.0109375*time)
trans = addalpha
alpha = 256-(16*time),256

[State 8051, Explod]
type = Explod
trigger1 = !time
anim = 8052
ID = 8052
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 5
removetime = 16
pausemovetime = -1
supermovetime = -1

[State 8051, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(8052)
ID = 8052
scale = .175+(.0109375*time),.175+(.0109375*time)
trans = addalpha
alpha = 256-(16*time),256

[State 8051, Explod]
type = Explod
trigger1 = !time
anim = 8053
ID = 8053
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 3
removetime = 8
pausemovetime = -1
supermovetime = -1

[State 8051, ModifyExplod]
type = ModifyExplod
trigger1= NumExplod(8053)
ID = 8053
scale = .35-(.04375*time),.35-(.04375*time)
trans = addalpha
alpha = 128-(16*time),256

[State 8051, RemoveExplod]
type = RemoveExplod
trigger1 = time >= 16

[State 8051, DestroySelf]
type = DestroySelf
trigger1 = time >= 16

[StateDef 8052]
type = A
physics = N
movetype = I
anim = 8050
velset=0,0
sprpriority=5

[State 8052, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8052, AngleSet]
type = AngleSet
trigger1 = !time
value = 30*(random%12)

[State 8052, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State 8052, AngleDraw]
type = AngleDraw
trigger1 = time < 10
scale = .4-(time*.04), .4-(time*.04)

[State 8052, AngleDraw]
type = AngleDraw
trigger1 = time >= 10
scale = 0,0

[State 8052, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 8052, Explod]
type = Explod
trigger1 = !time
anim = 8051
ID = 8051
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 5
removetime = 16
pausemovetime = -1
supermovetime = -1

[State 8052, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(8051)
ID = 8051
scale =.2+(.0125*time),.2+(.0125*time)
trans = addalpha
alpha = 256-(16*time),256

[State 8052, Explod]
type = Explod
trigger1 = !time
anim = 8052
ID = 8052
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 5
removetime = 16
pausemovetime = -1
supermovetime = -1

[State 8052, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(8052)
ID = 8052
scale = .2+(.0125*time),.2+(.0125*time)
trans = addalpha
alpha = 256-(16*time),256

[State 8052, Explod]
type = Explod
trigger1 = !time
anim = 8053
ID = 8053
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 3
removetime = 8
pausemovetime = -1
supermovetime = -1

[State 8052, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(8053)
ID = 8053
scale = .4-(.05*time),.4-(.05*time)
trans = addalpha
alpha = 128-(16*time),256

[State 8052, RemoveExplod]
type = RemoveExplod
trigger1 = time >= 16

[State 8052, DestroySelf]
type = DestroySelf
trigger1 = time >= 16

[StateDef 8053]
type = A
physics = N
movetype = I
anim = 8050
velset = 0,0
sprpriority = 5

[State 8053, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8053, AngleSet]
type = AngleSet
trigger1 = !time
value = 30*(random%12)

[State 8053, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State 8053, AngelDraw]
type = AngleDraw
trigger1 = time < 10
scale = .5-(time*.05), .5-(time*.05)

[State 8053, AngleDraw]
type = AngleDraw
trigger1 = time >= 10
scale = 0,0

[State 8053, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 8053, Explod]
type = Explod
trigger1 = !time
anim = 8051
ID = 8051
postype = p1
facing = ifelse(random < 500,-1,1)
vfacing = ifelse(random < 500,-1,1)
sprpriority = 5
removetime = 16
pausemovetime = -1
supermovetime = -1

[State 8053, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(8051)
ID = 8051
scale = .25+(.015625*time),.25+(.015625*time)
trans = addalpha
alpha = 256-(16*time),256

[State 8053, Explod]
type = Explod
trigger1 = !time
anim = 8052
ID = 8052
postype = p1
facing = ifelse(random < 500,-1,1)
vfacing = ifelse(random < 500,-1,1)
sprpriority = 5
removetime = 16
pausemovetime = -1
supermovetime = -1

[State 8053, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(8052)
ID = 8052
scale = .25+(.015625*time),.25+(.015625*time)
trans = addalpha
alpha = 256-(16*time),256

[State 8053, Explod]
type = Explod
trigger1 = !time
anim = 8054
ID = 8054
postype = p1
vfacing = ifelse(random < 500,-1,1)
sprpriority = -3
removetime = 8
pausemovetime = -1
supermovetime = -1

[State 8053, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(8054)
ID = 8054
scale = .5,.5
trans = addalpha
alpha = 256-(32*time),256

[State 8053, Explod]
type = Explod
trigger1 = !time
anim = 8053
ID = 8053
postype = p1
facing = ifelse(random < 500,-1,1)
vfacing = ifelse(random < 500,-1,1)
sprpriority = 3
removetime = 8
pausemovetime = -1
supermovetime = -1

[State 8053, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(8053)
ID = 8053
scale = .5-(.0625*time),.5-(.0625*time)
trans = addalpha
alpha = 256-(32*time),256

[State 8053, RemoveExplod]
type = RemoveExplod
trigger1 = time >= 16

[State 8053, DestroySelf]
type = DestroySelf
trigger1 = time >= 16

[StateDef 8054]
type = A
physics = N
movetype = I
anim = 8050
velset = 0,0
sprpriority = 5

[State 8054, AssertSpecial]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8054, Angle]
type = angleset
trigger1 = !time
value = 30*(random%12)

[State 8054, AngleAdd]
type = angleadd
trigger1 = 1
value = 30

[State 8054, AngleDraw]
type = angledraw
trigger1 = time < 10
scale = .45-(time*.045), .45-(time*.045)

[State 8054, AngleDraw]
type = angledraw
trigger1 = time >= 10
scale = 0,0

[State 8054, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 8054, Explod]
type = explod
trigger1 = !time
anim = 8051
ID = 8051
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 5
removetime = 16
pausemovetime = -1
supermovetime = -1

[State 8054, ModifyExplod]
type = modifyexplod
trigger1 = numexplod(8051)
ID = 8051
scale = .225+(.0140625*time),.225+(.0140625*time)
trans = addalpha
alpha = 256-(16*time),256

[State 8054, Explod]
type = explod
trigger1 = !time
anim = 8052
ID = 8052
postype = p1
facing = ifelse(random<500,-1,1)
vfacing = ifelse(random<500,-1,1)
sprpriority = 5
removetime = 16
pausemovetime = -1
supermovetime = -1

[State 8054, ModifyExplod]
type = modifyexplod
trigger1 = numexplod(8052)
ID = 8052
scale = .225+(.0140625*time),.225+(.0140625*time)
trans = addalpha
alpha = 256-(16*time),256

[State 8054, Explod]
type = explod
trigger1 = !time
anim = 8054
ID = 8054
postype = p1
vfacing = ifelse(random < 500,-1,1)
sprpriority = -3
removetime = 8
pausemovetime = -1
supermovetime = -1

[State 8054, ModifyExplod]
type = modifyexplod
trigger1 = numexplod(8054)
ID = 8054
scale = .4,.4
trans = addalpha
alpha = 256-(32*time),256

[State 8054, Explod]
type = explod
trigger1 = !time
anim = 8053
ID = 8053
postype = p1
facing = ifelse(random < 500,-1,1)
vfacing = ifelse(random < 500,-1,1)
sprpriority = 3
removetime = 8
pausemovetime = -1
supermovetime = -1

[State 8054, ModifyExplod]
type = modifyexplod
trigger1 = numexplod(8053)
ID = 8053
scale = .45-(.05625*time),.45-(.05625*time)
trans = addalpha
alpha = 192-(24*time),256

[State 8054, RemoveExplod]
type = RemoveExplod
trigger1= time >= 16

[State 8054, DestroySelf]
type = DestroySelf
trigger1= time >= 16

[StateDef 9000]
type = A
physics = N
movetype = I
anim = 9000
velset = 0,0
sprpriority = 5

[State 9000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 9000, AnglDraw]
type = AngleDraw
trigger1 = 1
scale = .125+(.046875*time), .125+(.046875*time)

[State 9000, Trans]
type = Trans
trigger1 = time < 4
trans = addalpha
alpha = 256, 256

[State 9000, Trans]
type = Trans
trigger1 = time >= 4
trans = addalpha
alpha = 256 - 64*(time-4), 256

[State 9000, DstroySelf]
type = DestroySelf
trigger1 = time >= 8

[StateDef 10000]
type = A
movetype = I
physics = N
anim = 10000
velset = 0,0
ctrl = 0
sprpriority = 5

[State 10000, Varset]
type = VarSet
trigger1 = !time
var(0) = 61

[State 10000, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S10000,0

[State 10000, AngleDraw]
type = AngleDraw
trigger1 = time <= 15
scale = 0+(time*.02),0+(time*.02)

[State 10000, AngleDraw]
type = AngleDraw
trigger1 = time > 15
scale = .3,.3

[State 10000, AngleDraw]
type = AngleDraw
trigger1 = time >= var(0)
scale = 0,0

[State 10000, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -6

[State 10000, Trans]
type = Trans
trigger1 = 1
trans = add

[State 10000, PalFX]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State 10000, Helper]
type = Helper
trigger1 = Time = 0
ID = 10001
StateNo = 10001
pos = 0,0
postype = P1
name = "Spining_circle"
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = .55
size.yscale = .55

[State 10000, Explod]
type = Explod
trigger1 = !time
anim = 10001
ID = 10001
sprpriority = 5
postype = p1
supermovetime = -1
removetime = 15

[State 10000, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(10001)
ID = 10001
scale = 1-(time*.066666),1-(time*.066666)
trans = AddAlpha
alpha = ceil(100+20.4*time),256

[State 10000, Explod]
type = Explod
trigger1 = time = 15
anim = 10002
ID = 10002
sprpriority = 5
postype = p1
supermovetime = -1
removetime = 45

[State 10000, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(10002)
ID = 10002
scale = .5+(.03*(time-15)),.5+(.03*(time-15))
trans = AddAlpha
alpha = ceil(100-3*(time-15)),256

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = time > 61

[State 10000, ChangeState]
type = DestroySelf
trigger1 = time > 61

[StateDef 10001]
type = A
movetype = I
physics = N
anim = 10003
velset = 0,0
ctrl = 0
sprpriority = 0

[State 10001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 10001, AssertSpecial]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 0+(time*50),256

[State 10001, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .35,.35

[State 10001, AngleSet]
type = AngleSet
trigger1 = !time
value = 6*(random%60)

[State 10001, Rotate]
type = AngleAdd
trigger1 = 1
value = -12

[State 10001, RemoveExplod]
type = RemoveExplod
trigger1 = time > 60

[State 10001, ChangeState]
type = DestroySelf
trigger1 = time > 60

[StateDef 10010]
type = A
movetype = I
physics = N
anim = 10010
velset = 0,0
ctrl = 0
sprpriority = 5

[State 10010, Varset]
type = VarSet
trigger1 = !time
var(0) = 61

[State 10010, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S10000,1

[State 100110, AngleDraw]
type = AngleDraw
trigger1 = time <= 15
scale = 0+(time*.02),0+(time*.02)

[State 10010, AngleDraw]
type = AngleDraw
trigger1 = time > 15
scale = .3,.3

[State 10010, AngleDraw]
type = AngleDraw
trigger1 = time >= var(0)
scale = 0,0

[State 10010, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -6

[State 10010, Trans]
type = Trans
trigger1 = 1
trans = add

[State 10010, PalFX]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State 10010, Helper]
type = Helper
trigger1 = Time = 0
ID = 10011
StateNo = 10011
pos = 0,0
postype = P1
name = "Spining_circle"
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = .55
size.yscale = .55

[State 10010, Explod]
type = Explod
trigger1 = !time
anim = 10011
ID = 10011
sprpriority = 5
postype = p1
supermovetime = -1
removetime = 15

[State 10010, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(10011)
ID = 10011
scale = 1-(time*.066666),1-(time*.066666)
trans = AddAlpha
alpha = ceil(100+20.4*time),256

[State 10010, Explod]
type = Explod
trigger1 = time = 15
anim = 10012
ID = 10012
sprpriority = 5
postype = p1
supermovetime = -1
removetime = 45

[State 10010, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(10012)
ID = 10012
scale = .5+(.03*(time-15)),.5+(.03*(time-15))
trans = AddAlpha
alpha = ceil(100-3*(time-15)),256

[State 10010, RemoveExplod]
type = RemoveExplod
trigger1 = time > 61

[State 10010, ChangeState]
type = DestroySelf
trigger1 = time > 61

[StateDef 10011]
type = A
movetype = I
physics = N
anim = 10013
velset = 0,0
ctrl = 0
sprpriority = 0

[State 10011, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 10011, AssertSpecial]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 0+(time*50),256

[State 10011, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .35,.35

[State 10011, AngleSet]
type = AngleSet
trigger1 = !time
value = 6*(random%60)

[State 10011, Rotate]
type = AngleAdd
trigger1 = 1
value = -12

[State 10011, RemoveExplod]
type = RemoveExplod
trigger1 = time > 60

[State 10011, ChangeState]
type = DestroySelf
trigger1 = time > 60

[StateDef 10020]
type = A
movetype = I
physics = N
anim = 10020
velset = 0,0
ctrl = 0
sprpriority = 5

[State 10020, Varset]
type = VarSet
trigger1 = !time
var(0) = 61

[State 10020, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S10000,2

[State 10020, AngleDraw]
type = AngleDraw
trigger1 = time <= 15
scale = 0+(time*.02),0+(time*.02)

[State 10020, AngleDraw]
type = AngleDraw
trigger1 = time > 15
scale = .3,.3

[State 10020, AngleDraw]
type = AngleDraw
trigger1 = time >= var(0)
scale = 0,0

[State 10020, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -6

[State 10020, Trans]
type = Trans
trigger1 = 1
trans = add

[State 10020, PalFX]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State 10020, Helper]
type = Helper
trigger1 = Time = 0
ID = 10021
StateNo = 10021
pos = 0,0
postype = P1
name = "Spining_circle"
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = .55
size.yscale = .55

[State 10020, Explod]
type = Explod
trigger1 = !time
anim = 10021
ID = 10021
sprpriority = 5
postype = p1
supermovetime = -1
removetime = 15

[State 10020, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(10021)
ID = 10021
scale = 1-(time*.066666),1-(time*.066666)
trans = AddAlpha
alpha = ceil(100+20.4*time),256

[State 10020, Explod]
type = Explod
trigger1 = time = 15
anim = 10022
ID = 10022
sprpriority = 5
postype = p1
supermovetime = -1
removetime = 45

[State 10020, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(10022)
ID = 10022
scale = .5+(.03*(time-15)),.5+(.03*(time-15))
trans = AddAlpha
alpha = ceil(100-3*(time-15)),256

[State 10020, RemoveExplod]
type = RemoveExplod
trigger1 = time > 61

[State 10020, ChangeState]
type = DestroySelf
trigger1 = time > 61

[StateDef 10021]
type = A
movetype = I
physics = N
anim = 10023
velset = 0,0
ctrl = 0
sprpriority = 0

[State 10021, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 10021, AssertSpecial]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 0+(time*50),256

[State 10021, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .35,.35

[State 10021, AngleSet]
type = AngleSet
trigger1 = !time
value = 6*(random%60)

[State 10021, Rotate]
type = AngleAdd
trigger1 = 1
value = -12

[State 10021, RemoveExplod]
type = RemoveExplod
trigger1 = time > 60

[State 10021, ChangeState]
type = DestroySelf
trigger1 = time > 60

;=========================================================================
;Intro Tohno - Taunt
;=========================================================================
[Statedef 7200]
type=S
movetype=I
physics=S
ctrl=0
velset=0,0
sprpriority=1

[state 7200,posset]
type=posset
trigger1=!time
y=0

[state 7200,Camera]
type=helper
trigger1=!time
helpertype=normal
name="Camera"
ID=7299
stateno=7299
postype=p1
pos=0,0
facing=1
keyctrl=0
ownpal=1

[state 7200,anim]
type=changeanim
trigger1=!time
value=stateno

[state 7200,posadd]
type=posadd
trigger1=time=1
x=fvar(39)

[state 7200,turn]
type=turn
trigger1=time=1

[state 7200,intro]
type=assertspecial
trigger1=1
flag=intro

[state 7200,screen]
type=screenbound
trigger1=1
value=0
movecamera=0,0

[state 7200,voice]
type=playsnd
trigger1=!time
value=s195,0
volume=255
channel=0

[state 7200,sound]
type=playsnd
trigger1=!animelemtime(4)
value=s100,1

[state 7200,end]
type=changestate
trigger1=!animtime
value=7205
;=========================================================================
;Intro Tohno - Throw Knife
;=========================================================================
[Statedef 7205]
type=S
movetype=I
physics=S
ctrl=0
velset=0,0
sprpriority=1

[state 7205,posset]
type=posset
trigger1=!time
y=0

[state 7205,anim]
type=changeanim
trigger1=!time
value=stateno

[state 7205,intro]
type=assertspecial
trigger1=1
flag=intro

[state 7205,screen]
type=screenbound
trigger1=1
value=0
movecamera=0,0

[state 7205,sound]
type=playsnd
trigger1=!animelemtime(11)
value=s100,2
volume=255

[state 7205,Superpause_FX]
type=helper
trigger1=!animelemtime(1)
helpertype=normal
ID=10020
stateno=10020
name="Superpause_FX"
postype=p1
pos=ceil(5*const(size.xscale)),ceil(-130*const(size.yscale))
ownpal=1
superMovetime=65536
pauseMovetime=65536

[state 7205,superpause]
type=superpause
trigger1=!animelemtime(1)
anim=-1
time=61
movetime=61
p2defmul=1
darken=0
sound=s10000,2
unhittable=1

[State 7205, AssertSpecial]
type = AssertSpecial
trigger1 = time > 0
trigger1 = time <= 61
flag = NoBG
flag2 = NoFG
pausemovetime = 9999
supermovetime = 9999

[state 7205,explod]
type=explod
trigger1=!animelemtime(11)
id=4005
anim=4005
scale=1.0,1.0
postype = p1
pos=-160-ceil(pos x*facing),50
sprpriority=4
ownpal=1

[state 7205,Knife]
type=helper
trigger1=!animelemtime(11)
helpertype=normal
name="Knife"
ID=7297
stateno=7297
postype=p1
pos=45,-68
facing=1
keyctrl=0
ownpal=1

[state 7205,Shadow]
type=helper
trigger1=numenemy
trigger1=enemy,stateno=7210
trigger1=enemy,animtime=-1
helpertype=normal
name="Shadow"
ID=7296
stateno=7296
postype=p1
facing=1
keyctrl=0
ownpal=1
size.xscale=1.0
size.yscale=1.0

[state 7205,end]
type=changestate
trigger1=numenemy
trigger1=enemy,stateno=7215
trigger1=enemy,animelemtime(3)>=0
value=7210
;=========================================================================
;Intro Tohno - Catch Knife
;=========================================================================
[StateDef 7210]
type=S
movetype=I
physics=S
ctrl=0
velset=0,0
sprpriority=1

[state 7210,posset]
type=posset
trigger1=!time
y=0

[state 7210,anim]
type=changeanim
trigger1=!time
value=7210

[state 7210,intro]
type=assertspecial
trigger1=1
flag=intro

[state 7210,screen]
type=screenbound
trigger1=1
value=0
movecamera=0,0

[state 7210,posadd]
type=posadd
trigger1=numhelper(7297)
trigger1=!time
x=(helper(7297),pos x-pos x)*facing

[state 7210,voice]
type=playsnd
trigger1=!animelemtime(1)
value=s410,19
volume=255
channel=0

[state 7210,sound]
type=playsnd
trigger1=!animelemtime(1)
value=s100,12
volume=255

[state 7210,Shadow]
type=helper
trigger1=!animelemtime(2)
trigger2=!animelemtime(5)
trigger3=!animelemtime(8)
trigger4=!animelemtime(11)
helpertype=normal
name="Shadow"
ID=7296
stateno=7296
postype=p1
facing=1
keyctrl=0
ownpal=1
size.xscale=1.0
size.yscale=1.0

[state 7210,end]
type=changestate
trigger1=!animtime
value=7215
;=========================================================================
;Intro Tohno - Prepare
;=========================================================================
[StateDef 7215]
type=S
movetype=I
physics=S
ctrl=0
velset=0,0
sprpriority=1

[state 7215,posset]
type=posset
trigger1=!time
y=0

[state 7215,anim]
type=changeanim
trigger1=!time
value=7215

[state 7215,intro]
type=assertspecial
trigger1=1
flag=intro

[state 7215,screen]
type=screenbound
trigger1=1
value=0
movecamera=0,0

[state 7215,turn]
type=turn
trigger1=!time

[state 7215,sound]
type=playsnd
trigger1=!animelemtime(7)
value=s100,1
volume=255

[state 7215,posadd]
type=posadd
trigger1=animelemno(0)>=7
x=5.859375

[state 7215,end]
type=changestate
trigger1=p2dist x<=164
value=7220
;=========================================================================
;Intro Nanaya - Clash
;=========================================================================
[Statedef 7220]
type=S
movetype=I
physics=S
ctrl=0
velset=0,0
sprpriority=1

[state 7220,posset]
type=posset
trigger1=!time
y=0

[state 7220,anim]
type=changeanim
trigger1=time<13
value=anim
elem=animelemno(0)

[state 7220,anim]
type=changeanim
trigger1=time=13
value=stateno

[state 7220,intro]
type=assertspecial
trigger1=1
flag=intro

[state 7220,screen]
type=screenbound
trigger1=anim!=stateno
trigger2=anim=stateno
trigger2=animelemtime(15)<0
value=0
movecamera=0,0

[state 7220,screen]
type=screenbound
trigger1=anim=stateno
trigger1=animelemtime(15)>=0
value=1
movecamera=1,0

[state 7220,trans]
type=trans
trigger1=anim=stateno
trigger1=animelemtime(10)>=0
trigger1=animelemtime(14)<0
trans=addalpha
alpha=256-(64*(time-22)),(64*(time-22))

[state 7220,trans]
type=trans
trigger1=anim=stateno
trigger1=animelemtime(15)>=0
trigger1=animelemtime(16)<0
trans=addalpha
alpha=(32*(time-33)),256-(32*(time-33))

[state 7220,air]
type=statetypeset
trigger1=!animelemtime(14)
statetype=A
physics=N

[state 7220,sound]
type=playsnd
trigger1=!time
value=s100,13
volume=255

[state 7220,sound]
type=playsnd
trigger1=anim=stateno
trigger1=!animelemtime(10)
value=s100,16
volume=255

[state 7220,shake]
type=envshake
trigger1=!time
time=12
ampl=6

[state 7220,posadd]
type=posadd
trigger1=anim=stateno
trigger1=!animelemtime(14)
x=(helper(7299),pos x-pos x)*facing
y=-90.0

[state 7220,fall]
type=veladd
trigger1=anim=stateno
trigger1=animelemtime(15)>0
y=0.5859375

[state 7220,Hit_Spark]
type=helper
trigger1=!time
helpertype=normal
name="Hit_Spark"
id=8050
stateno=8052
postype=p1
pos=83,-40
ownpal=1
keyctrl=0
pausemovetime=65536
supermovetime=65536

[state 7220,Dash_Dust]
type=helper
trigger1=anim=stateno
trigger1=!animelemtime(10)
helpertype=normal
name="Dash_Dust"
id=8030
stateno=8030
postype=p1
ownpal=1
pausemovetime=65536
supermovetime=65536

[state 7225,end]
type=changestate
trigger1=pos y>=0
trigger1=vel y>0
value=7225
;=========================================================================
;Intro Nanaya - Land
;=========================================================================
[statedef 7225]
type=S
movetype=I
physics=S
ctrl=0
velset=0,0
sprpriority=1

[state 7225,dharna]
type=posset
trigger1=!time
y=0

[state 7225,anim]
type=changeanim
trigger1=!time
value=stateno

[state 7225,intro]
type=assertspecial
trigger1=1
flag=intro

[state 7225,screen]
type=screenbound
trigger1=1
value=1
movecamera=1,0

[state 7225,sound]
type=playsnd
trigger1=!time
value=s40,0
volume=255

[state 7225,explod]
type=explod
trigger1=!time
anim=8020
sprpriority=-3
postype=p1
pos=0,0
ownpal=1
scale=0.5,0.5
pausemovetime=-1
supermovetime=-1

[state 7225,end]
type=changestate
trigger1=!animtime
value=0
;=========================================================================
;Intro Tohno - Shadow
;=========================================================================
[Statedef 7296]
type=A
movetype=I
physics=N
ctrl=0
velset=0,0
sprpriority=0

[state 7296,anim]
type=varset
trigger1=!time
var(0)=parent,anim
[state 7296,anim]
type=varset
trigger1=!time
var(1)=parent,animelemno(0)
[state 7296,anim]
type=changeanim
trigger1=1
value=var(0)
elem=var(1)

[state 7296,nothitby]
type=nothitby
trigger1=1
value=SCA
time=-1

[state 7296,shadow]
type=assertspecial
trigger1=1
flag=noshadow

[state 7296,trans]
type=trans
trigger1=time
trans=addalpha
alpha=256-(4*time),(4*time)

[state 7296,destroy]
type=destroyself
trigger1=time>64
;=========================================================================
;Intro Tohno - Knife - 1
;=========================================================================
[Statedef 7297]
type=A
movetype=I
physics=N
ctrl=0
velset=0,0
sprpriority=2

[state 7297,anim]
type=changeanim
trigger1=anim!=7297
value=7297

[state 7297,vel]
type=velset
trigger1=!time
x=12.0
y=0.0

[state 7297,end]
type=changestate
trigger1=frontedgedist<=3
value=7298

[state 7297,destroy]
type=destroyself
trigger1=root,stateno!=[7200,7225]
trigger2=frontedgedist<-60
;=========================================================================
;Intro Tohno - Knife - 2
;=========================================================================
[StateDef 7298]
type=A
movetype=I
physics=N
ctrl=0
velset=0,0
sprpriority=0

[state 7297,anim]
type=changeanim
trigger1=anim!=7298
value=7298

[state 7297,sound]
type=playsnd
trigger1=!time
value=s100,13

[state 7297,vel]
type=velset
trigger1=!time
x=-1.35
y=-4.3
[state 7297,fall]
type=veladd
trigger1=1
y=0.25

[state 7297,angle]
type=angleset
trigger1=!time
value=0

[state 7297,angle]
type=angleadd
trigger1=time>=0
value=20

[state 7297,angle]
type=angledraw
trigger1=pos y<=10

[state 7297,destroy]
type=destroyself
trigger1=pos y>=0
trigger1=vel y>0
trigger2=root,stateno=7210
;=========================================================================
;Intro Tohno - Camera
;=========================================================================
[Statedef 7299]
type=A
movetype=I
physics=N
ctrl=0
velset=0,0

[state 7299,anim]
type=changeanim
trigger1=anim!=99999
value=99999

[state 7299,intro]
type=assertspecial
trigger1=1
flag=intro

[state 7299,screen]
type=screenbound
trigger1=1
value=1
movecamera=1,1

[state 7299,destroy]
type=destroyself
trigger1=root,stateno!=[7200,7225]

;Intro with VAkiha
;-----------------
[StateDef 7300]
Type = S
Ctrl = 0
Anim = 194
VelSet = 0,0

[State 7300, AssertSpecial]
type = AssertSpecial
trigger1 = 1
Flag = Intro

[State 7300, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7300, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 7300, Camera]
type = Helper
trigger1 = !Numhelper(7305)
helpertype = normal
stateno = 7305
ID = 7305
name = "Camera"
postype = p1

[State 7300, PosSet]
type = PosSet
trigger1 = time = 0
x = 10*facing

[State 7300, ChangeState]
type = ChangeState
trigger1 = Time >= 120
value = 7301

[StateDef 7301]
type = S
physics = S
anim = 192
ctrl = 0
sprpriority = 1

[State 7301, AssertSpecial]
type = AssertSpecial
trigger1 = 1
Flag = Intro

[State 7301, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7301, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 7301, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 7301, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S100,7

[State 7301, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S400,6
Channel = 0

[State 7301, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal
stateno = 8030
ID = 8030
name = "Dash Dust"
postype = p1
facing = 1
pausemovetime = 9999
supermovetime = 9999
ownpal = 1

[State 7301, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 7301, VelSet]
type = VelSet
trigger1 = Time = [0,2]
x = 0.5

[State 7301, VelSet]
type = VelSet
trigger1 = Time = [3,12]
x = 8.5

[State 7301, VelSet]
type = VelSet
trigger1 = Time = [13,14]
x = 4

[State 7301, VelSet]
type = VelSet
trigger1 = Time = [15,16]
x = 3

[State 7301, VelSet]
type = VelSet
trigger1 = Time = [17,18]
x = 2

[State 7301, VelSet]
type = VelSet
trigger1 = Time = [19,20]
x = 1

[State 7301, VelSet]
type = VelSet
trigger1 = Time = [21,22]
x = 0.5

[State 7301, VelSet]
type = VelSet
trigger1 = Time = 23
x = 0

[State 7301, VelSet]
type = ChangeState
trigger1 = AnimTime = 0
value = 7302

[StateDef 7302]
type = S
physics = S
ctrl = 0
anim = 105
sprpriority = 1

[State 7302, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 7302, AssertSpecial]
type = AssertSpecial
trigger1 = 1
Flag = Intro

[State 7302, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7302, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 7302, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S400,7
Channel = 0

[State 7302, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = S40,3

[State 7302, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 8
Value = S40,0

[State 7302, Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 8020
sprpriority = -3
postype = p1
scale = 0.5,0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 7302, Helper]
type = Helper
trigger1 = AnimElem = 5
helpertype = normal
stateno = 8030
ID = 8030
name = "Dash Dust"
postype = p1
facing = -1
pausemovetime = 9999
supermovetime = 9999
ownpal = 1

[State 7302, VelSet]
type = VelSet
trigger1 = Time = [4,15]
x = -6

[State 7302, VelSet]
type = VelSet
trigger1 = Time = [16,17]
x = -3.5

[State 7302, VelSet]
type = VelSet
trigger1 = Time = [18,19]
x = -2.5

[State 7302, VelSet]
type = VelSet
trigger1 = Time = [20,21]
x = -1.5

[State 7302, VelSet]
type = ChangeState
trigger1 = Time >= 21
value = 7303

[StateDef 7303]
type = S
physics = S
ctrl = 0
anim = 106
sprpriority = 1

[State 7303, AssertSpecial]
type = AssertSpecial
trigger1 = 1
Flag = Intro

[State 7303, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7303, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 7303, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 7303, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
stateno = 8030
ID = 8030
name = "Dash Dust"
postype = p1
facing = -1
pausemovetime = 9999
supermovetime = 9999
ownpal = 1

[State 7303, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = S40,3

[State 7303, PlaySnd]
Type = PlaySnd
Trigger1 = AnimElem = 12
Value = S40,0

[State 7303, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S400,8
Channel = 0

[State 7303, Explod]
type = Explod
trigger1 = AnimElem = 12
anim = 8020
sprpriority = -3
postype = p1
scale= 0.5,0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 7303, VelSet]
type = VelSet
trigger1 = Time = [0,3]
x = -0.1

[State 7303, VelSet]
type = VelSet
trigger1 = Time = [4,20]
x = (Helper(7305), rootdist x) / -5.65

[State 7303, PosSet]
type = PosSet
trigger1 = Time = 21
x = ceil(Helper(7305), pos x)

[State 7303, VelSet]
type = Null
trigger1 = Time = 22
x = 0

[State 7303, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 7304

[StateDef 7304]
Type = S
Ctrl = 0
Anim = 0

[State 7304, AssertSpecial]
type = AssertSpecial
trigger1 = 1
Flag = Intro

[State 7304, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7304, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 7304, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 7304, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 0
trigger1 = Time >= 240
value = 193

[State 7304, PlaySnd]
type = PlaySnd
trigger1 = Anim = 193
trigger1 = AnimElem = 6
value = S410,6
channel = 0

[State 7304, ChangeState]
type = ChangeState
trigger1 = Anim = 193
trigger1 = AnimTime = 0
value = 0

[StateDef 7305]
Physics = N
VelSet = 0, 0
Anim = 99999

[State 7305, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,1

[State 7305, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 2

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------

[StateDef -2]

[State -2, PlaySnd]
type = playsnd
triggerall = alive && time = 1
triggerall = stateno = 5000 || stateno = 5010
trigger1 = gethitvar(animtype) >= 2 && random < 500
trigger2 = gethitvar(animtype) = 1 && random < 500
trigger3 = gethitvar(animtype) = 0 && random < 500
value = S5000,0+random%9
channel = 0
ignorehitpause = 1

[State -2, PlaySnd]
type = playsnd
triggerall = alive && time = 1
trigger1 = (stateno = 5000 || stateno = 5010) && numenemy
trigger1 = gethitvar(fall) || (enemynear, hitdefattr = SCA, SA, HA)
trigger2 = (stateno = 5020 || stateno = 5070 || stateno = 5080)
trigger3 = (stateno = 5050 || stateno = 5100) && (prevstateno != [5000, 5199])
value = S5000,0+random%9
channel = 0
ignorehitpause = 1

[State -2, PlaySnd]
type = PlaySnd
triggerall = time = 1
trigger1 = StateNo = [5200,5210]
value = S5200,0+random%4
persistent = 0
channel = 0

[State -2, PlaySnd]
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 5120
value = S5200,0+random%4
persistent = 0
channel = 0

[State -2, VarSet]
type = VarSet
trigger1 = MoveContact = 1 && var(40) < 0
var(40) = hitpausetime
ignorehitpause = 1

[State -2, Helper]
type = Helper
trigger1 = var(40) = hitpausetime
trigger1 = var(41) >0 || var(42) > 0
trigger1 = MoveContact = 1
helpertype = normal
name="Hit_Spark"
stateno = ifelse(movehit,var(41),var(42))
ID = 8050
postype = p1
pos = ceil(ifelse(p2dist x<0,0,ifelse(p2dist x<var(43),p2dist x,var(43)))*const(size.xscale)),ceil(var(44)*const(size.yscale))
ownpal = 1
keyctrl = 0
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = 1
var(40) = -1

[State -2, VarRangeSet]
type = VarRangeSet
trigger1 = movetype = I
trigger2 = movetype = H && time
trigger3 = var(41)>0||var(42)>0
trigger3 = movecontact=1
first = 40
last = 44
value = -1
ignorehitpause = 1

[State -2, VarAdd]
type = VarAdd
trigger1 = var(45) > 0
trigger1 = !numhelper(20100)
trigger1 = StateNo != 6000
var(45) = -1
IgnoreHitPause = 1

[State -2, Helper]
type = Helper
Trigger1 = Var(45) > 0
Trigger1 = NumHelper(6002) = 0
helpertype = normal
name = "Aura"
ID = 6002
pos = 0, 0
postype = p1
facing = 1
stateno = 6002
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State -2, PalFX]
type = PalFX
triggerall = Var(45) > 0
trigger1 = !(GameTime % 2)
time = 1
add = 60,60,60
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(221)
trigger1 = Stateno != 220
ID = 221

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(421)
trigger1 = Stateno != 420
ID = 421

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(611)
trigger1 = Stateno != 610
trigger1 = Stateno != 640
ID = 611

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(621)
trigger1 = Stateno != 620
ID = 621

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(950)
trigger1 = Stateno != 950
ID = 950

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1000)
trigger1 = Stateno != 1000
trigger1 = Stateno != 1010
trigger1 = Stateno != 1020
trigger1 = Stateno != 1030
ID = 1000

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1101)
trigger1 = Stateno != 1100
trigger1 = Stateno != 1110
trigger1 = Stateno != 1120
trigger1 = Stateno != 1130
ID = 1101

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1213)
trigger1 = Stateno != 1211
ID = 1213

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1214)
trigger1 = Stateno != 1212
ID = 1214

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(2108)
trigger1 = Stateno != 1300
trigger1 = Stateno != 1310
trigger1 = Stateno != 1320
trigger1 = Stateno != 1330
ID = 2108

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(2109)
trigger1 = Stateno != 2101
ID = 2109

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(2107)
trigger1 = Stateno != 2102
ID = 2107

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(3101)
trigger1 = Stateno != 3101
ID = 3101

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(3102)
trigger1 = Stateno != 3101
ID = 3102

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(3103)
trigger1 = Stateno != 3101
ID = 3103

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(3104)
trigger1 = Stateno != 3101
ID = 3104

[State -2, AssertSpecial]
type = AssertSpecial
flag = NoKOSlow
trigger1 = StateNo = [2000,4999]
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = RoundState >= 2
triggerall = WinKo && !var(37)
trigger1 = StateNo = [2000,4999]
trigger2 = movetype = H
trigger2 = prevstateno = [2000,4999]
ID = 20150
stateno = 20100
Name = "Super_Combo_Finish"
postype = left
pos = 0,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ownpal = 1
persistent = 0

[State -2, VarAdd]
type = VarAdd
trigger1 = roundstate = 3
ignorehitpause = 1
var(37) = 1

[State -2, VarSet]
type = Varset
trigger1 = roundstate = 0
ignorehitpause = 1
var(37) = 0

[State -2, VarSet]
type = Varset
trigger1 = numenemy
fvar(0) = enemynear,gethitvar(hitcount)
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = numenemy
trigger1 = (enemynear,movetype!=H)
trigger2 = !numenemy
fvar(0) = 1

[State -2, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = ifelse(fvar(0) = 0, 1, ifelse(fvar(0) = 1, 1, .96875**fvar(0)))
ignorehitpause = 1

[State -2, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = fvar(1)*fvar(2)
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = 1
fvar(2) = IfElse(Var(45) > 0,1.1,1)

[State -2, DefenceMulSet]
type = DefenceMulSet
triggerall = ceil(100*life/const(data.life)) >= 75
trigger1 = numenemy
value = 1
ignorehitpause = 1

[State -2, DefenceMulSet]
type = DefenceMulSet
triggerall = ceil(100*life/const(data.life)) = [50,74]
trigger1 = numenemy
value = 0.96
ignorehitpause = 1

[State -2, DefenceMulSet]
type = DefenceMulSet
triggerall = ceil(100*life/const(data.life)) = [25,49]
trigger1 = numenemy
value = 0.92
ignorehitpause = 1

[State -2, DefenceMulSet]
type = DefenceMulSet
triggerall = ceil(100*life/const(data.life)) <= 24
trigger1 = numenemy
value = 0.9
ignorehitpause = 1

[State -2, PowerSet]
type = PowerSet
trigger1 = Var(45) > 0
value = 0

[State -2, LifeAdd]
type = LifeAdd
triggerall = Var(45) > 0
triggerall = Movetype != H
triggerall = Alive
triggerall = RoundState = 2
triggerall = StateNo != 6000
trigger1 = Gametime%5 = 0
value = 1
ignorehitpause = 1

[State -2, Helper]
type = Helper
trigger1 = roundstate = 2
trigger1 = numhelper(6010) = 0
trigger1 = var(45) > 0
ID = 6010
name = "MAX_Bar"
stateno = 6010
ownpal = 1
postype = left
pos = 160
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = NumEnemy = 1
trigger2 = NumEnemy = 2
trigger2 = EnemyNear,Life > 0
V = 23
Value = 0

[State -2, varSet]
type = VarSet
trigger1 = NumEnemy > 1
trigger1 = EnemyNear,Life = 0
V = 23
Value = 1

[State -2, AfterImageTime]
type = afterimagetime
trigger1 = stateno != 50
trigger1 = stateno != [700,755]
trigger1 = stateno != [2000,4999]
time = 0

[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "MAX mode duration = %d"
params = var(0)

[State -2, LifeAdd]
type = LifeAdd
triggerall = NumEnemy
triggerall = Enemy,AuthorName = "Kohaku" && Enemy,Name = "VAkiha_K"
trigger1 = Enemy,Var(30) = 1
value = -5
kill = 0

[State -2, PowerAdd]
type = PowerAdd
triggerall = NumEnemy
triggerall = Enemy,AuthorName = "Kohaku" && Enemy,Name = "VAkiha_K"
trigger1 = Enemy,Var(30) = 1
value = -26

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy,Name != "WLen_K" && Enemy,AuthorName != "Kohaku"
trigger2 = Enemy,Name != "White_Len"
trigger3 = Enemy,Name != "Kishima_Kouma"
trigger4 = Enemy,Name != "Tohno_Akiha"
trigger5 = Enemy,Name != "Akiha_Vermillion"
trigger6 = Enemy,Name != "Tohno_Shiki"
value = 1+random%11

[State -2, VictoryQuote]
type = VictoryQuote
triggerall = NumEnemy
trigger1 = Enemy,Name = "Tohno_Shiki"
value = 12

[State -2, VictoryQuote]
type = VictoryQuote
triggerall = NumEnemy
trigger1 = Enemy,Name = "Kishima_Kouma"
value = 13

[State -2, VictoryQuote]
type = VictoryQuote
triggerall = NumEnemy
trigger1 = Enemy,Name = "WLen_K" && Enemy,AuthorName = "Kohaku"
trigger2 = Enemy,Name = "White_Len"
value = 14

[State -2, VictoryQuote]
type = VictoryQuote
triggerall = NumEnemy
trigger1 = Enemy,Name = "VAkiha_K" && Enemy,AuthorName = "Kohaku"
trigger2 = Enemy,Name = "Tohno_Akiha"
trigger3 = Enemy,Name = "Akiha_Vermillion"
value = 15

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State -3, VarSet]
type = VarSet
trigger1 = 1
var(20) = 0

[State -3, VarSet]
type = VarSet
trigger1 = statetype != A
trigger1 = ctrl
trigger2 = (stateno = [200,299]) || (stateno = [400,499])
trigger2 = movecontact
trigger3 = Statetype = A
trigger3 = (Stateno = [600,699])
trigger3 = MoveContact
var(20) = 1

[State -3, VarSet]
type = VarSet
trigger1 = 1
var(21) = 0

[State -3, VarSet]
type = VarSet
trigger1 = statetype != A
trigger1 = ctrl
trigger2 = (stateno = [1000,1999])
trigger2 = MoveContact
var(21) = 1

[State -3, VarSet]
type = VarSet
trigger1 = 1
var(22) = 0

[State -3, VarSet]
type = VarSet
trigger1 = statetype != A
trigger1 = ctrl
trigger2 = (stateno = [2000,3999])
trigger2 = stateno != [4000,4999]
trigger2 = MoveContact
var(22) = 1

[State -3, VarAdd]
type = VarAdd
trigger1 = var(25) > 0
var(25) = -1

[State -3, VarSet]
type = VarSet
trigger1 = (Stateno != [1000,1999]) || MoveType = H
var(25) = 0

[State -3, Helper]
type = Helper
triggerall = RoundState = 2 && !NumHelper(854)
triggerall = (MoveType = I && Ctrl) || (StateNo = [850,852])
triggerall = (Command != "rlsfwd" && Command != "rlsback" && command != "rlsup" && command!="rlsdown")
trigger1 = (StateType = S || StateType = C) && (Command = "fwd" || Command = "down")
trigger2 = StateType = A && Command ="fwd"
helpertype = normal
StateNo = 854
ID = 854
name = "Parry"
postype = p1
pausemovetime = 99999
supermovetime = 99999

[State -3, ChangeState]
type = ChangeState
trigger1 = (StateNo != [850,852]) && NumHelper(854)
trigger1 = Helper(854),StateNo = 855
value = IfElse((Helper(854),Anim = 858), 852, IfElse((Helper(854),Anim = 857), 851, 850))
ignorehitpause = 1

[State -3, HitOverride]
type = HitOverride
trigger1 = (StateNo != [850,852]) && NumHelper(854)
trigger1 = !(Helper(854),var(0)) && (Helper(854),Anim = 856)
attr = SA,AP
StateNo = 850
slot = 0
time = 1
ignorehitpause = 1

[State -3, HitOverride]
type = HitOverride
trigger1 = (StateNo != [850,852]) && NumHelper(854)
trigger1 = !(Helper(854),var(0)) && (Helper(854),Anim = 857)
attr = C,AP
StateNo = 851
slot = 0
time = 1
ignorehitpause = 1

[State -3, HitOverride]
type = HitOverride
trigger1 = (StateNo != [850,852]) && NumHelper(854)
trigger1 = !(Helper(854),var(0)) && (Helper(854),Anim = 858)
attr = SCA,AP
StateNo = 852
slot = 0
time = 1
ignorehitpause = 1

[State -3, PalFX]
type = PalFX
trigger1 = !(gametime%2) && var(25)
time = 1
color = 0
mul = 256, 224, 0
add = 128, 128, 128
ignorehitpause = 1

[State -3, ChangeState]
type = ChangeState
trigger1 = !alive && (stateno = [5000,5010])
trigger1 = (prevstateno = [120,121]) || (prevstateno = [130,131]) || (prevstateno = [140,141]) || (prevstateno = [150,153])
value = 5950
ignorehitpause = 1

[State -3, AssertSpecial]
type = AssertSpecial
trigger1 = (stateno = [5000,5010])
trigger1 = (prevstateno = [120,121]) || (prevstateno = [130,131]) || (prevstateno = [140,141]) || (prevstateno = [150,153])
flag = nokosnd
ignorehitpause = 1

[State -3, Width]
type = Width
triggerall = Stateno != [3000,3010]
triggerall = Stateno != [1200,1250]
trigger1 = 1
edge = 4,0
ignorehitpause = 1

;This controller plays a sound everytime the player lands from a jump, or
;from a back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = S40,0
